{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/epsplanet/models/layer.ts","../../../projects/epsplanet/models/layer-xbsj-func.ts","../../../projects/epsplanet/utils/sceneTree-utils.ts","../../../projects/epsplanet/components/earth/earth.component.ts","../../../projects/epsplanet/components/earth/earth.component.html","../../../projects/epsplanet/components/base-widget/base-widget.component.ts","../../../projects/epsplanet/components/home/home.component.ts","../../../projects/epsplanet/components/layer-manager/layer-manager.component.html","../../../projects/epsplanet/components/layer-list/layer-list.component.html","../../../projects/epsplanet/components/layer-manager/layer-manager.component.ts","../../../projects/epsplanet/components/layer-list/layer-list.component.ts","../../../projects/epsplanet/utils/identify.ts","../../../projects/epsplanet/components/identify/identify.component.html","../../../projects/epsplanet/components/location/location.component.html","../../../projects/epsplanet/components/mode-switch/mode-switch.component.html","../../../projects/epsplanet/components/basemap-gallery/basemap-gallery.component.html","../../../projects/epsplanet/components/identify/identify.component.ts","../../../projects/epsplanet/components/location/location.component.ts","../../../projects/epsplanet/components/mode-switch/mode-switch.component.ts","../../../projects/epsplanet/components/status-bar/status-bar.component.ts","../../../projects/epsplanet/components/zoom/zoom.component.ts","../../../projects/epsplanet/components/zoom/zoom.component.html","../../../projects/epsplanet/components/basemap-gallery/basemap-gallery.component.ts","../../../projects/epsplanet/services/query.ts","../../../projects/epsplanet/components/equery/equery.component.html","../../../projects/epsplanet/components/equery/equery.component.ts","../../../projects/epsplanet/epsplanet.module.ts","../../../projects/epsplanet/utils/getHeight.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__values","o","s","Symbol","iterator","m","next","value","done","__read","n","e","ar","push","error","__spread","concat","LayerType","LayerServiceSource","newXbsjFolderNode","title","children","newXbsjLayerNode","type","url","result","czmObject","toLocaleLowerCase","Imagery","xbsjType","name","enable","show","xbsjImageryProvider","XbsjImageryProvider","newXbsjImageryLayerNode","Tileset","newXbsjTilesetLayerNode","Terrain","xbsjTerrainProvider","XbsjEllipsoidTerrainProvider","XbsjCesiumTerrainProvider","requestVertexNormals","requestWaterMask","newXbsjTerrainLayerNode","SceneTreeUtils","SceneTree2NgZorroTree","root","rootNode","NzTreeNode","expanded","expand","guid","xbsjGuid","IdGenerater","newGuid","origin","isLeaf","parentNode","level","_layerNodes","_a","apply","convertChildren","forEach","item","node","isExpanded","checkList_1","child","isChecked","isAllEqual","isHalfChecked","childNode","convertCzmObject","array","some","index","checked","GetXbsjCzmObject","loadLayers","layerConfig","basemaps","layers","_layerlist","ref","tilte","isArray","loadLayerNode","node_1","layer","srcCoordType","dstCoordType","extendOptions","assign","rectangle","rect_1","Math","PI","PlanetEarthComponent","_super","componentLoader","_this","resources","getCompInfo","path","ngOnInit","is3D","initMap","Promise","resolve","reject","jsApi","appConfig","map","resFullPaths","simpleLoader","loadResources","XE","window","ready","then","earth","Earth","homeButton","timeline","sceneModePicker","interaction","picking","enabled","hoverEnable","layerNode","config","console","log","sceneTree","camera","navigator","showCompass","showDistanceLegend","getCurrentView","td","Cesium","toDegrees","lon","czm","positionCartographic","longitude","toFixed","lat","latitude","height","heading","pitch","roll","RadiansTodegree","radians","pos","mapOptions","center","x","y","h","viewer","scene","setView","destination","Cartesian3","fromDegrees","orientation","toRadians","BaseMapComponent","i0","ɵɵdirectiveInject","i1","ComponentLoaderService","selectors","viewQuery","rf","ctx","i0.ɵɵelement","i0.ɵɵtemplate","ComponentRegister","uri","Component","selector","templateUrl","styleUrls","earthContainer","ViewChild","static","BasePlanetWidgetComponent","_isVue","watchers","getCesiumView","view","$watch","propertyName","func","param","PropWatcher","watch","prop","oldval","newval","ngOnDestroy","f","BaseWidgetComponent","features","ɵɵInheritDefinitionFeature","Directive","PlanetHomeComponent","_container","hidden","onMouseClick","evt","_element","click","hostAttrs","hostVars","hostBindings","$event","i0.ɵɵproperty","template","host","[class.jimu-widget-onscreen-icon]","HostListener","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵlistener","item_r3","en","i0.ɵɵadvance","i0.ɵɵtextInterpolate","ctx_r2","selectedNode","ɵɵpureFunction0","_c0$1","item_r8","ctx_r9","ctx_r10","ctx_r11","ctx_r12","ctx_r13","ctx_r14","ctx_r15","ctx_r16","PlanetLayerManagerComponent","nzContextMenuService","basemapSchema","zh","tilesSchema","layerNodes","openFolder","data","activeNode","activatedNode","contextMenu","menu","selectDropdown","loadlocate","format","style","tileMatrixSet","Tool","WMTSParser","parser","urls","styles","id","tileMatrixSets","UrlTemplateImageryProvider","WebMapTileServiceImageryProvider","tileMatrixSetID","tileMatrixLabels","params","tilingScheme","maximumLevel","createTileMapServiceImageryProvider","flyTo","Rectangle","catch","err","message","test","setTimeout","onDblClickNode","onCheckedChange","eventName","onRightClick","ngAfterViewInit","i1$2","NzContextMenuService","inputs","decls","vars","consts","Input","PlanetLayerListComponent","modalService","listOfData","isShow","MVVM","loadSceneTree","$refs","layerlist","setting","content","componentParams","footer","mask","width","onLeftClickNode","showOrHideLayer","ModalManagerService","_r1","propertyLists","czmObjectList","resList","highLight","Identify","http","epsplanet","allowClick","httpReq","method","httpClient","post","toPromise","get","GetFeatureInfo","callback","CustomDataSource","dataSources","add","WFSUrl","GetWFSUrl","handler","ScreenSpaceEventHandler","canvas","filter","setInputAction","pickObj","pick","position","defined","pin1","customProp","entities","removeAll","Cartesian2ToCartographic","Cartesian2ToWGS84","bufferCoordinates","Buffer","res","properties_1","properties","propertyList_1","keys","_ci","GeoJsonDataSource","load","dataSource","values","entity","ScreenSpaceEventType","LEFT_CLICK","InitHandler","getLayers","WebMapServiceImageryProvider","requestUrl","split","undefined","addr","typeName","geometryList","query","text","xml2Json","stringToXml","properties_2","propertyList_2","geojson_1","MultiSurface","posList","surfaceMember","Polygon","exterior","LinearRing","shift","list","i_1","geometry","coordinates","Point","MultiCurve","curveMember","LineString","i_2","llist","properties_3","propertyList_3","geojson_2","i_3","i_4","billboard","point","PointGraphics","color","Color","AQUA","pixelSize","clampToGround","polyline","material","PolylineGlowMaterialProperty","glowPower","BLUE","sort","a","httpFuncA","resLists","geometryLists","httpFuncB","httpFunc","FeatureCollection","properties_4","propertyList_4","geojson_3","i_5","i_6","properties_5","propertyList_5","geojson_4","i_7","i_8","properties_6","propertyList_6","geojson_5","i_9","i_10","properties_7","propertyList_7","geojson_6","i_11","i_12","pickModel","pickPosition","getPropertyNames","cartographic","Cartographic","fromCartesian","PropertyNames","propertyList","property","getProperty","ray","getPickRay","cartesian","globe","ImageryProvider","WMTSImageryProvider","indexOf","meters","pointF","turf","points","buffer","pointsToDegreesArray","degreesArray","ClearHighLight","xml","obj","nodeType","attributes","j","attribute","nodeName","nodeValue","hasChildNodes","childNodes","old","xmlString","xmlDoc","document","implementation","createDocument","DOMParser","parseFromString","ɵɵinject","HttpReqService","factory","ɵfac","providedIn","Injectable","ctx_r0","Z","placeHolder","i0.ɵɵelementContainerStart","i0.ɵɵnamespaceSVG","i0.ɵɵelementContainerEnd","i0.ɵɵnamespaceHTML","PlanetIdentifyComponent","identify","winPos","showInfo","switchValue","czmObjList","print","addBtn","btn","createElement","textContent","fontWeight","fontSize","whiteSpace","textAlign","border","boxShadow","transition","padding","borderRadius","backgroundColor","getElementsByClassName","append","Init","win","removeChild","pin","near","bindIndentify","getElementById","onclick","tileset","xbsjTileset","bindClick","close","zoomTo","entityCollection","getByName","switch","srcElement","ɵɵpureFunction2","_c0$2","PlanetLocationComponent","XValue","YValue","ZValue","item4326","X","label","min","max","Y","itemOther","initialize","addbtn","location","markerXY","remove","Entity","WHITE","withAlpha","outlineColor","outlineWidth","image","folderUrl","horizontalOrigin","HorizontalOrigin","CENTER","verticalOrigin","VerticalOrigin","BOTTOM","scale","PlanetModeSwitchComponent","viewType","clickMe","visible","change","changeViewMode","morphTo2D","morphToColumbusView","morphTo3D","_r3","PlanetStatusBarComponent","cdr","fpsString","cameraString","baseVelocity","velocity","velocityRatio","lang","fps","meter","createPolylineTip","editPolylineTip","createRectangleTip","editRectangleTip","createCircleTip","editCircleTip","createDoubleArrowTip","editDoubleArrowTip","createFlattenedPolygonTip","editFlattenedPolygonTip","movableObjectTip","rotatableObjectTip","positionPickingTip","_disposers","_scene","_camera","updateCameraString","l","UtilsService","detectChanges","changed","addEventListener","debugShowFramesPerSecond","tempDisposer","_postRender","_performanceContainer","visibility","_performanceDisplay","_fpsText","track","immersion","bind","_uw1","creatingPolylineBinding","_uw2","editingPolylineBinding","_uw3","creatingPolygonBinding","_uw4","flattenedPolygonCreatingBinding","_uw5","editingPolygonBinding","_uw6","movableObjectBinding","_uw7","rotatableObjectBinding","_uw8","positionPickingBinding","velocityString","ChangeDetectorRef","i0.ɵɵtextInterpolate3","PlanetZoomComponent","top","zoomIn","abs","sin","zoomOut","PlanetBasemapGalleryComponent","terrainData","img","GoogleEarthEnterpriseTerrainProvider","terrainIcon","basemap","loadBaseTree","xbsjZIndex","selectImage","selectTerrain","_r2","Query","ArcgisQuery","myEntityCollection","axios","qs","stringify","outFields","where","headers","content-type","geometryType","feature","YELLOW","heightReference","HeightReference","CLAMP_TO_GROUND","scaleByDistance","NearFarScalar","positions","rings","fromDegreesArray","paths","GeoserverQuery","server","clearHighLight","item_r2","PlanetEqueryComponent","fb","serverList","layerList","controlArray","isCollapse","resetForm","validateForm","reset","Search","changeServer","controls","platForm","setValue","changeLayer","getAllLayers","group","i1$3","FormBuilder","components","EpsGisForPlanetModule","imports","CommonModule","HttpClientModule","ReactiveFormsModule","FormsModule","NzInputModule","NzInputNumberModule","NzIconModule","NzTreeModule","NzTreeViewModule","NzPopoverModule","NzDividerModule","NzSelectModule","NzButtonModule","NzMenuModule","NzDropDownModule","NzSliderModule","NzGridModule","NzTabsModule","NzModalModule","NzTableModule","NzSwitchModule","NzToolTipModule","NzFormModule","EpsGisDirectivesModule","declarations","exports","NgModule","entryComponents","resultCallback","terrainProvider","EllipsoidTerrainProvider","warn","cps","positions_3","positions_3_1","promise","sampleTerrainMostDetailed","when","positions_4","positions_4_1","Error","fromRadians","depthTestAgainstTerrain","positions_1","positions_1_1","sampleHeightMostDetailed","positions_2","positions_2_1","otherwise"],"mappings":"0lEAgBIA,EAAgB,SAASC,EAAGC,GAI5B,OAHAF,EAAgBG,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOC,OAAOK,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,MAC3EN,EAAGC,aAGZS,EAAUV,EAAGC,GACzB,GAAiB,mBAANA,GAA0B,OAANA,EAC3B,MAAM,IAAIU,UAAU,uBAAyBC,OAAOX,GAAK,iCAE7D,SAASY,IAAOC,KAAKC,YAAcf,EADnCD,EAAcC,EAAGC,GAEjBD,EAAEO,UAAkB,OAANN,EAAaC,OAAOc,OAAOf,IAAMY,EAAGN,UAAYN,EAAEM,UAAW,IAAIM,YA0BnEI,EAAWC,EAAYC,EAAQC,EAAKC,GAChD,IAA2HrB,EAAvHsB,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIH,EAAkB,OAATE,EAAgBA,EAAOnB,OAAOwB,yBAAyBP,EAAQC,GAAOC,EACrH,GAAuB,iBAAZM,SAAoD,mBAArBA,QAAQC,SAAyBH,EAAIE,QAAQC,SAASV,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIQ,EAAIX,EAAWM,OAAS,EAAGK,GAAK,EAAGA,KAAS7B,EAAIkB,EAAWW,MAAIJ,GAAKH,EAAI,EAAItB,EAAEyB,GAAKH,EAAI,EAAItB,EAAEmB,EAAQC,EAAKK,GAAKzB,EAAEmB,EAAQC,KAASK,GAChJ,OAAOH,EAAI,GAAKG,GAAKvB,OAAO4B,eAAeX,EAAQC,EAAKK,GAAIA,EAiDnCvB,OAAOc,gBAYpBe,EAASC,GACrB,IAAIC,EAAsB,mBAAXC,QAAyBA,OAAOC,SAAUC,EAAIH,GAAKD,EAAEC,GAAIJ,EAAI,EAC5E,GAAIO,EAAG,OAAOA,EAAE3B,KAAKuB,GACrB,GAAIA,GAAyB,iBAAbA,EAAER,OAAqB,MAAO,CAC1Ca,KAAM,WAEF,OADIL,GAAKH,GAAKG,EAAER,SAAQQ,OAAI,GACrB,CAAEM,MAAON,GAAKA,EAAEH,KAAMU,MAAOP,KAG5C,MAAM,IAAIrB,UAAUsB,EAAI,0BAA4B,4CAGxCO,EAAOR,EAAGS,GACtB,IAAIL,EAAsB,mBAAXF,QAAyBF,EAAEE,OAAOC,UACjD,IAAKC,EAAG,OAAOJ,EACf,IAAmBP,EAAYiB,EAA3Bb,EAAIO,EAAE3B,KAAKuB,GAAOW,EAAK,GAC3B,IACI,WAAc,IAANF,GAAgBA,KAAM,MAAQhB,EAAII,EAAEQ,QAAQE,MAAMI,EAAGC,KAAKnB,EAAEa,OAExE,MAAOO,GAASH,EAAI,CAAEG,MAAOA,WAEzB,IACQpB,IAAMA,EAAEc,OAASH,EAAIP,EAAU,SAAIO,EAAE3B,KAAKoB,WAExC,GAAIa,EAAG,MAAMA,EAAEG,OAE7B,OAAOF,WAIKG,IACZ,IAAK,IAAIH,EAAK,GAAId,EAAI,EAAGA,EAAIN,UAAUC,OAAQK,IAC3Cc,EAAKA,EAAGI,OAAOP,EAAOjB,UAAUM,KACpC,OAAOc,EAqDX,IC1MYK,EAQAC,EDkMa/C,OAAOc,gBEpMhBkC,EAAkBC,GAC9B,MAAO,CACHA,MAAOA,EACPC,SAAU,aAIFC,EAAiBC,EAAcH,EAAeI,GAC1D,IACIC,EAAyB,CAAEC,UAAW,MAC1C,OAFcH,EAAKI,qBAGf,KAAKV,EAAAA,UAAUW,QAAQD,oBACnBF,EAAOC,UAanB,SAAiCN,EAAeI,GAa5C,MAZkC,CAC9BK,SAAUZ,EAAAA,UAAUW,QACpBE,KAAMV,EACNW,QAAQ,EACRC,MAAM,EACNC,oBAAqB,CACjBC,oBAAqB,CACjBV,IAAKA,KArBUW,CAAwBf,EAAOI,GAClD,MACJ,KAAKP,EAAAA,UAAUmB,QAAQT,oBACnBF,EAAOC,UA0BnB,SAAiCN,EAAeI,GAQ5C,MAPkC,CAC9BK,SAAUZ,EAAAA,UAAUmB,QACpBN,KAAMV,EACNI,IAAKA,EACLO,QAAQ,EACRC,MAAM,GAhCiBK,CAAwBjB,EAAOI,GAClD,MACJ,KAAKP,EAAAA,UAAUqB,QAAQX,oBACnBF,EAAOC,UAkCnB,SAAiCN,EAAeI,GAC5C,MAAO,CACHK,SAAUZ,EAAAA,UAAUqB,QACpBR,KAAMV,EACNW,QAAQ,EACRC,MAAM,EACNO,oBAAqB,CACjBhB,KAAM,4BACNiB,6BAA8B,GAC9BC,0BAA2B,CACvBjB,IAAKA,EACLkB,sBAAsB,EACtBC,kBAAkB,KA9CHC,CAAwBxB,EAAOI,GAK1D,OAAOC,GD7BCR,EAAAA,EAAAA,YAAAA,EAAAA,UAAS,KACjB,QAAA,UACAA,EAAA,QAAA,UACAA,EAAA,QAAA,WAKQC,EAAAA,EAAAA,qBAAAA,EAAAA,mBAAkB,KAC1BA,EAAA,OAAA,GAAA,SACAA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,SAAA,GAAA,WACAA,EAAAA,EAAA,MAAA,GAAA,QACAA,EAAAA,EAAA,MAAA,GAAA,QACAA,EAAAA,EAAA,UAAA,GAAA,6BEPJ,SAAA2B,YAKWA,EAAAC,sBAAP,SAA6BC,SACzB,IAAKA,IAASA,EAAK1B,UAAY0B,EAAK1B,SAAS5B,QAAU,EACnD,OAAOsD,EAEX,IAAIC,EAAuB,KACvBD,EAAK3B,OAAwB,QAAf2B,EAAK3B,SACnB4B,EAAW,IAAIC,EAAAA,WAAW,CACtB7B,MAAO2B,EAAK3B,MACZ8B,UAA0B,IAAhBH,EAAKI,OACf9D,IAAK0D,EAAKK,MAAQL,EAAKM,UAAYC,EAAAA,YAAYC,UAC/CC,OAAQT,EACRU,QAAQ,EACRC,WAAY,QAEPC,OAAS,GAItB,IAAMC,EAAiC,GAQvC,OAPIZ,IACAa,EAAAb,EAAS3B,UAASR,KAAIiD,MAAAD,EAAA9C,EAAI8B,EAAekB,gBAAgBhB,EAAK1B,SAAU2B,KACxEY,EAAY/C,KAAKmC,IAEjBY,EAAY/C,KAAIiD,MAAhBF,EAAW7C,EAAS8B,EAAekB,gBAAgBhB,EAAK1B,SAAU2B,KAG/DY,GAOIf,EAAAkB,gBAAP,SAAuB1C,EAAsBqC,GACjD,IAAKrC,GAAYA,EAAS5B,QAAU,EAChC,MAAO,GAEX,IAAMmE,EAAiC,GAuDvC,OAtDAvC,EAAS2C,SAAQ,SAAAC,SAETC,EAAmB,KACvB,GAAID,EAAK5C,SAAU,EACf6C,EAAO,IAAIjB,EAAAA,WAAW,CAClBU,MAAOD,EAAWC,MAAQ,EAC1BvC,MAAO6C,EAAK7C,MACZ+C,YAA4B,IAAhBF,EAAKd,OAGjB9D,IAAK4E,EAAKb,MAAQa,EAAKZ,UAAYC,EAAAA,YAAYC,UAC/CC,OAAQS,EACRR,QAAQ,EACRC,WAAYA,KAEXA,WAAaA,EAClBQ,EAAKP,MAAQD,EAAWC,MAAQ,EAEhCO,EAAKC,aAAaF,EAAKd,OACnBc,EAAK5C,SAAS5B,QAAU,IACxBoE,EAAAK,EAAK7C,UAASR,KAAIiD,MAAAD,EAAA9C,EAAI8B,EAAekB,gBAAgBE,EAAK5C,SAAU6C,KAGxE,IAAIE,EAAY,GAChBF,EAAK7C,SAAS2C,SAAQ,SAACK,GACfA,EAAMhD,UAAYgD,EAAMhD,SAAS5B,OAAS,EAC1C2E,EAAUvD,KAAKwD,EAAMC,WAEjBD,EAAMb,OAAOA,OAAOxB,KACpBoC,EAAUvD,MAAK,GAEfuD,EAAUvD,MAAK,MAIvBgC,EAAe0B,WAAWH,IAA8B,GAAhBA,EAAU,GAClDF,EAAKI,WAAY,EACVzB,EAAe0B,WAAWH,IAA8B,GAAhBA,EAAU,GACzDF,EAAKI,WAAY,EACTzB,EAAe0B,WAAWH,KAClCF,EAAKM,eAAgB,GAIzBZ,EAAY/C,KAAKqD,OACd,CAEH,IAAIO,EAAY5B,EAAe6B,iBAAiBT,EAAKvC,UAAWgC,GAChEe,EAAUf,WAAae,EAAUjB,OAAOE,WACxCe,EAAUd,MAAQc,EAAUf,WAAWC,MAAQ,EAC/CC,EAAY/C,KAAK4D,OAIlBb,GAGJf,EAAA0B,WAAP,SAAkBI,GACd,QAAIA,EAAMlF,OAAS,KACPkF,EAAMC,MAAK,SAAUrE,EAAOsE,GAChC,OAAOtE,IAAUoE,EAAM,OAUpB9B,EAAA6B,iBAAP,SAAwBhD,EAAgBgC,GAC5C,OAAKhC,EAGE,IAAIuB,EAAAA,WAAW,CAClB7B,MAAOM,EAAUI,KACjBzC,IAAKqC,EAAU0B,MAAQ1B,EAAU2B,UAAYC,EAAAA,YAAYC,UACzDC,OAAQ9B,EACR+B,QAAQ,EAERqB,QAASpD,EAAUM,KACnB0B,WAAYA,IATL,MAeRb,EAAAkC,iBAAP,SAAwBb,GAEpB,OAAOA,GAAQA,EAAKV,QAAUU,EAAKV,OAAOA,QASvCX,EAAAmC,WAAP,SAAkBC,GACd,IAAKA,EACD,OAAO,KAEX,IAAKA,EAAYC,WAAaD,EAAYE,OACtC,OAAO,KAEX,IAEMC,EAAa,CACf,CACIhE,MAAS,UACTiE,IAAO,UACPhE,SAAY,IAEhB,CACID,MAAS,YACTiE,IAAO,YACPhE,SAAY,IAEhB,CACIiE,MAAS,MACTD,IAAO,MACPhE,SAAY,KAgBpB,MAXoC,iBAAzB4D,EAAYC,UAAyBK,EAAAA,QAAQN,EAAYC,WAChED,EAAYC,SAASlB,SAAQ,SAACC,GAC1BmB,EAAW,GAAG/D,SAASR,KAAKgC,EAAe2C,cAAcvB,OAI/B,iBAAvBgB,EAAYE,QAAuBI,EAAAA,QAAQN,EAAYE,SAC9DF,EAAYE,OAAOnB,SAAQ,SAACC,GACxBmB,EAAW,GAAG/D,SAASR,KAAKgC,EAAe2C,cAAcvB,OAG1D,CAAE5C,SAAU+D,IAKhBvC,EAAA2C,cAAP,SAAqBvB,GACjB,GAAIsB,EAAAA,QAAQtB,EAAK5C,UAAW,CAExB,IAAMoE,EAAqBtE,EAAkB8C,EAAK7C,OAOlD,OANI6C,EAAK5C,UAAY4C,EAAK5C,SAAS5B,QAAU,GACzCwE,EAAK5C,SAAS2C,SAAQ,SAACK,GACnBoB,EAAKpE,SAASR,KAAKgC,EAAe2C,cAAcnB,OAGxDoB,EAAKtC,OAASc,EAAKd,OACZsC,EACJ,GAAIxB,EAAKzC,KAAOyC,EAAKyB,MAAO,CAI/B,IAAMxB,EAAuB5C,EAAiB2C,EAAK1C,KAAM0C,EAAK7C,MAAO6C,EAAKzC,KAqB1E,GApBA0C,EAAKxC,UAAU2B,SAAWY,EAAKb,KAC/Bc,EAAKxC,UAAUM,OAAOiC,EAAKjC,KAC3BkC,EAAKmB,IAAMpB,EAAKoB,IACZnB,EAAKxC,UAAUjD,eAAe,wBAE1BwF,EAAK0B,eAELzB,EAAKxC,UAAUO,oBAAoBC,oBAAoByD,aAAe1B,EAAK0B,cAE3E1B,EAAK2B,eAEL1B,EAAKxC,UAAUO,oBAAoBC,oBAAoB0D,aAAe3B,EAAK2B,eAExE1B,EAAKxC,UAAUjD,eAAe,wBAGhCyF,EAAKzF,eAAe,OAIzBwF,EAAK4B,gBAEL3B,EAAKxC,UAAYvD,OAAO2H,OAAO5B,EAAKxC,UAAWuC,EAAK4B,eAChD5B,EAAK4B,cAAcE,WAAW,CAE9B,IAAIC,EAAO,GACX9B,EAAKxC,UAAUqE,UAAU/B,SAAQ,SAAAC,GAC7B+B,EAAKnF,KAAKoD,EAAO,IAAMgC,KAAKC,OAEhChC,EAAKxC,UAAUqE,UAAYC,EAGnC,OAAO9B,EAEX,OAAO,iDCpOFiC,EAAAA,qBAAoB,SAAAC,GAQ/B,SAAAD,EAAmBE,GAAnB,IAAAC,EACEF,EAAA1H,KAAAK,KAAMsH,IAAgBtH,YADLuH,EAAAD,gBAAAA,EALnBC,EAAAC,UAAmC,CAGjC,mCANsC5H,EAAAwH,EAAAC,GAWjCD,EAAAK,YAAP,WACE,MAAO,CAAE1E,KAAM,uBAAwB2E,KAAM,+BAE/CN,EAAA3H,UAAAkI,SAAA,WACEN,EAAA5H,UAAMkI,SAAQhI,KAAAK,MAEdA,KAAK4H,MAAO,GAEdR,EAAA3H,UAAAoI,QAAA,WAAA,IAAAN,EAAAvH,KAGE,OADAA,KAAK4H,MAAO,EACL,IAAIE,SAAQ,SAACC,EAASC,GAC3B,IAAMC,EAAgBV,EAAKW,UAAUC,IAAIF,MACzC,GAAKA,EAAL,CAIA,IAAMG,EAAyB,GAC/Bb,EAAKC,UAAUvC,SAAQ,SAAAyC,GACrBU,EAAatG,KAAKmG,EAAQ,IAAMP,MAKlCW,EAAAA,aAAaC,cAAcF,EAAc,KAAM,MAAM,WAEnD,IAAMG,EAAKC,OAAW,GACjBD,EAILA,EAAGE,QAAQC,MAAK,iBACVC,EAAQ,IAAIJ,EAAGK,MAAM,iBAAkB,CACzCC,YAAY,EACZC,UAAU,EACVC,iBAAiB,IAEnBJ,EAAMK,YAAYC,QAAQC,SAAU,EACpCP,EAAMK,YAAYC,QAAQE,aAAc,EAExC,IAAMC,EAAYtF,EAAemC,WAAWsB,EAAK8B,QAAQ/G,SAwBzD,GAvBAgH,QAAQC,IAAIH,IACZtE,EAAA6D,EAAMa,UAAUxF,KAAK1B,UAASR,KAAIiD,MAAAD,EAAA9C,EAAIoH,IACtCT,EAAMc,OAAOC,UAAUC,aAAc,EACrChB,EAAMc,OAAOC,UAAUE,oBAAqB,EAE5CpB,OAAc,MAAIG,EAClBA,EAAMkB,eAAiB,WACrB,IAAMC,EAAKC,OAAO7C,KAAK8C,UACnBC,EAAMH,EAAGnB,EAAMuB,IAAIT,OAAOU,qBAAqBC,WAAWC,QAAQ,GAClEC,EAAMR,EAAGnB,EAAMuB,IAAIT,OAAOU,qBAAqBI,UAAUF,QAAQ,GACjEG,EAAS7B,EAAMuB,IAAIT,OAAOU,qBAAqBK,OAAOH,QAAQ,GAC9DI,EAAUX,EAAGnB,EAAMuB,IAAIT,OAAOgB,SAASJ,QAAQ,GAC/CK,EAAQZ,EAAGnB,EAAMuB,IAAIT,OAAOiB,OAAOL,QAAQ,GAC3CM,EAAOb,EAAGnB,EAAMuB,IAAIT,OAAOkB,MAAMN,QAAQ,GAC7Cf,QAAQC,IAAI,aAAaU,EAAG,MAAMK,EAAG,MAAME,EAAM,iBAAiBC,EAAO,cAAcC,EAAK,aAAaC,IAE3GhC,EAAMiC,gBAAgB,SAASC,GAC7B,IAAIC,EAAI,GACRD,EAAQ5F,SAAQ,SAAAC,GACd4F,EAAIhJ,KAAKoD,EAAKgC,KAAKC,GAAG,QAExBmC,QAAQC,IAAIuB,IAEVvD,EAAK8B,OAAO0B,YAAcxD,EAAK8B,OAAO0B,WAAWC,OAAQ,CAC3D,IAAIC,EAAI,mBAAoBC,EAAI,kBAAmBC,EAAI,IAAKV,EAAU,EAAGC,EAAQ,EAC7EnD,EAAK8B,OAAO0B,WAAWC,OAAOtK,QAAU,IAC1CuK,EAAI1D,EAAK8B,OAAO0B,WAAWC,OAAO,IAEhCzD,EAAK8B,OAAO0B,WAAWC,OAAOtK,QAAU,IAC1CwK,EAAI3D,EAAK8B,OAAO0B,WAAWC,OAAO,IAEhCzD,EAAK8B,OAAO0B,WAAWC,OAAOtK,QAAU,IAC1CyK,EAAI5D,EAAK8B,OAAO0B,WAAWC,OAAO,IAEhCzD,EAAK8B,OAAO0B,WAAWN,UACzBA,EAAUlD,EAAK8B,OAAO0B,WAAWN,SAE/BlD,EAAK8B,OAAO0B,WAAWL,QACzBA,EAAQnD,EAAK8B,OAAO0B,WAAWL,OAEjC/B,EAAMuB,IAAIkB,OAAOC,MAAM5B,OAAO6B,QAAQ,CACpCC,YAAaxB,OAAOyB,WAAWC,YAAYR,EAAGC,EAAGC,GACjDO,YAAa,CACXjB,QAASV,OAAO7C,KAAKyE,UAAUlB,GAC/BC,MAAOX,OAAO7C,KAAKyE,UAAUjB,GAC7BC,KAAM,KAMZ5C,EAAQY,MAhERX,EAAO,wBAdTA,EAAO,mBAzBkB,CAAS4D,EAAAA,wEAA7BxE,EAAAA,sBAAoByE,EAAAC,kBAAAC,EAAAC,gFAApB5E,EAAAA,qBAAoB6E,UAAA,CAAA,CAAA,wBAAAC,UAAA,SAAAC,EAAAC,+RCjBjCC,EAAAA,UAAAA,EAAAA,MAAAA,EAAAA,GAGAC,EAAAA,WAAAA,EAAAA,EAAAA,EAAAA,EAAAA,cAAAA,wIDcalF,EAAAA,qBAAoBjH,EAAA,CAVhCoM,EAAAA,kBAAkB,CACjBC,IAAK,sBACL9E,KAAM,6BACN3E,KAAM,0BAOKqE,EAAAA,sFAAAA,EAAAA,qBAAoB,CAAA,MALhCqF,EAAAA,gBAAU,CACTC,SAAU,sBACVC,YAAa,yBACbC,UAAW,CAAC,qFAGmCC,eAAc,CAAA,MAA5DC,EAAAA,gBAAU,iBAAkB,CAAEC,QAAQ,0BENvC,SAAAC,IAAA,IAAAzF,EACEF,EAAA1H,KAAAK,OAAOA,YAHTuH,EAAA0F,QAAkB,EAClB1F,EAAA2F,SAA4B,YALiBtN,EAAAoN,EAAA3F,GAS7C2F,EAAAvN,UAAA0N,cAAA,WACE,OAAInN,KAAKoN,KACApN,KAAKoN,KAAKlD,IAAIkB,OAEhB,MAWT4B,EAAAvN,UAAA4N,OAAA,SAAOC,EAAcC,EAAgBC,GACnCxN,KAAKkN,SAASpL,KAAK2L,EAAAA,YAAYC,MAAM1N,KAAMsN,GAAc,SAACK,EAAMC,EAAQC,GAEtEN,EAAK5N,KAAK4N,QAGdP,EAAAvN,UAAAqO,YAAA,WACEzG,EAAA5H,UAAMqO,YAAWnO,KAAAK,MACbA,KAAKkN,UAAYlN,KAAKkN,SAASxM,QAAU,GAC3CV,KAAKkN,SAASjI,SAAQ,SAAA8I,GAAK,OAAAA,EAAEpO,KAAKoO,MAEpC/N,KAAKkN,SAASxM,OAAS,MAnCoBsN,EAAAA,sDAAlChB,qCAAAA,EAAyBiB,SAAA,CAAApC,EAAAqC,8FAAzBlB,EAAyB,CAAA,MADrCmB,EAAAA,yCCYYC,EAAAA,oBAAmB,SAAA/G,GAC9B,SAAA+G,WACE/G,EAAA1H,KAAAK,OAAOA,YAF8BJ,EAAAwO,EAAA/G,GAIhC+G,EAAA3G,YAAP,WACE,MAAO,CAAEC,KAAM,8BAEjB0G,EAAA3O,UAAAkI,SAAA,WACE3H,KAAKoN,KAAKlD,IAAIkB,OAAOvC,WAAWwF,WAAWC,QAAS,GAOtDF,EAAA3O,UAAA8O,aAAA,SAAaC,GAEXxO,KAAKoN,KAAKlD,IAAIkB,OAAOvC,WAAW4F,SAASC,WAjBb,CAAS1B,wDAA5BoB,EAAAA,2EAAAA,EAAAA,oBAAmBnC,UAAA,CAAA,CAAA,uBAAA0C,UAAA,CAAA,QAAA,QAAAC,SAAA,EAAAC,aAAA,SAAA1C,EAAAC,iDAAnBA,EAAAmC,aAAAO,oLANAzC,EAAAA,UAAAA,EAAAA,IAAAA,QAAY0C,EAAAA,WAAAA,aAAAA,oGAMZX,EAAAA,oBAAmBjO,EAAA,CAb/BoM,EAAAA,kBAAkB,CACjBC,IAAI,qBACJ9E,KAAK,4BACL3E,KAAK,yBAUMqL,EAAAA,qFAAAA,EAAAA,oBAAmB,CAAA,MAR/B3B,EAAAA,gBAAU,CACTC,SAAU,qBACVsC,SAAU,wDACVC,KAAM,CACJC,oCAAqC,OACrC7M,MAAS,oCAkBXkM,aAAY,CAAA,MADXY,EAAAA,mBAAa,QAAS,CAAC,8GC7BxBC,EAAAA,eAAAA,EAAAA,UACIA,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,QAAMC,EAAAA,OAAAA,GAAWC,EAAAA,eACrBA,EAAAA,eACAF,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,YAAAA,GAAmDG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAC,EAAAC,IAAAX,KAAYQ,EAAAA,eACrGA,EAAAA,eACAF,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAC,EAAAC,IAAAX,KACtCQ,EAAAA,eACJA,EAAAA,eACJA,EAAAA,8DAVcI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,IAGKD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAa,EAAAC,aAAA,OAAAL,EAAAC,KAGLC,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAlD,EAAAiE,gBAAA,GAAAC,GAAXhB,CAAW,UAAAa,EAAAC,aAAA,OAAAL,EAAAC,+BATtCL,EAAAA,eAAAA,EAAAA,MAAAA,GACE9C,EAAAA,WAAAA,EAAAA,EAAAA,EAAAA,GAAAA,SAAAA,GAaFgD,EAAAA,6CAb2BI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,OAAAA,mEAmBrBK,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,YAAAA,GAAmDG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAW,GAACX,KAAGQ,EAAAA,eACxGA,EAAAA,8EADeI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAkB,EAAAJ,aAAA,OAAAG,EAAAP,IAAA,wDAE1BL,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,YAAAA,GAAmDG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAW,GAACX,KAAGQ,EAAAA,eACxGA,EAAAA,8EADeI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAmB,EAAAL,aAAA,OAAAG,EAAAP,IAAA,yDAE1BL,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,YAAAA,GAAkDG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAAX,KAAYQ,EAAAA,eACpGA,EAAAA,8EADeI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,IAAXA,CAAW,SAAA,EAAXA,CAAW,UAAAoB,EAAAN,aAAA,OAAAG,EAAAP,0DAE1BL,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,YAAAA,GAAmDG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAAX,KAAYQ,EAAAA,eACrGA,EAAAA,8EADeI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAqB,EAAAP,aAAA,OAAAG,EAAAP,0DAG1BL,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAW,GAACX,KAClDQ,EAAAA,eACJA,EAAAA,8EAHqBI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAlD,EAAAiE,gBAAA,EAAAC,GAAXhB,CAAW,UAAAsB,EAAAR,aAAA,OAAAG,EAAAP,IAAA,yDAIhCL,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAW,GAACX,KAClDQ,EAAAA,eACJA,EAAAA,8EAHqBI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAlD,EAAAiE,gBAAA,EAAAC,GAAXhB,CAAW,UAAAuB,EAAAT,aAAA,OAAAG,EAAAP,IAAA,yDAIhCL,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAAX,KACtCQ,EAAAA,eACJA,EAAAA,8EAHqBI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,IAAXA,CAAW,SAAA,EAAXA,CAAW,UAAAlD,EAAAiE,gBAAA,EAAAC,GAAXhB,CAAW,UAAAwB,EAAAV,aAAA,OAAAG,EAAAP,0DAIhCL,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,cAAAA,GAAAA,aAAkC,OAAAS,EAAAP,IAAAX,KACtCQ,EAAAA,eACJA,EAAAA,8EAHqBI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,CAAW,QAAA,EAAXA,CAAW,SAAA,IAAXA,CAAW,UAAAlD,EAAAiE,gBAAA,EAAAC,GAAXhB,CAAW,UAAAyB,EAAAX,aAAA,OAAAG,EAAAP,gCAjCpCL,EAAAA,eAAAA,EAAAA,UACIA,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,QAAMC,EAAAA,OAAAA,GAAWC,EAAAA,eACrBA,EAAAA,eACAhD,EAAAA,WAAAA,EAAAA,EAAAA,EAAAA,EAAAA,SAAAA,GAGAA,EAAAA,WAAAA,EAAAA,EAAAA,EAAAA,EAAAA,SAAAA,GAGAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,SAAAA,GAGAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,SAAAA,GAIAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,SAAAA,GAKAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,SAAAA,GAKAA,EAAAA,WAAAA,GAAAA,GAAAA,EAAAA,EAAAA,SAAAA,GAKAA,EAAAA,WAAAA,GAAAA,GAAAA,EAAAA,EAAAA,SAAAA,GAKJgD,EAAAA,uCAnCcI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,IAEWD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,IAGAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,IAGAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,IAGAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,IAIDW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,IAKAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,IAKAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,IAKAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,QAAAA,EAAAA,+BAjC1BK,EAAAA,eAAAA,EAAAA,MAAAA,GACE9C,EAAAA,WAAAA,EAAAA,GAAAA,GAAAA,EAAAA,SAAAA,GAsCFgD,EAAAA,6CAtC2BI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,OAAAA,wCCJrBK,EAAAA,eAAAA,EAAAA,QACEA,EAAAA,eAAAA,EAAAA,OAAAA,GAA0BC,EAAAA,OAAAA,GAAgBC,EAAAA,eAC5CA,EAAAA,uDAD4BI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,4DAE5BP,EAAAA,eAAAA,EAAAA,OAAAA,GAEEA,EAAAA,eAAAA,EAAAA,OAAAA,GAA0BC,EAAAA,OAAAA,GAAgBC,EAAAA,eAC1CF,EAAAA,eAAAA,EAAAA,IAAAA,GAAmFG,EAAAA,WAAAA,SAAAA,WAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,gBAAAA,QAAAA,MAAwBD,EAAAA,eAC3GF,EAAAA,eAAAA,EAAAA,IAAAA,GAAsFG,EAAAA,WAAAA,SAAAA,WAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,gBAAAA,UAAAA,OAAAA,EAAAA,gBAAAA,MAAAA,MAAsBD,EAAAA,eAK9GA,EAAAA,yDAP4BI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,OACoBD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,aAAAA,uBACDW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,aAAAA,sDARjDK,EAAAA,eAAAA,EAAAA,OAAAA,GACE9C,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,OAAAA,GAGAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,OAAAA,GAUFgD,EAAAA,uCAbSI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,QAGAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,EAAAA,SCCA0B,EAAAA,4BAA2B,SAAApJ,GAsDtC,SAAAoJ,EAAoBC,GAApB,IAAAnJ,EACEF,EAAA1H,KAAAK,OAAOA,YADWuH,EAAAmJ,qBAAAA,EAlDpBnJ,EAAA8B,OAAO,CACLsH,cAAgB,CACZ,CAAClB,GAAK,QAAQmB,GAAK,OACnB,CAACnB,GAAK,aAAamB,GAAK,MACxB,CAACnB,GAAK,aAAamB,GAAK,OACxB,CAACnB,GAAK,WAAWmB,GAAK,OACtB,CAACnB,GAAK,MAAMmB,GAAK,MACjB,CAACnB,GAAK,QAAQmB,GAAK,OAEvBC,YAAc,CACV,CACIpB,GAAK,0BACLmB,GAAK,QAET,CACInB,GAAK,2BACLmB,GAAK,QAET,CACInB,GAAK,oBACLmB,GAAK,QAET,CACInB,GAAK,2BACLmB,GAAK,UAiCfrJ,EAAAuJ,WAAkB,YA7D6BlR,EAAA6Q,EAAApJ,GAkC/CoJ,EAAAhR,UAAAsR,WAAA,SAAWC,GAGT,GADA1H,QAAQC,IAAIyH,GACRA,aAAgB9M,EAAAA,WAClB8M,EAAK5L,YAAc4L,EAAK5L,eACnB,CACL,IAAMD,EAAO6L,EAAK7L,KACdA,IACFA,EAAKC,YAAcD,EAAKC,cAK9BqL,EAAAhR,UAAAwR,WAAA,SAAWD,GACThR,KAAKkR,cAAgBF,EAAK7L,MAG5BsL,EAAAhR,UAAA0R,YAAA,SAAYrC,EAAoBsC,GAC9BpR,KAAK0Q,qBAAqBxQ,OAAO4O,EAAQsC,IAK3CX,EAAAhR,UAAA4R,eAAA,aAMOZ,EAAAhJ,YAAP,WACE,MAAO,CAAE1E,KAAM,8BAA+B2E,KAAM,uCAEtD+I,EAAAhR,UAAAkI,SAAA,WACEN,EAAA5H,UAAMkI,SAAQhI,KAAAK,OAShByQ,EAAAhR,UAAA6R,WAAA,WAAA,IACuB3K,EAAO4K,EAAQC,EAAOC,EAD7ClK,EAAAvH,MAEa,IAAIuI,GAAGmJ,KAAKC,YAKpBC,OAHO,qFAIPlJ,MAAK,SAAAtC,UACJkD,QAAQC,IAAInD,IACH,EACCA,EACW,GAAjBA,EAAO1F,QACT4I,QAAQC,IACN,iCACA,YAIF5C,EAAQP,EAAO,GACfkD,QAAQC,IAAI5C,EAAMK,WAClBuK,EAAS5K,EAAMkL,KAAK,GAAGN,OACvBC,EAAQ7K,EAAMmL,OAAO,GAAGC,GACxBN,EAAgB9K,EAAMqL,eAAe,GACrCzK,EAAK6F,KAAK5D,UAAUxF,KAAK1B,SAASR,KAChC,CACEa,UAAa,CACXG,SAAY,UAEZC,KAAQ4D,EAAMtE,MAEda,oBAAuB,CACrBC,oBAAuB,GACvB8O,2BAA8B,GAC9BC,iCAAoC,CAClCzP,IAAOkE,EAAMkL,KAAK,GAAG7C,SACrBuC,OAAUA,EACV5K,MAASA,EAAMtE,MACfmP,MAASA,EACTW,gBAAmBV,EAAcU,gBACjCC,iBAAoBX,EAAcY,OAAOD,iBACzCE,aAAgBb,EAAcY,OAAOC,aACrCC,aAAgBd,EAAcc,cAEhCC,oCAAuC,GACvChQ,KAAQ,uCAKHgG,OAAc,MAAE0B,IAAIkB,OAC1B3B,OAAOgJ,MAAM,CAClBlH,aAAazG,EAAAiF,OAAO2I,WAAUjH,YAAW1G,MAAAD,EAAA9C,EAAI2E,EAAMK,kBAOxD2L,OAAM,SAAAC,IACI,EACTtJ,QAAQC,IACN,0BAA4BqJ,EAAIC,QAChC,aAKRpC,EAAAhR,UAAAqT,KAAA,WAAA,IAAAvL,EAAAvH,KACE+S,YAAW,WACTzJ,QAAQC,IAAIhC,EAAKsI,gBAChB,MAELY,EAAAhR,UAAAuT,eAAA,SAAelE,GACbxF,QAAQC,IAAIuF,EAAO3J,KAAKV,OAAOA,SAKjCgM,EAAAhR,UAAAwT,gBAAA,SAAgBzE,GACQ,UAAlBA,EAAI0E,WAA0B1E,EAAIrJ,OAGlCqJ,EAAIrJ,KAAKI,UAEXzB,EAAekC,iBAAiBwI,EAAIrJ,MAAMlC,MAAO,EAGjDa,EAAekC,iBAAiBwI,EAAIrJ,MAAMlC,MAAO,IAGrDwN,EAAAhR,UAAA0T,aAAA,SAAarE,KAGb2B,EAAAhR,UAAA2T,gBAAA,WACE/L,EAAA5H,UAAM2T,gBAAezT,KAAAK,OAEvByQ,EAAAhR,UAAAqO,YAAA,WACEzG,EAAA5H,UAAMqO,YAAWnO,KAAAK,SA9KmB,CAASgN,gEAApCyD,EAAAA,6BAA2B5E,EAAAC,kBAAAuH,EAAAC,qFAA3B7C,EAAAA,4BAA2BxE,UAAA,CAAA,CAAA,gCAAAsH,OAAA,CAAA1D,aAAA,eAAArN,KAAA,QAAAyL,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,QAAA,SAAA,EAAA,QAAA,CAAA,EAAA,UAAA,CAAA,EAAA,QAAA,WAAA,CAAA,SAAA,KAAA,CAAA,SAAA,MAAA,CAAA,EAAA,QAAA,QAAA,SAAA,UAAA,iBAAA,CAAA,SAAA,KAAA,CAAA,EAAA,QAAA,QAAA,SAAA,UAAA,UAAA,iBAAA,CAAA,SAAA,KAAA,EAAA,QAAA,CAAA,SAAA,IAAA,EAAA,SAAA1E,SAAA,SAAA7C,EAAAC,SFhBxCE,EAAAA,WAAAA,EAAAA,EAAAA,EAAAA,EAAAA,MAAAA,GAeAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,MAAAA,UAfqByC,EAAAA,WAAAA,OAAAA,MAAAA,EAAAA,MAeAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,OAAAA,EAAAA,4QECR0B,EAAAA,4BAA2BtQ,EAAA,CAVvCoM,EAAAA,kBAAkB,CACjBC,IAAK,8BACL9E,KAAM,qCACN3E,KAAM,iCAOK0N,EAAAA,6FAAAA,EAAAA,4BAA2B,CAAA,MALvChE,EAAAA,gBAAU,CACTC,SAAU,8BACVC,YAAa,iCACbC,UAAW,CAAC,2FAIHiD,aAAY,CAAA,MAApB8D,EAAAA,QACQnR,KAAI,CAAA,MAAZmR,EAAAA,UCJUC,EAAAA,yBAAwB,SAAAvM,GAQnC,SAAAuM,EAAoBC,GAApB,IAAAtM,EACEF,EAAA1H,KAAAK,OAAOA,YADWuH,EAAAsM,aAAAA,EAPpBtM,EAAAuJ,WAAkB,GAGlBvJ,EAAAuM,WAAa,GACbvM,EAAAwM,QAAS,WALmCnU,EAAAgU,EAAAvM,GAWrCuM,EAAAnM,YAAP,WACE,MAAO,CAAE1E,KAAM,2BAA4B2E,KAAM,oCAEnDkM,EAAAnU,UAAAkI,SAAA,WAAA,IAAAJ,EAAAvH,KAeYuI,GAAGyL,KAAKtG,OAAM,WAAM,OAAA1L,EAAIuF,EAAK6F,KAAK5D,UAAUxF,KAAK1B,aAAW,WACpEiF,EAAK0M,oBAGTL,EAAAnU,UAAAsR,WAAA,SAAWC,GAGT,GADA1H,QAAQC,IAAIyH,GACRA,aAAgB9M,EAAAA,WAClB8M,EAAK5L,YAAc4L,EAAK5L,eACnB,CACL,IAAMD,EAAO6L,EAAK7L,KACdA,IACFA,EAAKC,YAAcD,EAAKC,cAI9BwO,EAAAnU,UAAAwU,cAAA,WAAA,IAAA1M,EAAAvH,KACE+S,YAAW,WACT,IAAMlO,EAAcf,EAAeC,sBAAsBwD,EAAK6F,KAAK5D,UAAU0K,MAAMC,WAEnF5M,EAAKuJ,WAAajM,EAAY,GAAa,WAE1C,MAIL+O,EAAAnU,UAAA2U,QAAA,SAAQjP,GAENnF,KAAK6P,aAAe1K,EAAKV,OACzBzE,KAAKwC,KAAOxC,KAAK6P,aAAqB,OAAEnQ,eAAe,qBAAuB,KAAO,KACrFM,KAAK+T,QAAS,EACd/T,KAAK6T,aAAa3T,OAAO,CACvBmC,MAAO,MAAQ8C,EAAK9C,MAAQ,MAC5BgS,QAAS5D,EAAAA,4BACT6D,gBAAiB,CACfzE,aAAc7P,KAAK6P,aACnBrN,KAAMxC,KAAKwC,MAEb+R,OAAQ,KACRC,MAAM,EACNC,MAAO,OAGXb,EAAAnU,UAAAgT,MAAA,SAAMtN,GACJA,EAAKV,OAAOA,OAAOgO,SAOrBmB,EAAAnU,UAAAiV,gBAAA,SAAgBlG,GACdlF,QAAQC,IAAIiF,EAAIrJ,MAChBnF,KAAK6P,aAAerB,EAAIrJ,KAAKV,QAK/BmP,EAAAnU,UAAAwT,gBAAA,SAAgBzE,GACdlF,QAAQC,IAAIiF,GACU,UAAlBA,EAAI0E,WAA0B1E,EAAIrJ,MAGtCnF,KAAK2U,gBAAgBnG,EAAIrJ,OAE3ByO,EAAAnU,UAAAkV,gBAAA,SAAgBhQ,GAAhB,IAAA4C,EAAAvH,KACO2E,EAAWrC,UAA0C,GAA9BqC,EAAWrC,SAAS5B,OAS9CiE,EAAWrC,SAAS2C,SAAQ,SAAAC,GAC1BqC,EAAKoN,gBAAgBzP,MATnBP,EAAWY,UAEbzB,EAAekC,iBAAiBrB,GAAY1B,MAAO,EAGnDa,EAAekC,iBAAiBrB,GAAY1B,MAAO,GAWzD2Q,EAAAnU,UAAAuT,eAAA,SAAexE,GACS,aAAlBA,EAAI0E,WAA6B1E,EAAIrJ,MAGzCrB,EAAekC,iBAAiBwI,EAAIrJ,MAAMsN,SAK5CmB,EAAAnU,UAAA0T,aAAA,SAAa3E,OAzHsB,CAASxB,6DAAjC4G,EAAAA,0BAAwB/H,EAAAC,kBAAAC,EAAA6I,iFAAxBhB,EAAAA,yBAAwB3H,UAAA,CAAA,CAAA,6BAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,cAAA,GAAA,cAAA,GAAA,EAAA,SAAA,iBAAA,UAAA,aAAA,mBAAA,iBAAA,CAAA,kBAAA,IAAA,CAAA,iBAAA,IAAA,CAAA,EAAA,eAAA,CAAA,EAAA,QAAA,CAAA,QAAA,OAAA,EAAA,QAAA,CAAA,EAAA,eAAA,CAAA,EAAA,QAAA,CAAA,QAAA,OAAA,UAAA,GAAA,EAAA,QAAA,QAAA,EAAA,aAAA,SAAA,CAAA,QAAA,MAAA,UAAA,GAAA,EAAA,QAAA,QAAA,EAAA,aAAA,UAAA1E,SAAA,SAAA7C,EAAAC,YFhBrCgD,EAAAA,eAAAA,EAAAA,UAAAA,EAAAA,GAKIG,EAAAA,WAAAA,WAAAA,SAAAA,GAAAA,OAAWnD,EAAAsI,gBAAA5F,KAAXS,CAAmC,cAAA,SAAAT,GAAA,OACrB1C,EAAA4G,eAAAlE,KADdS,CAAmC,oBAAA,SAAAT,GAAA,OAEf1C,EAAA6G,gBAAAnE,KAFpBS,CAAmC,iBAAA,SAAAT,GAAA,OAGlB1C,EAAA+G,aAAArE,MAErBQ,EAAAA,eACAhD,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,cAAAA,KAAAA,EAAAA,EAAAA,qDATIyC,EAAAA,WAAAA,SAAAA,EAAAA,WAAAA,CAAqB,iBAAA8F,iSEcZjB,EAAAA,yBAAwBzT,EAAA,CAVpCoM,EAAAA,kBAAkB,CACjBC,IAAK,2BACL9E,KAAM,kCACN3E,KAAM,8BAOK6Q,EAAAA,0FAAAA,EAAAA,yBAAwB,CAAA,MALpCnH,EAAAA,gBAAU,CACTC,SAAU,2BACVC,YAAa,8BACbC,UAAW,CAAC,4FCVd,IAAIkI,GAAgB,GAChBC,GAAgB,GAChBC,GAAU,GACVC,GAAY,mBAQZ,SAAAC,EAAoBC,GAAAnV,KAAAmV,KAAAA,EAGhBnV,KAAK2I,MAAQH,OAAc,MAC3BxI,KAAK2I,MAAMK,YAAYC,QAAQC,SAAU,EACzClJ,KAAK2I,MAAMK,YAAYC,QAAQE,aAAc,EAC7CnJ,KAAK2I,MAAMyM,UAAY,GACvBpV,KAAK2I,MAAMyM,UAAUC,YAAa,SAEtCH,EAAAzV,UAAA6V,QAAA,SAAQC,EAAQ9S,GACZ,MAAc,QAAV8S,EACOvV,KAAKmV,KAAKK,WAAWC,KAAKhT,EAAK,IAAIiT,YAEhC,OAAVH,EACOvV,KAAKmV,KAAKK,WAAWG,IAAIlT,GAAKiT,iBADzC,GAWJR,EAAAzV,UAAAmW,eAAA,SAAejT,EAAWgG,EAAOnG,EAAMqT,GAAvC,IAAAtO,EAAAvH,KACqB,MAAbiV,KACAA,GAAY,IAAIlL,OAAO+L,iBAAiB,aACxCnN,EAAMuB,IAAIkB,OAAO2K,YAAYC,IAAIf,KAErC,IAAI5J,EAAQ1C,EAAMuB,IAAImB,MAClBD,EAASzC,EAAMuB,IAAIkB,OACnB6K,EAASjW,KAAKkW,UAAUvT,EAAUO,qBAClCiT,EAAU,IAAIpM,OAAOqM,wBAAwB/K,EAAMgL,QACnDC,EAAS,GAEbH,EAAQI,gBAAe,SAAC7H,GACpB,GAAK/F,EAAMyM,UAAUC,YAChB1S,EAAUM,KAAf,CACA,IAAIuT,EAAU7N,EAAMuB,IAAIkB,OAAOC,MAAMoL,KAAK/H,EAAMgI,UAChD,IAAI3M,OAAO4M,QAAQH,GAAnB,CAGA7N,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAUkU,YAAa,EAClD5B,GAAU6B,SAASC,YACnB/B,GAAU,GACVrM,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAU+T,SAAWnP,EAAKyP,yBAAyB5L,EAAQsD,EAAMgI,UAC5F,IAAIA,EAAWnP,EAAK0P,kBAAkB7L,EAAQsD,EAAMgI,UAChDQ,EAAoB3P,EAAK4P,OAAO,CAACT,EAASzM,IAAKyM,EAASpM,KAAM,KACtD,SAAR9H,EACA8T,EAAS,4LAA4LY,EAAiB,mFAC/M1U,EAAO,UAEPA,EAAO,WAGlB+E,EAAK+N,QAAQ,OAAQW,EAASK,GAAQ5N,MAAK,SAAC0O,GACxC,GAAIA,EAAInJ,SAASvN,OAAS,EAAG,CACzB,IAAI2W,EAAaD,EAAInJ,SAAS,GAAGqJ,WAC7BC,EAAe,GACnBnY,OAAOoY,KAAKH,GAAYlP,KAAI,SAAA7H,GACxB,OAAAiX,EAAazV,KAAK,CACdiB,KAAMzC,EACNkB,MAAO6V,EAAW/W,QAG1BwU,GAAchT,KAAKyV,GACnBxC,GAAcjT,KAAKa,GACnBqS,GAAQlT,KAAKsV,GACbrE,YAAW,WAEP,GAAIiC,GAAQtU,OAAS,EAEjB,GAAIqU,GAAc,GAAG0C,IAAM1C,GAAc,GAAG0C,IAAK,CAC7C,GAAI1C,GAAc,GAAG0C,MAAQ9U,EAAU8U,IAAK,OACpB,mBAAb5B,IACPA,EAASf,GAAc,IACvB/K,OAAO2N,kBAAkBC,KAAK3C,GAAQ,IACjCtM,MAAK,SAAAkP,GACFA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/B7C,GAAU6B,SAASd,IAAI8B,cAIpC,CACH,GAAI/C,GAAc,GAAG0C,MAAQ9U,EAAU8U,IAAK,OACpB,mBAAb5B,IACPA,EAASf,GAAc,IACvB/K,OAAO2N,kBAAkBC,KAAK3C,GAAQ,IACjCtM,MAAK,SAAAkP,GACFA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/B7C,GAAU6B,SAASd,IAAI8B,cAOnB,mBAAbjC,IACPA,EAAS0B,GACTxN,OAAO2N,kBAAkBC,KAAKP,GACzB1O,MAAK,SAAAkP,GACFA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/B7C,GAAU6B,SAASd,IAAI8B,YAK5C,KACH/E,YAAW,WACPiC,GAAU,GACVF,GAAgB,GAChBC,GAAgB,KACjB,SAGRpC,OAAM,SAAAC,WACV7I,OAAOgO,qBAAqBC,aAEnC9C,EAAAzV,UAAAwY,YAAA,aAIA/C,EAAAzV,UAAAyY,UAAA,SAAUvV,EAAWgG,EAAOkN,GAA5B,IAAAtO,EAAAvH,KACqB,MAAbiV,KACAA,GAAY,IAAIlL,OAAO+L,iBAAiB,aACxCnN,EAAMuB,IAAIkB,OAAO2K,YAAYC,IAAIf,KAErC,IAAIkB,EAAU,IAAIpM,OAAOqM,wBAAwBzN,EAAMuB,IAAImB,MAAMgL,QAC7D5T,EAAME,EAAUO,oBAAoBgP,iCAAiCzP,KAAOE,EAAUO,oBAAoBiV,6BAA6B1V,IACvI2V,EAAa,GACyB,oCAAtCzV,EAAUO,oBAAoBV,KAC9B4V,EAAa3V,EAAI4V,MAAM,aAAa,GAAK,2BACI,gCAAtC1V,EAAUO,oBAAoBV,OACrC4V,EAAa3V,EAAI4V,MAAM,UAAU,GAAK,cAAgB5V,EAAI4V,MAAM,UAAU,GAAGA,MAAM,aAAa,GAAK,4BAGzGrY,KAAKsV,QAAQ,MAAO8C,GAAY1P,MAAK,SAAC0O,GAGlCjB,EAAQI,gBAAe,SAAC7H,GACpB,GAAkB4J,MAAdlB,EAAIhR,QACHuC,EAAMyM,UAAUC,YAChB1S,EAAUM,KAAf,CACA,IAAIuT,EAAU7N,EAAMuB,IAAIkB,OAAOC,MAAMoL,KAAK/H,EAAMgI,UAChD,IAAI3M,OAAO4M,QAAQH,GAAnB,CAGIvB,IACAA,GAAU6B,SAASC,YACvBpO,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAUkU,YAAa,EAClDlO,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAU+T,SAAWnP,EAAKyP,yBAAyBrO,EAAMuB,IAAIkB,OAAQsD,EAAMgI,UAEtG,IAAIA,EAAWnP,EAAK0P,kBAAkBtO,EAAMuB,IAAIkB,OAAQsD,EAAMgI,UAC1DQ,EAAoB3P,EAAK4P,OAAO,CAACT,EAASzM,IAAKyM,EAASpM,KAAM,GAC9DiO,EAAOhR,EAAK2O,UAAUvT,EAAUO,qBAChCsV,EAAW/V,EAAI4V,MAAM,cAAc,GAAGA,MAAM,aAAa,GACzDrD,EAAU,GACVyD,EAAe,GAEnB,GAA0C,oCAAtC9V,EAAUO,oBAAoBV,KAC9B,mBAASzB,GACL,IAAMmE,EAAOkS,EAAIhR,OAAOrF,GACpB2X,EAAWH,EACT,YAAYC,EAAQ,IAAItT,EAAKnC,KADvB,0LAIcmU,EAJd,wGAMZ3P,EAAK+N,QAAQ,MAAOoD,GAAOhQ,OAAOiK,OAAM,SAACC,GACrC,IAAIwE,EAAMxE,EAAI7Q,MAAM4W,KAEpB,GAAIpR,EAAKqR,SAASrR,EAAKsR,YAAYzB,IAAyB,kBAAiB,cAAG,CAC5E,IAAI0B,EAAavR,EAAKqR,SAASrR,EAAKsR,YAAYzB,IAAyB,kBAAiB,cAAElS,EAAKnC,MAC7FgW,EAAe,GACfC,EAAU,GAEd,GAAkBV,MAAdQ,GAAyC,MAAdA,EAAoB,OACnD1Z,OAAOoY,KAAKsB,GAAY3Q,KAAI,SAAA7H,GACxB,GAAY,UAARA,EACAyY,EAAajX,KAAK,CACdiB,KAAMzC,EACNkB,MAAOsX,EAAWxY,GAAKkB,aAG3B,GAAIsX,EAAWxY,GAAK2Y,aAAc,EAC1BC,EAAUJ,EAAWxY,GAAK2Y,aAAaE,cAAcC,QAAQC,SAASC,WAAWJ,QAAQ1X,MAAM6W,MAAM,MACjGkB,QAER,IADA,IAAIC,EAAO,GACFC,EAAI,EAAGA,EAAIP,EAAQxY,OAAQ+Y,GAAK,EACrCD,EAAK1X,KAAK,CAACoX,EAAQO,GAAIP,EAAQO,EAAI,KAEvCT,EAAU,CACNxW,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,SAGlB,GAAIV,EAAWxY,GAAKsZ,MAAO,CAC9B,IAAIV,EAAUJ,EAAWxY,GAAKsZ,MAAM9O,IAAItJ,MAAM6W,MAAM,KACpDW,EACA,CACIxW,KAAM,UACNkX,SAAU,CACNlX,KAAM,QACNmX,YAAaT,SAGlB,GAAIJ,EAAWxY,GAAKuZ,WAAY,CAC/BX,EAAUJ,EAAWxY,GAAKuZ,WAAWC,YAAYC,WAAWb,QAAQ1X,MAAM6W,MAAM,KAEhFmB,EAAO,GACX,IAHA,IAGSQ,EAAI,EAAGA,EAAId,EAAQxY,OAAQsZ,GAAK,EACrCR,EAAK1X,KAAK,CAACoX,EAAQc,GAAId,EAAQc,EAAI,KAEvChB,EACA,CACIxW,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,QAMjCxE,EAAQlT,KAAKiX,GACbN,EAAa3W,KAAKkX,QAnErBjY,EAAI,EAAGA,EAAIqW,EAAIhR,OAAO1F,OAAQK,MAA9BA,QAuEN,GAA0C,gCAAtC4B,EAAUO,oBAAoBV,KACrC,CAAA,IAAIyX,EAAQtX,EAAUO,oBAAoBiV,6BAA6B/R,OAAOiS,MAAM,gBAC3EtX,GACL,IAAMmE,EAAOkS,EAAIhR,OAAOgR,EAAIhR,OAAO1F,OAAS,EAAIuZ,EAAMlZ,IAElD2X,EAAWH,EACT,YAAYC,EAAQ,IAAItT,EAAKnC,KADvB,0LAIcmU,EAJd,wGAOZ3P,EAAK+N,QAAQ,MAAOoD,GAAOhQ,OAAOiK,OAAM,SAACC,GACrC,IAAIwE,EAAMxE,EAAI7Q,MAAM4W,KACpB,GAAiEL,MAA7D/Q,EAAKqR,SAASrR,EAAKsR,YAAYzB,IAAyB,mBAExD7P,EAAKqR,SAASrR,EAAKsR,YAAYzB,IAAyB,kBAAiB,cAAG,CAE5E,IAAI8C,EAAa3S,EAAKqR,SAASrR,EAAKsR,YAAYzB,IAAyB,kBAAiB,cAAElS,EAAKnC,MAC7FoX,EAAe,GACfC,EAAU,GAEd,GAAkB9B,MAAd4B,GAAyC,MAAdA,EAAoB,OACnD9a,OAAOoY,KAAK0C,GAAY/R,KAAI,SAAA7H,GACxB,GAAY,UAARA,EACA6Z,EAAarY,KAAK,CACdiB,KAAMzC,EACNkB,MAAO0Y,EAAW5Z,GAAKkB,aAG3B,GAAI0Y,EAAW5Z,GAAK2Y,aAAc,EAC1BC,EAAUgB,EAAW5Z,GAAK2Y,aAAaE,cAAcC,QAAQC,SAASC,WAAWJ,QAAQ1X,MAAM6W,MAAM,MACjGkB,QAER,IADA,IAAIC,EAAO,GACFa,EAAI,EAAGA,EAAInB,EAAQxY,OAAQ2Z,GAAK,EACrCb,EAAK1X,KAAK,CAACoX,EAAQmB,GAAInB,EAAQmB,EAAI,KAEvCD,EAAU,CACN5X,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,SAGlB,GAAIU,EAAW5Z,GAAKsZ,MAAO,CAC9B,IAAIV,EAAUgB,EAAW5Z,GAAKsZ,MAAM9O,IAAItJ,MAAM6W,MAAM,KACpD+B,EACA,CACI5X,KAAM,UACNkX,SAAU,CACNlX,KAAM,QACNmX,YAAaT,SAGlB,GAAIgB,EAAW5Z,GAAKuZ,WAAY,CAC/BX,EAAUgB,EAAW5Z,GAAKuZ,WAAWC,YAAYC,WAAWb,QAAQ1X,MAAM6W,MAAM,KAEhFmB,EAAO,GACX,IAHA,IAGSc,EAAI,EAAGA,EAAIpB,EAAQxY,OAAQ4Z,GAAK,EACrCd,EAAK1X,KAAK,CAACoX,EAAQoB,GAAIpB,EAAQoB,EAAI,KAEvCF,EACA,CACI5X,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,QAMjCxE,EAAQlT,KAAKqY,GACb1B,EAAa3W,KAAKsY,QAvE9B,IAASrZ,EAAI,EAAGA,EAAIkZ,EAAMvZ,OAAQK,MAAzBA,GA6EbgS,YAAW,WAEHiC,EAAQtU,OAAS,GAAK+X,EAAa/X,OAAS,IAEP,SAAjC+X,EAAa,GAAGiB,SAASlX,KACzBuH,OAAO2N,kBAAkBC,KAAKc,EAAa,IAAI/P,MAAK,SAAAkP,GAChDA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/BA,EAAOyC,UAAY,KACnBzC,EAAO0C,MAAQ,IAAIzQ,OAAO0Q,cAAc,CACpCxX,MAAM,EACNyX,MAAO3Q,OAAO4Q,MAAMC,KACpBC,UAAW,GACXC,eAAe,IAEnB7F,GAAU6B,SAASd,IAAI8B,SAGS,cAAjCW,EAAa,GAAGiB,SAASlX,KAChCuH,OAAO2N,kBAAkBC,KAAKc,EAAa,IAAI/P,MAAK,SAAAkP,GAChDA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/BA,EAAOiD,SAAStG,MAAQ,GACxBqD,EAAOiD,SAASD,eAAgB,EAChChD,EAAOiD,SAASC,SAAW,IAAIjR,OAAOkR,6BAA6B,CAC/DC,UAAW,GACXR,MAAO3Q,OAAO4Q,MAAMQ,OAExBlG,GAAU6B,SAASd,IAAI8B,SAK/B/N,OAAO2N,kBAAkBC,KAAKc,EAAa,IAAI/P,MAAK,SAAAkP,GAChDA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/B7C,GAAU6B,SAASd,IAAI8B,SAInCjC,EAASb,EAAQ,OAEtB,SACJjL,OAAOgO,qBAAqBC,gBAGvC9C,EAAAzV,UAAAqT,KAAA,SAAK0G,EAAM7Q,EAAOkN,GAAlB,IAAAtO,EAAAvH,KACIwZ,EAAK4B,MAAK,SAAoBC,EAAGlc,GAC7B,OAAOA,EAAEsY,IAAM4D,EAAE5D,OAGJ,MAAbxC,KACAA,GAAY,IAAIlL,OAAO+L,iBAAiB,aACxCnN,EAAMuB,IAAIkB,OAAO2K,YAAYC,IAAIf,KAEvB,IAAIlL,OAAOqM,wBAAwBzN,EAAMuB,IAAImB,MAAMgL,QACzDE,gBAAe,SAAC7H,GACpB8K,EAAKvU,SAAQ,SAACtC,EAAW5B,GACrB,GAAK4H,EAAMyM,UAAUC,YAChB1S,EAAUM,KAAf,CACA,IAAIuT,EAAU7N,EAAMuB,IAAIkB,OAAOC,MAAMoL,KAAK/H,EAAMgI,UAChD,IAAI3M,OAAO4M,QAAQH,GAAnB,CAIIvB,IACAA,GAAU6B,SAASC,YACvBpO,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAUkU,YAAa,EAClDlO,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAU+T,SAAWnP,EAAKyP,yBAAyBrO,EAAMuB,IAAIkB,OAAQsD,EAAMgI,UACtG,IAAIjU,EAAME,EAAUO,oBAAoBgP,iCAAiCzP,KAAOE,EAAUO,oBAAoBiV,6BAA6B1V,IACvI2V,EAAa,GACyB,oCAAtCzV,EAAUO,oBAAoBV,KAC9B4V,EAAa3V,EAAI4V,MAAM,aAAa,GAAK,2BACI,gCAAtC1V,EAAUO,oBAAoBV,OACrC4V,EAAa3V,EAAI4V,MAAM,UAAU,GAAK,cAAgB5V,EAAI4V,MAAM,UAAU,GAAGA,MAAM,aAAa,GAAK,4BAGzG,IAAI3B,EAAWnP,EAAK0P,kBAAkBtO,EAAMuB,IAAIkB,OAAQsD,EAAMgI,UAC1DQ,EAAoB3P,EAAK4P,OAAO,CAACT,EAASzM,IAAKyM,EAASpM,KAAM,GAC9DiO,EAAOhR,EAAK2O,UAAUvT,EAAUO,qBAChCsV,EAAW/V,EAAI4V,MAAM,cAAc,GAAGA,MAAM,aAAa,GAE7D9Q,EAAK+T,UAAU3Y,EAAW6V,EAAUtB,EAAmBqB,EAAMH,GAAY,SAACpD,EAASyD,GAC3ExD,GAAU6B,SAASe,QAAU5C,GAAU6B,SAASe,OAAOnX,OAAS,GAEhEsU,EAAQtU,OAAS,GAAK+X,EAAa/X,OAAS,IACP,SAAjC+X,EAAa,GAAGiB,SAASlX,KACzBuH,OAAO2N,kBAAkBC,KAAKc,EAAa,IAAI/P,MAAK,SAAAkP,GAChDA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/BA,EAAOyC,UAAY,KACnBzC,EAAO0C,MAAQ,IAAIzQ,OAAO0Q,cAAc,CACpCxX,MAAM,EACNyX,MAAO3Q,OAAO4Q,MAAMC,KACpBC,UAAW,GACXC,eAAe,IAEnB7F,GAAU6B,SAASd,IAAI8B,SAGS,cAAjCW,EAAa,GAAGiB,SAASlX,KAChCuH,OAAO2N,kBAAkBC,KAAKc,EAAa,IAAI/P,MAAK,SAAAkP,GAChDA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/BA,EAAOiD,SAAStG,MAAQ,GACxBqD,EAAOiD,SAASD,eAAgB,EAChChD,EAAOiD,SAASC,SAAW,IAAIjR,OAAOkR,6BAA6B,CAC/DC,UAAW,GACXR,MAAO3Q,OAAO4Q,MAAMQ,OAExBlG,GAAU6B,SAASd,IAAI8B,SAI/B/N,OAAO2N,kBAAkBC,KAAKc,EAAa,IAAI/P,MAAK,SAAAkP,GAChDA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAC/B7C,GAAU6B,SAASd,IAAI8B,SAInCjC,EAASb,EAAQ,eAI9BjL,OAAOgO,qBAAqBC,aAEnC9C,EAAAzV,UAAA6b,UAAA,SAAU3Y,EAAW6V,EAAUtB,EAAmBqB,EAAMH,EAAYvC,GAApE,IAAAtO,EAAAvH,KACQub,EAAW,GACXC,EAAgB,GACpBxb,KAAKyb,UAAUrD,GAAY,SAAAhB,GACvB,GAAkBkB,MAAdlB,EAAIhR,OACR,GAA0C,oCAAtCzD,EAAUO,oBAAoBV,KAC9B,mBAASzB,GACL,IAAMmE,EAAOkS,EAAIhR,OAAOrF,GACpB2X,EAAWH,EACT,YAAYC,EAAQ,IAAItT,EAAKnC,KADvB,0LAIcmU,EAJd,wGAMZ3P,EAAKmU,SAAShD,GAAO,SAAA9F,GACjB,IAAIwE,EAAMxE,EAAI7Q,MAAM4W,KAEhBgD,EAAoBpU,EAAKqR,SAASrR,EAAKsR,YAAYzB,IAAyB,kBAChF,GAAyBkB,MAArBqD,GACAA,EAAiC,cACjC,GAAIA,EAAiC,cAAEjb,OAAQ,CAC3C,IAAIkb,EAAaD,EAAiC,cAAE,GAAGzW,EAAKnC,MACxD8Y,EAAe,GACfC,EAAU,GAEd,GAAkBxD,MAAdsD,GAAyC,MAAdA,EAAoB,OACnDxc,OAAOoY,KAAKoE,GAAYzT,KAAI,SAAA7H,GACxB,GAAY,UAARA,EACAub,EAAa/Z,KAAK,CACdiB,KAAMzC,EACNkB,MAAOoa,EAAWtb,GAAKkB,aAG3B,GAAIoa,EAAWtb,GAAK2Y,aAAc,EAC1BC,EAAU0C,EAAWtb,GAAK2Y,aAAaE,cAAcC,QAAQC,SAASC,WAAWJ,QAAQ1X,MAAM6W,MAAM,MACjGkB,QAER,IADA,IAAIC,EAAO,GACFuC,EAAI,EAAGA,EAAI7C,EAAQxY,OAAQqb,GAAK,EACrCvC,EAAK1X,KAAK,CAACoX,EAAQ6C,GAAI7C,EAAQ6C,EAAI,KAEvCD,EAAU,CACNtZ,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,SAGlB,GAAIoC,EAAWtb,GAAKsZ,MAAO,CAC9B,IAAIV,EAAU0C,EAAWtb,GAAKsZ,MAAM9O,IAAItJ,MAAM6W,MAAM,KACpDyD,EACA,CACItZ,KAAM,UACNkX,SAAU,CACNlX,KAAM,QACNmX,YAAaT,SAGlB,GAAI0C,EAAWtb,GAAKuZ,WAAY,CAC/BX,EAAU0C,EAAWtb,GAAKuZ,WAAWC,YAAYC,WAAWb,QAAQ1X,MAAM6W,MAAM,KAEhFmB,EAAO,GACX,IAHA,IAGSwC,EAAI,EAAGA,EAAI9C,EAAQxY,OAAQsb,GAAK,EACrCxC,EAAK1X,KAAK,CAACoX,EAAQ8C,GAAI9C,EAAQ8C,EAAI,KAEvCF,EACA,CACItZ,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,QAMjC+B,EAASzZ,KAAK+Z,GACdL,EAAc1Z,KAAKga,GACnBjG,EAAS0F,EAAUC,OAChB,CACH,IAAIS,EAAaN,EAAiC,cAAEzW,EAAKnC,MACrDmZ,EAAe,GACfC,EAAU,GAEd,GAAkB7D,MAAd2D,GAAyC,MAAdA,EAAoB,OACnD7c,OAAOoY,KAAKyE,GAAY9T,KAAI,SAAA7H,GACxB,GAAY,UAARA,EACA4b,EAAapa,KAAK,CACdiB,KAAMzC,EACNkB,MAAOya,EAAW3b,GAAKkB,aAG3B,GAAIya,EAAW3b,GAAK2Y,aAAc,EAC1BC,EAAU+C,EAAW3b,GAAK2Y,aAAaE,cAAcC,QAAQC,SAASC,WAAWJ,QAAQ1X,MAAM6W,MAAM,MACjGkB,QAER,IADA,IAAIC,EAAO,GACF4C,EAAI,EAAGA,EAAIlD,EAAQxY,OAAQ0b,GAAK,EACrC5C,EAAK1X,KAAK,CAACoX,EAAQkD,GAAIlD,EAAQkD,EAAI,KAEvCD,EAAU,CACN3Z,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,SAGlB,GAAIyC,EAAW3b,GAAKsZ,MAAO,CAC9B,IAAIV,EAAU+C,EAAW3b,GAAKsZ,MAAM9O,IAAItJ,MAAM6W,MAAM,KACpD8D,EACA,CACI3Z,KAAM,UACNkX,SAAU,CACNlX,KAAM,QACNmX,YAAaT,SAGlB,GAAI+C,EAAW3b,GAAKuZ,WAAY,CAC/BX,EAAU+C,EAAW3b,GAAKuZ,WAAWC,YAAYC,WAAWb,QAAQ1X,MAAM6W,MAAM,KAEhFmB,EAAO,GACX,IAHA,IAGS6C,EAAI,EAAGA,EAAInD,EAAQxY,OAAQ2b,GAAK,EACrC7C,EAAK1X,KAAK,CAACoX,EAAQmD,GAAInD,EAAQmD,EAAI,KAEvCF,EACA,CACI3Z,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,QAMjC+B,EAASzZ,KAAKoa,GACdV,EAAc1Z,KAAKqa,GACnBtG,EAAS0F,EAAUC,QAjI1Bza,EAAI,EAAGA,EAAIqW,EAAIhR,OAAO1F,OAAQK,MAA9BA,QAsIN,GAA0C,gCAAtC4B,EAAUO,oBAAoBV,KACrC,CAAA,IAAIyX,EAAQtX,EAAUO,oBAAoBiV,6BAA6B/R,OAAOiS,MAAM,gBAC3EtX,GAEL,IAAMmE,EAAOkS,EAAIhR,OAAOgR,EAAIhR,OAAO1F,OAAS,EAAIuZ,EAAMlZ,IAElD2X,EAAWH,EACT,YAAYC,EAAQ,IAAItT,EAAKnC,KADvB,0LAIcmU,EAJd,wGAQZ3P,EAAKmU,SAAShD,GAAO,SAAA9F,GACjB,KAAI2I,EAAS7a,OAAS,GAAtB,CACA,IAAI0W,EAAMxE,EAAI7Q,MAAM4W,KAChBgD,EAAoBpU,EAAKqR,SAASrR,EAAKsR,YAAYzB,IAAyB,kBAChF,GAAyBkB,MAArBqD,GACAA,EAAiC,cACjC,GAAIA,EAAiC,cAAEjb,OAAQ,CAC3C,IAAI4b,EAAaX,EAAiC,cAAE,GAAGzW,EAAKnC,MACxDwZ,EAAe,GACfC,EAAU,GACd,GAAkBlE,MAAdgE,GAAyC,MAAdA,EAAoB,OACnDld,OAAOoY,KAAK8E,GAAYnU,KAAI,SAAA7H,GACxB,GAAY,UAARA,EACAic,EAAaza,KAAK,CACdiB,KAAMzC,EACNkB,MAAO8a,EAAWhc,GAAKkB,aAG3B,GAAI8a,EAAWhc,GAAK2Y,aAAc,EAC1BC,EAAUoD,EAAWhc,GAAK2Y,aAAaE,cAAcC,QAAQC,SAASC,WAAWJ,QAAQ1X,MAAM6W,MAAM,MACjGkB,QAER,IADA,IAAIC,EAAO,GACFiD,EAAI,EAAGA,EAAIvD,EAAQxY,OAAQ+b,GAAK,EACrCjD,EAAK1X,KAAK,CAACoX,EAAQuD,GAAIvD,EAAQuD,EAAI,KAEvCD,EAAU,CACNha,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,SAGlB,GAAI8C,EAAWhc,GAAKsZ,MAAO,CAC9B,IAAIV,EAAUoD,EAAWhc,GAAKsZ,MAAM9O,IAAItJ,MAAM6W,MAAM,KACpDmE,EACA,CACIha,KAAM,UACNkX,SAAU,CACNlX,KAAM,QACNmX,YAAaT,SAGlB,GAAIoD,EAAWhc,GAAKuZ,WAAY,CAC/BX,EAAUoD,EAAWhc,GAAKuZ,WAAWC,YAAYC,WAAWb,QAAQ1X,MAAM6W,MAAM,KAEhFmB,EAAO,GACX,IAHA,IAGSkD,EAAI,EAAGA,EAAIxD,EAAQxY,OAAQgc,GAAK,EACrClD,EAAK1X,KAAK,CAACoX,EAAQwD,GAAIxD,EAAQwD,EAAI,KAEvCF,EACA,CACIha,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,QAMjC+B,EAASzZ,KAAKya,GACdf,EAAc1Z,KAAK0a,GACnB3G,EAAS0F,EAAUC,OAChB,CACH,IAAImB,EAAahB,EAAiC,cAAEzW,EAAKnC,MACrD6Z,EAAe,GACfC,EAAU,GAEd,GAAkBvE,MAAdqE,GAAyC,MAAdA,EAAoB,OACnDvd,OAAOoY,KAAKmF,GAAYxU,KAAI,SAAA7H,GACxB,GAAY,UAARA,EACAsc,EAAa9a,KAAK,CACdiB,KAAMzC,EACNkB,MAAOmb,EAAWrc,GAAKkB,aAG3B,GAAImb,EAAWrc,GAAK2Y,aAAc,EAC1BC,EAAUyD,EAAWrc,GAAK2Y,aAAaE,cAAcC,QAAQC,SAASC,WAAWJ,QAAQ1X,MAAM6W,MAAM,MACjGkB,QAER,IADA,IAAIC,EAAO,GACFsD,EAAI,EAAGA,EAAI5D,EAAQxY,OAAQoc,GAAK,EACrCtD,EAAK1X,KAAK,CAACoX,EAAQ4D,GAAI5D,EAAQ4D,EAAI,KAEvCD,EAAU,CACNra,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,SAGlB,GAAImD,EAAWrc,GAAKsZ,MAAO,CAC9B,IAAIV,EAAUyD,EAAWrc,GAAKsZ,MAAM9O,IAAItJ,MAAM6W,MAAM,KACpDwE,EACA,CACIra,KAAM,UACNkX,SAAU,CACNlX,KAAM,QACNmX,YAAaT,SAGlB,GAAIyD,EAAWrc,GAAKuZ,WAAY,CAC/BX,EAAUyD,EAAWrc,GAAKuZ,WAAWC,YAAYC,WAAWb,QAAQ1X,MAAM6W,MAAM,KAEhFmB,EAAO,GACX,IAHA,IAGSuD,EAAI,EAAGA,EAAI7D,EAAQxY,OAAQqc,GAAK,EACrCvD,EAAK1X,KAAK,CAACoX,EAAQ6D,GAAI7D,EAAQ6D,EAAI,KAEvCF,EACA,CACIra,KAAM,UACNkX,SAAU,CACNlX,KAAM,aACNmX,YAAaH,QAMjC+B,EAASzZ,KAAK8a,GACdpB,EAAc1Z,KAAK+a,GACnBhH,EAAS0F,EAAUC,SApInC,IAASza,EAAIkZ,EAAMvZ,OAAS,EAAGK,GAAK,EAAGA,MAA9BA,QAgJrBmU,EAAAzV,UAAAgc,UAAA,SAAUrD,EAAYvC,GAClB7V,KAAKsV,QAAQ,MAAO8C,GAAY1P,MAAK,SAAC0O,GAClCvB,EAASuB,OAGjBlC,EAAAzV,UAAAic,SAAA,SAAShD,EAAO7C,GACZ7V,KAAKsV,QAAQ,MAAOoD,GAAOhQ,OAAOiK,OAAM,SAACC,GACrCiD,EAASjD,OAGjBsC,EAAAzV,UAAAud,UAAA,SAAUrU,EAAOkN,GACC,IAAI9L,OAAOqM,wBAAwBzN,EAAMuB,IAAImB,MAAMgL,QACzDE,gBAAe,SAAC7H,GACpB,GAAK/F,EAAMyM,UAAUC,WAArB,CAIA,IAAIqB,EAAW/N,EAAMuB,IAAIkB,OAAOC,MAAM4R,aAAavO,EAAMgI,UACrDF,EAAU7N,EAAMuB,IAAIkB,OAAOC,MAAMoL,KAAK/H,EAAMgI,UAChD,GAAK3M,OAAO4M,QAAQH,IAAaA,EAAQ0G,iBAAzC,CAKA,IAAIC,EAAepT,OAAOqT,aAAaC,cAAc3G,GAErD/N,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAU+T,SAAW,CAACyG,EAAa/S,UAAW+S,EAAa5S,SAAU4S,EAAa3S,QAC7G,IAAI8S,EAAgB9G,EAAQ0G,mBACxBK,EAAe,GACnBD,EAAcrY,SAAQ,SAAAuY,GAClBD,EAAazb,KAAK,CACdiB,KAAMya,EACNhc,MAAOgV,EAAQiH,YAAYD,QAGnC3H,EAAS0H,EAAc/G,QAfnB7N,EAAMa,UAAU0K,MAAM0C,KAAKjU,UAAUkU,YAAa,KAiBvD9M,OAAOgO,qBAAqBC,aASnC9C,EAAAzV,UAAAwX,kBAAA,SAAkB7L,EAAQsL,GACtB,IAAIgH,EAAMtS,EAAO3B,OAAOkU,WAAWjH,GAC/BkH,EAAYxS,EAAOC,MAAMwS,MAAMpH,KAAKiH,EAAKtS,EAAOC,OAChD8R,EAAepT,OAAOqT,aAAaC,cAAcO,GAGrD,MAAO,CAAE3T,IAFCF,OAAO7C,KAAK8C,UAAUmT,EAAa/S,WAE1BE,IADTP,OAAO7C,KAAK8C,UAAUmT,EAAa5S,YAIjD2K,EAAAzV,UAAAuX,yBAAA,SAAyB5L,EAAQsL,GAC7B,IAAIgH,EAAMtS,EAAO3B,OAAOkU,WAAWjH,GAC/BkH,EAAYxS,EAAOC,MAAMwS,MAAMpH,KAAKiH,EAAKtS,EAAOC,OAChD8R,EAAepT,OAAOqT,aAAaC,cAAcO,GACrD,MAAO,CAACT,EAAa/S,UAAW+S,EAAa5S,SAAU4S,EAAa3S,SAOxE0K,EAAAzV,UAAAyW,UAAA,SAAU4H,GACN,IAAI7H,EAAS,GACb,GAA4B,oCAAxB6H,EAAgBtb,KAA4C,CAC5D,IAAIub,EAAsBD,EAAgB5L,kCACS,IAA/C6L,EAAoBtb,IAAIub,QAAQ,UAChC/H,EAAS8H,EAAoBtb,IAAI4V,MAAM,QAAQ,GAAK0F,EAAoBtb,IAAI4V,MAAM,SAAS,GAAGA,MAAM,aAAa,GAAK,qEAC7D,IAAlD0F,EAAoBtb,IAAIub,QAAQ,eACvC/H,EAAS8H,EAAoBtb,IAAI4V,MAAM,OAAO,GAAK0F,EAAoBpX,MAAM0R,MAAM,KAAK,GAAK,8DAAgE0F,EAAoBpX,MAAQ,4CAGjM,GAA4B,gCAAxBmX,EAAgBtb,KAAwC,CACxD,IAAI2V,EAA+B2F,EAAgB3F,8BACS,IAAxDA,EAA6B1V,IAAIub,QAAQ,UACzC/H,EAASkC,EAA6B1V,IAAI4V,MAAM,aAAa,GAAK,qEACA,IAA3DF,EAA6B1V,IAAIub,QAAQ,eAChD/H,EAASkC,EAA6B1V,IAAI4V,MAAM,OAAO,GAAK,8DAAgEF,EAA6B/R,OAAS,4CAI1K,OAAO6P,GAOXf,EAAAzV,UAAA0X,OAAA,SAAOT,EAAUuH,GACb,IAAIC,EAASC,EAAAA,QAAK3D,MAAM9D,GAGpB0H,EAFWD,EAAAA,QAAKE,OAAOH,EAAQD,EAAQ,UAChBvE,SAASC,YACX,GAEzB,OADqB3Z,KAAKse,qBAAqBF,IAQnDlJ,EAAAzV,UAAA6e,qBAAA,SAAqBF,GACjB,IAAIG,EAAe,GAInB,OAHAH,EAAOjW,KAAI,SAAAjD,GACPqZ,GAAgBrZ,EAAK,GAAK,IAAMA,EAAK,GAAK,OAEvCqZ,GAKXrJ,EAAAzV,UAAA+e,eAAA,WAEIvJ,GAAU6B,SAASC,aAOvB7B,EAAAzV,UAAAmZ,SAAA,SAAS6F,GAEL,IAAIC,EAAM,GACV,GAAoB,GAAhBD,EAAIE,UAEJ,GAAIF,EAAIG,WAAWle,OAAS,EAAG,CAC3Bge,EAAI,eAAiB,GACrB,IAAK,IAAIG,EAAI,EAAGA,EAAIJ,EAAIG,WAAWle,OAAQme,IAAK,CAE5C,IAAIC,EAAYL,EAAIG,WAAW1Z,KAAK2Z,IACI,GAApCC,EAAUC,SAASf,QAAQ,KAC3BU,EAAI,eAAeI,EAAUC,UAAYD,EAAUE,UAEnDN,EAAI,eAAeI,EAAUC,SAAS1G,MAAM,KAAK,IAAMyG,EAAUE,iBAKtD,GAAhBP,EAAIE,WACXD,EAAMD,EAAIO,WAGd,GAAIP,EAAIQ,gBACJ,IAAK,IAAIle,EAAI,EAAGA,EAAI0d,EAAIS,WAAWxe,OAAQK,IAAK,CAC5C,IAAImE,EAAOuZ,EAAIS,WAAWha,KAAKnE,GAC3Bge,EAAW7Z,EAAK6Z,SACpB,QAA4C,IAAhCL,EAAIK,EAAS1G,MAAM,KAAK,IACFC,MAA1ByG,EAAS1G,MAAM,KAAK,GACpBqG,EAAW,MAAI1e,KAAK4Y,SAAS1T,GAE7BwZ,EAAIK,EAAS1G,MAAM,KAAK,IAAMrY,KAAK4Y,SAAS1T,OAG7C,CACH,QAAmD,IAAvCwZ,EAAIK,EAAS1G,MAAM,KAAK,IAAU,OAAkB,CAC5D,IAAI8G,EAAMT,EAAIK,EAAS1G,MAAM,KAAK,IAClCqG,EAAIK,EAAS1G,MAAM,KAAK,IAAM,GAC9BqG,EAAIK,EAAS1G,MAAM,KAAK,IAAIvW,KAAKqd,GAErCT,EAAIK,EAAS1G,MAAM,KAAK,IAAIvW,KAAK9B,KAAK4Y,SAAS1T,KAI3D,OAAOwZ,GAOXxJ,EAAAzV,UAAAoZ,YAAA,SAAYuG,GACR,IAAIC,EACoB,iBAAbD,EAEHE,SAASC,eAAeC,iBAExBH,GADa,IAAII,WACDC,gBAAgBN,EAAW,aAI/CC,EAASD,EAEb,OAAOC,kCCx4BCjQ,EAAAA,eAAAA,EAAAA,MACIA,EAAAA,eAAAA,EAAAA,MAAIC,EAAAA,OAAAA,GAAeC,EAAAA,eACnBF,EAAAA,eAAAA,EAAAA,MAAIC,EAAAA,OAAAA,GAAgBC,EAAAA,eACxBA,EAAAA,uCAFQI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,MACAD,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,0CDHXuF,IAAQrJ,EAAA8T,SAAA5T,EAAA6T,uDAAR1K,GAAQ2K,QAAR3K,GAAQ4K,KAAAC,WAFL,yEAEH7K,GAAQ,CAAA,MAHpB8K,EAAAA,iBAAW,CACRD,WAAY,iKEShB3Q,EAAAA,eAAAA,EAAAA,OACEA,EAAAA,eAAAA,EAAAA,QAAMC,EAAAA,OAAAA,GAAgBC,EAAAA,eACtBF,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,OAAAA,EAAAA,cAAAA,GAAAA,EAAAA,gBAAAA,OAAAA,KAGJD,EAAAA,eACFA,EAAAA,+CANQI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,KAAAA,EAAAA,OAEFD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,OAAAA,CAAoB,SAAA,EAApBA,CAAoB,gBAAAkR,EAAA/a,KAAAgb,EAAAC,qCCpBtBC,EAAAA,wBAAAA,GACEC,EAAAA,iBAAAjR,EAAAA,eAAAA,EAAAA,MAAAA,GACE/C,EAAAA,UAAAA,EAAAA,OAAAA,GAGFiD,EAAAA,eACFgR,EAAAA,gDACAF,EAAAA,wBAAAA,GACEC,EAAAA,iBAAAjR,EAAAA,eAAAA,EAAAA,MAAAA,GACE/C,EAAAA,UAAAA,EAAAA,OAAAA,GAGFiD,EAAAA,eACFgR,EAAAA,gDACAF,EAAAA,wBAAAA,GACEC,EAAAA,iBAAAjR,EAAAA,eAAAA,EAAAA,MAAAA,GACE/C,EAAAA,UAAAA,EAAAA,OAAAA,GAGFiD,EAAAA,eACFgR,EAAAA,6EAMFlR,EAAAA,eAAAA,EAAAA,MAAAA,GACEA,EAAAA,eAAAA,EAAAA,MAAAA,GAAkBG,EAAAA,WAAAA,SAAAA,WAAAA,OAAAA,EAAAA,cAAAA,GAAAA,EAAAA,gBAAAA,eAAwB,SACxC8Q,EAAAA,iBAAAjR,EAAAA,eAAAA,EAAAA,MAAAA,IACE/C,EAAAA,UAAAA,EAAAA,OAAAA,GAGFiD,EAAAA,eAEFA,EAAAA,eACAiR,EAAAA,kBAAAnR,EAAAA,eAAAA,EAAAA,MAAAA,GAAkBG,EAAAA,WAAAA,SAAAA,WAAAA,OAAAA,EAAAA,cAAAA,GAAAA,EAAAA,gBAAAA,eAAwB,SACxC8Q,EAAAA,iBAAAjR,EAAAA,eAAAA,EAAAA,MAAAA,IACE/C,EAAAA,UAAAA,EAAAA,OAAAA,GAGFiD,EAAAA,eAEFA,EAAAA,eACAiR,EAAAA,kBAAAnR,EAAAA,eAAAA,EAAAA,MAAAA,GAAkBG,EAAAA,WAAAA,SAAAA,WAAAA,OAAAA,EAAAA,cAAAA,GAAAA,EAAAA,gBAAAA,eAAwB,eACxC8Q,EAAAA,iBAAAjR,EAAAA,eAAAA,EAAAA,MAAAA,IACE/C,EAAAA,UAAAA,EAAAA,OAAAA,GAGFiD,EAAAA,eAEFA,EAAAA,eACFA,EAAAA,oECnDUF,EAAAA,eAAAA,EAAAA,KAAAA,GAA8CG,EAAAA,WAAAA,SAAAA,WAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,UAAAA,OAAAA,EAAAA,gBAAAA,YAAAA,MAC1CH,EAAAA,eAAAA,EAAAA,MAAAA,GACI/C,EAAAA,UAAAA,EAAAA,MAAAA,GAAyBA,EAAAA,UAAAA,EAAAA,MACzB+C,EAAAA,eAAAA,EAAAA,OAAAA,GACmGC,EAAAA,OAAAA,GAAcC,EAAAA,eACrHA,EAAAA,eACJA,EAAAA,yCAJaI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,MAAAA,EAAAA,OAAAA,EAAAA,eACCW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,OAC6FW,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,4DA+B3GP,EAAAA,eAAAA,EAAAA,KAAAA,GAA6CG,EAAAA,WAAAA,SAAAA,WAAAA,EAAAA,cAAAA,GAAAA,IAAAA,EAAAA,EAAAA,UAAAA,OAAAA,EAAAA,gBAAAA,cAAAA,MACzCH,EAAAA,eAAAA,EAAAA,MAAAA,GACI/C,EAAAA,UAAAA,EAAAA,MAAAA,GAAyBA,EAAAA,UAAAA,EAAAA,MACzB+C,EAAAA,eAAAA,EAAAA,OAAAA,GACmGC,EAAAA,OAAAA,GAAuBC,EAAAA,eAC9HA,EAAAA,eACJA,EAAAA,yCAJaI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,MAAAA,EAAAA,OAAAA,EAAAA,eACCW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,UAAAA,MAC6FW,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,UAAAA,iCAgBnHP,EAAAA,eAAAA,EAAAA,QAEEA,EAAAA,eAAAA,EAAAA,OAAAA,IAA0BC,EAAAA,OAAAA,GAAgBC,EAAAA,eAC5CA,EAAAA,uDAD4BI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,kCAE5BP,EAAAA,eAAAA,EAAAA,QAEEA,EAAAA,eAAAA,EAAAA,OAAAA,IAA0BC,EAAAA,OAAAA,GAAgBC,EAAAA,eAC5CA,EAAAA,uDAD4BI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,kCAP9BP,EAAAA,eAAAA,EAAAA,OAAAA,GACE9C,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,OAAAA,IAIAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,OAAAA,IAIFgD,EAAAA,uCARSI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,QAAAA,EAAAA,QAIAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,EAAAA,SC9CEyR,EAAAA,wBAAuB,SAAAnZ,GAalC,SAAAmZ,EAAoBC,GAApB,IAAAlZ,EACEF,EAAA1H,KAAAK,OAAOA,YADWuH,EAAAkZ,SAAAA,EAZpBlZ,EAAAmZ,OAAqB,CAAC,EAAG,EAAG,EAAG,GAC/BnZ,EAAAlF,MAAQ,GACRkF,EAAAqP,KAAO,KACPrP,EAAAgW,aAAe,CACb,CACExa,KAAM,IACNvB,MAAO,IAGX+F,EAAAoZ,UAAW,EACXpZ,EAAAqZ,aAAc,EACdrZ,EAAAsZ,WAAa,YAZ8BjhB,EAAA4gB,EAAAnZ,GAgB3CmZ,EAAA/gB,UAAAqhB,MAAA,SAAMjL,GACJA,EAAS7V,KAAKud,cACdjU,QAAQC,IAAIvJ,KAAKud,eAEnBiD,EAAA/gB,UAAAshB,OAAA,SAAOhe,EAAM8S,GACX,IAAImL,EAAM1B,SAAS2B,cAAc,UACjCD,EAAIE,YAAcne,EAClBie,EAAIjP,GAAG,QAOPiP,EAAIxP,MAAMkF,SAAW,WACrBsK,EAAIxP,MAAM2P,WAAa,MACvBH,EAAIxP,MAAM4P,SAAW,OACrBJ,EAAIxP,MAAM6P,WAAa,SACvBL,EAAIxP,MAAM8P,UAAY,SACtBN,EAAIxP,MAAM+P,OAAS,oBACnBP,EAAIxP,MAAMgQ,UAAY,0BACtBR,EAAIxP,MAAMiQ,WAAa,yCACvBT,EAAIxP,MAAMhH,OAAS,OACnBwW,EAAIxP,MAAMkQ,QAAU,WACpBV,EAAIxP,MAAMmQ,aAAe,MACzBX,EAAIxP,MAAMoQ,gBAAkB,OAC5B/L,EAASmL,GACT1B,SAASuC,uBAAuB,SAAS,GAAGC,OAAOd,IAGrDR,EAAA/gB,UAAAsiB,KAAA,WAAA,IAAAxa,EAAAvH,KACMgiB,EAAM1C,SAASuC,uBAAuB,UAAU,GACpDG,EAAIrd,WAAWsd,YAAYD,GAC3B1C,SAASuC,uBAAuB,iBAAiB,GAAGC,OAAOE,GAC3DxZ,OAAiB,SAAIxI,KAAK2gB,SAC1B3gB,KAAKoN,KAAK5D,UAAU0K,MAAMgO,IAAI5f,SAASR,KAAK,CAC1CwE,IAAO,OACP3D,UAAa,CACXI,KAAQ,OACRD,SAAY,MACZ4T,SAAY,CAAC,EAAG,EAAG,GACnByL,KAAQ,GACRlf,MAAQ,EACR4T,WAAc7W,KAAK2gB,YAGvB3gB,KAAK4W,KAAO5W,KAAKoN,KAAK5D,UAAU0K,MAAM0C,KAAKjU,UAC3C4F,GAAGyL,KAAKtG,OAAM,WAAM,OAAAnG,EAAKqP,KAAK8J,UAAQ,WAEpCnZ,EAAKmZ,OAASnZ,EAAKqP,KAAK8J,OACxBpX,QAAQC,IAAI,MAAOhC,EAAKmZ,WAI1BnY,GAAGyL,KAAKtG,OAAM,WAAM,OAAAnG,EAAKqP,KAAKC,cAAY,WACnCtP,EAAKqP,KAAKC,aACbtP,EAAKoZ,UAAW,MAIH,MAAb3gB,KAAKoN,OACTpN,KAAKoiB,cAAcpiB,KAAKoN,KAAK5D,UAAU0K,MAAMC,WAC7CnU,KAAKygB,SAAS3N,KAAK9S,KAAK6gB,WAAY7gB,KAAKoN,MAAM,SAAAgK,GAC7C9N,QAAQC,IAAI,OAAQ6N,GACpB7P,EAAKqP,KAAKC,YAAa,EACvBtP,EAAKoZ,UAAW,EAChBpZ,EAAKgW,aAAenG,EACZkI,SAAS+C,eAAe,SAC5BC,QAAQ,gBAIdtiB,KAAKygB,SAASzD,UAAUhd,KAAKoN,MAAM,SAACgK,EAAKZ,GACvCjP,EAAKqP,KAAKC,YAAa,EACvBtP,EAAKoZ,UAAW,EAChBpZ,EAAKgW,aAAenG,EACpB5O,OAAgB,QAAEgO,EAAQ+L,QAAQC,iBAItChC,EAAA/gB,UAAA2iB,cAAA,SAAc5I,GAAd,IAAAjS,EAAAvH,KACMwZ,EAAKlX,UAAYkX,EAAKlX,SAAS5B,OAAS,EAC1C8Y,EAAKlX,SAAS2C,SAAQ,SAAAC,GAChBA,EAAK5C,UAAY4C,EAAK5C,SAAS5B,OAAS,EAC1C6G,EAAK6a,cAAcld,GAEnBqC,EAAKkb,UAAUvd,MAInBlF,KAAKyiB,UAAUjJ,IAGnBgH,EAAA/gB,UAAAgjB,UAAA,SAAUvd,GAAV,IAAAqC,EAAAvH,KAEiC,WAA3BkF,EAAKvC,UAAUG,SAC8B,oCAA3CoC,EAAKvC,UAAUO,oBAAoBV,MAAyF,gCAA3C0C,EAAKvC,UAAUO,oBAAoBV,QACX,IAAvG0C,EAAKvC,UAAUO,oBAAoBgC,EAAKvC,UAAUO,oBAAoBV,MAAMC,IAAIub,QAAQ,UAC1Fhe,KAAK6gB,WAAW/e,KAAKoD,EAAKvC,WAU1B3C,KAAKygB,SAAS7K,eAAe1Q,EAAKvC,UAAW3C,KAAKoN,KAAM,SAAS,SAAAgK,GAE/D7P,EAAKlF,MAAQ6C,EAAKvC,UAAUO,oBAAoBgC,EAAKvC,UAAUO,oBAAoBV,MAAMmE,MACzFY,EAAKqP,KAAKC,YAAa,EACvBtP,EAAKoZ,UAAW,EAChBpZ,EAAKgW,aAAenG,MAIjBlS,EAAKvC,UAAUG,UAK5B0d,EAAA/gB,UAAAijB,MAAA,WAEE1iB,KAAK2gB,UAAW,GAElBH,EAAA/gB,UAAAkjB,OAAA,WACE,IAAIC,EAAmB5iB,KAAKoN,KAAKlD,IAAIkB,OAAO2K,YAAY8M,UAAU,aAAa,GAAG/L,SASrE9W,KAAKoN,KAAKlD,IAAIkB,OAapBqH,MAAMmQ,IAEfpC,EAAA/gB,UAAAqjB,OAAA,SAAOlhB,GACL,IAAI+G,EAAQ3I,KAAKoN,KACjB9D,QAAQC,IAAIvJ,KAAK6gB,YACe,QAA5Bjf,EAAEmhB,WAAWvR,MAAMkJ,MACrB9Y,EAAEmhB,WAAWvR,MAAMkJ,MAAQ,GAE3B9Y,EAAEmhB,WAAWvR,MAAMkJ,MAAQ,OAI7B/R,EAAMyM,UAAUC,YAAc1M,EAAMyM,UAAUC,WACzC1M,EAAMyM,UAAUC,YAKnBrV,KAAKoN,KAAKpE,YAAYC,QAAQC,SAAU,EACxClJ,KAAKoN,KAAKpE,YAAYC,QAAQE,aAAc,IAL5CnJ,KAAKoN,KAAKpE,YAAYC,QAAQC,SAAU,EACxClJ,KAAKoN,KAAKpE,YAAYC,QAAQE,aAAc,EAC5CnJ,KAAKygB,SAASjC,mBAOlBgC,EAAA/gB,UAAAqT,KAAA,WAAA,IAAAvL,EAAAvH,KACEA,KAAKygB,SAASvI,UAAUlY,KAAKoN,KAAK5D,UAAU0K,MAAMC,UAAU7R,SAAS,GAAGA,SAAS,GAAGK,UAAW3C,KAAKoN,MAAM,SAAAgK,GACxG9N,QAAQC,IAAI6N,GACZ7P,EAAKqP,KAAKC,YAAa,EACvBtP,EAAKoZ,UAAW,EAChBpZ,EAAKgW,aAAenG,MAKxBoJ,EAAA/gB,UAAAkI,SAAA,WACEN,EAAA5H,UAAMkI,SAAQhI,KAAAK,MACdA,KAAK+hB,QAEPvB,EAAA/gB,UAAA2T,gBAAA,WACE/L,EAAA5H,UAAM2T,gBAAezT,KAAAK,OAEvBwgB,EAAA/gB,UAAAqO,YAAA,WACEzG,EAAA5H,UAAMqO,YAAWnO,KAAAK,SA9Me,CAASgN,4DAAhCwT,EAAAA,yBAAuB3U,EAAAC,kBAAAoJ,+DAAvBsL,EAAAA,wBAAuBvU,UAAA,CAAA,CAAA,2BAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,GAAAC,KAAA,GAAAC,OAAA,CAAA,CAAA,QAAA,KAAA,EAAA,6BAAA,CAAA,UAAA,GAAA,EAAA,aAAA,SAAA,CAAA,EAAA,SAAA,EAAA,SAAA,WAAA,CAAA,EAAA,SAAA,CAAA,UAAA,GAAA,SAAA,QAAA,UAAA,UAAA,EAAA,QAAA,QAAA,EAAA,SAAA,CAAA,EAAA,SAAA,oBAAA,mBAAA,WAAA,CAAA,aAAA,IAAA,CAAA,EAAA,QAAA,WAAA,CAAA,YAAA,GAAA,EAAA,SAAA,CAAA,UAAA,GAAA,SAAA,UAAA,UAAA,WAAA,CAAA,EAAA,UAAA1E,SAAA,SAAA7C,EAAAC,YJfpCgD,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,EAAAA,IAAAA,GAAmDG,EAAAA,WAAAA,SAAAA,SAAAA,GAAAA,OAASnD,EAAA0W,OAAAhU,MAAgBQ,EAAAA,eAChFA,EAAAA,eAIAF,EAAAA,eAAAA,EAAAA,MAAAA,GAEIA,EAAAA,eAAAA,EAAAA,MAAAA,GACIA,EAAAA,eAAAA,EAAAA,QAAMC,EAAAA,OAAAA,GAASC,EAAAA,eAAOF,EAAAA,eAAAA,EAAAA,IAAAA,GAA4CG,EAAAA,WAAAA,SAAAA,WAAAA,OAASnD,EAAAsW,WAA+BpT,EAAAA,eAC1GF,EAAAA,eAAAA,EAAAA,WAAAA,EAAAA,GAEIA,EAAAA,eAAAA,EAAAA,SACI9C,EAAAA,WAAAA,GAAAA,GAAAA,EAAAA,EAAAA,KAAAA,GAIJgD,EAAAA,eACJA,EAAAA,eAEAF,EAAAA,eAAAA,GAAAA,SAAAA,GAAkBG,EAAAA,WAAAA,SAAAA,WAAAA,OAASnD,EAAAuW,YAAUtW,EAAAA,UAAAA,GAAAA,IAAAA,GAAkDgD,EAAAA,OAAAA,GAAAA,OAAGC,EAAAA,eAE9FA,EAAAA,eACAjD,EAAAA,UAAAA,GAAAA,MAAAA,IACJiD,EAAAA,4CAvBeI,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,aAAAA,0BAKVW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,SAAAA,CAAoB,UAAAlD,EAAAmX,gBAAA,EAAAC,GAAA7W,EAAAsU,OAAA,GAAA,GAAA,KAAAtU,EAAAsU,OAAA,GAAA,OAGXhR,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,OACgBD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,SAAAA,EAAAA,aAAAA,CAAuB,qBAAA,EAAvBA,CAAuB,oBAAA,EAAvBA,CAAuB,UAAA,MAGhBW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,s3CIExByR,EAAAA,wBAAuBrgB,EAAA,CAVnCoM,EAAAA,kBAAkB,CACjBC,IAAK,yBACL9E,KAAM,gCACN3E,KAAM,6BAOKyd,EAAAA,yFAAAA,EAAAA,wBAAuB,CAAA,MALnC/T,EAAAA,gBAAU,CACTC,SAAU,yBACVC,YAAa,4BACbC,UAAW,CAAC,uECADsW,EAAAA,wBAAuB,SAAA7b,GA+ClC,SAAA6b,IAAA,IAAA3b,EAEEF,EAAA1H,KAAAK,OAAOA,YA9CTuH,EAAA4b,OAAS,EAET5b,EAAA6b,OAAS,EAET7b,EAAA8b,OAAS,EAGT9b,EAAA+b,SAAW,CACTC,EAAG,CACDC,MAAO,MACPC,IAAK,OACLC,IAAK,MACLvD,YAAa,SAEfwD,EAAG,CACDH,MAAO,MACPC,IAAK,MACLC,IAAK,KACLvD,YAAa,SAEfD,EAAG,CACDsD,MAAO,MACPrD,YAAa,UAIjB5Y,EAAAqc,UAAY,CACVL,EAAG,CACDC,MAAO,KACPC,IAAK,YACLC,IAAK,WACLvD,YAAa,UAEfwD,EAAG,CACDH,MAAO,KACPC,IAAK,YACLC,IAAK,WACLvD,YAAa,WAKjB5Y,EAAArC,KAAYqC,EAAK+b,kBA7C0B1jB,EAAAsjB,EAAA7b,GAoD3C6b,EAAAzjB,UAAAkI,SAAA,WACEN,EAAA5H,UAAMkI,SAAQhI,KAAAK,MACdA,KAAK6jB,cAMAX,EAAAzb,YAAP,WACE,MAAO,CAAEC,KAAM,kCAGjBwb,EAAAzjB,UAAAokB,WAAA,WACE7jB,KAAKmjB,OAASnjB,KAAKqJ,OAAOe,UAC1BpK,KAAKojB,OAASpjB,KAAKqJ,OAAOkB,SAC1BvK,KAAKqjB,OAASrjB,KAAKqJ,OAAOmB,QAE5B0Y,EAAAzjB,UAAAqT,KAAA,SAAKsE,GAEH9N,QAAQC,IAAI6N,IAEd8L,EAAAzjB,UAAAqkB,OAAA,WACEtD,EAAAA,wBAAwB/gB,UAAUshB,OAAO,QAAQ,SAACC,EAAIxK,GACpDwK,EAAIsB,QAAQ,WACVhZ,QAAQC,IAAIf,OAAgB,cAKlC0a,EAAAzjB,UAAAskB,SAAA,WACE,IAAIrN,EAAW,KAEX1W,KAAKgkB,UACPhkB,KAAKoN,KAAKlD,IAAIkB,OAAO0L,SAASmN,OAAOjkB,KAAKgkB,UAG1CtN,EAAW3M,OAAOyB,WAAWC,YAAYzL,KAAKmjB,OAAQnjB,KAAKojB,OAAQpjB,KAAKqjB,QAK1ErjB,KAAKgkB,SAAW,IAAIja,OAAOma,OAAO,CAChCnS,GAAI,SACJ2E,SAAUA,EACV8D,MAAO,CACLK,UAAW,EACXH,MAAO3Q,OAAO4Q,MAAMwJ,MAAMC,UAAU,IACpCC,aAActa,OAAO4Q,MAAMwJ,MAAMC,UAAU,IAC3CE,aAAc,GAEhB/J,UAAW,CACTgK,MAAOvkB,KAAKwkB,UAAY,uBACxBC,iBAAkB1a,OAAO2a,iBAAiBC,OAC1CC,eAAgB7a,OAAO8a,eAAeC,OACtCC,MAAO,MAGX/kB,KAAKoN,KAAKlD,IAAIkB,OAAO0L,SAASd,IAAIhW,KAAKgkB,UAEvChkB,KAAKoN,KAAKlD,IAAIT,OAAO6B,QAAQ,CAC3BC,YAAamL,KAIjBwM,EAAAzjB,UAAAqO,YAAA,WACEzG,EAAA5H,UAAMqO,YAAWnO,KAAAK,SArHe,CAASgN,4DAAhCkW,EAAAA,mFAAAA,EAAAA,wBAAuBjX,UAAA,CAAA,CAAA,2BAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,GAAAC,KAAA,GAAAC,OAAA,CAAA,CAAA,EAAA,UAAA,QAAA,QAAA,SAAA,gBAAA,iBAAA,CAAA,EAAA,QAAA,CAAA,YAAA,GAAA,SAAA,UAAA,EAAA,SAAA,CAAA,EAAA,UAAA,SAAA,gBAAA,kBAAA1E,SAAA,SAAA7C,EAAAC,SJdpCgD,EAAAA,eAAAA,EAAAA,OACEA,EAAAA,eAAAA,EAAAA,QAAMC,EAAAA,OAAAA,GAAgBC,EAAAA,eACtBF,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,OAAAA,EAAAA,OAAAA,KAKJD,EAAAA,eACFA,EAAAA,eACAF,EAAAA,eAAAA,EAAAA,OACEA,EAAAA,eAAAA,EAAAA,QAAMC,EAAAA,OAAAA,GAAgBC,EAAAA,eACtBF,EAAAA,eAAAA,EAAAA,kBAAAA,GACIG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,OAAAA,EAAAA,OAAAA,KAKJD,EAAAA,eACFA,EAAAA,eACAhD,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,MAAAA,GAQA8C,EAAAA,eAAAA,EAAAA,OACEA,EAAAA,eAAAA,GAAAA,SAAAA,GAAmCG,EAAAA,WAAAA,SAAAA,WAAAA,OAASnD,EAAA2X,cAAY1U,EAAAA,OAAAA,GAAAA,MAAEC,EAAAA,eAC5DA,EAAAA,sBA7BQI,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,KAAAA,EAAAA,OAEFD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,OAAAA,CAAoB,QAAA3C,EAAAlH,KAAAqe,EAAAE,IAApB1U,CAAoB,QAAA3C,EAAAlH,KAAAqe,EAAAG,IAApB3U,CAAoB,SAAA,KAApBA,CAAoB,gBAAA3C,EAAAlH,KAAAqe,EAAApD,aAQlBzQ,EAAAA,UAAAA,GAAAC,EAAAA,kBAAAA,EAAAA,KAAAA,EAAAA,OAEFD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,OAAAA,CAAoB,QAAA3C,EAAAlH,KAAAye,EAAAF,IAApB1U,CAAoB,QAAA3C,EAAAlH,KAAAye,EAAAD,IAApB3U,CAAoB,SAAA,KAApBA,CAAoB,gBAAA3C,EAAAlH,KAAAye,EAAAxD,aAOpBzQ,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,EAAAA,KAAAA,wQINOmU,EAAAA,wBAAuB/iB,EAAA,CAVnCoM,EAAAA,kBAAkB,CACjBC,IAAK,yBACL9E,KAAM,gCACN3E,KAAM,6BAOKmgB,EAAAA,yFAAAA,EAAAA,wBAAuB,CAAA,MALnCzW,EAAAA,gBAAU,CACTC,SAAU,yBACVC,YAAa,4BACbC,UAAW,CAAC,8DCEDoY,EAAAA,0BAAyB,SAAA3d,GAGpC,SAAA2d,IAAA,IAAAzd,EACEF,EAAA1H,KAAAK,OAAOA,YAHTuH,EAAA0d,SAAmB,cAD0BrlB,EAAAolB,EAAA3d,GAMtC2d,EAAAvd,YAAP,WACE,MAAO,CAAE1E,KAAM,4BAA6B2E,KAAM,qCAEpDsd,EAAAvlB,UAAAylB,QAAA,WACEllB,KAAKmlB,SAAU,GAGjBH,EAAAvlB,UAAA2lB,OAAA,SAAO5jB,GACL8H,QAAQC,IAAI/H,IAGdwjB,EAAAvlB,UAAA4lB,eAAA,SAAe7iB,GAAf,IAAA+E,EAAAvH,KACc,MAARwC,EACFsF,QAAQC,UAAUW,MAAK,WAAQnB,EAAK6F,KAAKlD,IAAIkB,OAAOC,MAAMia,UAAU,MACnD,YAAR9iB,EACTsF,QAAQC,UAAUW,MAAK,WAAQnB,EAAK6F,KAAKlD,IAAIkB,OAAOC,MAAMka,oBAAoB,MAE9Ezd,QAAQC,UAAUW,MAAK,WAAQnB,EAAK6F,KAAKlD,IAAIkB,OAAOC,MAAMma,UAAU,MAEtExlB,KAAKilB,SAAWziB,KAzBkB,CAASwK,8DAAlCgY,EAAAA,uFAAAA,EAAAA,0BAAyB/Y,UAAA,CAAA,CAAA,8BAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,QAAA,OAAA,EAAA,6BAAA,CAAA,aAAA,GAAA,mBAAA,QAAA,EAAA,OAAA,EAAA,mBAAA,mBAAA,qBAAA,0BAAA,CAAA,EAAA,QAAA,CAAA,kBAAA,IAAA,CAAA,QAAA,KAAA,SAAA,KAAA,UAAA,YAAA,EAAA,IAAA,CAAA,IAAA,o5LAAA,CAAA,IAAA,4rBAAA,CAAA,IAAA,kzBAAA,CAAA,EAAA,aAAA,CAAA,EAAA,OAAA,EAAA,SAAA,CAAA,QAAA,KAAA,SAAA,KAAA,UAAA,YAAA,EAAA,KAAA1E,SAAA,SAAA7C,EAAAC,YJdtCgD,EAAAA,eAAAA,EAAAA,MAAAA,GACEA,EAAAA,eAAAA,EAAAA,MAAAA,GAAgBG,EAAAA,WAAAA,0BAAAA,SAAAA,GAAAA,OAAAA,EAAAA,QAAAA,KAEdjD,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,eAAAA,GAOAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,eAAAA,GAOAA,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,eAAAA,GAOFgD,EAAAA,eACFA,EAAAA,eAGAhD,EAAAA,WAAAA,EAAAA,GAAAA,GAAAA,EAAAA,cAAAA,KAAAA,EAAAA,EAAAA,qDA3BkBoD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,mBAAAA,EAAAA,QAAAA,CAA8B,mBAAA0W,EAA9B1W,CAA8B,qBAAA,SAE7BW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,MAAAA,EAAAA,UAOAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,MAAAA,EAAAA,UAOAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,OAAAA,YAAAA,EAAAA,0aIHNiW,EAAAA,0BAAyB7kB,EAAA,CAVrCoM,EAAAA,kBAAkB,CACjBC,IAAI,4BACJ9E,KAAK,mCACL3E,KAAK,+BAOMiiB,EAAAA,2FAAAA,EAAAA,0BAAyB,CAAA,MALrCvY,EAAAA,gBAAU,CACTC,SAAU,4BACVC,YAAa,+BACbC,UAAW,CAAC,iECOD8Y,EAAAA,yBAAwB,SAAAre,GAgDnC,SAAAqe,EACUC,GADV,IAAApe,EACoCF,EAAA1H,KAAAK,OAAOA,YAAjCuH,EAAAoe,IAAAA,EA9CVpe,EAAAqe,UAAoB,GACpBre,EAAAse,aAAuB,GACvBte,EAAAue,aAAe,EACfve,EAAAwe,SAAW,EACXxe,EAAAye,cAAgB,EAChBze,EAAA0e,KAAY,CACV7b,UAAW,KACXG,SAAU,KACVC,OAAQ,KACR0b,IAAK,KACLzb,QAAS,MACTC,MAAO,MACPC,KAAM,MACNwb,MAAO,IACPJ,SAAU,SACVK,kBAAmB,2BACnBC,gBACE,sEACFC,mBACE,0CACFC,iBAAkB,kBAClBC,gBACE,mCACFC,cAAe,iBACfC,qBAAsB,mBACtBC,mBAAoB,mBACpBC,0BACE,iDACFC,wBACE,sEACFC,iBACE,iEACFC,mBACE,gEACFC,mBAAoB,cAEtBzf,EAAA0f,WAAyB,YAvCmBrnB,EAAA8lB,EAAAre,GAkDrCqe,EAAAje,YAAP,WACE,MAAO,CAAE1E,KAAM,2BAA4B2E,KAAM,oCAGnDge,EAAAjmB,UAAAkI,SAAA,WAAA,IAAAJ,EAAAvH,KACEA,KAAKknB,OAASlnB,KAAKoN,KAAKlD,IAAImB,MAC5BrL,KAAKmnB,QAAUnnB,KAAKoN,KAAKlD,IAAIT,OAC7B,IAAMK,EAAKC,OAAO7C,KAAK8C,UACjBod,EAAqB,WACzB,IAAM3d,EAASlC,EAAK4f,QAEhBE,EAAIvd,EAAGL,EAAOU,qBAAqBC,WAAWC,QAAQ,GACtDlL,EAAI2K,EAAGL,EAAOU,qBAAqBI,UAAUF,QAAQ,GACrDc,EAAI1B,EAAOU,qBAAqBK,OAAOH,QAAQ,GAC/Ca,EAAIpB,EAAGL,EAAOgB,SAASJ,QAAQ,GAC/B7K,EAAIsK,EAAGL,EAAOiB,OAAOL,QAAQ,GAC7B1J,EAAImJ,EAAGL,EAAOkB,MAAMN,QAAQ,GAEhC9C,EAAKse,aAAkBte,EAAK0e,KAAK7b,UAAS,KAAKid,EAAC,KAAK9f,EAAK0e,KAAK1b,SAAQ,KAAKpL,EAAC,KAAKoI,EAAK0e,KAAKzb,OAAM,KAAKW,EAAI5D,EAAK0e,KAAKE,MAAK,IAAI5e,EAAK0e,KAAKxb,QAAO,KAAKS,EAAC,KAAK3D,EAAK0e,KAAKvb,MAAK,KAAKlL,EAAC,KAAK+H,EAAK0e,KAAKtb,KAAI,KAAKhK,EAAC,IACxM2mB,EAAAA,aAAaC,cAAchgB,EAAKoe,MAGlC3lB,KAAKinB,WAAa,GAClBjnB,KAAKinB,WAAWnlB,KACd9B,KAAKmnB,QAAQK,QAAQC,iBAAiBL,IAExCA,IAEApnB,KAAKknB,OAAOQ,0BAA2B,EACvC,IAAMC,EAAe3nB,KAAKknB,OAAOU,YAAYH,kBAAiB,WAC5DE,IACApgB,EAAK2f,OAAOW,sBAAsBrW,MAAMsW,WAAa,YAGvD9nB,KAAKinB,WAAWnlB,KACd9B,KAAKknB,OAAOU,YAAYH,kBAAiB,WACnClgB,EAAK2f,OAAOa,oBACdxgB,EAAKqe,UAAere,EAAK0e,KAAKC,IAAG,KAAK3e,EAAK2f,OAAOa,oBAAoBC,SAAShJ,UAAS,IAExFzX,EAAKqe,UAAY,OAIvB5lB,KAAKinB,WAAWnlB,KACdyG,GAAGyL,KAAKiU,MACNjoB,KACA,eACAA,KAAKoN,KAAK3D,OAAOye,UACjB,iBAGJloB,KAAKinB,WAAWnlB,KACdyG,GAAGyL,KAAKiU,MACNjoB,KACA,WACAA,KAAKoN,KAAK3D,OAAOye,UACjB,aAGJloB,KAAKinB,WAAWnlB,KACdyG,GAAGyL,KAAKmU,KACNnoB,KACA,gBACAA,KAAKoN,KAAK3D,OAAOye,UACjB,kBAIAloB,KAAKooB,KACPpoB,KAAKooB,KAAOpoB,KAAKooB,OAEjBpoB,KAAKooB,KAAO7f,GAAGyL,KAAKtG,OAClB,WAAM,OAAAnG,EAAK6F,KAAKpE,YAAYqf,wBAAwBhoB,UACpD,gBAGIiY,IADA/Q,EAAK6F,KAAKpE,YAAYqf,wBAAwBhoB,SAK5B,iBADhBkH,EAAK6F,KAAKpE,YAAYqf,wBAAwBhoB,OAC3CyC,UAKa,cADhByE,EAAK6F,KAAKpE,YAAYqf,wBAAwBhoB,OAC3CyC,UAIHyE,EAAK6F,KAAKpE,YAAYqf,wBAAwBhoB,OAC3CyC,aAUT9C,KAAKsoB,KACPtoB,KAAKsoB,KAAOtoB,KAAKsoB,OAEjBtoB,KAAKsoB,KAAO/f,GAAGyL,KAAKtG,OAClB,WAAM,OAAAnG,EAAK6F,KAAKpE,YAAYuf,uBAAuBloB,UACnD,gBAGIiY,IADA/Q,EAAK6F,KAAKpE,YAAYuf,uBAAuBloB,SAK3B,iBADhBkH,EAAK6F,KAAKpE,YAAYuf,uBAAuBloB,OAC1CyC,UAKa,cADhByE,EAAK6F,KAAKpE,YAAYuf,uBAAuBloB,OAC1CyC,UAIHyE,EAAK6F,KAAKpE,YAAYuf,uBAAuBloB,OAC1CyC,aAUT9C,KAAKwoB,KACPxoB,KAAKwoB,KAAOxoB,KAAKwoB,OAEjBxoB,KAAKwoB,KAAOjgB,GAAGyL,KAAKtG,OAClB,WAAM,OAAAnG,EAAK6F,KAAKpE,YAAYyf,uBAAuBpoB,UACnD,WAEIkH,EAAK6F,KAAKpE,YAAYyf,uBAAuBpoB,UAQjDL,KAAK0oB,KACP1oB,KAAK0oB,KAAO1oB,KAAK0oB,OAEjB1oB,KAAK0oB,KAAOngB,GAAGyL,KAAKtG,OAClB,WACE,OAAAnG,EAAK6F,KAAKpE,YAAY2f,gCAAgCtoB,UACxD,WAEIkH,EAAK6F,KAAKpE,YAAY2f,gCACnBtoB,UAOPL,KAAK4oB,KACP5oB,KAAK4oB,KAAO5oB,KAAK4oB,OAEjB5oB,KAAK4oB,KAAOrgB,GAAGyL,KAAKtG,OAClB,WAAM,OAAAnG,EAAK6F,KAAKpE,YAAY6f,sBAAsBxoB,UAClD,WAEIkH,EAAK6F,KAAKpE,YAAY6f,sBAAsBxoB,UAQhDL,KAAK8oB,KACP9oB,KAAK8oB,KAAO9oB,KAAK0oB,OAEjB1oB,KAAK8oB,KAAOvgB,GAAGyL,KAAKtG,OAClB,WAAM,OAAAnG,EAAK6F,KAAKpE,YAAY+f,qBAAqB1oB,UACjD,WAEIkH,EAAK6F,KAAKpE,YAAY+f,qBAAqB1oB,UAQ/CL,KAAKgpB,KACPhpB,KAAKgpB,KAAOhpB,KAAK0oB,OAEjB1oB,KAAKgpB,KAAOzgB,GAAGyL,KAAKtG,OAClB,WAAM,OAAAnG,EAAK6F,KAAKpE,YAAYigB,uBAAuB5oB,UACnD,WAEIkH,EAAK6F,KAAKpE,YAAYigB,uBAAuB5oB,UAQjDL,KAAKkpB,KACPlpB,KAAKkpB,KAAOlpB,KAAK0oB,OAEjB1oB,KAAKkpB,KAAO3gB,GAAGyL,KAAKtG,OAClB,WAAM,OAAAnG,EAAK6F,KAAKpE,YAAYmgB,uBAAuB9oB,UACnD,WAEIkH,EAAK6F,KAAKpE,YAAYmgB,uBAAuB9oB,WAUvDqlB,EAAAjmB,UAAAqO,YAAA,WACEzG,EAAA5H,UAAMqO,YAAWnO,KAAAK,MACjBA,KAAKinB,WAAWhiB,SAAQ,SAAA/F,GAAK,OAAAA,OAC7Bc,KAAKinB,WAAWvmB,OAAS,EACzBV,KAAKooB,KAAOpoB,KAAKooB,MAAQpoB,KAAKooB,OAC9BpoB,KAAKsoB,KAAOtoB,KAAKsoB,MAAQtoB,KAAKsoB,OAC9BtoB,KAAKwoB,KAAOxoB,KAAKwoB,MAAQxoB,KAAKwoB,OAC9BxoB,KAAK0oB,KAAO1oB,KAAK0oB,MAAQ1oB,KAAK0oB,OAC9B1oB,KAAK4oB,KAAO5oB,KAAK4oB,MAAQ5oB,KAAK4oB,OAC9B5oB,KAAK8oB,KAAO9oB,KAAK8oB,MAAQ9oB,KAAK8oB,OAC9B9oB,KAAKgpB,KAAOhpB,KAAKgpB,MAAQhpB,KAAKgpB,OAC9BhpB,KAAKkpB,KAAOlpB,KAAKkpB,MAAQlpB,KAAKkpB,QAEhCxD,EAAAjmB,UAAA2pB,eAAA,WACE,MAAO,IAAIppB,KAAKimB,KAAKF,SAAQ,KAAK/lB,KAAK+lB,SAAS1b,QAC9C,GACD,UAAUrK,KAAK8lB,aAAazb,QAAQ,GAAE,MAAMrK,KAAKgmB,cAAc3b,QAC9D,GACD,OArSgC,CAAS2C,6DAAjC0Y,EAAAA,0BAAwB7Z,EAAAC,kBAAAD,EAAAwd,+EAAxB3D,EAAAA,yBAAwBzZ,UAAA,CAAA,CAAA,6BAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,EAAA,gBAAA1E,SAAA,SAAA7C,EAAAC,SALxBgD,EAAAA,eAAAA,EAAAA,MAAAA,GAAyBC,EAAAA,OAAAA,GAAuDC,EAAAA,sBAAvDI,EAAAA,UAAAA,GAAA4Z,EAAAA,mBAAAA,GAAAA,EAAAA,UAAAA,IAAAA,EAAAA,aAAAA,IAAAA,EAAAA,iBAAAA,4GAKzB5D,EAAAA,yBAAwBvlB,EAAA,CAZpCoM,EAAAA,kBAAkB,CACjBC,IAAK,2BACL9E,KAAM,kCACN3E,KAAM,8BASK2iB,EAAAA,0FAAAA,EAAAA,yBAAwB,CAAA,MAPpCjZ,EAAAA,gBAAU,CACTC,SAAU,2BACVsC,SAAU,yFACV8C,OAAQ,CACN,oICFSyX,EAAAA,oBAAmB,SAAAliB,GAE9B,SAAAkiB,WACEliB,EAAA1H,KAAAK,OAAOA,YAH8BJ,EAAA2pB,EAAAliB,GAKhCkiB,EAAA9hB,YAAP,WACE,MAAO,CAAE1E,KAAM,sBAAuB2E,KAAM,8BAE9C6hB,EAAA9pB,UAAAkI,SAAA,aAGA4hB,EAAA9pB,UAAA2T,gBAAA,WACGkM,SAASuC,uBAAuB,qCAAqC,GAAU,MAAE2H,IAAMlK,SAASuC,uBAAuB,oCAAoC,GAAiB,aAAI,MAEnL0H,EAAA9pB,UAAAgqB,OAAA,WACE,IAAMre,EAASpL,KAAKoN,KAAKlD,IAAIkB,OAC7BpL,KAAKmN,gBAAgB1D,OAAOggB,OAAOre,EAAO3B,OAAOU,qBAAqBK,OAAStD,KAAKwiB,IAAIxiB,KAAKyiB,IAAIve,EAAO3B,OAAOiB,QAAU,KAE3H6e,EAAA9pB,UAAAmqB,QAAA,WACE,IAAMxe,EAASpL,KAAKoN,KAAKlD,IAAIkB,OAC7BA,EAAO3B,OAAOmgB,QAAQxe,EAAO3B,OAAOU,qBAAqBK,OAAStD,KAAKwiB,IAAIxiB,KAAKyiB,IAAIve,EAAO3B,OAAOiB,QAAU,OApBhF,CAASsC,wDAA5Buc,EAAAA,2EAAAA,EAAAA,oBAAmBtd,UAAA,CAAA,CAAA,uBAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,EAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,QAAA,KAAA,EAAA,4BAAA,SAAA,EAAA,SAAA,CAAA,UAAA,GAAA,SAAA,OAAA,UAAA,WAAA,CAAA,QAAA,KAAA,EAAA,4BAAA,UAAA,EAAA,SAAA,CAAA,UAAA,GAAA,SAAA,QAAA,UAAA,YAAA1E,SAAA,SAAA7C,EAAAC,SCdhCgD,EAAAA,eAAAA,EAAAA,MAAAA,GAA8CG,EAAAA,WAAAA,SAAAA,WAAAA,OAASnD,EAAAqd,YACrDpd,EAAAA,UAAAA,EAAAA,IAAAA,GACFiD,EAAAA,eACAF,EAAAA,eAAAA,EAAAA,MAAAA,GAA+CG,EAAAA,WAAAA,SAAAA,WAAAA,OAASnD,EAAAwd,aACtDvd,EAAAA,UAAAA,EAAAA,IAAAA,GACFiD,EAAAA,0JDSaia,EAAAA,oBAAmBppB,EAAA,CAV/BoM,EAAAA,kBAAkB,CACjBC,IAAK,qBACL9E,KAAM,4BACN3E,KAAM,yBAOKwmB,EAAAA,qFAAAA,EAAAA,oBAAmB,CAAA,MAL/B9c,EAAAA,gBAAU,CACTC,SAAU,qBACVC,YAAa,wBACbC,UAAW,CAAC,0DEKDid,EAAAA,8BAA6B,SAAAxiB,GAuBxC,SAAAwiB,EAAoBnZ,GAApB,IAAAnJ,EACEF,EAAA1H,KAAAK,OAAOA,YADWuH,EAAAmJ,qBAAAA,EArBpBnJ,EAAAuJ,WAAkB,GAElBvJ,EAAAuiB,YAAc,CAAC,CACbnnB,UAAa,CACXonB,IAAO,iGACPjnB,SAAY,UACZwB,SAAY,uCACZvB,KAAQ,YACRS,oBAAuB,CACrBhB,KAAQ,4BACRiB,6BAAgC,GAChCC,0BAA6B,CAC3BjB,IAAO,oEACPkB,sBAAwB,EACxBC,kBAAoB,GAEtBomB,qCAAwC,OAI9CziB,EAAA0iB,YAAc,0GAtBmCrqB,EAAAiqB,EAAAxiB,GA0BjDwiB,EAAApqB,UAAAwR,WAAA,SAAWD,GACThR,KAAKkR,cAAgBF,EAAK7L,MAE5B0kB,EAAApqB,UAAA0R,YAAA,SAAYrC,EAAoBsC,GAC9BpR,KAAK0Q,qBAAqBxQ,OAAO4O,EAAQsC,IAK3CyY,EAAApqB,UAAAwT,gBAAA,SAAgBzE,GAEQ,UAAlBA,EAAI0E,WAA0B1E,EAAIrJ,OAGlCqJ,EAAIrJ,KAAKI,UAGXzB,EAAekC,iBAAiBwI,EAAIrJ,MAAMlC,MAAO,EAGjDa,EAAekC,iBAAiBwI,EAAIrJ,MAAMlC,MAAO,IAGrD4mB,EAAApqB,UAAA0T,aAAA,SAAarE,KAGb+a,EAAApqB,UAAAkI,SAAA,WAAA,IAAAJ,EAAAvH,KACEqH,EAAA5H,UAAMkI,SAAQhI,KAAAK,MACJuI,GAAGyL,KAAKtG,OAAM,WAAM,OAAA1L,EAAIuF,EAAK6F,KAAK5D,UAAU0K,MAAMgW,QAAQ5nB,aAAW,WAE7EiF,EAAK4iB,mBAGTN,EAAApqB,UAAA0qB,aAAA,WAAA,IAAA5iB,EAAAvH,KACE+S,YAAW,WACT,IAAMlO,EAAcf,EAAeC,sBAAsBwD,EAAK6F,KAAK5D,UAAU0K,MAAMgW,SAEnF3iB,EAAKuJ,WAAU9O,EAAO6C,EAAY,GAAc,WAChD0C,EAAK6F,KAAK5D,UAAU0K,MAAMgW,QAAQ5nB,SAAS,GAAGK,UAAUynB,YAAY,IACnE,MAGLP,EAAApqB,UAAA4qB,YAAA,SAAYnlB,GACVoE,QAAQC,IAAIzF,EAAe2C,cAAcvB,IACzC,IAAIC,EAAKrB,EAAe2C,cAAcvB,GACtCC,EAAKxC,UAAUM,MAAK,EACNjD,KAAKoN,KAEb5D,UAAU0K,MAAMgW,QAAQ5nB,SAAS,GAAK6C,GAE9C0kB,EAAApqB,UAAA6qB,cAAA,SAAcplB,GACZlF,KAAKoN,KAAK5D,UAAU0K,MAAMgW,QAAQ5nB,SAASR,KAAKoD,IAElD2kB,EAAApqB,UAAA2T,gBAAA,WACE/L,EAAA5H,UAAM2T,gBAAezT,KAAAK,OAEvB6pB,EAAApqB,UAAAqO,YAAA,WACEzG,EAAA5H,UAAMqO,YAAWnO,KAAAK,SAnFqB,CAASgN,kEAAtC6c,EAAAA,+BAA6Bhe,EAAAC,kBAAAuH,EAAAC,uFAA7BuW,EAAAA,8BAA6B5d,UAAA,CAAA,CAAA,kCAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,GAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,UAAA,MAAA,CAAA,EAAA,QAAA,EAAA,QAAA,WAAA,CAAA,UAAA,MAAA,CAAA,cAAA,GAAA,cAAA,GAAA,EAAA,SAAA,iBAAA,UAAA,oBAAA,CAAA,iBAAA,IAAA,CAAA,EAAA,SAAA,CAAA,EAAA,WAAA,CAAA,EAAA,OAAA,CAAA,EAAA,QAAA,OAAA,cAAA,SAAA,gBAAA,WAAA,WAAA,SAAA,aAAA,OAAA,EAAA,SAAA,CAAA,EAAA,eAAA,CAAA,EAAA,QAAA,CAAA,EAAA,gBAAA1E,SAAA,SAAA7C,EAAAC,YPjB1CgD,EAAAA,eAAAA,EAAAA,aACIA,EAAAA,eAAAA,EAAAA,SAAAA,GACIA,EAAAA,eAAAA,EAAAA,MACI9C,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,KAAAA,GAOJgD,EAAAA,eACJA,EAAAA,eAYJA,EAAAA,eACAF,EAAAA,eAAAA,EAAAA,aAYIA,EAAAA,eAAAA,EAAAA,SAAAA,GACMA,EAAAA,eAAAA,EAAAA,MACE9C,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,KAAAA,GAOJgD,EAAAA,eACJA,EAAAA,eACJA,EAAAA,eACAjD,EAAAA,UAAAA,EAAAA,cACA+C,EAAAA,eAAAA,EAAAA,UAAAA,GAIEG,EAAAA,WAAAA,WAAAA,SAAAA,GAAAA,OAAWnD,EAAA6E,WAAAnC,KAAXS,CAA8B,oBAAA,SAAAT,GAAA,OACV1C,EAAA6G,gBAAAnE,MACcQ,EAAAA,eACpChD,EAAAA,WAAAA,GAAAA,GAAAA,EAAAA,EAAAA,cAAAA,KAAAA,EAAAA,EAAAA,sDArDiCoD,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,OAAAA,UAmCAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,OAAAA,SAc/BW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,SAAAA,EAAAA,WAAAA,CAAqB,iBAAAwb,s3BOnCVV,EAAAA,8BAA6B1pB,EAAA,CAVzCoM,EAAAA,kBAAkB,CACjBC,IAAK,gCACL9E,KAAM,uCACN3E,KAAM,mCAOK8mB,EAAAA,+FAAAA,EAAAA,8BAA6B,CAAA,MALzCpd,EAAAA,gBAAU,CACTC,SAAU,gCACVC,YAAa,mCACbC,UAAW,CAAC,kGCXd,IAAA4d,GAAA,WAEI,SAAAA,YAQOA,EAAAC,YAAP,SAAmB9nB,EAAWmD,EAAOuM,EAAQwD,GAA7C,IAAAtO,EAAAvH,KACmCsY,MAA3BtY,KAAK0qB,qBACL1qB,KAAK0qB,mBAAqB,IAAI3gB,OAAO+L,iBAAiB,sBACtDtN,OAAc,MAAE0B,IAAIkB,OAAO2K,YAAYC,IAAIhW,KAAK0qB,qBAEpD1qB,KAAK0qB,mBAAmB5T,SAASC,YACjC,IAAI3L,EAAS5C,OAAc,MAAE0B,IAAIkB,OAC7B5I,EAAOG,EAAUO,oBAAoBV,KACrCC,EAAME,EAAUO,oBAAoBV,GAAMC,IAC1C2V,EAAa,GACyB,oCAAtCzV,EAAUO,oBAAoBV,KAC9B4V,EAAa3V,EAAI4V,MAAM,aAAa,GAAK,aAAavS,EAAK,qWACd,kCAAtCnD,EAAUO,oBAAoBV,OACrC4V,EAAa3V,EAAI4V,MAAM,UAAU,GAAK,cAAgB5V,EAAI4V,MAAM,UAAU,GAAGA,MAAM,aAAa,GAAK,aAAavS,EAAK,oWACvHwD,QAAQC,IAAI6O,IAEhBuS,EAAAA,QAAMlV,KAAK2C,EACPwS,EAAAA,QAAGC,UAAU,CACTC,UAAU,IACVC,MAAO1Y,EACPtE,EAAG,UAEP,CACIid,QAAS,CACLC,eAAgB,uCAErBviB,MAAK,SAAA0O,GACJ9N,QAAQC,IAAI6N,EAAIpG,KAAK/C,UACrB,IAAIA,EAAWmJ,EAAIpG,KAAK/C,SACK,qBAAzBmJ,EAAIpG,KAAKka,eACTjd,EAAShJ,SAAQ,SAAAkmB,GACb5jB,EAAKmjB,mBAAmB5T,SAASd,IAC7B,CACIU,SAAU3M,OAAOyB,WAAWC,YAAY0f,EAAQzR,SAASzO,EAAGkgB,EAAQzR,SAASxO,GAC7EsP,MAAO,CACHE,MAAO3Q,OAAO4Q,MAAMC,KACpBC,UAAW,GACXwJ,aAActa,OAAO4Q,MAAMyQ,OAC3B9G,aAAc,EACd+G,gBAAiBthB,OAAOuhB,gBAAgBC,gBACxCC,gBAAiB,IAAIzhB,OAAO0hB,cAAc,KAAM,EAAG,IAAO,UAK1ErgB,EAAOqH,MAAMlL,EAAKmjB,qBAEO,uBAAzBtT,EAAIpG,KAAKka,eAETjd,EAAShJ,SAAQ,SAAAkmB,GACb,IAAIO,EAAY,GAChBP,EAAQzR,SAASiS,MAAM,GAAG1mB,SAAQ,SAAA6F,GAC9B4gB,EAAU5pB,KAAKgJ,EAAI,GAAIA,EAAI,OAE/BvD,EAAKmjB,mBAAmB5T,SAASd,IAAI,CACjC+E,SAAU,CACN2Q,UAAW3hB,OAAOyB,WAAWogB,iBAAiBF,GAC9CjX,MAAO,GACPuG,SAAU,IAAIjR,OAAOkR,6BAA6B,CAC9CC,UAAW,GACXR,MAAO3Q,OAAO4Q,MAAMQ,aAKpC/P,EAAOqH,MAAMlL,EAAKmjB,qBAEO,wBAAzBtT,EAAIpG,KAAKka,eAETjd,EAAShJ,SAAQ,SAAAkmB,GACb,IAAIO,EAAY,GAChBP,EAAQzR,SAASmS,MAAM,GAAG5mB,SAAQ,SAAA6F,GAC9B4gB,EAAU5pB,KAAKgJ,EAAI,GAAIA,EAAI,OAE/BvD,EAAKmjB,mBAAmB5T,SAASd,IAAI,CACjC+E,SAAU,CACN2Q,UAAW3hB,OAAOyB,WAAWogB,iBAAiBF,GAC9CjX,MAAO,GACPuG,SAAU,IAAIjR,OAAOkR,6BAA6B,CAC9CC,UAAW,GACXR,MAAO3Q,OAAO4Q,MAAMQ,aAKpC/P,EAAOqH,MAAMlL,EAAKmjB,yBAS3BF,EAAAsB,eAAP,SAAsBnpB,EAAW0P,GAAjC,IAAA9K,EAAAvH,KACmCsY,MAA3BtY,KAAK0qB,qBACL1qB,KAAK0qB,mBAAqB,IAAI3gB,OAAO+L,iBAAiB,sBACtDtN,OAAc,MAAE0B,IAAIkB,OAAO2K,YAAYC,IAAIhW,KAAK0qB,qBAEpD1qB,KAAK0qB,mBAAmB5T,SAASC,YACjC,IAAI3L,EAAS5C,OAAc,MAAE0B,IAAIkB,OAC7B5I,EAAOG,EAAUO,oBAAoBV,KACrCmE,EAAQhE,EAAUO,oBAAoBV,GAAMmE,MAC5ClE,EAAME,EAAUO,oBAAoBV,GAAMC,IAC1C2V,EAAa,GACjB,GAA0C,oCAAtCzV,EAAUO,oBAAoBV,KAA4C,CAE1E,IAAIupB,EAASplB,EAAM0R,MAAM,KAAK,GAC9BD,EAAa3V,EAAI4V,MAAM,aAAa,GAAK,aAAa0T,EAAM,4FAA4FplB,EAAK,eAAe0L,OACzK,GAA0C,kCAAtC1P,EAAUO,oBAAoBV,KAA0C,CAC3EupB,EAAStpB,EAAI4V,MAAM,QAAQ,GAAGA,MAAM,cAAc,GACtDD,EAAa3V,EAAI4V,MAAM,OAAO,GAAK,2FAA2F0T,EAAM,IAAIplB,EAAK,eAAe0L,EAEhK/I,QAAQC,IAAI6O,GACZuS,EAAAA,QAAMlV,KAAK2C,GAAY1P,MAAK,SAAA0O,GACxB9N,QAAQC,IAAI6N,GACZrN,OAAO2N,kBAAkBC,KAAKP,EAAIpG,MAAMtI,MAAK,SAAAkP,GACzCA,EAAWd,SAASe,OAAO5S,SAAQ,SAAA6S,GAM/BvQ,EAAKmjB,mBAAmB5T,SAASd,IAAI8B,MAEzC1M,EAAOqH,MAAMlL,EAAKmjB,2BAOvBF,EAAAwB,eAAP,WACIxjB,OAAc,MAAE0B,IAAIkB,OAAO2K,YAAY8M,UAAU,sBAAsB,GAAG/L,SAASC,eA/I3F,4BCCgB1K,EAAAA,UAAAA,EAAAA,YAAAA,2BAA2C0C,EAAAA,WAAAA,UAAAA,EAAAA,KAAAA,CAAqB,UAAAkd,EAAAtpB,qCAQhE0J,EAAAA,UAAAA,EAAAA,YAAAA,2BAA0C0C,EAAAA,WAAAA,UAAAA,EAAAA,KAAAA,CAAqB,UAAAS,EAAA1J,QCIlEomB,EAAAA,sBAAqB,SAAA7kB,GAahC,SAAA6kB,EAAoBC,GAApB,IAAA5kB,EACEF,EAAA1H,KAAAK,OAAOA,YADWuH,EAAA4kB,GAAAA,EAXpB5kB,EAAA6kB,WAAa,GACb7kB,EAAA8kB,UAAY,GAEZ9kB,EAAA+kB,aAAwD,GACxD/kB,EAAAglB,YAAa,WAN4B3sB,EAAAssB,EAAA7kB,GASzC6kB,EAAAzsB,UAAA+sB,UAAA,WACExsB,KAAKysB,aAAaC,QAClBlC,GAAMwB,kBAKDE,EAAAzkB,YAAP,WACE,MAAO,CAAE1E,KAAM,mCAAoC2E,KAAM,mCAE3DwkB,EAAAzsB,UAAAktB,OAAA,WACErjB,QAAQC,IAAIvJ,KAAKysB,aAAajrB,OAC9B,IAAImB,EAAY3C,KAAKysB,aAAajrB,MAAMuqB,OACpCvpB,EAAOG,EAAUO,oBAAoBV,KACrCC,EAAME,EAAUO,oBAAoBV,GAAMC,IAC9C,IAA+B,IAA3BA,EAAIub,QAAQ,UAAkB,CAEhC,IAAIlY,EAAQ9F,KAAKysB,aAAajrB,MAAMmF,MAChC0L,EAASrS,KAAKysB,aAAajrB,MAAMupB,MACrCP,GAAMC,YAAY9nB,EAAWmD,EAAOuM,GAAQ,SAAA+E,OAE9C,IAAkC,IAA9B3U,EAAIub,QAAQ,aAAqB,CACnC,IAAIxQ,EAAQxN,KAAKysB,aAAajrB,MAAMupB,MACpCP,GAAMsB,eAAenpB,EAAW6K,KAIpC0e,EAAAzsB,UAAAkjB,OAAA,aAGAuJ,EAAAzsB,UAAAqT,KAAA,aAGAoZ,EAAAzsB,UAAAmtB,aAAA,SAAaprB,GAAb,IAAA+F,EAAAvH,KACEA,KAAKqsB,UAAY,GACjB,IAAI7pB,EAAOhB,EAAM0B,oBAAoBV,KACjCC,EAAMjB,EAAM0B,oBAAoBV,GAAMC,IACtC2V,EAAa,GAkBjB,IAjB+B,IAA3B3V,EAAIub,QAAQ,YACdhe,KAAKysB,aAAaI,SAASC,SAASC,SAAS,UACP,oCAAlCvrB,EAAM0B,oBAAoBV,KAC5B4V,EAAa3V,EAAI4V,MAAM,aAAa,GAAK,2BACE,kCAAlC7W,EAAM0B,oBAAoBV,OACnC4V,EAAa3V,EAAI4V,MAAM,UAAU,GAAK,cAAgB5V,EAAI4V,MAAM,UAAU,GAAGA,MAAM,aAAa,GAAK,4BAGvGsS,EAAAA,QAAMhV,IAAIyC,GAAY1P,MAAK,SAAA0O,GACzBA,EAAIpG,KAAK5K,OAAOnB,SAAQ,SAAAC,GACtBqC,EAAK8kB,UAAUvqB,KAAK,CAClBiB,KAAMmC,EAAKnC,KACX+C,MAAOZ,EAAK6M,aAKc,IAA9BtP,EAAIub,QAAQ,aAEd,GADAhe,KAAKysB,aAAaI,SAASC,SAASC,SAAS,aACP,oCAAlCvrB,EAAM0B,oBAAoBV,KAA4C,CACxE,IAAImE,EAAQnF,EAAM0B,oBAAoBV,GAAMmE,MAC5C3G,KAAKqsB,UAAUvqB,KAAK,CAClBiB,KAAM4D,EACNb,MAAO,SAGJ,GAAsC,kCAAlCtE,EAAM0B,oBAAoBV,KAA0C,CACzEmE,EAAQnF,EAAM0B,oBAAoBV,GAAMmE,MAC5C3G,KAAKqsB,UAAUvqB,KAAK,CAClBiB,KAAM4D,EACNb,MAAO,MAQfomB,EAAAzsB,UAAAutB,YAAA,SAAYxrB,KAMZ0qB,EAAAzsB,UAAAwtB,aAAA,SAAaC,GAAb,IAAA3lB,EAAAvH,KACEktB,EAAMjoB,SAAQ,SAAAC,GACZ,GAAIA,EAAK5C,SACPiF,EAAK0lB,aAAa/nB,EAAK5C,cAClB,CACL,GAAgC,YAA5B4C,EAAKvC,UAAUG,SAAwB,OAC3CyE,EAAK6kB,WAAWtqB,KAAK,CACnBiB,KAAMmC,EAAKvC,UAAUI,KACrBJ,UAAWuC,EAAKvC,iBAKxBupB,EAAAzsB,UAAAkI,SAAA,WACEN,EAAA5H,UAAMkI,SAAQhI,KAAAK,MACdsJ,QAAQC,IAAIqhB,EAAAA,SACZ5qB,KAAKitB,aAAajtB,KAAKoN,KAAK5D,UAAU0K,MAAMC,UAAU7R,UAsBtDtC,KAAKysB,aAAezsB,KAAKmsB,GAAGe,MAAM,CAChCnB,OAAQ,CAAC,MACTplB,MAAO,CAAC,MACRmmB,SAAU,CAAC,MACX/B,MAAO,CAAC,SAGZmB,EAAAzsB,UAAA2T,gBAAA,WACE/L,EAAA5H,UAAM2T,gBAAezT,KAAAK,OAEvBksB,EAAAzsB,UAAAqO,YAAA,WACEzG,EAAA5H,UAAMqO,YAAWnO,KAAAK,SA5Ia,CAASgN,0DAA9Bkf,EAAAA,uBAAqBrgB,EAAAC,kBAAAqhB,EAAAC,sEAArBlB,EAAAA,sBAAqBjgB,UAAA,CAAA,CAAA,yBAAAgC,SAAA,CAAApC,EAAAqC,4BAAAsF,MAAA,GAAAC,KAAA,EAAAC,OAAA,CAAA,CAAA,UAAA,GAAA,WAAA,aAAA,EAAA,2BAAA,EAAA,aAAA,CAAA,eAAA,GAAA,eAAA,GAAA,gBAAA,kBAAA,kBAAA,SAAA,EAAA,iBAAA,CAAA,EAAA,UAAA,UAAA,EAAA,QAAA,WAAA,CAAA,eAAA,GAAA,eAAA,GAAA,gBAAA,iBAAA,kBAAA,QAAA,EAAA,iBAAA,CAAA,EAAA,UAAA,CAAA,WAAA,GAAA,cAAA,cAAA,kBAAA,WAAA,EAAA,YAAA,CAAA,WAAA,GAAA,cAAA,cAAA,kBAAA,SAAA,CAAA,SAAA,IAAA,CAAA,SAAA,GAAA,EAAA,cAAA,EAAA,UAAA,CAAA,YAAA,GAAA,EAAA,SAAA,SAAA,CAAA,YAAA,GAAA,EAAA,SAAA,CAAA,EAAA,UAAA,YAAA1E,SAAA,SAAA7C,EAAAC,SDjBlCgD,EAAAA,eAAAA,EAAAA,OAAAA,GACIA,EAAAA,eAAAA,EAAAA,gBACIA,EAAAA,eAAAA,EAAAA,iBAAeC,EAAAA,OAAAA,EAAAA,MAAEC,EAAAA,eACjBF,EAAAA,eAAAA,EAAAA,mBACIA,EAAAA,eAAAA,EAAAA,YAAAA,GAA8FG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,OAAiBnD,EAAAwgB,aAAA9d,MAC3GxC,EAAAA,WAAAA,EAAAA,GAAAA,EAAAA,EAAAA,YAAAA,GACFgD,EAAAA,eACNA,EAAAA,eACJA,EAAAA,eACAF,EAAAA,eAAAA,EAAAA,gBACIA,EAAAA,eAAAA,EAAAA,iBAAeC,EAAAA,OAAAA,EAAAA,MAAEC,EAAAA,eACjBF,EAAAA,eAAAA,GAAAA,mBACIA,EAAAA,eAAAA,GAAAA,YAAAA,GAA4FG,EAAAA,WAAAA,iBAAAA,SAAAA,GAAAA,OAAiBnD,EAAA4gB,YAAAle,MACzGxC,EAAAA,WAAAA,GAAAA,GAAAA,EAAAA,EAAAA,YAAAA,GACFgD,EAAAA,eACNA,EAAAA,eACJA,EAAAA,eACAF,EAAAA,eAAAA,GAAAA,eAAAA,GACIA,EAAAA,eAAAA,GAAAA,iBAAeC,EAAAA,OAAAA,GAAAA,QAAIC,EAAAA,eACnBF,EAAAA,eAAAA,GAAAA,mBACI/C,EAAAA,UAAAA,GAAAA,QAAAA,GACJiD,EAAAA,eACJA,EAAAA,eACAF,EAAAA,eAAAA,GAAAA,gBACIA,EAAAA,eAAAA,GAAAA,iBAAeC,EAAAA,OAAAA,GAAAA,MAAEC,EAAAA,eACjBF,EAAAA,eAAAA,GAAAA,mBACI/C,EAAAA,UAAAA,GAAAA,QAAAA,GACJiD,EAAAA,eACJA,EAAAA,eACAF,EAAAA,eAAAA,GAAAA,MAAAA,GACIA,EAAAA,eAAAA,GAAAA,MAAAA,GACIA,EAAAA,eAAAA,GAAAA,SAAAA,GAAuCG,EAAAA,WAAAA,SAAAA,WAAAA,OAASnD,EAAAugB,YAAUtd,EAAAA,OAAAA,GAAAA,UAAMC,EAAAA,eAChEF,EAAAA,eAAAA,GAAAA,SAAAA,IAAkBG,EAAAA,WAAAA,SAAAA,WAAAA,OAASnD,EAAAogB,eAAand,EAAAA,OAAAA,GAAAA,SAAKC,EAAAA,eACjDA,EAAAA,eACJA,EAAAA,eACJA,EAAAA,sBAnCcP,EAAAA,WAAAA,YAAAA,EAAAA,cAK8BW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,YAQAW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,EAAAA,WAI1BW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,UAAAA,GAG+DW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,YAAAA,GAU7DW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,SAAAA,IACUW,EAAAA,UAAAA,GAAAX,EAAAA,WAAAA,SAAAA,o9BCdjBmd,EAAAA,sBAAqB/rB,EAAA,CAVjCoM,EAAAA,kBAAkB,CACjBC,IAAK,uBACL9E,KAAM,8BACN3E,KAAM,2BAOKmpB,EAAAA,uFAAAA,EAAAA,sBAAqB,CAAA,MALjCzf,EAAAA,gBAAU,CACTC,SAAU,uBACVC,YAAa,0BACbC,UAAW,CAAC,gFCoBd,IAAMygB,GAAa,CACjBjmB,EAAAA,qBACAwM,EAAAA,yBACAnD,EAAAA,4BACAiV,EAAAA,yBACAtX,EAAAA,oBACA8U,EAAAA,wBACA8B,EAAAA,0BACAuE,EAAAA,oBACAM,EAAAA,8BACArJ,EAAAA,wBACA0L,EAAAA,0BAiCF,8CAAaoB,mEAAAA,KAAqBC,QAAA,CA7BvB,CACPC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,oBACAC,EAAAA,YACAC,EAAAA,cACAC,EAAAA,oBACAC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,gBACAC,EAAAA,gBACAC,EAAAA,eACAC,EAAAA,eACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,eACAC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,cACAC,EAAAA,cACAC,EAAAA,eACAC,EAAAA,gBACAC,EAAAA,aACAC,EAAAA,4FAKSzB,GAAqB,CAAA0B,aAAA,CA3ChC5nB,EAAAA,qBACAwM,EAAAA,yBACAnD,EAAAA,4BACAiV,EAAAA,yBACAtX,EAAAA,oBACA8U,EAAAA,wBACA8B,EAAAA,0BACAuE,EAAAA,oBACAM,EAAAA,8BACArJ,EAAAA,wBACA0L,EAAAA,uBAAqBqB,QAAA,CAKnBC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,oBACAC,EAAAA,YACAC,EAAAA,cACAC,EAAAA,oBACAC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,gBACAC,EAAAA,gBACAC,EAAAA,eACAC,EAAAA,eACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,eACAC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,cACAC,EAAAA,cACAC,EAAAA,eACAC,EAAAA,gBACAC,EAAAA,aACAC,EAAAA,wBAAsBE,QAAA,CAtCxB7nB,EAAAA,qBACAwM,EAAAA,yBACAnD,EAAAA,4BACAiV,EAAAA,yBACAtX,EAAAA,oBACA8U,EAAAA,wBACA8B,EAAAA,0BACAuE,EAAAA,oBACAM,EAAAA,8BACArJ,EAAAA,wBACA0L,EAAAA,yFAiCWoB,GAAqB,CAAA,MA/BjC4B,EAAAA,eAAS,CACRF,aAAc3B,GACdE,QAAS,CACPC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,oBACAC,EAAAA,YACAC,EAAAA,cACAC,EAAAA,oBACAC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,gBACAC,EAAAA,gBACAC,EAAAA,eACAC,EAAAA,eACAC,EAAAA,aACAC,EAAAA,iBACAC,EAAAA,eACAC,EAAAA,aACAC,EAAAA,aACAC,EAAAA,cACAC,EAAAA,cACAC,EAAAA,eACAC,EAAAA,gBACAC,EAAAA,aACAC,EAAAA,wBAEFE,QAAQ5B,GACR8B,gBAAentB,EAAMqrB,6ICxCvB,SAAuC1kB,EAAO+iB,EAAW0D,WAEjDC,EAAkB1mB,EAAMuB,IAAImB,MAAMgkB,gBAElCA,aAA2BtlB,OAAOulB,0BAClChmB,QAAQimB,KAAK,oBAGjB,IAAMC,EAAM,OACZ,IAAc,IAAAC,EAAAxuB,EAAAyqB,GAASgE,EAAAD,EAAAluB,QAAAmuB,EAAAjuB,KAAAiuB,EAAAD,EAAAluB,OAAE,CAApB,IAAI/B,EAACkwB,EAAAluB,MACNguB,EAAI1tB,KAAK,IAAIiI,OAAOqT,aAAaC,cAAc7d,sGAGnD,IAAImwB,EAAU5lB,OAAO6lB,0BAA0BP,EAAiBG,GAChEzlB,OAAO8lB,KACHF,GACA,SAAUhvB,WACN,IACI,IAAII,EAAI,MACR,IAAc,IAAA+uB,EAAA7uB,EAAAyqB,GAASqE,EAAAD,EAAAvuB,QAAAwuB,EAAAtuB,KAAAsuB,EAAAD,EAAAvuB,OAAE,CAAfwuB,EAAAvuB,MACN,QAAoB8W,IAAhB3X,EAAEI,GAAGyJ,OACL,MAAM,IAAIwlB,MAAM,6BAKhB,IAAIjmB,OAAOyB,WAAWykB,YAAYtvB,EAAEI,GAAGqJ,UAAWzJ,EAAEI,GAAGwJ,SAAU5J,EAAEI,GAAGyJ,QAC1EzJ,sGAEJquB,EAAe1D,GACjB,MAAO3pB,GACLuH,QAAQvH,MAAM,sCACdqtB,GAAe,OAGvB,SAAUrtB,GACNqtB,GAAe,GACf9lB,QAAQvH,MAAM,qCAAuCA,uCA1EjE,SAAuC4G,EAAO+iB,EAAW0D,WAChDzmB,EAAMuB,IAAImB,MAAMwS,MAAMqS,yBACvB5mB,QAAQimB,KACJ,yEAIR,IAAMC,EAAM,OACZ,IAAc,IAAAW,EAAAlvB,EAAAyqB,GAAS0E,EAAAD,EAAA5uB,QAAA6uB,EAAA3uB,KAAA2uB,EAAAD,EAAA5uB,OAAE,CAApB,IAAI/B,EAAC4wB,EAAA5uB,MACNguB,EAAI1tB,KAAK,IAAIiI,OAAOqT,aAAa5d,EAAE,GAAIA,EAAE,GAAIA,EAAE,uGAGnDmJ,EAAMuB,IAAImB,MACLglB,yBAAyBb,GACzB9mB,MAAK,SAAA/H,WACF,IACI,IAAII,EAAI,MACR,IAAc,IAAAuvB,EAAArvB,EAAAyqB,GAAS6E,EAAAD,EAAA/uB,QAAAgvB,EAAA9uB,KAAA8uB,EAAAD,EAAA/uB,OAAE,CAApB,IAAI/B,EAAC+wB,EAAA/uB,MACN,QAAoB8W,IAAhB3X,EAAEI,GAAGyJ,OACL,MAAM,IAAIwlB,MAAM,6BAEpBxwB,EAAE,GAAKmB,EAAEI,GAAGyJ,OACZzJ,sGAGJquB,GAAe,GACjB,MAAOrtB,GACLuH,QAAQvH,MAAM,qCACdqtB,GAAe,OAGtBoB,WAAU,SAAAzuB,GACPqtB,GAAe,GACf9lB,QAAQvH,MAAM","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * 图层类型\n */\nexport enum LayerType {\n    Imagery = \"Imagery\",\n    Tileset = \"Tileset\",\n    Terrain = \"Terrain\"\n}\n/**\n * 图层服务来源\n */\nexport enum LayerServiceSource {\n    ArcGis,\n    SuperMap,\n    TianDiTu,\n    BaiDu,\n    GaoDe,\n    EpsPlanet\n}","\n//////////////////////////////////////////////////////////////////////////////////\n//初始化一个空的对象\n//////////////////////////////////////////////////////////////////////////////////\n\nimport { IXbsjCzmObject, IXbsjImageryLayerNode, IXbsjTilesetLayerNode, IXbsjTerrainLayerNode } from './layer-xbsj';\nimport { ILayerFolder } from './layer-config';\nimport { LayerType } from './layer';\n\nexport function newXbsjFolderNode(title: string): ILayerFolder {\n    return {\n        title: title,\n        children: []\n    };\n}\n\nexport function newXbsjLayerNode(type: string, title: string, url: string): IXbsjCzmObject {\n    const _type = type.toLocaleLowerCase();\n    let result: IXbsjCzmObject = { czmObject: null };\n    switch (_type) {\n        case LayerType.Imagery.toLocaleLowerCase():\n            result.czmObject = newXbsjImageryLayerNode(title, url);\n            break;\n        case LayerType.Tileset.toLocaleLowerCase():\n            result.czmObject = newXbsjTilesetLayerNode(title, url);\n            break;\n        case LayerType.Terrain.toLocaleLowerCase():\n            result.czmObject = newXbsjTerrainLayerNode(title, url);\n            break;\n        default:\n            break;\n    }\n    return result;\n}\nfunction newXbsjImageryLayerNode(title: string, url: string): IXbsjImageryLayerNode {\n    let node: IXbsjImageryLayerNode = {\n        xbsjType: LayerType.Imagery,\n        name: title,\n        enable: true,\n        show: true,\n        xbsjImageryProvider: {\n            XbsjImageryProvider: {\n                url: url\n            }\n        }\n\n    };\n    return node;\n}\n\nfunction newXbsjTilesetLayerNode(title: string, url: string): IXbsjTilesetLayerNode {\n    let node: IXbsjTilesetLayerNode = {\n        xbsjType: LayerType.Tileset,\n        name: title,\n        url: url,\n        enable: true,\n        show: true,\n    };\n    return node;\n}\n\nfunction newXbsjTerrainLayerNode(title: string, url: string): IXbsjTerrainLayerNode {\n    return {\n        xbsjType: LayerType.Terrain,\n        name: title,\n        enable: true,\n        show: true,\n        xbsjTerrainProvider: {\n            type: \"XbsjCesiumTerrainProvider\",\n            XbsjEllipsoidTerrainProvider: {},\n            XbsjCesiumTerrainProvider: {\n                url: url,\n                requestVertexNormals: true,\n                requestWaterMask: true\n            }\n        }\n    }\n}","import { NzTreeNode } from 'ng-zorro-antd/tree';\nimport { IdGenerater } from 'epsgis';\nimport { isArray } from 'lodash';\nimport { ILayerNode, ILayerFolder } from '../models/layer-config';\nimport { newXbsjFolderNode, newXbsjLayerNode } from '../models/layer-xbsj-func';\nimport { IXbsjCzmObject } from '../models/layer-xbsj';\n\n/**\n *  场景树帮助类 create by ruir\n */\nexport class SceneTreeUtils {\n    /**\n     * 将场景树数据转为ngZorro结构的树数据\n     * @param root this.view.sceneTree.root\n     */\n    static SceneTree2NgZorroTree(root: any): Array<NzTreeNode> {\n        if (!root || !root.children || root.children.length <= 0) {\n            return root;\n        }\n        let rootNode: NzTreeNode = null;\n        if (root.title && root.title !== \"未命名\") {\n            rootNode = new NzTreeNode({\n                title: root.title,\n                expanded: root.expand === true,\n                key: root.guid || root.xbsjGuid || IdGenerater.newGuid(),\n                origin: root,\n                isLeaf: false,\n                parentNode: null\n            });\n            rootNode.level = -1\n            // console.log(\"root\",root,rootNode)\n            // rootNode.isExpanded = root.expand === true;\n        }\n        const _layerNodes: Array<NzTreeNode> = [];\n        if (rootNode) {\n            rootNode.children.push(...SceneTreeUtils.convertChildren(root.children, rootNode));\n            _layerNodes.push(rootNode);\n        } else {\n            _layerNodes.push(...SceneTreeUtils.convertChildren(root.children, rootNode));\n        }\n\n        return _layerNodes;\n    }\n    /**\n     * \n     * @param children \n     * @param parentNode \n     */\n    private static convertChildren(children: Array<any>, parentNode: any): Array<NzTreeNode> {\n        if (!children || children.length <= 0) {\n            return [];\n        }\n        const _layerNodes: Array<NzTreeNode> = [];\n        children.forEach(item => {\n\n            let node: NzTreeNode = null;\n            if (item.children) { // item.title\n                node = new NzTreeNode({\n                    level: parentNode.level + 1,\n                    title: item.title,\n                    isExpanded: item.expand === true,\n                    // isChecked: true,\n                    // checked:item.isSelected,\n                    key: item.guid || item.xbsjGuid || IdGenerater.newGuid(),\n                    origin: item,\n                    isLeaf: false,\n                    parentNode: parentNode\n                });\n                node.parentNode = parentNode;\n                node.level = parentNode.level + 1;\n\n                node.isExpanded = item.expand ? true : false;\n                if (item.children.length >= 1) {\n                    node.children.push(...SceneTreeUtils.convertChildren(item.children, node));\n                }\n                // node.isExpanded = item.expand === true;\n                let checkList = []\n                node.children.forEach((child: any) => {\n                    if (child.children && child.children.length > 0) {\n                        checkList.push(child.isChecked)\n                    } else {\n                        if (child.origin.origin.show) {\n                            checkList.push(true)\n                        } else {\n                            checkList.push(false)\n                        }\n                    }\n                })\n                if (SceneTreeUtils.isAllEqual(checkList) && checkList[0] == true) {\n                    node.isChecked = true\n                } else if (SceneTreeUtils.isAllEqual(checkList) && checkList[0] == false) {\n                    node.isChecked = false\n                } else if (!SceneTreeUtils.isAllEqual(checkList)) {\n                    node.isHalfChecked = true\n                }\n                // node.isChecked = true;//初始默认勾选父节点\n                // console.log(item.title,item)\n                _layerNodes.push(node);\n            } else {\n                //之前叶节点拿不到parentNode,强行从它的origin中取到parentNode,用于实现节点的单选\n                let childNode = SceneTreeUtils.convertCzmObject(item.czmObject, parentNode)\n                childNode.parentNode = childNode.origin.parentNode;\n                childNode.level = childNode.parentNode.level + 1\n                _layerNodes.push(childNode);\n                // _layerNodes.push(SceneTreeUtils.convertCzmObject(item.czmObject, parentNode));\n            }\n        });\n        return _layerNodes;\n    }\n\n    static isAllEqual(array) {\n        if (array.length > 0) {\n            return !array.some(function (value, index) {\n                return value !== array[0];\n            });\n        } else {\n            return true;\n        }\n    }\n    /**\n     * \n     * @param czmObject \n     */\n    private static convertCzmObject(czmObject: any, parentNode: NzTreeNode): NzTreeNode {\n        if (!czmObject) {\n            return null;\n        }\n        return new NzTreeNode({\n            title: czmObject.name,\n            key: czmObject.guid || czmObject.xbsjGuid || IdGenerater.newGuid(),\n            origin: czmObject,\n            isLeaf: true,\n            // checked: czmObject.isSelected,\n            checked: czmObject.show,\n            parentNode: parentNode\n        });\n    }\n    /**\n     * \n     */\n    static GetXbsjCzmObject(node: NzTreeNode) {\n        // return node?.origin?.origin;\n        return node && node.origin && node.origin.origin;\n    }\n    ////////////////////////////////////////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////////////////////////////////////////\n    ////////////////////////////////////////////////////////////////////////////////////////////////\n    /**\n     * 图层加载\n     * @param layerConfig \n     */\n    static loadLayers(layerConfig: any) {\n        if (!layerConfig) {\n            return null;\n        }\n        if (!layerConfig.basemaps && !layerConfig.layers) {\n            return null;\n        }\n        const _layerNodes: Array<any> = [];\n        //固定底图和其他图层分组\n        const _layerlist = [\n            {\n                \"title\": \"basemap\",\n                \"ref\": \"basemap\",\n                \"children\": [],\n            },\n            {\n                \"title\": \"layerlist\",\n                \"ref\": \"layerlist\",\n                \"children\": [],\n            },\n            {\n                \"tilte\": \"pin\",\n                \"ref\": \"pin\",\n                \"children\": []\n            }\n        ]\n\n        //底图\n        if (typeof layerConfig.basemaps === \"object\" && isArray(layerConfig.basemaps)) {\n            layerConfig.basemaps.forEach((item: ILayerNode | ILayerFolder) => {\n                _layerlist[0].children.push(SceneTreeUtils.loadLayerNode(item));\n            });\n        }\n        //图层\n        if (typeof layerConfig.layers === \"object\" && isArray(layerConfig.layers)) {\n            layerConfig.layers.forEach((item: ILayerNode | ILayerFolder) => {\n                _layerlist[1].children.push(SceneTreeUtils.loadLayerNode(item));\n            });\n        }\n        return { children: _layerlist };\n    }\n    /**\n     * \n     */\n    static loadLayerNode(item: ILayerNode | ILayerFolder) {\n        if (isArray(item.children)) {\n            //目录\n            const node: ILayerFolder = newXbsjFolderNode(item.title);\n            if (item.children && item.children.length >= 1) {\n                item.children.forEach((child: ILayerNode | ILayerFolder) => {\n                    node.children.push(SceneTreeUtils.loadLayerNode(child))\n                })\n            }\n            node.expand = item.expand;\n            return node;\n        } else if (item.url || item.layer) {\n            //图层\n            // tianditu 需要将layer转换为url\n\n            const node: IXbsjCzmObject = newXbsjLayerNode(item.type, item.title, item.url);\n            node.czmObject.xbsjGuid = item.guid;\n            node.czmObject.show = item.show ? true : false;\n            node.ref = item.ref;\n            if (node.czmObject.hasOwnProperty(\"xbsjImageryProvider\")) {\n                //影像图层处理\n                if (item.srcCoordType) {\n                    //原坐标系\n                    node.czmObject.xbsjImageryProvider.XbsjImageryProvider.srcCoordType = item.srcCoordType;\n                }\n                if (item.dstCoordType) {\n                    //转换目标坐标系\n                    node.czmObject.xbsjImageryProvider.XbsjImageryProvider.dstCoordType = item.dstCoordType;\n                }\n            } else if (node.czmObject.hasOwnProperty(\"xbsjTerrainProvider\")) {\n                //地形图层处理\n            }\n            else if (node.hasOwnProperty(\"url\")) {\n                //瓦片图层处理\n\n            }\n            if (item.extendOptions) {\n\n                node.czmObject = Object.assign(node.czmObject, item.extendOptions);\n                if (item.extendOptions.rectangle) {\n                    // console.log(node.czmObject.rectangle)\n                    let rect = []\n                    node.czmObject.rectangle.forEach(item => {\n                        rect.push(item / 180 * Math.PI)\n                    })\n                    node.czmObject.rectangle = rect\n                }\n            }\n            return node;\n        }\n        return null;\n    }\n}","import { Component, ElementRef, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\nimport { BaseMapComponent, ComponentLoaderService, ComponentRegister, simpleLoader } from 'epsgis';\nimport { SceneTreeUtils } from '../../utils/sceneTree-utils';\n/**\n *  @description 球\n *  @author ruir\n */\n@ComponentRegister({\n  uri: \"epsgis-planet-earth\",\n  path: \"epsplanet/components/earth\",\n  name: \"PlanetEarthComponent\"\n})\n@Component({\n  selector: 'epsgis-planet-earth',\n  templateUrl: './earth.component.html',\n  styleUrls: ['./earth.component.scss'],\n})\nexport class PlanetEarthComponent extends BaseMapComponent {\n  @ViewChild(\"earthContainer\", { static: true }) earthContainer: ElementRef;\n  //按顺序添加\n  resources: ReadonlyArray<string> = [\n    // \"XbsjCesium/Cesium.js\",\n    // \"XbsjCesium/XbsjCesium.js\",\n    \"XbsjEarth/XbsjEarth.js\"\n  ];\n  constructor(public componentLoader: ComponentLoaderService) {\n    super(componentLoader);\n  }\n  static getCompInfo() {\n    return { name: \"PlanetEarthComponent\", path: \"epsplanet/components/earth\" };\n  }\n  ngOnInit() {\n    super.ngOnInit();\n    // this.is3D用来指示项目类型，非常重要，请勿删除\n    this.is3D = true;\n  }\n  initMap(): Promise<any> {\n    // this.is3D用来指示项目类型，非常重要，请勿删除\n    this.is3D = true;\n    return new Promise((resolve, reject) => {\n      const jsApi: string = this.appConfig.map.jsApi;\n      if (!jsApi) {\n        reject(\"没有配置jsApi\");\n        return;\n      }\n      const resFullPaths: string[] = [];\n      this.resources.forEach(path => {\n        resFullPaths.push(jsApi + \"/\" + path);\n      });\n      //直接引用该js会导致earthSdk无法使用\n      //因为它内部也是用得类似方法\n      // resFullPaths.push(\"assets/watch.js\");\n      simpleLoader.loadResources(resFullPaths, null, null, () => {\n        //全部加载完成\n        const XE = window[\"XE\"];\n        if (!XE) {\n          reject(\"XE undefined\");\n          return;\n        }\n        XE.ready().then(() => {\n          var earth = new XE.Earth(\"earthContainer\", {\n            homeButton: true,\n            timeline: false,\n            sceneModePicker: true\n          });\n          earth.interaction.picking.enabled = false\n          earth.interaction.picking.hoverEnable = false\n\n          const layerNode = SceneTreeUtils.loadLayers(this.config).children\n          console.log(layerNode)\n          earth.sceneTree.root.children.push(...layerNode);\n          earth.camera.navigator.showCompass = true; // 显示指北针\n          earth.camera.navigator.showDistanceLegend = true; // 显示比例尺                \n          //test\n          window[\"earth\"] = earth;\n          earth.getCurrentView = function () {\n            const td = Cesium.Math.toDegrees;\n            let lon = td(earth.czm.camera.positionCartographic.longitude).toFixed(5)\n            let lat = td(earth.czm.camera.positionCartographic.latitude).toFixed(5)\n            let height = earth.czm.camera.positionCartographic.height.toFixed(5)\n            let heading = td(earth.czm.camera.heading).toFixed(5)\n            let pitch = td(earth.czm.camera.pitch).toFixed(5)\n            let roll = td(earth.czm.camera.roll).toFixed(5)\n            console.log(`\"center\":[${lon},\\n${lat},\\n${height}],\\n\"heading\":${heading},\\n\"pitch\":${pitch},\\n\"roll\":${roll}`)\n          }\n          earth.RadiansTodegree=function(radians){\n            let pos=[]\n            radians.forEach(item=>{\n              pos.push(item/Math.PI*180)\n            })\n            console.log(pos)\n          }\n          if (this.config.mapOptions && this.config.mapOptions.center) {\n            let x = 116.26984645340727, y = 40.10171604578351, h = 230, heading = 0, pitch = 0;\n            if (this.config.mapOptions.center.length >= 1) {\n              x = this.config.mapOptions.center[0];\n            }\n            if (this.config.mapOptions.center.length >= 2) {\n              y = this.config.mapOptions.center[1];\n            }\n            if (this.config.mapOptions.center.length >= 3) {\n              h = this.config.mapOptions.center[2];\n            }\n            if (this.config.mapOptions.heading) {\n              heading = this.config.mapOptions.heading;\n            }\n            if (this.config.mapOptions.pitch) {\n              pitch = this.config.mapOptions.pitch;\n            }\n            earth.czm.viewer.scene.camera.setView({\n              destination: Cesium.Cartesian3.fromDegrees(x, y, h),\n              orientation: {\n                heading: Cesium.Math.toRadians(heading),\n                pitch: Cesium.Math.toRadians(pitch),\n                roll: 0\n              }\n            });\n          }\n          // var sceneModePicker = new Cesium.SceneModePicker('sceneModePickerContainer', earth.czm.scene);\n\n          resolve(earth);\n        });\n\n      });\n    });\n  }\n\n}\n","<div #earthContainer id=\"earthContainer\" class=\"earthContainer\">\n</div>\n<!-- 对于cesium，需要将ng-templete放在外面（放里面会因z-index影响导致图标显示不出来） -->\n<ng-template component-host> </ng-template>","import { Directive } from '@angular/core';\nimport { BaseWidgetComponent, PropWatcher } from 'epsgis';\n/**\n * \n */\n@Directive()\nexport class BasePlanetWidgetComponent extends BaseWidgetComponent {\n  /**\n   * earthSdk中通过_isVue判断的，误删\n   */\n  _isVue: boolean = true;\n  watchers: Array<Function> = [];\n  constructor() {\n    super();\n  }\n  getCesiumView() {\n    if (this.view) {\n      return this.view.czm.viewer;\n    }\n    return null;\n  }\n  // get XE() {\n  //   return window[\"XE\"];\n  // }\n  /**\n   * \n   * @param propertyName 属性名\n   * @param func 函数\n   * @param param { deep: true }\n   */\n  $watch(propertyName, func: Function, param) {\n    this.watchers.push(PropWatcher.watch(this, propertyName, (prop, oldval, newval) => {\n      // console.log(\"%s after %s,%s\", prop, oldval, newval);\n      func.call(func);\n    }));\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    if (this.watchers && this.watchers.length >= 1) {\n      this.watchers.forEach(f => f.call(f));\n    }\n    this.watchers.length = 0;\n  }\n}\n","import { Component, HostListener } from '@angular/core';\nimport { ComponentRegister } from 'epsgis';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\n\n@ComponentRegister({\n  uri:\"epsgis-planet-home\",\n  path:\"epsplanet/components/home\",\n  name:\"PlanetHomeComponent\"\n})\n@Component({\n  selector: 'epsgis-planet-home',\n  template: `<i  nz-icon [nzIconfont]=\"'icon-epsgis-home'\"> </i>`,\n  host: {\n    \"[class.jimu-widget-onscreen-icon]\": \"true\",\n    \"title\": \"home\"\n  }\n})\nexport class PlanetHomeComponent extends BasePlanetWidgetComponent {\n  constructor() {\n    super();\n  }\n  static getCompInfo() {\n    return { path: \"epsplanet/components/home\" };\n  }\n  ngOnInit() {\n    this.view.czm.viewer.homeButton._container.hidden = true\n  }\n  /**\n   * \n   * @param evt \n   */\n  @HostListener('click', ['$event'])\n  onMouseClick(evt) {\n    //this.view.czm.viewer.camera.setView(     { destination: Cesium.Cartesian3.fromDegrees(110.20, 34.55, 3000000)});\n    this.view.czm.viewer.homeButton._element.click();\n  }\n\n}\n","<!-- <h3>{{selectedNode.title}}</h3> -->\r\n<div class=\"schema\" *ngIf=\"type=='影像'\">\r\n  <nz-row *ngFor=\"let item of config.basemapSchema\">\r\n      <nz-col nzSpan=\"4\">\r\n          <span>{{item.zh}}</span>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"14\">\r\n          <nz-slider [nzMin]=\"0\" [nzMax]=\"1\" [nzStep]=\"0.01\" [(ngModel)]=\"selectedNode['origin'][item.en]\"></nz-slider>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"2\">\r\n          <nz-input-number [nzMin]=\"0\" [nzMax]=\"1\" [nzStep]=\"0.01\" [ngStyle]=\"{ marginLeft: '16px' }\"\r\n              [(ngModel)]=\"selectedNode['origin'][item.en]\">\r\n          </nz-input-number>\r\n      </nz-col>\r\n  </nz-row>\r\n</div>\r\n<div class=\"schema\" *ngIf=\"type!=='影像'\">\r\n  <nz-row *ngFor=\"let item of config.tilesSchema\">\r\n      <nz-col nzSpan=\"4\">\r\n          <span>{{item.zh}}</span>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"14\" *ngIf=\"item.zh=='镜面强度'\">\r\n          <nz-slider [nzMin]=\"0\" [nzMax]=\"1\" [nzStep]=\"0.01\" [(ngModel)]=\"selectedNode['origin'][item.en][1]\"></nz-slider>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"14\" *ngIf=\"item.zh=='散射强度'\">\r\n          <nz-slider [nzMin]=\"0\" [nzMax]=\"1\" [nzStep]=\"0.01\" [(ngModel)]=\"selectedNode['origin'][item.en][0]\"></nz-slider>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"14\" *ngIf=\"item.zh=='显示精度'\">\r\n          <nz-slider [nzMin]=\"0\" [nzMax]=\"256\" [nzStep]=\"1\" [(ngModel)]=\"selectedNode['origin'][item.en]\"></nz-slider>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"14\" *ngIf=\"item.zh=='材质底色'\">\r\n          <nz-slider [nzMin]=\"0\" [nzMax]=\"5\" [nzStep]=\"0.01\" [(ngModel)]=\"selectedNode['origin'][item.en]\"></nz-slider>\r\n      </nz-col>\r\n\r\n      <nz-col nzSpan=\"2\" *ngIf=\"item.zh=='镜面强度'\">\r\n          <nz-input-number [nzMin]=\"0\" [nzMax]=\"1\" [nzStep]=\"0.01\" [ngStyle]=\"{ marginLeft: '16px' }\"\r\n              [(ngModel)]=\"selectedNode['origin'][item.en][1]\">\r\n          </nz-input-number>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"2\" *ngIf=\"item.zh=='散射强度'\">\r\n          <nz-input-number [nzMin]=\"0\" [nzMax]=\"1\" [nzStep]=\"0.01\" [ngStyle]=\"{ marginLeft: '16px' }\"\r\n              [(ngModel)]=\"selectedNode['origin'][item.en][0]\">\r\n          </nz-input-number>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"2\" *ngIf=\"item.zh=='显示精度'\">\r\n          <nz-input-number [nzMin]=\"0\" [nzMax]=\"256\" [nzStep]=\"1\" [ngStyle]=\"{ marginLeft: '16px' }\"\r\n              [(ngModel)]=\"selectedNode['origin'][item.en]\">\r\n          </nz-input-number>\r\n      </nz-col>\r\n      <nz-col nzSpan=\"2\" *ngIf=\"item.zh=='材质底色'\">\r\n          <nz-input-number [nzMin]=\"0\" [nzMax]=\"5\" [nzStep]=\"0.01\" [ngStyle]=\"{ marginLeft: '16px' }\"\r\n              [(ngModel)]=\"selectedNode['origin'][item.en]\">\r\n          </nz-input-number>\r\n      </nz-col>\r\n  </nz-row>\r\n</div>\r\n<!-- <button nz-button (click)=\"test()\">test</button>\r\n<button nz-button nz-popover nzPopoverTitle=\"Title\" [nzPopoverContent]=\"contentTemplate\" nzPopoverTrigger=\"click\" (click)=\"loadlocate()\">加载&定位</button>\r\n<ng-template #contentTemplate>\r\n  <div>\r\n    <p>Content</p>\r\n    <p>Content</p>\r\n  </div>\r\n</ng-template> -->","<nz-tree \n    #nzTreeComponent\n    [nzData]=\"layerNodes\" \n    nzBlockNode \n    nzCheckable \n    (nzClick)=\"onLeftClickNode($event)\"\n    (nzDblClick)=\"onDblClickNode($event);\" \n    (nzCheckBoxChange)=\"onCheckedChange($event);\"\n    (nzContextMenu)=\"onRightClick($event);\"\n    [nzTreeTemplate]=\"nzTreeTemplate\">\n</nz-tree>\n<ng-template #nzTreeTemplate let-node let-origin=\"origin\">\n    <span class=\"custom-node\">\n      <span *ngIf=\"!node.isLeaf\">\n        <span class=\"folder-name\">{{ node.title }}</span>\n      </span>\n      <span *ngIf=\"node.isLeaf\" class=\"leaf\">\n        <!-- <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\" (click)=\"openFolder(node)\"></i> -->\n        <span class=\"folder-name\">{{ node.title }}</span>\n        <i title=\"参数调整\" style=\"float: right;\" nz-icon [nzIconfont]=\"'icon-epsgis-setting'\" (click)=\"setting(node)\"></i>\n        <i title=\"缩放至\" style=\"float: right;\" nz-icon [nzIconfont]=\"'icon-epsgis-wodeweizhi1'\" (click)=\"flyTo(node)\"></i>\n\n        <!-- <div *ngIf=\"node.isExpanded\">\n            <i nz-icon [nzIconfont]=\"'icon-epsgis-wodeweizhi1'\" (click)=\"flyTo(node)\"></i>\n        </div> -->\n      </span>\n    </span>\n</ng-template>","import { ChangeDetectorRef, Component, SimpleChanges , OnInit, Input } from '@angular/core';\nimport { ComponentRegister } from 'epsgis';\nimport { NzContextMenuService, NzDropdownMenuComponent } from 'ng-zorro-antd/dropdown';\nimport { NzFormatEmitEvent, NzTreeNode } from 'ng-zorro-antd/tree';\nimport { SceneTreeUtils } from '../../utils/sceneTree-utils';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\n\n@ComponentRegister({\n  uri: \"epsgis-planet-layer-manager\",\n  path: \"epsplanet/components/layer-manager\",\n  name: \"PlanetLayerManagerComponent\"\n})\n@Component({\n  selector: \"epsgis-planet-layer-manager\",\n  templateUrl: \"./layer-manager.component.html\",\n  styleUrls: [\"./layer-manager.component.scss\"]\n})\nexport class PlanetLayerManagerComponent extends BasePlanetWidgetComponent {\n  // @Input() config;\n  @Input() selectedNode;\n  @Input() type;\n  config={\n    \"basemapSchema\":[\n        {\"en\":\"alpha\",\"zh\":\"透明度\"},\n        {\"en\":\"brightness\",\"zh\":\"亮度\"},\n        {\"en\":\"saturation\",\"zh\":\"饱和度\"},\n        {\"en\":\"contrast\",\"zh\":\"对比度\"},\n        {\"en\":\"hue\",\"zh\":\"色相\"},\n        {\"en\":\"gamma\",\"zh\":\"伽马\"}\n    ],\n    \"tilesSchema\":[\n        {\n            \"en\":\"maximumScreenSpaceError\",\n            \"zh\":\"显示精度\"\n        },\n        {\n            \"en\":\"imageBasedLightingFactor\",\n            \"zh\":\"散射强度\"\n        },\n        {\n            \"en\":\"luminanceAtZenith\",\n            \"zh\":\"材质底色\"\n        },\n        {\n            \"en\":\"imageBasedLightingFactor\",\n            \"zh\":\"镜面强度\"\n        }\n    ]\n}\n  value1: 0;\n  activatedNode?: NzTreeNode;\n  openFolder(data: NzTreeNode | NzFormatEmitEvent): void {\n    // do something if u want\n    console.log(data)\n    if (data instanceof NzTreeNode) {\n      data.isExpanded = !data.isExpanded;\n    } else {\n      const node = data.node;\n      if (node) {\n        node.isExpanded = !node.isExpanded;\n      }\n    }\n  }\n\n  activeNode(data: NzFormatEmitEvent): void {\n    this.activatedNode = data.node!;\n  }\n\n  contextMenu($event: MouseEvent, menu: NzDropdownMenuComponent): void {\n    this.nzContextMenuService.create($event, menu);\n  }\n  constructor(private nzContextMenuService: NzContextMenuService) {\n    super();\n  }\n  selectDropdown(): void {\n    // do something\n  }\n\n  layerNodes: any = [];\n\n  static getCompInfo() {\n    return { name: \"PlanetLayerManagerComponent\", path: \"epsplanet/components/layer-manager\" };\n  }\n  ngOnInit() {\n    super.ngOnInit();\n    // this.selectedNode=window[\"selectedNode\"]\n    // this.type=this.selectedNode[\"origin\"].hasOwnProperty('luminanceAtZenith')?\"瓦片\":\"影像\";\n    // setInterval(() => {\n    //   this.selectedNode=window[\"selectedNode\"]\n    //   this.type=this.selectedNode[\"origin\"].hasOwnProperty('luminanceAtZenith')?\"瓦片\":\"影像\";\n    // }, 100);\n\n  }\n  loadlocate() {\n    var isshow, _layers, layer, format, style, tileMatrixSet;\n    var wmts = new XE.Tool.WMTSParser();\n    // console.log(wmts)\n    let url = \"http://jojo1986.f3322.net:8888/geoserver/gwc/service/wmts?REQUEST=GetCapabilities\";\n    // url = wmts.addUrlParam(url);\n    wmts\n      .parser(url)\n      .then(layers => {\n        console.log(layers)\n        isshow = false;\n        _layers = layers;\n        if (layers.length == 0) {\n          console.log(\n            \"server has no supproted layers\",\n            \"warning\"\n          );\n        } else {\n          //默认选择第一个Layer\n          layer = layers[0];\n          console.log(layer.rectangle)\n          format = layer.urls[0].format;\n          style = layer.styles[0].id;\n          tileMatrixSet = layer.tileMatrixSets[0];\n          this.view.sceneTree.root.children.push(\n            {\n              \"czmObject\": {\n                \"xbsjType\": \"Imagery\",\n                // \"xbsjGuid\": \"02cb3e7e-9ab5-4aa0-8664-a28e2ad94abd\",\n                \"name\": layer.title,\n                // \"rectangle\": layer.rectangle,\n                \"xbsjImageryProvider\": {\n                  \"XbsjImageryProvider\": {},\n                  \"UrlTemplateImageryProvider\": {},\n                  \"WebMapTileServiceImageryProvider\": {\n                    \"url\": layer.urls[0].template,\n                    \"format\": format,\n                    \"layer\": layer.title,\n                    \"style\": style,\n                    \"tileMatrixSetID\": tileMatrixSet.tileMatrixSetID,\n                    \"tileMatrixLabels\": tileMatrixSet.params.tileMatrixLabels,\n                    \"tilingScheme\": tileMatrixSet.params.tilingScheme,\n                    \"maximumLevel\": tileMatrixSet.maximumLevel\n                  },\n                  \"createTileMapServiceImageryProvider\": {},\n                  \"type\": \"WebMapTileServiceImageryProvider\"\n                }\n              }\n            }\n          )\n          var viewer = window['earth'].czm.viewer;\n          viewer.camera.flyTo({\n            destination: Cesium.Rectangle.fromDegrees(...layer.rectangle)\n          })\n          // this.view.camera.flyTo({\n          //   destination:Cesium.Rectangle.fromDegrees(2.095444729128294, 0.5829525047032451, 2.097444730801541, 0.5843758506702889)\n          // })\n        }\n      })\n      .catch(err => {\n        isshow = false;\n        console.log(\n          \"GetCapabilities failed:\" + err.message,\n          \"error\"\n        );\n      });\n    // console.log(url, layer)\n  }\n  test() {\n    setTimeout(() => {\n      console.log(this.selectedNode)\n    }, 100);\n  }\n  onDblClickNode($event) {\n    console.log($event.node.origin.origin)\n  }\n  /**\n  * 选中状态改变\n  */\n  onCheckedChange(evt: NzFormatEmitEvent): void {\n    if (evt.eventName !== \"check\" || !evt.node) {\n      return;\n    }\n    if (evt.node.isChecked) {\n      //加载图层\n      SceneTreeUtils.GetXbsjCzmObject(evt.node).show = true;\n    } else {\n      //移除图层\n      SceneTreeUtils.GetXbsjCzmObject(evt.node).show = false;\n    }\n  }\n  onRightClick($event) {\n\n  }\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n}","import { Component, TemplateRef } from '@angular/core';\nimport { ComponentRegister, ModalManagerService } from 'epsgis';\nimport { NzFormatEmitEvent, NzTreeNode } from 'ng-zorro-antd/tree';\nimport { SceneTreeUtils } from '../../utils/sceneTree-utils';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\nimport { PlanetLayerManagerComponent } from '../layer-manager/layer-manager.component';\n@ComponentRegister({\n  uri: \"epsgis-planet-layer-list\",\n  path: \"epsplanet/components/layer-list\",\n  name: \"PlanetLayerListComponent\"\n})\n@Component({\n  selector: 'epsgis-planet-layer-list',\n  templateUrl: './layer-list.component.html',\n  styleUrls: ['./layer-list.component.scss'],\n})\nexport class PlanetLayerListComponent extends BasePlanetWidgetComponent {\n  layerNodes: any = [];\n  selectedNode: any;\n  type: any;\n  listOfData = [];\n  isShow = false;\n  activatedNode?: NzTreeNode;\n  tplContent: TemplateRef<{}>\n  constructor(private modalService: ModalManagerService) {\n    super();\n  }\n  static getCompInfo() {\n    return { name: \"PlanetLayerListComponent\", path: \"epsplanet/components/layer-list\" };\n  }\n  ngOnInit() {\n    //正常\n    // XE.MVVM.watch(() => [...this.view.sceneTree.root.children], () => {\n    //   console.log('sceneTree发生变化！');\n    // });\n    //正常\n    // var uw3 = XE.MVVM.watch(this.view.sceneTree.root.children, () => {\n    //   console.log('sceneTree发生变化333！');\n    // });\n    //执行多次\n    // var uw2 = XE.MVVM.watch(this.view.sceneTree.root, 'children', () => {\n    //   console.log('sceneTree发生变化222');\n    // });\n    //执行多次\n    // XE.MVVM.watch(() => this.view.sceneTree.root.toJSONStr(), () => console.log('123'))\n    var uw3 = XE.MVVM.watch(() => [...this.view.sceneTree.root.children], () => {\n      this.loadSceneTree();\n    });\n  }\n  openFolder(data: NzTreeNode | NzFormatEmitEvent): void {\n    // do something if u want\n    console.log(data)\n    if (data instanceof NzTreeNode) {\n      data.isExpanded = !data.isExpanded;\n    } else {\n      const node = data.node;\n      if (node) {\n        node.isExpanded = !node.isExpanded;\n      }\n    }\n  }\n  loadSceneTree() {\n    setTimeout(() => {\n      const _layerNodes = SceneTreeUtils.SceneTree2NgZorroTree(this.view.sceneTree.$refs.layerlist);\n      // console.log(\"sceneTree:\", _layerNodes)\n      this.layerNodes = _layerNodes[0][\"children\"];\n      // console.log(this.layerNodes)\n    }, 100);\n\n  }\n\n  setting(node) {\n    // console.log(this.config)\n    this.selectedNode = node.origin;\n    this.type = this.selectedNode[\"origin\"].hasOwnProperty('luminanceAtZenith') ? \"瓦片\" : \"影像\";\n    this.isShow = true;\n    this.modalService.create({\n      title: \"图层“\" + node.title + \"”参数\",\n      content: PlanetLayerManagerComponent,\n      componentParams: {\n        selectedNode: this.selectedNode,\n        type: this.type\n      },\n      footer: null,\n      mask: false,\n      width: 320\n    })\n  }\n  flyTo(node) {\n    node.origin.origin.flyTo()\n    // console.log(node)\n  }\n\n  /**\n   * 单击节点\n   */\n  onLeftClickNode(evt: NzFormatEmitEvent) {\n    console.log(evt.node)\n    this.selectedNode = evt.node.origin;\n  }\n  /**\n   * 选中状态改变\n   */\n  onCheckedChange(evt: NzFormatEmitEvent) {\n    console.log(evt)\n    if (evt.eventName !== \"check\" || !evt.node) {\n      return;\n    }\n    this.showOrHideLayer(evt.node)\n  }\n  showOrHideLayer(parentNode) {\n    if (!parentNode.children || parentNode.children.length == 0) {\n      if (parentNode.isChecked) {\n        //加载图层\n        SceneTreeUtils.GetXbsjCzmObject(parentNode).show = true;\n      } else {\n        //移除图层\n        SceneTreeUtils.GetXbsjCzmObject(parentNode).show = false;\n      }\n    } else {\n      parentNode.children.forEach(item => {\n        this.showOrHideLayer(item)\n      })\n    }\n  }\n  /**\n   * 双击节点\n   */\n  onDblClickNode(evt: NzFormatEmitEvent) {\n    if (evt.eventName !== \"dblclick\" || !evt.node) {\n      return;\n    }\n    SceneTreeUtils.GetXbsjCzmObject(evt.node).flyTo();\n  }\n  /**\n   * 显示右键菜单\n   */\n  onRightClick(evt: NzFormatEmitEvent) {\n\n  }\n}\n","import { Injectable } from '@angular/core'\r\nimport { HttpReqService } from 'epsgis'\r\n\r\nimport turf from 'turf'\r\nlet propertyLists = []\r\nlet czmObjectList = []\r\nlet resList = []\r\nlet highLight = null\r\n\r\n// earth.epsplanet.allowClick = false;\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class Identify {\r\n    earth;\r\n    constructor(private http: HttpReqService) {\r\n        // debugger\r\n        // earth.epsplanet.allowClick = false\r\n        this.earth = window['earth']\r\n        this.earth.interaction.picking.enabled = false\r\n        this.earth.interaction.picking.hoverEnable = false\r\n        this.earth.epsplanet = {}\r\n        this.earth.epsplanet.allowClick = false;\r\n    }\r\n    httpReq(method, url) {\r\n        if (method == 'post') {\r\n            return this.http.httpClient.post(url, \"\").toPromise()\r\n        }\r\n        if (method == 'get') {\r\n            return this.http.httpClient.get(url).toPromise()\r\n        }\r\n    }\r\n    /**\r\n     * geoserver服务获取点选位置要素属性\r\n     * @param czmObject \r\n     * @param earth 创建的地球\r\n     * @param type 识别类型：点、线、面(目前只有点)\r\n     * @param callback 回调函数\r\n     */\r\n    GetFeatureInfo(czmObject, earth, type, callback) {\r\n        if (highLight == null) {\r\n            highLight = new Cesium.CustomDataSource('highLight');\r\n            earth.czm.viewer.dataSources.add(highLight);\r\n        }\r\n        let scene = earth.czm.scene;\r\n        let viewer = earth.czm.viewer;\r\n        let WFSUrl = this.GetWFSUrl(czmObject.xbsjImageryProvider);\r\n        let handler = new Cesium.ScreenSpaceEventHandler(scene.canvas);\r\n        let filter = \"\"\r\n\r\n        handler.setInputAction((click) => {\r\n            if (!earth.epsplanet.allowClick) return;\r\n            if (!czmObject.show) return;\r\n            let pickObj = earth.czm.viewer.scene.pick(click.position)\r\n            if (Cesium.defined(pickObj)) {\r\n                return\r\n            }\r\n            earth.sceneTree.$refs.pin1.czmObject.customProp = false;\r\n            highLight.entities.removeAll();\r\n            resList = [];\r\n            earth.sceneTree.$refs.pin1.czmObject.position = this.Cartesian2ToCartographic(viewer, click.position)\r\n            let position = this.Cartesian2ToWGS84(viewer, click.position);\r\n            let bufferCoordinates = this.Buffer([position.lon, position.lat], 100);\r\n            if (type == 'point') {\r\n                filter = `<Filter xmlns=\"http://www.opengis.net/ogc\" xmlns:gml=\"http://www.opengis.net/gml\"><Intersects><PropertyName>the_geom</PropertyName><gml:outerBoundaryIs><gml:LinearRing><gml:coordinates>${bufferCoordinates}</gml:coordinates></gml:LinearRing></gml:outerBoundaryIs></Intersects></Filter>`\r\n            } else if (type = 'line') {\r\n\r\n            } else if (type = 'polygon') {\r\n\r\n            }\r\n            this.httpReq('post', WFSUrl + filter).then((res: any) => {\r\n                if (res.features.length > 0) {\r\n                    let properties = res.features[0].properties;\r\n                    let propertyList = [];\r\n                    Object.keys(properties).map(key =>\r\n                        propertyList.push({\r\n                            name: key,\r\n                            value: properties[key]\r\n                        })\r\n                    );\r\n                    propertyLists.push(propertyList)\r\n                    czmObjectList.push(czmObject)\r\n                    resList.push(res)\r\n                    setTimeout(() => {\r\n                        //如果有图层重叠，只第一个图层返回属性\r\n                        if (resList.length > 1) {\r\n                            // debugger;\r\n                            if (czmObjectList[0]._ci > czmObjectList[1]._ci) {\r\n                                if (czmObjectList[0]._ci !== czmObject._ci) return;\r\n                                if (typeof callback === 'function') {\r\n                                    callback(propertyLists[0]);\r\n                                    Cesium.GeoJsonDataSource.load(resList[0])\r\n                                        .then(dataSource => {\r\n                                            dataSource.entities.values.forEach(entity => {\r\n                                                highLight.entities.add(entity)\r\n                                            })\r\n                                        })\r\n                                }\r\n                            } else {\r\n                                if (czmObjectList[1]._ci !== czmObject._ci) return;\r\n                                if (typeof callback === 'function') {\r\n                                    callback(propertyLists[1]);\r\n                                    Cesium.GeoJsonDataSource.load(resList[1])\r\n                                        .then(dataSource => {\r\n                                            dataSource.entities.values.forEach(entity => {\r\n                                                highLight.entities.add(entity)\r\n                                            })\r\n                                        })\r\n                                }\r\n                            }\r\n                            return\r\n                        } else {\r\n                            if (typeof callback === 'function') {\r\n                                callback(propertyList);\r\n                                Cesium.GeoJsonDataSource.load(res)\r\n                                    .then(dataSource => {\r\n                                        dataSource.entities.values.forEach(entity => {\r\n                                            highLight.entities.add(entity)\r\n                                        })\r\n                                    })\r\n                            }\r\n                        }\r\n                    }, 100);\r\n                    setTimeout(() => {\r\n                        resList = []\r\n                        propertyLists = []\r\n                        czmObjectList = []\r\n                    }, 1000);\r\n\r\n                }\r\n            }).catch(err => { })\r\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n    }\r\n    InitHandler() {\r\n\r\n    }\r\n    //arcgis\r\n    getLayers(czmObject, earth, callback) {\r\n        if (highLight == null) {\r\n            highLight = new Cesium.CustomDataSource('highLight');\r\n            earth.czm.viewer.dataSources.add(highLight);\r\n        }\r\n        let handler = new Cesium.ScreenSpaceEventHandler(earth.czm.scene.canvas);\r\n        let url = czmObject.xbsjImageryProvider.WebMapTileServiceImageryProvider.url || czmObject.xbsjImageryProvider.WebMapServiceImageryProvider.url;\r\n        let requestUrl = \"\"\r\n        if (czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\r\n            requestUrl = url.split('MapServer')[0] + \"MapServer/layers?f=pjson\"\r\n        } else if (czmObject.xbsjImageryProvider.type == \"WebMapServiceImageryProvider\") {\r\n            requestUrl = url.split('arcgis')[0] + 'arcgis/rest' + url.split('arcgis')[1].split('MapServer')[0] + \"MapServer/layers?f=pjson\";\r\n        }\r\n        // let layers=[];\r\n        this.httpReq('get', requestUrl).then((res: any) => {\r\n            // debugger\r\n            // console.log(res)\r\n            handler.setInputAction((click) => {\r\n                if (res.layers == undefined) return;\r\n                if (!earth.epsplanet.allowClick) return;\r\n                if (!czmObject.show) return;\r\n                let pickObj = earth.czm.viewer.scene.pick(click.position)\r\n                if (Cesium.defined(pickObj)) {\r\n                    return\r\n                }\r\n                if (highLight)\r\n                    highLight.entities.removeAll();\r\n                earth.sceneTree.$refs.pin1.czmObject.customProp = false;\r\n                earth.sceneTree.$refs.pin1.czmObject.position = this.Cartesian2ToCartographic(earth.czm.viewer, click.position)\r\n\r\n                let position = this.Cartesian2ToWGS84(earth.czm.viewer, click.position);\r\n                let bufferCoordinates = this.Buffer([position.lon, position.lat], 1);\r\n                let addr = this.GetWFSUrl(czmObject.xbsjImageryProvider);\r\n                let typeName = url.split('/MapServer')[0].split('services/')[1];\r\n                let resList = []\r\n                let geometryList = []\r\n\r\n                if (czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\r\n                    for (let i = 0; i < res.layers.length; i++) {\r\n                        const item = res.layers[i];\r\n                        let query = `${addr}`\r\n                            + `typename=${typeName}:${item.name}&Filter=`\r\n                            + `<ogc:Filter><ogc:Intersects><ogc:PropertyName>Shape</ogc:PropertyName>`\r\n                            + `<gml:Polygon srsName=\"urn:x-ogc:def:crs:EPSG:4326\"><gml:outerBoundaryIs><gml:LinearRing>`\r\n                            + `<gml:coordinates>${bufferCoordinates}</gml:coordinates>`\r\n                            + `</gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></ogc:Intersects></ogc:Filter>`\r\n                        this.httpReq('get', query).then().catch((err: any) => {\r\n                            let res = err.error.text\r\n                            // debugger\r\n                            if (this.xml2Json(this.stringToXml(res))['FeatureCollection']['featureMember']) {\r\n                                let properties = this.xml2Json(this.stringToXml(res))['FeatureCollection']['featureMember'][item.name]\r\n                                let propertyList = []\r\n                                let geojson = {}\r\n                                // debugger\r\n                                if (properties == undefined || properties == null) return;\r\n                                Object.keys(properties).map(key => {\r\n                                    if (key !== \"Shape\") {\r\n                                        propertyList.push({\r\n                                            name: key,\r\n                                            value: properties[key].value\r\n                                        })\r\n                                    } else {\r\n                                        if (properties[key].MultiSurface) {\r\n                                            let posList = properties[key].MultiSurface.surfaceMember.Polygon.exterior.LinearRing.posList.value.split(\" \");\r\n                                            posList.shift();\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson = {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].Point) {\r\n                                            let posList = properties[key].Point.pos.value.split(\" \");\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"Point\",\r\n                                                    coordinates: posList\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].MultiCurve) {\r\n                                            let posList = properties[key].MultiCurve.curveMember.LineString.posList.value.split(\" \");\r\n\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                                resList.push(propertyList)\r\n                                geometryList.push(geojson)\r\n                            }\r\n                        })\r\n                    }\r\n                } else if (czmObject.xbsjImageryProvider.type == \"WebMapServiceImageryProvider\") {\r\n                    let llist = czmObject.xbsjImageryProvider.WebMapServiceImageryProvider.layers.split(\",\")\r\n                    for (let i = 0; i < llist.length; i++) {\r\n                        const item = res.layers[res.layers.length - 1 - llist[i]];\r\n\r\n                        let query = `${addr}`\r\n                            + `typename=${typeName}:${item.name}&Filter=`\r\n                            + `<ogc:Filter><ogc:Intersects><ogc:PropertyName>Shape</ogc:PropertyName>`\r\n                            + `<gml:Polygon srsName=\"urn:x-ogc:def:crs:EPSG:4326\"><gml:outerBoundaryIs><gml:LinearRing>`\r\n                            + `<gml:coordinates>${bufferCoordinates}</gml:coordinates>`\r\n                            + `</gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></ogc:Intersects></ogc:Filter>`\r\n                        // console.log(item.name, query)\r\n                        this.httpReq('get', query).then().catch((err: any) => {\r\n                            let res = err.error.text\r\n                            if (this.xml2Json(this.stringToXml(res))['FeatureCollection'] == undefined) return\r\n                            // debugger\r\n                            if (this.xml2Json(this.stringToXml(res))['FeatureCollection']['featureMember']) {\r\n                                // console.log(this.xml2Json(this.stringToXml(res)))\r\n                                let properties = this.xml2Json(this.stringToXml(res))['FeatureCollection']['featureMember'][item.name]\r\n                                let propertyList = []\r\n                                let geojson = {}\r\n                                // debugger\r\n                                if (properties == undefined || properties == null) return;\r\n                                Object.keys(properties).map(key => {\r\n                                    if (key !== \"Shape\") {\r\n                                        propertyList.push({\r\n                                            name: key,\r\n                                            value: properties[key].value\r\n                                        })\r\n                                    } else {\r\n                                        if (properties[key].MultiSurface) {\r\n                                            let posList = properties[key].MultiSurface.surfaceMember.Polygon.exterior.LinearRing.posList.value.split(\" \");\r\n                                            posList.shift();\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson = {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].Point) {\r\n                                            let posList = properties[key].Point.pos.value.split(\" \");\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"Point\",\r\n                                                    coordinates: posList\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].MultiCurve) {\r\n                                            let posList = properties[key].MultiCurve.curveMember.LineString.posList.value.split(\" \");\r\n\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                                resList.push(propertyList)\r\n                                geometryList.push(geojson)\r\n                            }\r\n                        })\r\n                    }\r\n                }\r\n\r\n                setTimeout(() => {\r\n\r\n                    if (resList.length > 0 && geometryList.length > 0) {\r\n                        // console.log(geometryList, highLight)\r\n                        if (geometryList[0].geometry.type == \"Point\") {\r\n                            Cesium.GeoJsonDataSource.load(geometryList[0]).then(dataSource => {\r\n                                dataSource.entities.values.forEach(entity => {\r\n                                    entity.billboard = null;\r\n                                    entity.point = new Cesium.PointGraphics({\r\n                                        show: true,\r\n                                        color: Cesium.Color.AQUA,\r\n                                        pixelSize: 10,\r\n                                        clampToGround: true\r\n                                    })\r\n                                    highLight.entities.add(entity)\r\n                                })\r\n                            })\r\n                        } else if (geometryList[0].geometry.type == \"LineString\") {\r\n                            Cesium.GeoJsonDataSource.load(geometryList[0]).then(dataSource => {\r\n                                dataSource.entities.values.forEach(entity => {\r\n                                    entity.polyline.width = 10\r\n                                    entity.polyline.clampToGround = true\r\n                                    entity.polyline.material = new Cesium.PolylineGlowMaterialProperty({\r\n                                        glowPower: 0.2,\r\n                                        color: Cesium.Color.BLUE\r\n                                    });\r\n                                    highLight.entities.add(entity)\r\n                                })\r\n                            })\r\n                        }\r\n                        else {\r\n                            Cesium.GeoJsonDataSource.load(geometryList[0]).then(dataSource => {\r\n                                dataSource.entities.values.forEach(entity => {\r\n                                    highLight.entities.add(entity)\r\n                                })\r\n                            })\r\n                        }\r\n                        callback(resList[0])\r\n                    }\r\n                }, 500);\r\n            }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n        })\r\n    }\r\n    test(list, earth, callback) {\r\n        list.sort(function sortNumber(a, b) {\r\n            return b._ci - a._ci\r\n        })\r\n        // console.log(list)\r\n        if (highLight == null) {\r\n            highLight = new Cesium.CustomDataSource('highLight');\r\n            earth.czm.viewer.dataSources.add(highLight);\r\n        }\r\n        let handler = new Cesium.ScreenSpaceEventHandler(earth.czm.scene.canvas);\r\n        handler.setInputAction((click) => {\r\n            list.forEach((czmObject, i) => {\r\n                if (!earth.epsplanet.allowClick) return;\r\n                if (!czmObject.show) return;\r\n                let pickObj = earth.czm.viewer.scene.pick(click.position)\r\n                if (Cesium.defined(pickObj)) {\r\n                    return\r\n                }\r\n                // console.log(\"看看循环了几次\")\r\n                if (highLight)\r\n                    highLight.entities.removeAll();\r\n                earth.sceneTree.$refs.pin1.czmObject.customProp = false;\r\n                earth.sceneTree.$refs.pin1.czmObject.position = this.Cartesian2ToCartographic(earth.czm.viewer, click.position)\r\n                let url = czmObject.xbsjImageryProvider.WebMapTileServiceImageryProvider.url || czmObject.xbsjImageryProvider.WebMapServiceImageryProvider.url;\r\n                let requestUrl = \"\"\r\n                if (czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\r\n                    requestUrl = url.split('MapServer')[0] + \"MapServer/layers?f=pjson\"\r\n                } else if (czmObject.xbsjImageryProvider.type == \"WebMapServiceImageryProvider\") {\r\n                    requestUrl = url.split('arcgis')[0] + 'arcgis/rest' + url.split('arcgis')[1].split('MapServer')[0] + \"MapServer/layers?f=pjson\";\r\n                }\r\n                // let layers=[];\r\n                let position = this.Cartesian2ToWGS84(earth.czm.viewer, click.position);\r\n                let bufferCoordinates = this.Buffer([position.lon, position.lat], 1);\r\n                let addr = this.GetWFSUrl(czmObject.xbsjImageryProvider);\r\n                let typeName = url.split('/MapServer')[0].split('services/')[1];\r\n\r\n                this.httpFuncA(czmObject, typeName, bufferCoordinates, addr, requestUrl, (resList, geometryList) => {\r\n                    if (highLight.entities.values && highLight.entities.values.length > 0)\r\n                        return\r\n                    if (resList.length > 0 && geometryList.length > 0) {\r\n                        if (geometryList[0].geometry.type == \"Point\") {\r\n                            Cesium.GeoJsonDataSource.load(geometryList[0]).then(dataSource => {\r\n                                dataSource.entities.values.forEach(entity => {\r\n                                    entity.billboard = null;\r\n                                    entity.point = new Cesium.PointGraphics({\r\n                                        show: true,\r\n                                        color: Cesium.Color.AQUA,\r\n                                        pixelSize: 10,\r\n                                        clampToGround: true\r\n                                    })\r\n                                    highLight.entities.add(entity)\r\n                                })\r\n                            })\r\n                        } else if (geometryList[0].geometry.type == \"LineString\") {\r\n                            Cesium.GeoJsonDataSource.load(geometryList[0]).then(dataSource => {\r\n                                dataSource.entities.values.forEach(entity => {\r\n                                    entity.polyline.width = 10\r\n                                    entity.polyline.clampToGround = true\r\n                                    entity.polyline.material = new Cesium.PolylineGlowMaterialProperty({\r\n                                        glowPower: 0.2,\r\n                                        color: Cesium.Color.BLUE\r\n                                    });\r\n                                    highLight.entities.add(entity)\r\n                                })\r\n                            })\r\n                        } else {\r\n                            Cesium.GeoJsonDataSource.load(geometryList[0]).then(dataSource => {\r\n                                dataSource.entities.values.forEach(entity => {\r\n                                    highLight.entities.add(entity)\r\n                                })\r\n                            })\r\n                        }\r\n                        callback(resList[0])\r\n                    }\r\n                })\r\n            })\r\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n    }\r\n    httpFuncA(czmObject, typeName, bufferCoordinates, addr, requestUrl, callback) {\r\n        let resLists = []\r\n        let geometryLists = []\r\n        this.httpFuncB(requestUrl, res => {\r\n            if (res.layers == undefined) return;\r\n            if (czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\r\n                for (let i = 0; i < res.layers.length; i++) {\r\n                    const item = res.layers[i];\r\n                    let query = `${addr}`\r\n                        + `typename=${typeName}:${item.name}&Filter=`\r\n                        + `<ogc:Filter><ogc:Intersects><ogc:PropertyName>Shape</ogc:PropertyName>`\r\n                        + `<gml:Polygon srsName=\"urn:x-ogc:def:crs:EPSG:4326\"><gml:outerBoundaryIs><gml:LinearRing>`\r\n                        + `<gml:coordinates>${bufferCoordinates}</gml:coordinates>`\r\n                        + `</gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></ogc:Intersects></ogc:Filter>`\r\n                    this.httpFunc(query, err => {\r\n                        let res = err.error.text\r\n                        // debugger\r\n                        let FeatureCollection = this.xml2Json(this.stringToXml(res))['FeatureCollection'];\r\n                        if (FeatureCollection == undefined) return\r\n                        if (FeatureCollection['featureMember']) {\r\n                            if (FeatureCollection['featureMember'].length) {\r\n                                let properties = FeatureCollection['featureMember'][0][item.name]\r\n                                let propertyList = []\r\n                                let geojson = {}\r\n                                // debugger\r\n                                if (properties == undefined || properties == null) return;\r\n                                Object.keys(properties).map(key => {\r\n                                    if (key !== \"Shape\") {\r\n                                        propertyList.push({\r\n                                            name: key,\r\n                                            value: properties[key].value\r\n                                        })\r\n                                    } else {\r\n                                        if (properties[key].MultiSurface) {\r\n                                            let posList = properties[key].MultiSurface.surfaceMember.Polygon.exterior.LinearRing.posList.value.split(\" \");\r\n                                            posList.shift();\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson = {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].Point) {\r\n                                            let posList = properties[key].Point.pos.value.split(\" \");\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"Point\",\r\n                                                    coordinates: posList\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].MultiCurve) {\r\n                                            let posList = properties[key].MultiCurve.curveMember.LineString.posList.value.split(\" \");\r\n\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                                resLists.push(propertyList)\r\n                                geometryLists.push(geojson)\r\n                                callback(resLists, geometryLists)\r\n                            } else {\r\n                                let properties = FeatureCollection['featureMember'][item.name]\r\n                                let propertyList = []\r\n                                let geojson = {}\r\n                                // debugger\r\n                                if (properties == undefined || properties == null) return;\r\n                                Object.keys(properties).map(key => {\r\n                                    if (key !== \"Shape\") {\r\n                                        propertyList.push({\r\n                                            name: key,\r\n                                            value: properties[key].value\r\n                                        })\r\n                                    } else {\r\n                                        if (properties[key].MultiSurface) {\r\n                                            let posList = properties[key].MultiSurface.surfaceMember.Polygon.exterior.LinearRing.posList.value.split(\" \");\r\n                                            posList.shift();\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson = {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].Point) {\r\n                                            let posList = properties[key].Point.pos.value.split(\" \");\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"Point\",\r\n                                                    coordinates: posList\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].MultiCurve) {\r\n                                            let posList = properties[key].MultiCurve.curveMember.LineString.posList.value.split(\" \");\r\n\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                                resLists.push(propertyList)\r\n                                geometryLists.push(geojson)\r\n                                callback(resLists, geometryLists)\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n            } else if (czmObject.xbsjImageryProvider.type == \"WebMapServiceImageryProvider\") {\r\n                let llist = czmObject.xbsjImageryProvider.WebMapServiceImageryProvider.layers.split(\",\")\r\n                for (let i = llist.length - 1; i >= 0; i--) {\r\n                    // console.log('zhelijicine')\r\n                    const item = res.layers[res.layers.length - 1 - llist[i]];\r\n                    // console.log(item.name)\r\n                    let query = `${addr}`\r\n                        + `typename=${typeName}:${item.name}&Filter=`\r\n                        + `<ogc:Filter><ogc:Intersects><ogc:PropertyName>Shape</ogc:PropertyName>`\r\n                        + `<gml:Polygon srsName=\"urn:x-ogc:def:crs:EPSG:4326\"><gml:outerBoundaryIs><gml:LinearRing>`\r\n                        + `<gml:coordinates>${bufferCoordinates}</gml:coordinates>`\r\n                        + `</gml:LinearRing></gml:outerBoundaryIs></gml:Polygon></ogc:Intersects></ogc:Filter>`\r\n                    // console.log(item.name, query)\r\n                    // this.httpReq('get', query).then().catch((err: any) => {\r\n                    this.httpFunc(query, err => {\r\n                        if (resLists.length > 0) return\r\n                        let res = err.error.text\r\n                        let FeatureCollection = this.xml2Json(this.stringToXml(res))['FeatureCollection'];\r\n                        if (FeatureCollection == undefined) return\r\n                        if (FeatureCollection['featureMember']) {\r\n                            if (FeatureCollection['featureMember'].length) {\r\n                                let properties = FeatureCollection['featureMember'][0][item.name]\r\n                                let propertyList = []\r\n                                let geojson = {}\r\n                                if (properties == undefined || properties == null) return;\r\n                                Object.keys(properties).map(key => {\r\n                                    if (key !== \"Shape\") {\r\n                                        propertyList.push({\r\n                                            name: key,\r\n                                            value: properties[key].value\r\n                                        })\r\n                                    } else {\r\n                                        if (properties[key].MultiSurface) {\r\n                                            let posList = properties[key].MultiSurface.surfaceMember.Polygon.exterior.LinearRing.posList.value.split(\" \");\r\n                                            posList.shift();\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson = {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].Point) {\r\n                                            let posList = properties[key].Point.pos.value.split(\" \");\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"Point\",\r\n                                                    coordinates: posList\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].MultiCurve) {\r\n                                            let posList = properties[key].MultiCurve.curveMember.LineString.posList.value.split(\" \");\r\n\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                                resLists.push(propertyList)\r\n                                geometryLists.push(geojson)\r\n                                callback(resLists, geometryLists)\r\n                            } else {\r\n                                let properties = FeatureCollection['featureMember'][item.name]\r\n                                let propertyList = []\r\n                                let geojson = {}\r\n\r\n                                if (properties == undefined || properties == null) return;\r\n                                Object.keys(properties).map(key => {\r\n                                    if (key !== \"Shape\") {\r\n                                        propertyList.push({\r\n                                            name: key,\r\n                                            value: properties[key].value\r\n                                        })\r\n                                    } else {\r\n                                        if (properties[key].MultiSurface) {\r\n                                            let posList = properties[key].MultiSurface.surfaceMember.Polygon.exterior.LinearRing.posList.value.split(\" \");\r\n                                            posList.shift();\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson = {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].Point) {\r\n                                            let posList = properties[key].Point.pos.value.split(\" \");\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"Point\",\r\n                                                    coordinates: posList\r\n                                                }\r\n                                            }\r\n                                        } else if (properties[key].MultiCurve) {\r\n                                            let posList = properties[key].MultiCurve.curveMember.LineString.posList.value.split(\" \");\r\n\r\n                                            let list = []\r\n                                            for (let i = 0; i < posList.length; i += 2) {\r\n                                                list.push([posList[i], posList[i + 1]])\r\n                                            }\r\n                                            geojson =\r\n                                            {\r\n                                                type: \"Feature\",\r\n                                                geometry: {\r\n                                                    type: \"LineString\",\r\n                                                    coordinates: list\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                });\r\n                                resLists.push(propertyList)\r\n                                geometryLists.push(geojson)\r\n                                callback(resLists, geometryLists)\r\n                            }\r\n                            // console.log(this.xml2Json(this.stringToXml(res)))\r\n\r\n\r\n                        }\r\n                    })\r\n                    // })\r\n                }\r\n            }\r\n        })\r\n    }\r\n    httpFuncB(requestUrl, callback) {\r\n        this.httpReq('get', requestUrl).then((res: any) => {\r\n            callback(res)\r\n        })\r\n    }\r\n    httpFunc(query, callback) {\r\n        this.httpReq('get', query).then().catch((err: any) => {\r\n            callback(err)\r\n        })\r\n    }\r\n    pickModel(earth, callback) {\r\n        let handler = new Cesium.ScreenSpaceEventHandler(earth.czm.scene.canvas);\r\n        handler.setInputAction((click) => {\r\n            if (!earth.epsplanet.allowClick) {\r\n                return\r\n            }\r\n            // console.log(click)\r\n            let position = earth.czm.viewer.scene.pickPosition(click.position)\r\n            let pickObj = earth.czm.viewer.scene.pick(click.position)\r\n            if (!Cesium.defined(pickObj) || !pickObj.getPropertyNames) {\r\n                earth.sceneTree.$refs.pin1.czmObject.customProp = false;\r\n                return\r\n            }\r\n            // console.log(\"dsadad\", pickObj)\r\n            let cartographic = Cesium.Cartographic.fromCartesian(position)\r\n            // earth.sceneTree.$refs.pin1.czmObject.customProp = false;\r\n            earth.sceneTree.$refs.pin1.czmObject.position = [cartographic.longitude, cartographic.latitude, cartographic.height]\r\n            let PropertyNames = pickObj.getPropertyNames()\r\n            let propertyList = []\r\n            PropertyNames.forEach(property => {\r\n                propertyList.push({\r\n                    name: property,\r\n                    value: pickObj.getProperty(property)\r\n                })\r\n            })\r\n            callback(propertyList, pickObj)\r\n            // console.log(this.Cartesian2ToCartographic(earth.czm.viewer, position))\r\n        }, Cesium.ScreenSpaceEventType.LEFT_CLICK)\r\n    }\r\n\r\n    /**\r\n     * 屏幕坐标转经纬度坐标\r\n     * @param viewer \r\n     * @param position 屏幕坐标cartesian2\r\n     * @returns \r\n     */\r\n    Cartesian2ToWGS84(viewer, position) {\r\n        var ray = viewer.camera.getPickRay(position);\r\n        var cartesian = viewer.scene.globe.pick(ray, viewer.scene);\r\n        var cartographic = Cesium.Cartographic.fromCartesian(cartesian);\r\n        let lon = Cesium.Math.toDegrees(cartographic.longitude)\r\n        let lat = Cesium.Math.toDegrees(cartographic.latitude)\r\n        return { lon: lon, lat: lat }\r\n    }\r\n\r\n    Cartesian2ToCartographic(viewer, position) {\r\n        var ray = viewer.camera.getPickRay(position);\r\n        var cartesian = viewer.scene.globe.pick(ray, viewer.scene);\r\n        var cartographic = Cesium.Cartographic.fromCartesian(cartesian);\r\n        return [cartographic.longitude, cartographic.latitude, cartographic.height]\r\n    }\r\n    /**\r\n     * 拼接用于wfs查询的url\r\n     * @param WMTSImageryProvider \r\n     * @returns \r\n     */\r\n    GetWFSUrl(ImageryProvider) {\r\n        let WFSUrl = \"\";\r\n        if (ImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\r\n            let WMTSImageryProvider = ImageryProvider.WebMapTileServiceImageryProvider;\r\n            if (WMTSImageryProvider.url.indexOf('arcgis') !== -1) {\r\n                WFSUrl = WMTSImageryProvider.url.split(\"rest\")[0] + WMTSImageryProvider.url.split(\"rest/\")[1].split(\"MapServer\")[0] + \"MapServer/WFSServer?request=GetFeature&service=WFS&version=1.1.0&\";\r\n            } else if (WMTSImageryProvider.url.indexOf('geoserver') !== -1) {\r\n                WFSUrl = WMTSImageryProvider.url.split(\"gwc\")[0] + WMTSImageryProvider.layer.split(\":\")[0] + \"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=\" + WMTSImageryProvider.layer + \"&maxFeatures=1&outputFormat=json&filter=\"\r\n            }\r\n        }\r\n        if (ImageryProvider.type == \"WebMapServiceImageryProvider\") {\r\n            let WebMapServiceImageryProvider = ImageryProvider.WebMapServiceImageryProvider;\r\n            if (WebMapServiceImageryProvider.url.indexOf('arcgis') !== -1) {\r\n                WFSUrl = WebMapServiceImageryProvider.url.split(\"MapServer\")[0] + \"MapServer/WFSServer?request=GetFeature&service=WFS&version=1.1.0&\";\r\n            } else if (WebMapServiceImageryProvider.url.indexOf('geoserver') !== -1) {\r\n                WFSUrl = WebMapServiceImageryProvider.url.split(\"wms\")[0] + \"/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=\" + WebMapServiceImageryProvider.layers + \"&maxFeatures=1&outputFormat=json&filter=\";\r\n            }\r\n\r\n        }\r\n        return WFSUrl\r\n    }\r\n    /**\r\n     * \r\n     * @param position [lon,lat]\r\n     * @returns \r\n     */\r\n    Buffer(position, meters) {\r\n        let pointF = turf.point(position);\r\n        let buffered = turf.buffer(pointF, meters, 'meters');\r\n        let coordinates = buffered.geometry.coordinates;\r\n        let points = coordinates[0];\r\n        let degreesListStr = this.pointsToDegreesArray(points);\r\n        return degreesListStr\r\n    }\r\n    /**\r\n     * \r\n     * @param points 格式转换\r\n     * @returns \r\n     */\r\n    pointsToDegreesArray(points) {\r\n        let degreesArray = \"\";\r\n        points.map(item => {\r\n            degreesArray += item[0] + \",\" + item[1] + \" \"\r\n        });\r\n        return degreesArray;\r\n    }\r\n    /**\r\n     * 清除高亮\r\n     */\r\n    ClearHighLight() {\r\n        // debugger\r\n        highLight.entities.removeAll();\r\n    }\r\n    /**\r\n     * xml转json\r\n     * @param xml \r\n     * @returns \r\n     */\r\n    xml2Json(xml) {\r\n        // Create the return object\r\n        var obj = {};\r\n        if (xml.nodeType == 1) { // element\r\n            // do attributes\r\n            if (xml.attributes.length > 0) {\r\n                obj[\"@attributes\"] = {};\r\n                for (var j = 0; j < xml.attributes.length; j++) {\r\n                    // debugger\r\n                    var attribute = xml.attributes.item(j);\r\n                    if (attribute.nodeName.indexOf(\":\") == -1) {\r\n                        obj[\"@attributes\"][attribute.nodeName] = attribute.nodeValue;\r\n                    } else {\r\n                        obj[\"@attributes\"][attribute.nodeName.split(\":\")[1]] = attribute.nodeValue;\r\n                    }\r\n\r\n                }\r\n            }\r\n        } else if (xml.nodeType == 3) { // text\r\n            obj = xml.nodeValue;\r\n        }\r\n        // do children\r\n        if (xml.hasChildNodes()) {\r\n            for (var i = 0; i < xml.childNodes.length; i++) {\r\n                var item = xml.childNodes.item(i);\r\n                var nodeName = item.nodeName;\r\n                if (typeof (obj[nodeName.split(\":\")[1]]) == \"undefined\") {\r\n                    if (nodeName.split(\":\")[1] == undefined) {\r\n                        obj['value'] = this.xml2Json(item);\r\n                    } else {\r\n                        obj[nodeName.split(\":\")[1]] = this.xml2Json(item);\r\n                    }\r\n\r\n                } else {\r\n                    if (typeof (obj[nodeName.split(\":\")[1]].length) == \"undefined\") {\r\n                        var old = obj[nodeName.split(\":\")[1]];\r\n                        obj[nodeName.split(\":\")[1]] = [];\r\n                        obj[nodeName.split(\":\")[1]].push(old);\r\n                    }\r\n                    obj[nodeName.split(\":\")[1]].push(this.xml2Json(item));\r\n                }\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    /**\r\n     * 字符串转xml\r\n     * @param xmlString \r\n     * @returns \r\n     */\r\n    stringToXml(xmlString) {\r\n        var xmlDoc;\r\n        if (typeof xmlString == \"string\") {\r\n            //FF\r\n            if (document.implementation.createDocument) {\r\n                var parser = new DOMParser();\r\n                xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\r\n            }\r\n        }\r\n        else {\r\n            xmlDoc = xmlString;\r\n        }\r\n        return xmlDoc;\r\n    }\r\n}","<!-- <nz-switch [(ngModel)]=\"switchValue\" (ngModelChange)=\"switch($event)\"></nz-switch> -->\r\n<div class=\"jimu-widget-onscreen-icon\" title=\"识别\">\r\n    <i nz-icon [nzIconfont]=\"'icon-epsgis-weibiaoti-'\" (click)=\"switch($event)\"></i>\r\n</div>\r\n<!-- <button nz-button (click)=\"test()\">test</button> -->\r\n<!-- <epsgis-planet-layer-manager></epsgis-planet-layer-manager> -->\r\n\r\n<div [hidden]=\"!showInfo\" class=\"dialog\"\r\n    [ngStyle]=\"{ 'left': (winPos[0]-65 ) + 'px', 'bottom': (winPos[3]) + 'px' }\">\r\n    <div class=\"panel\">\r\n        <span>{{title}}</span><i nz-icon nzType=\"close\" nzTheme=\"outline\" (click)=\"close()\" style=\"float: right;\"></i>\r\n        <nz-table #basicTable [nzData]=\"propertyList\" [nzFrontPagination]=\"false\" [nzShowPagination]=\"false\"\r\n            [nzTitle]=\"null\">\r\n            <tbody>\r\n                <tr *ngFor=\"let data of basicTable.data\">\r\n                    <td>{{ data.name }}</td>\r\n                    <td>{{ data.value }}</td>\r\n                </tr>\r\n            </tbody>\r\n        </nz-table>\r\n        <!-- <i nz-icon nzType=\"zoom-in\" nzTheme=\"outline\" (click)=\"zoomTo()\"></i><span>缩放至</span> -->\r\n        <button nz-button (click)=\"zoomTo()\"><i nz-icon nzType=\"zoom-in\" nzTheme=\"outline\"></i>缩放至</button>\r\n        <!-- <i nz-icon nzType=\"zoom-in\" nzTheme=\"outline\" (click)=\"zoomTo()\"></i><span>缩放至</span> -->\r\n    </div>\r\n    <div class=\"arrow\"></div>\r\n</div>","<div>\n  <span>{{item.X.label}}</span>\n  <nz-input-number\n      [(ngModel)]=\"XValue\" \n      [nzMin]=\"item.X.min\" \n      [nzMax]=\"item.X.max\"\n      [nzStep]=\"0.0001\" \n      [nzPlaceHolder]=\"item.X.placeHolder\">\n  </nz-input-number>\n</div>\n<div>\n  <span>{{item.Y.label}}</span>\n  <nz-input-number \n      [(ngModel)]=\"YValue\" \n      [nzMin]=\"item.Y.min\" \n      [nzMax]=\"item.Y.max\"\n      [nzStep]=\"0.0001\" \n      [nzPlaceHolder]=\"item.Y.placeHolder\">\n  </nz-input-number>\n</div>\n<div *ngIf=\"item.Z\">\n  <span>{{item.Z.label}}</span>\n  <nz-input-number \n      [(ngModel)]=\"ZValue\" \n      [nzStep]=\"1\" \n      [nzPlaceHolder]=\"item.Z.placeHolder\">\n  </nz-input-number>\n</div>\n<div>\n  <button nz-button nzType=\"primary\" (click)=\"location()\">定位</button>\n</div>","<div class=\"jimu-widget-onscreen-icon\" title=\"模式切换\">\n  <div nz-popover [(nzPopoverVisible)]=\"visible\" nzPopoverTrigger=\"click\" [nzPopoverContent]=\"contentTemplate\"\n    class=\"icon\" [nzPopoverPlacement]=\"'right'\">\n    <ng-container *ngIf=\"viewType=='3d'\">\n      <svg:svg class=\"\" width=\"32\" height=\"32\" viewBox=\"0 0 64 64\">\n        <path\n          d=\"m 32.401392,4.9330437 c -7.087603,0 -14.096095,2.884602 -19.10793,7.8946843 -5.0118352,5.010083 -7.9296167,11.987468 -7.9296167,19.072999 0,7.085531 2.9177815,14.097848 7.9296167,19.107931 4.837653,4.835961 11.541408,7.631372 18.374354,7.82482 0.05712,0.01231 0.454119,0.139729 0.454119,0.139729 l 0.03493,-0.104797 c 0.08246,7.84e-4 0.162033,0.03493 0.244525,0.03493 0.08304,0 0.161515,-0.03414 0.244526,-0.03493 l 0.03493,0.104797 c 0,0 0.309474,-0.129487 0.349323,-0.139729 6.867765,-0.168094 13.582903,-2.965206 18.444218,-7.82482 2.558195,-2.5573 4.551081,-5.638134 5.903547,-8.977584 1.297191,-3.202966 2.02607,-6.661489 2.02607,-10.130347 0,-6.237309 -2.366261,-12.31219 -6.322734,-17.116794 -0.0034,-0.02316 0.0049,-0.04488 0,-0.06986 -0.01733,-0.08745 -0.104529,-0.278855 -0.104797,-0.279458 -5.31e-4,-0.0012 -0.522988,-0.628147 -0.523984,-0.62878         -3.47e-4,-2.2e-4 -0.133444,-0.03532 -0.244525,-0.06987 C 51.944299,13.447603 51.751076,13.104317 51.474391,12.827728 46.462556,7.8176457 39.488996,4.9330437 32.401392,4.9330437 z m -2.130866,3.5281554 0.104797,9.6762289 c -4.111695,-0.08361 -7.109829,-0.423664 -9.257041,-0.943171 1.198093,-2.269271 2.524531,-4.124404 3.91241,-5.414496 2.167498,-2.0147811 3.950145,-2.8540169 5.239834,-3.3185619 z m 2.794579,0 c 1.280302,0.4754953 3.022186,1.3285948 5.065173,3.2486979 1.424667,1.338973 2.788862,3.303645 3.982275,5.728886 -2.29082,0.403367 -5.381258,0.621049 -8.942651,0.698645 L 33.065105,8.4611991 z m 5.728886,0.2445256 c 4.004072,1.1230822 7.793098,3.1481363 10.724195,6.0782083 0.03468,0.03466 0.07033,0.06991 0.104797,0.104797 -0.45375,0.313891 -0.923054,0.663002 -1.956205,1.082899 -0.647388,0.263114 -1.906242,0.477396 -2.829511,0.733577 -1.382296,-2.988132         -3.027146,-5.368585 -4.785716,-7.0213781 -0.422866,-0.397432 -0.835818,-0.6453247 -1.25756,-0.9781032 z m -15.33525,0.7685092 c -0.106753,0.09503 -0.207753,0.145402 -0.31439,0.244526 -1.684973,1.5662541 -3.298068,3.8232211 -4.680919,6.5672591 -0.343797,-0.14942 -1.035052,-0.273198 -1.292493,-0.419186 -0.956528,-0.542427 -1.362964,-1.022024 -1.537018,-1.292493 -0.0241,-0.03745 -0.01868,-0.0401 -0.03493,-0.06986 2.250095,-2.163342 4.948824,-3.869984 7.859752,-5.0302421 z m -9.641296,7.0912431 c 0.464973,0.571618 0.937729,1.169056 1.956205,1.746612 0.349907,0.198425 1.107143,0.335404 1.537018,0.523983 -1.20166,3.172984 -1.998037,7.051901 -2.165798,11.772162 C 14.256557,30.361384 12.934823,30.161483 12.280427,29.90959 10.644437,29.279855 9.6888882,28.674891 9.1714586,28.267775 8.6540289,27.860658 8.6474751,27.778724 8.6474751,27.778724 l -0.069864,0.03493 C 9.3100294,23.691285         11.163248,19.798527 13.817445,16.565477 z m 37.552149,0.523984 c 2.548924,3.289983 4.265057,7.202594 4.890513,11.318043 -0.650428,0.410896 -1.756876,1.001936 -3.563088,1.606882 -1.171552,0.392383 -3.163859,0.759153 -4.960377,1.117832 -0.04367,-4.752703 -0.784809,-8.591423 -1.88634,-11.807094 0.917574,-0.263678 2.170552,-0.486495 2.864443,-0.76851 1.274693,-0.518066 2.003942,-1.001558 2.654849,-1.467153 z m -31.439008,2.619917 c 2.487341,0.672766 5.775813,1.137775 10.479669,1.222628 l 0.104797,10.689263 0,0.03493 0,0.733577 c -5.435005,-0.09059 -9.512219,-0.519044 -12.610536,-1.117831 0.106127,-4.776683 0.879334,-8.55791 2.02607,-11.562569 z m 23.264866,0.31439 c 1.073459,3.067541 1.833795,6.821314 1.816476,11.702298 -3.054474,0.423245 -7.062018,0.648559 -11.702298,0.698644 l 0,-0.838373 -0.104796,-10.654331 c 4.082416,-0.0864 7.404468,-0.403886 9.990618,-0.908238 z         M 8.2632205,30.922625 c 0.7558676,0.510548 1.5529563,1.013339 3.0041715,1.57195 0.937518,0.360875 2.612202,0.647642 3.91241,0.978102 0.112814,3.85566 0.703989,7.107756 1.606883,9.920754 -1.147172,-0.324262 -2.644553,-0.640648 -3.423359,-0.978102 -1.516688,-0.657177 -2.386627,-1.287332 -2.864443,-1.71168 -0.477816,-0.424347 -0.489051,-0.489051 -0.489051,-0.489051 L 9.8002387,40.319395 C 8.791691,37.621767 8.1584238,34.769583 8.1584238,31.900727 c 0,-0.330153 0.090589,-0.648169 0.1047967,-0.978102 z m 48.2763445,0.419186 c 0.0047,0.188973 0.06986,0.36991 0.06986,0.558916 0,2.938869 -0.620228,5.873558 -1.676747,8.628261 -0.07435,0.07583 -0.06552,0.07411 -0.454119,0.349323 -0.606965,0.429857 -1.631665,1.042044 -3.318562,1.676747 -1.208528,0.454713 -3.204964,0.850894 -5.135038,1.25756 0.84593,-2.765726 1.41808,-6.005357 1.606883,-9.815957 2.232369,-0.413371 4.483758,-0.840201         5.938479,-1.327425 1.410632,-0.472457 2.153108,-0.89469 2.96924,-1.327425 z m -38.530252,2.864443 c 3.208141,0.56697 7.372279,0.898588 12.575603,0.978103 l 0.174662,9.885821 c -4.392517,-0.06139 -8.106722,-0.320566 -10.863925,-0.803441 -1.051954,-2.664695 -1.692909,-6.043794 -1.88634,-10.060483 z m 26.793022,0.31439 c -0.246298,3.923551 -0.877762,7.263679 -1.816476,9.885822 -2.561957,0.361954 -5.766249,0.560708 -9.431703,0.62878 l -0.174661,-9.815957 c 4.491734,-0.04969 8.334769,-0.293032 11.42284,-0.698645 z M 12.035901,44.860585 c 0.09977,0.04523 0.105535,0.09465 0.209594,0.139729 1.337656,0.579602 3.441099,1.058072 5.589157,1.537018 1.545042,3.399208 3.548524,5.969402 5.589157,7.789888 -3.034411,-1.215537 -5.871615,-3.007978 -8.174142,-5.309699 -1.245911,-1.245475 -2.271794,-2.662961 -3.213766,-4.156936 z m 40.69605,0 c -0.941972,1.493975 -1.967855,2.911461         -3.213765,4.156936 -2.74253,2.741571 -6.244106,4.696717 -9.955686,5.868615 0.261347,-0.241079 0.507495,-0.394491 0.768509,-0.663713 1.674841,-1.727516 3.320792,-4.181056 4.645987,-7.265904 2.962447,-0.503021 5.408965,-1.122293 7.161107,-1.781544 0.284034,-0.106865 0.337297,-0.207323 0.593848,-0.31439 z m -31.404076,2.305527 c 2.645807,0.376448 5.701178,0.649995 9.466635,0.698645 l 0.139729,7.789888 c -1.38739,-0.480844 -3.316218,-1.29837 -5.659022,-3.388427 -1.388822,-1.238993 -2.743668,-3.0113 -3.947342,-5.100106 z m 20.365491,0.104797 c -1.04872,2.041937 -2.174337,3.779068 -3.353494,4.995309 -1.853177,1.911459 -3.425515,2.82679 -4.611055,3.353494 l -0.139729,-7.789887 c 3.13091,-0.05714 5.728238,-0.278725 8.104278,-0.558916 z\">\n        </path>\n      </svg:svg>\n    </ng-container>\n    <ng-container *ngIf=\"viewType=='2d'\">\n      <svg:svg class=\"\" width=\"32\" height=\"32\" viewBox=\"0 0 64 64\">\n        <path\n          d=\"m 2.9825053,17.550598 0,1.368113 0,26.267766 0,1.368113 1.36811,0 54.9981397,0 1.36811,0 0,-1.368113 0,-26.267766 0,-1.368113 -1.36811,0 -54.9981397,0 -1.36811,0 z m 2.73623,2.736226 10.3292497,0 0,10.466063 -10.3292497,0 0,-10.466063 z m 13.0654697,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 10.32926,0 0,10.466063 -10.32926,0 0,-10.466063 z m -41.9326497,13.202288 10.3292497,0 0,10.329252 -10.3292497,0 0,-10.329252 z m 13.0654697,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 10.32926,0 0,10.329252 -10.32926,0 0,-10.329252 z\">\n        </path>\n      </svg:svg>\n    </ng-container>\n    <ng-container *ngIf=\"viewType=='columbus'\">\n      <svg:svg class=\"\" width=\"32\" height=\"32\" viewBox=\"0 0 64 64\">\n        <path\n          d=\"m 14.723969,17.675598 -0.340489,0.817175 -11.1680536,26.183638 -0.817175,1.872692 2.076986,0 54.7506996,0 2.07698,0 -0.81717,-1.872692 -11.16805,-26.183638 -0.34049,-0.817175 -0.91933,0 -32.414586,0 -0.919322,0 z m 1.838643,2.723916 6.196908,0 -2.928209,10.418977 -7.729111,0 4.460412,-10.418977 z m 9.02297,0 4.903049,0 0,10.418977 -7.831258,0 2.928209,-10.418977 z m 7.626964,0 5.584031,0 2.62176,10.418977 -8.205791,0 0,-10.418977 z m 8.410081,0 5.51593,0 4.46042,10.418977 -7.38863,0 -2.58772,-10.418977 z m -30.678091,13.142892 8.103649,0 -2.89416,10.282782 -9.6018026,0 4.3923136,-10.282782 z m 10.929711,0 8.614384,0 0,10.282782 -11.508544,0 2.89416,-10.282782 z m 11.338299,0 8.852721,0 2.58772,10.282782 -11.440441,0 0,-10.282782 z m 11.678781,0 7.86531,0 4.39231,10.282782 -9.6699,0 -2.58772,-10.282782 z\">\n        </path>\n      </svg:svg>\n    </ng-container>\n  </div>\n</div>\n\n\n<ng-template #contentTemplate>\n  <div class=\"container\">\n    <div class=\"mode\" (click)=\"changeViewMode('3d');\">\n      <svg:svg class=\"\" width=\"40\" height=\"40\" viewBox=\"0 0 64 64\">\n        <path\n          d=\"m 32.401392,4.9330437 c -7.087603,0 -14.096095,2.884602 -19.10793,7.8946843 -5.0118352,5.010083 -7.9296167,11.987468 -7.9296167,19.072999 0,7.085531 2.9177815,14.097848 7.9296167,19.107931 4.837653,4.835961 11.541408,7.631372 18.374354,7.82482 0.05712,0.01231 0.454119,0.139729 0.454119,0.139729 l 0.03493,-0.104797 c 0.08246,7.84e-4 0.162033,0.03493 0.244525,0.03493 0.08304,0 0.161515,-0.03414 0.244526,-0.03493 l 0.03493,0.104797 c 0,0 0.309474,-0.129487 0.349323,-0.139729 6.867765,-0.168094 13.582903,-2.965206 18.444218,-7.82482 2.558195,-2.5573 4.551081,-5.638134 5.903547,-8.977584 1.297191,-3.202966 2.02607,-6.661489 2.02607,-10.130347 0,-6.237309 -2.366261,-12.31219 -6.322734,-17.116794 -0.0034,-0.02316 0.0049,-0.04488 0,-0.06986 -0.01733,-0.08745 -0.104529,-0.278855 -0.104797,-0.279458 -5.31e-4,-0.0012 -0.522988,-0.628147 -0.523984,-0.62878         -3.47e-4,-2.2e-4 -0.133444,-0.03532 -0.244525,-0.06987 C 51.944299,13.447603 51.751076,13.104317 51.474391,12.827728 46.462556,7.8176457 39.488996,4.9330437 32.401392,4.9330437 z m -2.130866,3.5281554 0.104797,9.6762289 c -4.111695,-0.08361 -7.109829,-0.423664 -9.257041,-0.943171 1.198093,-2.269271 2.524531,-4.124404 3.91241,-5.414496 2.167498,-2.0147811 3.950145,-2.8540169 5.239834,-3.3185619 z m 2.794579,0 c 1.280302,0.4754953 3.022186,1.3285948 5.065173,3.2486979 1.424667,1.338973 2.788862,3.303645 3.982275,5.728886 -2.29082,0.403367 -5.381258,0.621049 -8.942651,0.698645 L 33.065105,8.4611991 z m 5.728886,0.2445256 c 4.004072,1.1230822 7.793098,3.1481363 10.724195,6.0782083 0.03468,0.03466 0.07033,0.06991 0.104797,0.104797 -0.45375,0.313891 -0.923054,0.663002 -1.956205,1.082899 -0.647388,0.263114 -1.906242,0.477396 -2.829511,0.733577 -1.382296,-2.988132         -3.027146,-5.368585 -4.785716,-7.0213781 -0.422866,-0.397432 -0.835818,-0.6453247 -1.25756,-0.9781032 z m -15.33525,0.7685092 c -0.106753,0.09503 -0.207753,0.145402 -0.31439,0.244526 -1.684973,1.5662541 -3.298068,3.8232211 -4.680919,6.5672591 -0.343797,-0.14942 -1.035052,-0.273198 -1.292493,-0.419186 -0.956528,-0.542427 -1.362964,-1.022024 -1.537018,-1.292493 -0.0241,-0.03745 -0.01868,-0.0401 -0.03493,-0.06986 2.250095,-2.163342 4.948824,-3.869984 7.859752,-5.0302421 z m -9.641296,7.0912431 c 0.464973,0.571618 0.937729,1.169056 1.956205,1.746612 0.349907,0.198425 1.107143,0.335404 1.537018,0.523983 -1.20166,3.172984 -1.998037,7.051901 -2.165798,11.772162 C 14.256557,30.361384 12.934823,30.161483 12.280427,29.90959 10.644437,29.279855 9.6888882,28.674891 9.1714586,28.267775 8.6540289,27.860658 8.6474751,27.778724 8.6474751,27.778724 l -0.069864,0.03493 C 9.3100294,23.691285         11.163248,19.798527 13.817445,16.565477 z m 37.552149,0.523984 c 2.548924,3.289983 4.265057,7.202594 4.890513,11.318043 -0.650428,0.410896 -1.756876,1.001936 -3.563088,1.606882 -1.171552,0.392383 -3.163859,0.759153 -4.960377,1.117832 -0.04367,-4.752703 -0.784809,-8.591423 -1.88634,-11.807094 0.917574,-0.263678 2.170552,-0.486495 2.864443,-0.76851 1.274693,-0.518066 2.003942,-1.001558 2.654849,-1.467153 z m -31.439008,2.619917 c 2.487341,0.672766 5.775813,1.137775 10.479669,1.222628 l 0.104797,10.689263 0,0.03493 0,0.733577 c -5.435005,-0.09059 -9.512219,-0.519044 -12.610536,-1.117831 0.106127,-4.776683 0.879334,-8.55791 2.02607,-11.562569 z m 23.264866,0.31439 c 1.073459,3.067541 1.833795,6.821314 1.816476,11.702298 -3.054474,0.423245 -7.062018,0.648559 -11.702298,0.698644 l 0,-0.838373 -0.104796,-10.654331 c 4.082416,-0.0864 7.404468,-0.403886 9.990618,-0.908238 z         M 8.2632205,30.922625 c 0.7558676,0.510548 1.5529563,1.013339 3.0041715,1.57195 0.937518,0.360875 2.612202,0.647642 3.91241,0.978102 0.112814,3.85566 0.703989,7.107756 1.606883,9.920754 -1.147172,-0.324262 -2.644553,-0.640648 -3.423359,-0.978102 -1.516688,-0.657177 -2.386627,-1.287332 -2.864443,-1.71168 -0.477816,-0.424347 -0.489051,-0.489051 -0.489051,-0.489051 L 9.8002387,40.319395 C 8.791691,37.621767 8.1584238,34.769583 8.1584238,31.900727 c 0,-0.330153 0.090589,-0.648169 0.1047967,-0.978102 z m 48.2763445,0.419186 c 0.0047,0.188973 0.06986,0.36991 0.06986,0.558916 0,2.938869 -0.620228,5.873558 -1.676747,8.628261 -0.07435,0.07583 -0.06552,0.07411 -0.454119,0.349323 -0.606965,0.429857 -1.631665,1.042044 -3.318562,1.676747 -1.208528,0.454713 -3.204964,0.850894 -5.135038,1.25756 0.84593,-2.765726 1.41808,-6.005357 1.606883,-9.815957 2.232369,-0.413371 4.483758,-0.840201         5.938479,-1.327425 1.410632,-0.472457 2.153108,-0.89469 2.96924,-1.327425 z m -38.530252,2.864443 c 3.208141,0.56697 7.372279,0.898588 12.575603,0.978103 l 0.174662,9.885821 c -4.392517,-0.06139 -8.106722,-0.320566 -10.863925,-0.803441 -1.051954,-2.664695 -1.692909,-6.043794 -1.88634,-10.060483 z m 26.793022,0.31439 c -0.246298,3.923551 -0.877762,7.263679 -1.816476,9.885822 -2.561957,0.361954 -5.766249,0.560708 -9.431703,0.62878 l -0.174661,-9.815957 c 4.491734,-0.04969 8.334769,-0.293032 11.42284,-0.698645 z M 12.035901,44.860585 c 0.09977,0.04523 0.105535,0.09465 0.209594,0.139729 1.337656,0.579602 3.441099,1.058072 5.589157,1.537018 1.545042,3.399208 3.548524,5.969402 5.589157,7.789888 -3.034411,-1.215537 -5.871615,-3.007978 -8.174142,-5.309699 -1.245911,-1.245475 -2.271794,-2.662961 -3.213766,-4.156936 z m 40.69605,0 c -0.941972,1.493975 -1.967855,2.911461         -3.213765,4.156936 -2.74253,2.741571 -6.244106,4.696717 -9.955686,5.868615 0.261347,-0.241079 0.507495,-0.394491 0.768509,-0.663713 1.674841,-1.727516 3.320792,-4.181056 4.645987,-7.265904 2.962447,-0.503021 5.408965,-1.122293 7.161107,-1.781544 0.284034,-0.106865 0.337297,-0.207323 0.593848,-0.31439 z m -31.404076,2.305527 c 2.645807,0.376448 5.701178,0.649995 9.466635,0.698645 l 0.139729,7.789888 c -1.38739,-0.480844 -3.316218,-1.29837 -5.659022,-3.388427 -1.388822,-1.238993 -2.743668,-3.0113 -3.947342,-5.100106 z m 20.365491,0.104797 c -1.04872,2.041937 -2.174337,3.779068 -3.353494,4.995309 -1.853177,1.911459 -3.425515,2.82679 -4.611055,3.353494 l -0.139729,-7.789887 c 3.13091,-0.05714 5.728238,-0.278725 8.104278,-0.558916 z\">\n        </path>\n      </svg:svg>\n      <!-- <div>三维视图</div> -->\n    </div>\n    <div class=\"mode\" (click)=\"changeViewMode('2d');\">\n      <svg:svg class=\"\" width=\"40\" height=\"40\" viewBox=\"0 0 64 64\">\n        <path\n          d=\"m 2.9825053,17.550598 0,1.368113 0,26.267766 0,1.368113 1.36811,0 54.9981397,0 1.36811,0 0,-1.368113 0,-26.267766 0,-1.368113 -1.36811,0 -54.9981397,0 -1.36811,0 z m 2.73623,2.736226 10.3292497,0 0,10.466063 -10.3292497,0 0,-10.466063 z m 13.0654697,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 11.69737,0 0,10.466063 -11.69737,0 0,-10.466063 z m 14.43359,0 10.32926,0 0,10.466063 -10.32926,0 0,-10.466063 z m -41.9326497,13.202288 10.3292497,0 0,10.329252 -10.3292497,0 0,-10.329252 z m 13.0654697,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 11.69737,0 0,10.329252 -11.69737,0 0,-10.329252 z m 14.43359,0 10.32926,0 0,10.329252 -10.32926,0 0,-10.329252 z\">\n        </path>\n      </svg:svg>\n      <!-- <div>二维视图</div> -->\n    </div>\n    <div class=\"mode\" (click)=\"changeViewMode('columbus');\">\n      <svg:svg class=\"\" width=\"40\" height=\"40\" viewBox=\"0 0 64 64\">\n        <path\n          d=\"m 14.723969,17.675598 -0.340489,0.817175 -11.1680536,26.183638 -0.817175,1.872692 2.076986,0 54.7506996,0 2.07698,0 -0.81717,-1.872692 -11.16805,-26.183638 -0.34049,-0.817175 -0.91933,0 -32.414586,0 -0.919322,0 z m 1.838643,2.723916 6.196908,0 -2.928209,10.418977 -7.729111,0 4.460412,-10.418977 z m 9.02297,0 4.903049,0 0,10.418977 -7.831258,0 2.928209,-10.418977 z m 7.626964,0 5.584031,0 2.62176,10.418977 -8.205791,0 0,-10.418977 z m 8.410081,0 5.51593,0 4.46042,10.418977 -7.38863,0 -2.58772,-10.418977 z m -30.678091,13.142892 8.103649,0 -2.89416,10.282782 -9.6018026,0 4.3923136,-10.282782 z m 10.929711,0 8.614384,0 0,10.282782 -11.508544,0 2.89416,-10.282782 z m 11.338299,0 8.852721,0 2.58772,10.282782 -11.440441,0 0,-10.282782 z m 11.678781,0 7.86531,0 4.39231,10.282782 -9.6699,0 -2.58772,-10.282782 z\">\n        </path>\n      </svg:svg>\n      <!-- <div>哥伦布视图</div> -->\n    </div>\n  </div>\n</ng-template>","<nz-tabset>\r\n    <nz-tab nzTitle=\"影像\">\r\n        <ul>\r\n            <li *ngFor=\"let item of this.config.basemaps\" (click)=\"selectImage(item)\">\r\n                <div class=\"backimg\">\r\n                    <img [src]=\"item.imgUrl\"><br>\r\n                    <span [title]=\"item.title\"\r\n                        style=\"width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-align: left;\">{{item.title}}</span>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </nz-tab>\r\n    <!-- <nz-tab nzTitle=\"地形\">\r\n          <ul>\r\n            <li *ngFor=\"let item of terrainData\" (click)=\"selectTerrain(item)\">\r\n                <div class=\"backimg\">\r\n                    <img [src]=\"item.czmObject.img\"><br>\r\n                    <span [title]=\"item.czmObject.name\"\r\n                        style=\"width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-align: left;\">{{item.czmObject.name}}</span>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </nz-tab> -->\r\n</nz-tabset>\r\n<nz-tabset>\r\n    <!-- <nz-tab nzTitle=\"影像\">\r\n        <ul>\r\n            <li *ngFor=\"let item of this.config.basemaps\" (click)=\"selectImage(item)\">\r\n                <div class=\"backimg\">\r\n                    <img [src]=\"item.imgUrl\"><br>\r\n                    <span [title]=\"item.title\"\r\n                        style=\"width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-align: left;\">{{item.title}}</span>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </nz-tab> -->\r\n    <nz-tab nzTitle=\"地形\">\r\n          <ul>\r\n            <li *ngFor=\"let item of this.config.terrain\" (click)=\"selectTerrain(item)\">\r\n                <div class=\"backimg\">\r\n                    <img [src]=\"item.imgUrl\"><br>\r\n                    <span [title]=\"item.czmObject.name\"\r\n                        style=\"width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;text-align: left;\">{{item.czmObject.name}}</span>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n    </nz-tab>\r\n</nz-tabset>\r\n<nz-divider></nz-divider>\r\n<nz-tree \r\n  nzBlockNode\r\n  nzCheckable\r\n  [nzData]=\"layerNodes\" \r\n  (nzClick)=\"activeNode($event)\" \r\n  (nzCheckBoxChange)=\"onCheckedChange($event);\"\r\n  [nzTreeTemplate]=\"nzTreeTemplate\"></nz-tree>\r\n<ng-template #nzTreeTemplate let-node let-origin=\"origin\">\r\n  <span class=\"custom-node\">\r\n    <span *ngIf=\"!node.isLeaf\">\r\n      <!-- <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\" (click)=\"openFolder(node)\"></i> -->\r\n      <span class=\"folder-name\">{{ node.title }}</span>\r\n    </span>\r\n    <span *ngIf=\"node.isLeaf\">\r\n      <!-- <i nz-icon [nzType]=\"node.isExpanded ? 'folder-open' : 'folder'\" (click)=\"openFolder(node)\"></i> -->\r\n      <span class=\"folder-name\">{{ node.title }}</span>\r\n    </span>\r\n  </span>\r\n</ng-template>","import { Component } from \"@angular/core\";\nimport { ComponentRegister } from \"epsgis\";\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\nimport { Identify } from '../../utils/identify';\nimport { getPositionsHeightFromTerrain } from '../../utils/getHeight'\n\n@ComponentRegister({\n  uri: \"epsgis-planet-identify\",\n  path: \"epsplanet/components/identify\",\n  name: \"PlanetIdentifyComponent\"\n})\n@Component({\n  selector: \"epsgis-planet-identify\",\n  templateUrl: \"./identify.component.html\",\n  styleUrls: [\"./identify.component.scss\"]\n})\nexport class PlanetIdentifyComponent extends BasePlanetWidgetComponent {\n  winPos: Array<any> = [0, 0, 0, 0];\n  title = \"\"\n  pin1 = null\n  propertyList = [\n    {\n      name: \"1\",\n      value: 2\n    }\n  ];\n  showInfo = false;\n  switchValue = false;\n  czmObjList = []\n  constructor(private identify: Identify) {\n    super();\n  }\n  print(callback): any {\n    callback(this.propertyList)\n    console.log(this.propertyList)\n  }\n  addBtn(name, callback) {\n    let btn = document.createElement('button');\n    btn.textContent = name;\n    btn.id='idBtn'\n    // console.log(this.propertyList)\n    // let _this=this\n    // btn.onclick = ()=>{\n    //   callback()\n    //   console.log(this.propertyList)\n    // };\n    btn.style.position = 'relative';\n    btn.style.fontWeight = '400';\n    btn.style.fontSize = '14px';\n    btn.style.whiteSpace = 'nowrap';\n    btn.style.textAlign = 'center';\n    btn.style.border = '1px solid #d9d9d9';\n    btn.style.boxShadow = '0 2px 0 rgb(0 0 0 / 2%)';\n    btn.style.transition = 'all .3s cubic-bezier(.645,.045,.355,1)';\n    btn.style.height = '32px';\n    btn.style.padding = '4px 15px';\n    btn.style.borderRadius = '2px';\n    btn.style.backgroundColor = '#fff';\n    callback(btn)\n    document.getElementsByClassName('panel')[0].append(btn);\n  }\n  //初始化影像点选识别功能\n  Init() {\n    let win = document.getElementsByClassName(\"dialog\")[0];\n    win.parentNode.removeChild(win);\n    document.getElementsByClassName(\"cesium-viewer\")[0].append(win);\n    window['showInfo'] = this.showInfo;\n    this.view.sceneTree.$refs.pin.children.push({\n      \"ref\": 'pin1',\n      \"czmObject\": {\n        \"name\": 'Pin1',\n        \"xbsjType\": \"Pin\",\n        \"position\": [1, 1, 0],\n        \"near\": 30,\n        \"show\": false,\n        \"customProp\": this.showInfo\n      }\n    })\n    this.pin1 = this.view.sceneTree.$refs.pin1.czmObject;\n    XE.MVVM.watch(() => this.pin1.winPos, () => {\n      // debugger\n      this.winPos = this.pin1.winPos\n      console.log(\"win\", this.winPos)\n      // win[\"style\"].left = this.winPos[0] - 80 + \"px\";\n      // win[\"style\"].bottom = this.winPos[3] - 320 + \"px\";\n    });\n    XE.MVVM.watch(() => this.pin1.customProp, () => {\n      if (!this.pin1.customProp) {\n        this.showInfo = false\n      }\n    });\n\n    if (this.view == null) return;\n    this.bindIndentify(this.view.sceneTree.$refs.layerlist)\n    this.identify.test(this.czmObjList, this.view, res => {\n      console.log(\"res:\", res)\n      this.pin1.customProp = true\n      this.showInfo = true\n      this.propertyList = res\n      let btn=document.getElementById('idBtn')\n      btn.onclick=()=>{\n        \n      }\n    })\n    this.identify.pickModel(this.view, (res, pickObj) => {\n      this.pin1.customProp = true\n      this.showInfo = true\n      this.propertyList = res\n      window['pickObj']=pickObj.tileset.xbsjTileset;\n      // handler.destroy()\n    })\n  }\n  bindIndentify(list) {\n    if (list.children && list.children.length > 0) {\n      list.children.forEach(item => {\n        if (item.children && item.children.length > 0) {\n          this.bindIndentify(item)\n        } else {\n          this.bindClick(item)\n        }\n      });\n    } else {\n      this.bindClick(list)\n    }\n  }\n  bindClick(item) {\n    // if (item.czmObject.xbsjType !== \"Imagery\") return;\n    if (item.czmObject.xbsjType == \"Imagery\") {\n      if (item.czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\" || item.czmObject.xbsjImageryProvider.type == \"WebMapServiceImageryProvider\") {\n        if (item.czmObject.xbsjImageryProvider[item.czmObject.xbsjImageryProvider.type].url.indexOf(\"arcgis\") !== -1) {\n          this.czmObjList.push(item.czmObject)\n\n          // this.identify.getLayers(item.czmObject, this.view, res => {\n          //   console.log(\"res:\", res)\n          //   this.pin1.customProp = true\n          //   this.showInfo = true\n          //   this.propertyList = res\n          // })\n        } else {\n          // this.czmObjList.push(item)\n          this.identify.GetFeatureInfo(item.czmObject, this.view, 'point', res => {\n            // console.log(item.czmObject.xbsjImageryProvider[item.czmObject.xbsjImageryProvider.type])\n            this.title = item.czmObject.xbsjImageryProvider[item.czmObject.xbsjImageryProvider.type].layer\n            this.pin1.customProp = true\n            this.showInfo = true\n            this.propertyList = res\n          });\n        }\n      }\n    } else if (item.czmObject.xbsjType == \"Tileset\") {\n\n    }\n\n  }\n  close() {\n    // console.log(\"close\")\n    this.showInfo = false;\n  }\n  zoomTo() {\n    let entityCollection = this.view.czm.viewer.dataSources.getByName(\"highLight\")[0].entities\n\n    // let entity = entityCollection.values[0]\n    // let positions = entity.polyline.positions._value;\n    // console.log(entity.polyline.positions._value)\n    // getPositionsHeightFromTerrain(this.view,positions,res=>{\n    //   console.log(\"getPosheight:\",positions)\n    // })\n    //   let polyCenter = Cesium.BoundingSphere.fromPoints(entity.polyline.positions._value).center\n    let viewer = this.view.czm.viewer;\n    //   let cartographic = Cesium.Cartographic.fromCartesian(polyCenter, viewer.scene.globe.ellipsoid, new Cesium.Cartographic());\n    //   let lat = Cesium.Math.toDegrees(cartographic.latitude);\n    //   let lng = Cesium.Math.toDegrees(cartographic.longitude);\n    //   let height = cartographic.height;\n    //   viewer.camera.flyTo({\n    //     destination : Cesium.Cartesian3.fromDegrees(lng, lat,1000),\n    //     orientation : {\n    //         //heading : Cesium.Math.toRadians(0.0),\n    //        // pitch : Cesium.Math.toRadians(-25.0),\n    //         //roll : 0.0\n    //     }\n    // });\n    viewer.flyTo(entityCollection)\n  }\n  switch(e) {\n    let earth = this.view\n    console.log(this.czmObjList)\n    if (e.srcElement.style.color == 'aqua') {\n      e.srcElement.style.color = \"\"\n    } else {\n      e.srcElement.style.color = 'aqua'\n    }\n\n\n    earth.epsplanet.allowClick = !earth.epsplanet.allowClick;\n    if (!earth.epsplanet.allowClick) {\n      this.view.interaction.picking.enabled = false\n      this.view.interaction.picking.hoverEnable = false\n      this.identify.ClearHighLight();\n    } else {\n      this.view.interaction.picking.enabled = true\n      this.view.interaction.picking.hoverEnable = true\n    }\n\n  }\n  test() {\n    this.identify.getLayers(this.view.sceneTree.$refs.layerlist.children[1].children[0].czmObject, this.view, res => {\n      console.log(res)\n      this.pin1.customProp = true\n      this.showInfo = true\n      this.propertyList = res\n    })\n\n\n  }\n  ngOnInit() {\n    super.ngOnInit();\n    this.Init();\n  }\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n}\n\n","import { Component, OnInit } from '@angular/core';\nimport { ComponentRegister } from 'epsgis';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\nimport { PlanetIdentifyComponent } from '../identify/identify.component'\n@ComponentRegister({\n  uri: \"epsgis-planet-location\",\n  path: \"epsplanet/components/location\",\n  name: \"PlanetLocationComponent\"\n})\n@Component({\n  selector: 'epsgis-planet-location',\n  templateUrl: './location.component.html',\n  styleUrls: ['./location.component.scss'],\n})\nexport class PlanetLocationComponent extends BasePlanetWidgetComponent implements OnInit {\n  markerXY: any;\n  // 经度 或 x\n  XValue = 0;\n  // 纬度 或 y\n  YValue = 0;\n  //高度\n  ZValue = 0;\n\n  //地理坐标系  --------  目前只做了此坐标系下的定位\n  item4326 = {\n    X: {\n      label: \"经度：\",\n      min: \"-180\",\n      max: \"180\",\n      placeHolder: \"请输入经度\"\n    },\n    Y: {\n      label: \"纬度：\",\n      min: \"-90\",\n      max: \"90\",\n      placeHolder: \"请输入纬度\"\n    },\n    Z: {\n      label: \"高度：\",\n      placeHolder: \"请输入高度\"\n    }\n  };\n  //\n  itemOther = {\n    X: {\n      label: \"X：\",\n      min: \"-99999999\",\n      max: \"99999999\",\n      placeHolder: \"请输入横坐标\"\n    },\n    Y: {\n      label: \"Y：\",\n      min: \"-99999999\",\n      max: \"99999999\",\n      placeHolder: \"请输入纵坐标\"\n    }\n  };\n\n  // 默认4326\n  item: any = this.item4326;\n\n  constructor(\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.initialize();\n    // this.addbtn()\n  }\n  /**\n  * 获取组件信息\n  */\n  static getCompInfo() {\n    return { path: \"epsplanet/components/location\" };\n  }\n  //\n  initialize() {\n    this.XValue = this.config.longitude;\n    this.YValue = this.config.latitude;\n    this.ZValue = this.config.height;\n  }\n  test(res) {\n    // alert('ff')\n    console.log(res)\n  }\n  addbtn() {\n    PlanetIdentifyComponent.prototype.addBtn('test', (btn,pickObj)=>{\n      btn.onclick=()=>{\n        console.log(window['pickObj'])\n      }\n    })\n  }\n  //开始定位\n  location() {\n    var position = null;\n    //删除之前添加的实体\n    if (this.markerXY) {\n      this.view.czm.viewer.entities.remove(this.markerXY);\n    }\n    if (true) {\n      position = Cesium.Cartesian3.fromDegrees(this.XValue, this.YValue, this.ZValue)\n    } else {\n      // this.position = \n    }\n    //添加定位点实体\n    this.markerXY = new Cesium.Entity({\n      id: '视角定位坐标',\n      position: position,\n      point: {\n        pixelSize: 6,\n        color: Cesium.Color.WHITE.withAlpha(0.9),\n        outlineColor: Cesium.Color.WHITE.withAlpha(0.9),\n        outlineWidth: 1\n      },\n      billboard: {\n        image: this.folderUrl + \"images/location4.png\",\n        horizontalOrigin: Cesium.HorizontalOrigin.CENTER,\n        verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n        scale: .6\n      },\n    });\n    this.view.czm.viewer.entities.add(this.markerXY);\n    //定位\n    this.view.czm.camera.setView({\n      destination: position\n    });\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ComponentRegister } from 'epsgis';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\n\n@ComponentRegister({\n  uri:\"epsgis-planet-mode-switch\",\n  path:\"epsplanet/components/mode-switch\",\n  name:\"PlanetModeSwitchComponent\"\n})\n@Component({\n  selector: 'epsgis-planet-mode-switch',\n  templateUrl: './mode-switch.component.html',\n  styleUrls: ['./mode-switch.component.scss']\n})\nexport class PlanetModeSwitchComponent extends BasePlanetWidgetComponent {\n  viewType: string = '3d';\n  visible: boolean;\n  constructor() {\n    super();\n  }\n  static getCompInfo() {\n    return { name: \"PlanetModeSwitchComponent\", path: \"epsplanet/components/mode-switch\" };\n  }\n  clickMe(): void {\n    this.visible = false;\n  }\n\n  change(value: boolean): void {\n    console.log(value);\n  }\n\n  changeViewMode(type: string) {\n    if (type == \"2d\") {\n      Promise.resolve().then(() => { this.view.czm.viewer.scene.morphTo2D(1); });\n    } else if (type == \"columbus\") {\n      Promise.resolve().then(() => { this.view.czm.viewer.scene.morphToColumbusView(1); });\n    } else {\n      Promise.resolve().then(() => { this.view.czm.viewer.scene.morphTo3D(1); });\n    }\n    this.viewType = type;\n  }\n}\n","import { ChangeDetectorRef, Component } from '@angular/core';\nimport { UtilsService,ComponentRegister } from 'epsgis';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\n/**\n * 状态栏，显示经纬度、高度等信息\n */\n\n@ComponentRegister({\n  uri: \"epsgis-planet-status-bar\",\n  path: \"epsplanet/components/status-bar\",\n  name: \"PlanetStatusBarComponent\"\n})\n@Component({\n  selector: 'epsgis-planet-status-bar',\n  template: `<div class=\"status-info\">{{ fpsString }} {{cameraString}} {{ velocityString() }}</div>`,\n  styles: [\n    `.status-info{background-color: #4c555e; color:#fff; font-size: 14px;}`\n  ]\n})\nexport class PlanetStatusBarComponent extends BasePlanetWidgetComponent {\n  _scene: any;\n  _camera: any;\n  fpsString: string = \"\";\n  cameraString: string = \"\";\n  baseVelocity = 0.0;\n  velocity = 0.0;\n  velocityRatio = 1.0;\n  lang: any = {\n    longitude: \"经度\",\n    latitude: \"纬度\",\n    height: \"高度\",\n    fps: \"帧率\",\n    heading: \"偏航角\",\n    pitch: \"俯仰角\",\n    roll: \"翻滚角\",\n    meter: \"米\",\n    velocity: \"键盘运动速度\",\n    createPolylineTip: \"左键添加点，右键删除点，shift+右键创建完成\",\n    editPolylineTip:\n      \"鼠标移动到其中一个点会出现一个操作栏，点击移动按钮，可以移动折线位置；点击增加按钮，可以在该位置增加一个点；点击删除按钮，可以删除该点\",\n    createRectangleTip:\n      \"点击左键确定矩形中心点，移动鼠标确定矩形方向和对角线长度，再次点击左键创建完成\",\n    editRectangleTip: \"左键点击其中一个点移动矩形位置\",\n    createCircleTip:\n      \"点击左键确定圆的圆心，移动鼠标确定圆的半径，再次点击左键创建完成\",\n    editCircleTip: \"左键点击其中一个点移动圆位置\",\n    createDoubleArrowTip: \"在四个不同位置点击左键创建双箭头\",\n    editDoubleArrowTip: \"左键点击其中一个点移动双箭头位置\",\n    createFlattenedPolygonTip:\n      \"左键添加点，右键删除点，shift+右键停止绘制，上下移动鼠标确定高度，再次点击左键创建完成\",\n    editFlattenedPolygonTip:\n      \"鼠标移动到其中一个点会出现一个操作栏，点击移动按钮，可以移动折线位置；点击增加按钮，可以在该位置增加一个点；点击删除按钮，可以删除该点\",\n    movableObjectTip:\n      \"鼠标左键点击坐标轴x,y,z任意一个轴，轴变黄色，可沿着相应位置进行移动，再次点击，轴恢复原色，停止移动，点击右键坐标轴消失\",\n    rotatableObjectTip:\n      \"鼠标左键点击旋转坐标轴任意一个轴，轴变黄色，可沿着相应位置进行旋转，再次点击，轴恢复原色，停止旋转，点击右键旋转坐标轴消失\",\n    positionPickingTip: \"点击鼠标左键拾取位置\"\n  };\n  _disposers: Array<any> = [];\n  _uw1: Function;\n  _uw2: Function;\n  _uw3: Function;\n  _uw4: Function;\n  _uw5: Function;\n  _uw6: Function;\n  _uw7: Function;\n  _uw8: Function;\n  constructor(\n    private cdr: ChangeDetectorRef) { super(); }\n  static getCompInfo() {\n    return { name: \"PlanetStatusBarComponent\", path: \"epsplanet/components/status-bar\" };\n  }\n\n  ngOnInit() {\n    this._scene = this.view.czm.scene;\n    this._camera = this.view.czm.camera;\n    const td = Cesium.Math.toDegrees;\n    const updateCameraString = () => {\n      const camera = this._camera;\n\n      var l = td(camera.positionCartographic.longitude).toFixed(5);\n      var b = td(camera.positionCartographic.latitude).toFixed(5);\n      var h = camera.positionCartographic.height.toFixed(2);\n      var y = td(camera.heading).toFixed(2);\n      var p = td(camera.pitch).toFixed(2);\n      var r = td(camera.roll).toFixed(2);\n\n      this.cameraString = `${this.lang.longitude}: ${l}° ${this.lang.latitude}: ${b}° ${this.lang.height}: ${h}${this.lang.meter} ${this.lang.heading}: ${y}° ${this.lang.pitch}: ${p}° ${this.lang.roll}: ${r}°`;\n      UtilsService.detectChanges(this.cdr);\n    };\n\n    this._disposers = [];\n    this._disposers.push(\n      this._camera.changed.addEventListener(updateCameraString)\n    );\n    updateCameraString();\n    // 帧率的计算借助了Cesium中的东西，需要开启debugShowFramesPerSecond\n    this._scene.debugShowFramesPerSecond = true;\n    const tempDisposer = this._scene._postRender.addEventListener(() => {\n      tempDisposer();\n      this._scene._performanceContainer.style.visibility = \"hidden\"; // 隐藏默认的帧率显示窗口\n    });\n\n    this._disposers.push(\n      this._scene._postRender.addEventListener(() => {\n        if (this._scene._performanceDisplay) {\n          this.fpsString = `${this.lang.fps}: ${this._scene._performanceDisplay._fpsText.nodeValue} `;\n        } else {\n          this.fpsString = \"\";\n        }\n      })\n    );\n    this._disposers.push(\n      XE.MVVM.track(\n        this,\n        \"baseVelocity\",\n        this.view.camera.immersion,\n        \"baseVelocity\"\n      )\n    );\n    this._disposers.push(\n      XE.MVVM.track(\n        this,\n        \"velocity\",\n        this.view.camera.immersion,\n        \"velocity\"\n      )\n    );\n    this._disposers.push(\n      XE.MVVM.bind(\n        this,\n        \"velocityRatio\",\n        this.view.camera.immersion,\n        \"velocityRatio\"\n      )\n    );\n\n    if (this._uw1) {\n      this._uw1 = this._uw1();\n    } else {\n      this._uw1 = XE.MVVM.watch(\n        () => this.view.interaction.creatingPolylineBinding.target,\n        () => {\n          if (\n            this.view.interaction.creatingPolylineBinding.target !==\n            undefined\n          ) {\n            if (\n              this.view.interaction.creatingPolylineBinding.target\n                .xbsjType === \"GeoRectangle\"\n            ) {\n              // this.$root.$earthUI.promptInfo(this.lang.createRectangleTip);\n            } else if (\n              this.view.interaction.creatingPolylineBinding.target\n                .xbsjType === \"GeoCircle\"\n            ) {\n              // this.$root.$earthUI.promptInfo(this.lang.createCircleTip);\n            } else if (\n              this.view.interaction.creatingPolylineBinding.target\n                .xbsjType === \"GeoDoubleArrow\"\n            ) {\n              // this.$root.$earthUI.promptInfo(this.lang.createDoubleArrowTip);\n            } else {\n              // this.$root.$earthUI.promptInfo(this.lang.createPolylineTip);\n            }\n          }\n        }\n      );\n    }\n    if (this._uw2) {\n      this._uw2 = this._uw2();\n    } else {\n      this._uw2 = XE.MVVM.watch(\n        () => this.view.interaction.editingPolylineBinding.target,\n        () => {\n          if (\n            this.view.interaction.editingPolylineBinding.target !==\n            undefined\n          ) {\n            if (\n              this.view.interaction.editingPolylineBinding.target\n                .xbsjType === \"GeoRectangle\"\n            ) {\n              //this.$root.$earthUI.promptInfo(this.lang.editRectangleTip);\n            } else if (\n              this.view.interaction.editingPolylineBinding.target\n                .xbsjType === \"GeoCircle\"\n            ) {\n              // this.$root.$earthUI.promptInfo(this.lang.editCircleTip);\n            } else if (\n              this.view.interaction.editingPolylineBinding.target\n                .xbsjType === \"GeoDoubleArrow\"\n            ) {\n              // this.$root.$earthUI.promptInfo(this.lang.editDoubleArrowTip);\n            } else {\n              // this.$root.$earthUI.promptInfo(this.lang.editPolylineTip);\n            }\n          }\n        }\n      );\n    }\n    if (this._uw3) {\n      this._uw3 = this._uw3();\n    } else {\n      this._uw3 = XE.MVVM.watch(\n        () => this.view.interaction.creatingPolygonBinding.target,\n        () => {\n          if (\n            this.view.interaction.creatingPolygonBinding.target !==\n            undefined\n          ) {\n            // this.$root.$earthUI.promptInfo(this.lang.createPolygonTip);\n          }\n        }\n      );\n    }\n    if (this._uw4) {\n      this._uw4 = this._uw4();\n    } else {\n      this._uw4 = XE.MVVM.watch(\n        () =>\n          this.view.interaction.flattenedPolygonCreatingBinding.target,\n        () => {\n          if (\n            this.view.interaction.flattenedPolygonCreatingBinding\n              .target !== undefined\n          ) {\n            // this.$root.$earthUI.promptInfo(this.lang.createFlattenedPolygonTip);\n          }\n        }\n      );\n    }\n    if (this._uw5) {\n      this._uw5 = this._uw5();\n    } else {\n      this._uw5 = XE.MVVM.watch(\n        () => this.view.interaction.editingPolygonBinding.target,\n        () => {\n          if (\n            this.view.interaction.editingPolygonBinding.target !==\n            undefined\n          ) {\n            //this.$root.$earthUI.promptInfo(this.lang.editFlattenedPolygonTip);\n          }\n        }\n      );\n    }\n    if (this._uw6) {\n      this._uw6 = this._uw4();\n    } else {\n      this._uw6 = XE.MVVM.watch(\n        () => this.view.interaction.movableObjectBinding.target,\n        () => {\n          if (\n            this.view.interaction.movableObjectBinding.target !==\n            undefined\n          ) {\n            // this.$root.$earthUI.promptInfo(this.lang.movableObjectTip);\n          }\n        }\n      );\n    }\n    if (this._uw7) {\n      this._uw7 = this._uw4();\n    } else {\n      this._uw7 = XE.MVVM.watch(\n        () => this.view.interaction.rotatableObjectBinding.target,\n        () => {\n          if (\n            this.view.interaction.rotatableObjectBinding.target !==\n            undefined\n          ) {\n            //this.$root.$earthUI.promptInfo(this.lang.rotatableObjectTip);\n          }\n        }\n      );\n    }\n    if (this._uw8) {\n      this._uw8 = this._uw4();\n    } else {\n      this._uw8 = XE.MVVM.watch(\n        () => this.view.interaction.positionPickingBinding.target,\n        () => {\n          if (\n            this.view.interaction.positionPickingBinding.target !==\n            undefined\n          ) {\n            //this.$root.$earthUI.promptInfo(this.lang.positionPickingTip);\n          }\n        }\n      );\n    }\n\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n    this._disposers.forEach(d => d());\n    this._disposers.length = 0;\n    this._uw1 = this._uw1 && this._uw1();\n    this._uw2 = this._uw2 && this._uw2();\n    this._uw3 = this._uw3 && this._uw3();\n    this._uw4 = this._uw4 && this._uw4();\n    this._uw5 = this._uw5 && this._uw5();\n    this._uw6 = this._uw6 && this._uw6();\n    this._uw7 = this._uw7 && this._uw7();\n    this._uw8 = this._uw8 && this._uw8();\n  }\n  velocityString() {\n    return ` ${this.lang.velocity}: ${this.velocity.toFixed(\n      1\n    )} km/h (${this.baseVelocity.toFixed(1)} × ${this.velocityRatio.toFixed(\n      1\n    )})`;\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { ComponentRegister } from 'epsgis';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\n\n@ComponentRegister({\n  uri: \"epsgis-planet-zoom\",\n  path: \"epsplanet/components/zoom\",\n  name: \"PlanetZoomComponent\"\n})\n@Component({\n  selector: 'epsgis-planet-zoom',\n  templateUrl: './zoom.component.html',\n  styleUrls: ['./zoom.component.scss'],\n})\nexport class PlanetZoomComponent extends BasePlanetWidgetComponent {\n\n  constructor() {\n    super();\n  }\n  static getCompInfo() {\n    return { name: \"PlanetZoomComponent\", path: \"epsplanet/components/zoom\" };\n  }\n  ngOnInit() {\n   \n  }\n  ngAfterViewInit(){\n     document.getElementsByClassName(\"jimu-widget-onscreen-icon zoomOut\")[0]['style'].top = document.getElementsByClassName(\"jimu-widget-onscreen-icon zoomIn\")[0]['offsetHeight'] + \"px\"\n  }\n  zoomIn() {\n    const viewer = this.view.czm.viewer;\n    this.getCesiumView().camera.zoomIn(viewer.camera.positionCartographic.height / Math.abs(Math.sin(viewer.camera.pitch)) * 0.2);\n  }\n  zoomOut() {\n    const viewer = this.view.czm.viewer;\n    viewer.camera.zoomOut(viewer.camera.positionCartographic.height / Math.abs(Math.sin(viewer.camera.pitch)) * 0.2);\n  }\n}\n","<div class=\"jimu-widget-onscreen-icon zoomIn\" (click)=\"zoomIn();\" title=\"放大\">\n  <i nz-icon nzType=\"plus\" nzTheme=\"outline\"></i>\n</div>\n<div class=\"jimu-widget-onscreen-icon zoomOut\" (click)=\"zoomOut();\" title=\"缩小\" style=\"\">\n  <i nz-icon nzType=\"minus\" nzTheme=\"outline\"></i>\n</div>","import { Component } from \"@angular/core\";\nimport { ComponentRegister } from 'epsgis';\nimport { NzContextMenuService, NzDropdownMenuComponent } from 'ng-zorro-antd/dropdown';\nimport { NzFormatEmitEvent, NzTreeNode } from 'ng-zorro-antd/tree';\nimport { SceneTreeUtils } from '../../utils/sceneTree-utils';\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\n\n@ComponentRegister({\n  uri: \"epsgis-planet-basemap-gallery\",\n  path: \"epsplanet/components/basemap-gallery\",\n  name: \"PlanetBasemapGalleryComponent\"\n})\n@Component({\n  selector: \"epsgis-planet-basemap-gallery\",\n  templateUrl: \"./basemap-gallery.component.html\",\n  styleUrls: [\"./basemap-gallery.component.scss\"]\n})\nexport class PlanetBasemapGalleryComponent extends BasePlanetWidgetComponent {\n  activatedNode?: NzTreeNode;\n  layerNodes: any = [];\n  basemap: any;\n  terrainData = [{\n    \"czmObject\": {\n      \"img\": \"https://lab2.cesiumlab.com/upload/3fd1ac60-2683-4ae8-a5da-c0250edc836b/2019_08_02_19_45_38.jpg\",\n      \"xbsjType\": \"Terrain\",\n      \"xbsjGuid\": \"0b34ebd4-5a5b-4f1d-b2e8-a41797193aa8\",\n      \"name\": \"中国14级（测试）\",\n      \"xbsjTerrainProvider\": {\n        \"type\": \"XbsjCesiumTerrainProvider\",\n        \"XbsjEllipsoidTerrainProvider\": {},\n        \"XbsjCesiumTerrainProvider\": {\n          \"url\": \"https://lab.earthsdk.com/terrain/577fd5b0ac1f11e99dbd8fd044883638\",\n          \"requestVertexNormals\": true,\n          \"requestWaterMask\": true\n        },\n        \"GoogleEarthEnterpriseTerrainProvider\": {}\n      }\n    }\n  }];\n  terrainIcon = \"https://lab2.cesiumlab.com/upload/3fd1ac60-2683-4ae8-a5da-c0250edc836b/2019_08_02_19_45_38.jpg\";\n  constructor(private nzContextMenuService: NzContextMenuService) {\n    super();\n  }\n  activeNode(data: NzFormatEmitEvent): void {\n    this.activatedNode = data.node!;\n  }\n  contextMenu($event: MouseEvent, menu: NzDropdownMenuComponent): void {\n    this.nzContextMenuService.create($event, menu);\n  }\n  /**\n  * 选中状态改变\n  */\n  onCheckedChange(evt: NzFormatEmitEvent): void {\n    // SceneTreeUtils.GetXbsjCzmObject(evt.node).show = false\n    if (evt.eventName !== \"check\" || !evt.node) {\n      return;\n    }\n    if (evt.node.isChecked) {\n      //加载图层\n      // evt.node.origin.origin.show=true\n      SceneTreeUtils.GetXbsjCzmObject(evt.node).show = true;\n    } else {\n      //移除图层\n      SceneTreeUtils.GetXbsjCzmObject(evt.node).show = false;\n    }\n  }\n  onRightClick($event) {\n\n  }\n  ngOnInit() {\n    super.ngOnInit();\n    var uw3 = XE.MVVM.watch(() => [...this.view.sceneTree.$refs.basemap.children], () => {\n      // console.log(\"底图变化\")\n      this.loadBaseTree();\n    });\n  }\n  loadBaseTree() {\n    setTimeout(() => {\n      const _layerNodes = SceneTreeUtils.SceneTree2NgZorroTree(this.view.sceneTree.$refs.basemap);\n      // console.log(_layerNodes)\n      this.layerNodes = [..._layerNodes[0][\"_children\"]];\n      this.view.sceneTree.$refs.basemap.children[0].czmObject.xbsjZIndex=-1\n    }, 100);\n\n  }\n  selectImage(item) {\n    console.log(SceneTreeUtils.loadLayerNode(item))\n    let node=SceneTreeUtils.loadLayerNode(item)\n    node.czmObject.show=true;\n    const earth = this.view;\n    // earth.sceneTree.root.children[0] = {};\n    earth.sceneTree.$refs.basemap.children[0] = node;\n  }\n  selectTerrain(item) {\n    this.view.sceneTree.$refs.basemap.children.push(item)\n  }\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n}","import axios from 'axios'\r\nimport qs from 'qs'\r\n\r\n\r\nexport class Query {\r\n    static myEntityCollection: any;//用于存储查询过程中高亮显示的entity\r\n    constructor() { }\r\n    /**\r\n     * 基于ArcGIS Server的查询\r\n     * @param czmObject 要查询的czmObject\r\n     * @param index arcgis server图层id\r\n     * @param params 查询语句\r\n     * @param callback 回调\r\n     */\r\n    static ArcgisQuery(czmObject, index, params, callback) {\r\n        if (this.myEntityCollection == undefined) {\r\n            this.myEntityCollection = new Cesium.CustomDataSource('myEntityCollection');\r\n            window['earth'].czm.viewer.dataSources.add(this.myEntityCollection);\r\n        }\r\n        this.myEntityCollection.entities.removeAll();\r\n        let viewer = window['earth'].czm.viewer;\r\n        let type = czmObject.xbsjImageryProvider.type;\r\n        let url = czmObject.xbsjImageryProvider[type].url;\r\n        let requestUrl = \"\"\r\n        if (czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\r\n            requestUrl = url.split('MapServer')[0] + `MapServer/${index}/query?geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=*&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&f=pjson`\r\n        } else if (czmObject.xbsjImageryProvider.type == \"SSWebMapServiceImageryProvider\") {\r\n            requestUrl = url.split('arcgis')[0] + 'arcgis/rest' + url.split('arcgis')[1].split('MapServer')[0] + `MapServer/${index}/query?geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=4326&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&f=pjson`;\r\n            console.log(requestUrl)\r\n        }\r\n        axios.post(requestUrl,\r\n            qs.stringify({\r\n                outFields:'*',\r\n                where: params,\r\n                f: 'pjson'\r\n            }),\r\n            {\r\n                headers: {\r\n                    'content-type': 'application/x-www-form-urlencoded',\r\n                }\r\n            }).then(res => {\r\n                console.log(res.data.features)\r\n                let features = res.data.features;\r\n                if (res.data.geometryType == \"esriGeometryPoint\") {\r\n                    features.forEach(feature => {\r\n                        this.myEntityCollection.entities.add(\r\n                            {\r\n                                position: Cesium.Cartesian3.fromDegrees(feature.geometry.x, feature.geometry.y),\r\n                                point: {\r\n                                    color: Cesium.Color.AQUA,\r\n                                    pixelSize: 20,\r\n                                    outlineColor: Cesium.Color.YELLOW,\r\n                                    outlineWidth: 5,\r\n                                    heightReference: Cesium.HeightReference.CLAMP_TO_GROUND,\r\n                                    scaleByDistance: new Cesium.NearFarScalar(1500, 1, 20000, 0.3),\r\n                                }\r\n                            }\r\n                        )\r\n                    })\r\n                    viewer.flyTo(this.myEntityCollection);\r\n                }\r\n                if (res.data.geometryType == \"esriGeometryPolygon\") {\r\n\r\n                    features.forEach(feature => {\r\n                        let positions = []\r\n                        feature.geometry.rings[0].forEach(pos => {\r\n                            positions.push(pos[0], pos[1])\r\n                        })\r\n                        this.myEntityCollection.entities.add({\r\n                            polyline: {\r\n                                positions: Cesium.Cartesian3.fromDegreesArray(positions),\r\n                                width: 10,\r\n                                material: new Cesium.PolylineGlowMaterialProperty({\r\n                                    glowPower: 0.2,\r\n                                    color: Cesium.Color.BLUE\r\n                                })\r\n                            },\r\n                        });\r\n                    });\r\n                    viewer.flyTo(this.myEntityCollection);\r\n                }\r\n                if (res.data.geometryType == \"esriGeometryPolyline\") {\r\n\r\n                    features.forEach(feature => {\r\n                        let positions = []\r\n                        feature.geometry.paths[0].forEach(pos => {\r\n                            positions.push(pos[0], pos[1])\r\n                        })\r\n                        this.myEntityCollection.entities.add({\r\n                            polyline: {\r\n                                positions: Cesium.Cartesian3.fromDegreesArray(positions),\r\n                                width: 10,\r\n                                material: new Cesium.PolylineGlowMaterialProperty({\r\n                                    glowPower: 0.2,\r\n                                    color: Cesium.Color.BLUE\r\n                                })\r\n                            },\r\n                        });\r\n                    });\r\n                    viewer.flyTo(this.myEntityCollection);\r\n                }\r\n            })\r\n    }\r\n    /**\r\n     * 基于Geoserver的查询\r\n     * @param czmObject \r\n     * @param params \r\n     */\r\n    static GeoserverQuery(czmObject, params) {\r\n        if (this.myEntityCollection == undefined) {\r\n            this.myEntityCollection = new Cesium.CustomDataSource('myEntityCollection');\r\n            window['earth'].czm.viewer.dataSources.add(this.myEntityCollection);\r\n        }\r\n        this.myEntityCollection.entities.removeAll();\r\n        let viewer = window['earth'].czm.viewer;\r\n        let type = czmObject.xbsjImageryProvider.type;\r\n        let layer = czmObject.xbsjImageryProvider[type].layer;\r\n        let url = czmObject.xbsjImageryProvider[type].url;\r\n        let requestUrl = \"\"\r\n        if (czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\r\n            //`http://localhost:8801/geoserver/tiger/wfs?service=wfs&request=GetFeature&version=1.1.0&outputFormat=application/json&TYPENAME=tiger:poly_landmarks&cql_filter=${param}`\r\n            let server = layer.split(':')[0]\r\n            requestUrl = url.split('geoserver')[0] + `geoserver/${server}/wfs?service=wfs&request=GetFeature&version=1.1.0&outputFormat=application/json&TYPENAME=${layer}&cql_filter=${params}`\r\n        } else if (czmObject.xbsjImageryProvider.type == \"SSWebMapServiceImageryProvider\") {\r\n            let server = url.split('/wms')[0].split('geoserver/')[1];\r\n            requestUrl = url.split('wms')[0] + `wfs?service=wfs&request=GetFeature&version=1.1.0&outputFormat=application/json&TYPENAME=${server}:${layer}&cql_filter=${params}`\r\n        }\r\n        console.log(requestUrl)\r\n        axios.post(requestUrl).then(res => {\r\n            console.log(res)\r\n            Cesium.GeoJsonDataSource.load(res.data).then(dataSource => {\r\n                dataSource.entities.values.forEach(entity => {\r\n                    // entity.polyline.width = 10\r\n                    // entity.polyline.material = new Cesium.PolylineGlowMaterialProperty({\r\n                    //     glowPower: 0.2,\r\n                    //     color: Cesium.Color.BLUE\r\n                    // });\r\n                    this.myEntityCollection.entities.add(entity)\r\n                })\r\n                viewer.flyTo(this.myEntityCollection)\r\n            })\r\n        })\r\n    }\r\n    /**\r\n     * 清除高亮\r\n     */\r\n    static clearHighLight() {\r\n        window['earth'].czm.viewer.dataSources.getByName('myEntityCollection')[0].entities.removeAll()\r\n    }\r\n}","<form nz-form [formGroup]=\"validateForm\" class=\"ant-advanced-search-form\" nzLayout=\"horizontal\">\r\n    <nz-form-item>\r\n        <nz-form-label>服务</nz-form-label>\r\n        <nz-form-control>\r\n            <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"Select a server\" formControlName=\"server\" (ngModelChange)=\"changeServer($event)\">\r\n                <nz-option *ngFor=\"let item of serverList\" [nzLabel]=\"item.name\" [nzValue]=\"item.czmObject\"></nz-option>\r\n              </nz-select>\r\n        </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n        <nz-form-label>图层</nz-form-label>\r\n        <nz-form-control>\r\n            <nz-select nzShowSearch nzAllowClear nzPlaceHolder=\"Select a layer\" formControlName=\"layer\" (ngModelChange)=\"changeLayer($event)\">\r\n                <nz-option *ngFor=\"let item of layerList\" [nzLabel]=\"item.name\" [nzValue]=\"item.index\"></nz-option>\r\n              </nz-select>\r\n        </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item [hidden]=true>\r\n        <nz-form-label>服务平台</nz-form-label>\r\n        <nz-form-control>\r\n            <input nz-input placeholder=\"placeholder\" formControlName=\"platForm\" [disabled]=\"true\" />\r\n        </nz-form-control>\r\n    </nz-form-item>\r\n    <nz-form-item>\r\n        <nz-form-label>条件</nz-form-label>\r\n        <nz-form-control>\r\n            <input nz-input placeholder=\"placeholder\" formControlName=\"where\"/>\r\n        </nz-form-control>\r\n    </nz-form-item>\r\n    <div nz-row>\r\n        <div nz-col [nzSpan]=\"24\" class=\"search-area\">\r\n            <button nz-button [nzType]=\"'primary'\" (click)=\"Search()\">Search</button>\r\n            <button nz-button (click)=\"resetForm()\">Clear</button>\r\n        </div>\r\n    </div>\r\n</form>","import { Component } from \"@angular/core\";\nimport { ComponentRegister } from \"epsgis\";\nimport { BasePlanetWidgetComponent } from '../base-widget/base-widget.component';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { Query } from '../../services/query';\nimport qs from 'qs';\nimport axios from 'axios'\n@ComponentRegister({\n  uri: \"epsgis-planet-equery\",\n  path: \"epsplanet/components/equery\",\n  name: \"PlanetEqueryComponent\"\n})\n@Component({\n  selector: \"epsgis-planet-equery\",\n  templateUrl: \"./equery.component.html\",\n  styleUrls: [\"./equery.component.scss\"]\n})\nexport class PlanetEqueryComponent extends BasePlanetWidgetComponent {\n\n  serverList = []\n  layerList = []\n  validateForm!: FormGroup;\n  controlArray: Array<{ index: number; show: boolean }> = [];\n  isCollapse = true;\n\n\n  resetForm(): void {\n    this.validateForm.reset();\n    Query.clearHighLight();\n  }\n  constructor(private fb: FormBuilder) {\n    super();\n  }\n  static getCompInfo() {\n    return { name: \"EpsGisForPlanetLoadWmtsComponent\", path: \"epsplanet/components/load-wmts\" };\n  }\n  Search() {\n    console.log(this.validateForm.value)\n    let czmObject = this.validateForm.value.server;\n    let type = czmObject.xbsjImageryProvider.type;\n    let url = czmObject.xbsjImageryProvider[type].url;\n    if (url.indexOf('arcgis') !== -1) {\n      // let requestUrl = \"\"\n      let index = this.validateForm.value.layer;\n      let params = this.validateForm.value.where;\n      Query.ArcgisQuery(czmObject, index, params, res => { })\n    }\n    if (url.indexOf('geoserver') !== -1) {\n      let param = this.validateForm.value.where;\n      Query.GeoserverQuery(czmObject, param)\n    }\n    // let url=`http://localhost:6080/arcgis/rest/services/dxm/MapServer/2/query?text=&objectIds=&time=&geometry=&geometryType=esriGeometryEnvelope&inSR=&spatialRel=esriSpatialRelIntersects&relationParam=&outFields=&returnGeometry=true&maxAllowableOffset=&geometryPrecision=&outSR=&returnIdsOnly=false&returnCountOnly=false&orderByFields=&groupByFieldsForStatistics=&outStatistics=&returnZ=false&returnM=false&gdbVersion=&returnDistinctValues=false&f=pjson`\n  }\n  zoomTo() {\n\n  }\n  test() {\n\n  }\n  changeServer(value) {\n    this.layerList = [];\n    let type = value.xbsjImageryProvider.type;\n    let url = value.xbsjImageryProvider[type].url;\n    let requestUrl = \"\"\n    if (url.indexOf('arcgis') !== -1) {\n      this.validateForm.controls.platForm.setValue(\"ArcGIS\")\n      if (value.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\n        requestUrl = url.split('MapServer')[0] + \"MapServer/layers?f=pjson\"\n      } else if (value.xbsjImageryProvider.type == \"SSWebMapServiceImageryProvider\") {\n        requestUrl = url.split('arcgis')[0] + 'arcgis/rest' + url.split('arcgis')[1].split('MapServer')[0] + \"MapServer/layers?f=pjson\";\n        // console.log(requestUrl)\n      }\n      axios.get(requestUrl).then(res => {\n        res.data.layers.forEach(item => {\n          this.layerList.push({\n            name: item.name,\n            index: item.id\n          })\n        });\n      })\n    }\n    if (url.indexOf('geoserver') !== -1) {\n      this.validateForm.controls.platForm.setValue(\"GeoServer\")\n      if (value.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\") {\n        let layer = value.xbsjImageryProvider[type].layer\n        this.layerList.push({\n          name: layer,\n          index: 0\n        })\n        // requestUrl = url.split('MapServer')[0] + \"MapServer/layers?f=pjson\"\n      } else if (value.xbsjImageryProvider.type == \"SSWebMapServiceImageryProvider\") {\n        let layer = value.xbsjImageryProvider[type].layer\n        this.layerList.push({\n          name: layer,\n          index: 0\n        })\n        // console.log(requestUrl)\n      }\n    }\n\n\n  }\n  changeLayer(value) {\n    // let type = value.xbsjImageryProvider.type;\n    // let url = value.xbsjImageryProvider[type].url;\n    // if (url.indexOf('arcgis') !== -1) this.validateForm.controls.platForm.setValue(\"ArcGIS\")\n    // if (url.indexOf('geoserver') !== -1) this.validateForm.controls.platForm.setValue(\"GeoServer\")\n  }\n  getAllLayers(group) {\n    group.forEach(item => {\n      if (item.children) {\n        this.getAllLayers(item.children)\n      } else {\n        if (item.czmObject.xbsjType !== \"Imagery\") return;\n        this.serverList.push({\n          name: item.czmObject.name,\n          czmObject: item.czmObject\n        })\n      }\n    })\n  }\n  ngOnInit() {\n    super.ngOnInit();\n    console.log(qs)\n    this.getAllLayers(this.view.sceneTree.$refs.layerlist.children)\n    // this.view.sceneTree.$refs.layerlist.children.forEach(group => {\n    //   if (group.children) {\n    //     group.children.forEach(item => {\n    //       if (item.czmObject.xbsjType !== \"Imagery\") return;\n    //       this.serverList.push({\n    //         name: item.czmObject.name,\n    //         czmObject: item.czmObject\n    //       })\n    //       if (item.czmObject.xbsjImageryProvider.type == \"WebMapTileServiceImageryProvider\" || item.czmObject.xbsjImageryProvider.type == \"WebMapServiceImageryProvider\") {\n    //         if (item.czmObject.xbsjImageryProvider[item.czmObject.xbsjImageryProvider.type].url.indexOf(\"arcgis\") !== -1) {\n\n    //         } else {\n\n    //         }\n\n    //       }\n    //     })\n    //   } else {\n\n    //   }\n    // })\n    this.validateForm = this.fb.group({\n      server: [null],\n      layer: [null],\n      platForm: [null],\n      where: [null]\n    });\n  }\n  ngAfterViewInit() {\n    super.ngAfterViewInit();\n  }\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n}","import { CommonModule } from '@angular/common';\nimport { HttpClientModule } from '@angular/common/http';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { EpsGisDirectivesModule } from 'epsgis';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { NzInputModule } from 'ng-zorro-antd/input';\nimport { NzInputNumberModule } from 'ng-zorro-antd/input-number';\nimport { NzTreeModule } from 'ng-zorro-antd/tree';\nimport { NzTreeViewModule } from 'ng-zorro-antd/tree-view';\nimport { NzPopoverModule } from 'ng-zorro-antd/popover';\nimport { NzDividerModule } from 'ng-zorro-antd/divider';\nimport { NzSelectModule } from 'ng-zorro-antd/select';\nimport { NzButtonModule } from 'ng-zorro-antd/button';\nimport { NzMenuModule } from 'ng-zorro-antd/menu';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzGridModule } from 'ng-zorro-antd/grid';\nimport { NzSliderModule } from 'ng-zorro-antd/slider';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzModalModule } from 'ng-zorro-antd/modal';\nimport { NzTableModule } from 'ng-zorro-antd/table';\nimport { NzSwitchModule } from 'ng-zorro-antd/switch';\nimport { NzToolTipModule } from 'ng-zorro-antd/tooltip';\nimport { NzFormModule } from 'ng-zorro-antd/form';\nimport { PlanetEarthComponent } from './components/earth/earth.component';\nimport { PlanetHomeComponent } from './components/home/home.component';\nimport { PlanetLayerListComponent } from './components/layer-list/layer-list.component';\nimport { PlanetLayerManagerComponent } from './components/layer-manager/layer-manager.component';\nimport { PlanetLocationComponent } from './components/location/location.component';\nimport { PlanetModeSwitchComponent } from './components/mode-switch/mode-switch.component';\nimport { PlanetStatusBarComponent } from './components/status-bar/status-bar.component';\nimport { PlanetZoomComponent } from './components/zoom/zoom.component';\nimport { PlanetBasemapGalleryComponent } from './components/basemap-gallery/basemap-gallery.component';\nimport { PlanetIdentifyComponent } from './components/identify/identify.component';\nimport { PlanetEqueryComponent } from './components/equery/equery.component';\nconst components = [\n  PlanetEarthComponent,\n  PlanetLayerListComponent,\n  PlanetLayerManagerComponent,\n  PlanetStatusBarComponent,\n  PlanetHomeComponent,\n  PlanetLocationComponent,\n  PlanetModeSwitchComponent,\n  PlanetZoomComponent,\n  PlanetBasemapGalleryComponent,\n  PlanetIdentifyComponent,\n  PlanetEqueryComponent\n];\n@NgModule({\n  declarations: components,\n  imports: [\n    CommonModule,\n    HttpClientModule,\n    ReactiveFormsModule,\n    FormsModule,\n    NzInputModule,\n    NzInputNumberModule,\n    NzIconModule,\n    NzTreeModule,\n    NzTreeViewModule,\n    NzPopoverModule,\n    NzDividerModule,\n    NzSelectModule,\n    NzButtonModule,\n    NzMenuModule,\n    NzDropDownModule,\n    NzSliderModule,\n    NzGridModule,\n    NzTabsModule,\n    NzModalModule,\n    NzTableModule,\n    NzSwitchModule,\n    NzToolTipModule,\n    NzFormModule,\n    EpsGisDirectivesModule\n  ],\n  exports:components,\n  entryComponents: [...components]\n})\nexport class EpsGisForPlanetModule { }\n\n","function getPositionsHeightFromTileset(earth, positions, resultCallback) {\r\n    if (!earth.czm.scene.globe.depthTestAgainstTerrain) {\r\n        console.warn(\r\n            \"scene.globe.depthTestAgainstTerrain is false, may not get the height!\"\r\n        );\r\n    }\r\n\r\n    const cps = [];\r\n    for (let p of positions) {\r\n        cps.push(new Cesium.Cartographic(p[0], p[1], p[2]));\r\n    }\r\n\r\n    earth.czm.scene\r\n        .sampleHeightMostDetailed(cps)\r\n        .then(r => {\r\n            try {\r\n                let i = 0;\r\n                for (let p of positions) {\r\n                    if (r[i].height === undefined) {\r\n                        throw new Error(\"r[i].height === undefined\");\r\n                    }\r\n                    p[2] = r[i].height;\r\n                    i++;\r\n                }\r\n                // console.log(p);\r\n                resultCallback(true);\r\n            } catch (error) {\r\n                console.error(\"sampleHeightMostDetailed error 1!\");\r\n                resultCallback(false);\r\n            }\r\n        })\r\n        .otherwise(error => {\r\n            resultCallback(false);\r\n            console.error(\"sampleHeightMostDetailed error 2!\");\r\n        });\r\n}\r\n\r\nfunction getPositionsHeightFromTerrain(earth, positions, resultCallback) {\r\n    // Query the terrain height of two Cartographic positions\r\n    var terrainProvider = earth.czm.scene.terrainProvider;\r\n\r\n    if (terrainProvider instanceof Cesium.EllipsoidTerrainProvider) {\r\n        console.warn(\"没加载地形，可能获取不到高程信息\");\r\n    }\r\n\r\n    const cps = [];\r\n    for (let p of positions) {\r\n        cps.push(new Cesium.Cartographic.fromCartesian(p));\r\n    }\r\n\r\n    var promise = Cesium.sampleTerrainMostDetailed(terrainProvider, cps);\r\n    Cesium.when(\r\n        promise,\r\n        function (r) {\r\n            try {\r\n                let i = 0;\r\n                for (let p of positions) {\r\n                    if (r[i].height === undefined) {\r\n                        throw new Error(\"r[i].height === undefined\");\r\n                    }\r\n                    // p[\"x\"]=r[i].longitude;\r\n                    // p[\"y\"]=r[i].latitude;\r\n                    // p[\"z\"] = r[i].height;\r\n                    p = new Cesium.Cartesian3.fromRadians(r[i].longitude, r[i].latitude, r[i].height)\r\n                    i++;\r\n                }\r\n                resultCallback(positions);\r\n            } catch (error) {\r\n                console.error(\"sampleTerrainMostDetailed error 1!\");\r\n                resultCallback(false);\r\n            }\r\n        },\r\n        function (error) {\r\n            resultCallback(false);\r\n            console.error(\"sampleTerrainMostDetailed error 2!\" + error);\r\n        }\r\n    );\r\n}\r\n\r\nexport { getPositionsHeightFromTerrain, getPositionsHeightFromTileset }\r\n"]}