{"version":3,"file":"epsgis.js","sources":["../../../projects/epsgis/utils/console-log.ts","../../../projects/epsgis/models/app-config.ts","../../../projects/epsgis/directives/component-container.directive.ts","../../../projects/epsgis/directives/directives.module.ts","../../../projects/epsgis/models/base-widget.ts","../../../projects/epsgis/components/base-widget.ts","../../../projects/epsgis/models/http/request.result.ts","../../../projects/epsgis/decorator/component-register.decorator.ts","../../../projects/epsgis/components/shared/json-editor/json-editor.component.ts","../../../projects/epsgis/components/setting/base-setting.component.ts","../../../projects/epsgis/components/setting/widget-setting/widget-setting.component.html","../../../projects/epsgis/components/setting/widget-setting/widget-setting.component.ts","../../../projects/epsgis/components/icon/icon-setting.component.ts","../../../projects/epsgis/components/base-widget/base-widget.component.ts","../../../projects/epsgis/components/on-screen-widget-icon/on-screen-widget-icon.component.html","../../../projects/epsgis/components/on-screen-widget-icon/on-screen-widget-icon.component.ts","../../../projects/epsgis/models/base-panel.ts","../../../projects/epsgis/services/aspect.service.ts","../../../projects/epsgis/components/base-panel/base-panel.component.ts","../../../projects/epsgis/components/icon/icon-uncollapsed.component.ts","../../../projects/epsgis/components/icon/icon-collapsed.component.ts","../../../projects/epsgis/components/icon/icon-unmaximize.component.ts","../../../projects/epsgis/components/icon/icon-maximize.component.ts","../../../projects/epsgis/components/icon/icon-close.component.ts","../../../projects/epsgis/components/base-panel/panel-titlebar.component.ts","../../../projects/epsgis/components/on-screen-widget-panel/on-screen-widget-panel.component.ts","../../../projects/epsgis/components/on-screen-widget-panel/on-screen-widget-panel.component.html","../../../projects/epsgis/components/ex-panels/base-dockable-panel.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-bottom/dockable-panel-at-bottom.component.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-bottom/dockable-panel-at-bottom.component.html","../../../projects/epsgis/components/ex-panels/dockable-panel-at-right/dockable-panel-at-right.component.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-right/dockable-panel-at-right.component.html","../../../projects/epsgis/components/ex-panels/dockable-panel-at-left/dockable-panel-at-left.component.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-left/dockable-panel-at-left.component.html","../../../projects/epsgis/components/mobile/base-mobile-panel.ts","../../../projects/epsgis/components/mobile/action-panel/action-panel.component.html","../../../projects/epsgis/components/mobile/action-panel/action-panel.component.ts","../../../projects/epsgis/components/mobile/drawer-panel/drawer-panel.component.html","../../../projects/epsgis/components/mobile/drawer-panel/drawer-panel.component.ts","../../../projects/epsgis/components/mobile/modal-panel/modal-panel.component.html","../../../projects/epsgis/components/mobile/modal-panel/modal-panel.component.ts","../../../projects/epsgis/components/mobile/popup-panel/popup-panel.component.html","../../../projects/epsgis/components/mobile/popup-panel/popup-panel.component.ts","../../../projects/epsgis/components/mobile/drawer-panel-right/drawer-panel-right.component.html","../../../projects/epsgis/components/mobile/drawer-panel-right/drawer-panel-right.component.ts","../../../projects/epsgis/pipes/safeurl.pipe.ts","../../../projects/epsgis/components/ex-panels/iframe-panel/iframe-panel.component.html","../../../projects/epsgis/components/ex-panels/iframe-panel/iframe-panel.component.ts","../../../projects/epsgis/pipes/pipes.module.ts","../../../projects/epsgis/components/shared/resultfof/resultfof.component.ts","../../../projects/epsgis/components/shared/resultfof/resultfof.component.html","../../../projects/epsgis/components/shared/resultfoo/resultfoo.component.ts","../../../projects/epsgis/components/shared/resultfoo/resultfoo.component.html","../../../projects/epsgis/components/shared/resultfot/resultfot.component.ts","../../../projects/epsgis/components/shared/resultfot/resultfot.component.html","../../../projects/epsgis/components/shared/shared.module.ts","../../../projects/epsgis/components/icon/icon-arrow-down.component.ts","../../../projects/epsgis/components/icon/icon-arrow-left.component.ts","../../../projects/epsgis/components/icon/icon-arrow-right.component.ts","../../../projects/epsgis/components/icon/icon-module.ts","../../../projects/epsgis/components/widget-base.module.ts","../../../projects/epsgis/services/shared/shared-utils.service.ts","../../../projects/epsgis/utils/platform.ts","../../../projects/epsgis/services/utils.service.ts","../../../projects/epsgis/services/platform.service.ts","../../../projects/epsgis/services/common.service.ts","../../../projects/epsgis/services/component-loader.service.ts","../../../projects/epsgis/models/base-widget-frame.ts","../../../projects/epsgis/models/base-widget-panel.ts","../../../projects/epsgis/models/base-widget-setting.ts","../../../projects/epsgis/models/on-screen-widget-panel.ts","../../../projects/epsgis/models/widget-placeholder.ts","../../../projects/epsgis/services/event-emitter.service.ts","../../../projects/epsgis/services/request.service.ts","../../../projects/epsgis/services/widget-manager.service.ts","../../../projects/epsgis/services/config-loader.service.ts","../../../projects/epsgis/services/config-manager.service.ts","../../../projects/epsgis/services/panel-manager.service.ts","../../../projects/epsgis/services/map-manager.service.ts","../../../projects/epsgis/services/layout-manager.service.ts","../../../projects/epsgis/services/widget-place-holder.service.ts","../../../projects/epsgis/components/modal/modal-ref.ts","../../../projects/epsgis/components/modal/modal-types.ts","../../../projects/epsgis/components/modal/utils.ts","../../../projects/epsgis/components/modal/modal-container/modal-container.component.html","../../../projects/epsgis/components/modal/modal-container/modal-container.component.ts","../../../projects/epsgis/services/modal-manager.service.ts","../../../projects/epsgis/services/setting.service.ts","../../../projects/epsgis/services/service-injector.ts","../../../projects/epsgis/services/simple-loader.service.ts","../../../projects/epsgis/services/auth.service.ts","../../../projects/epsgis/services/gis-auth.service.ts","../../../projects/epsgis/components/comp-container/comp-container.component.ts","../../../projects/epsgis/components/comp-container/comp-container.component.html","../../../projects/epsgis/components/comp-container/comp-container.module.ts","../../../projects/epsgis/components/modal/modal.component.ts","../../../projects/epsgis/components/modal/modal-footer.component.ts","../../../projects/epsgis/components/base-map/base-map.component.ts","../../../projects/epsgis/components/modal/modal-footer.directive.ts","../../../projects/epsgis/components/modal/modal-options.ts","../../../projects/epsgis/components/shared/ngxviewer/pdf-viewer/pdf-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/pdf-viewer/pdf-viewer.component.ts","../../../projects/epsgis/components/shared/ngxviewer/image-viewer/image-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/image-viewer/image-viewer.component.ts","../../../projects/epsgis/components/shared/ngxviewer/video-viewer/video-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/video-viewer/video-viewer.component.ts","../../../projects/epsgis/components/shared/ngxviewer/e-ngx-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/e-ngx-viewer.component.ts","../../../projects/epsgis/components/shared/jsonviewer/json-viewer.component.html","../../../projects/epsgis/components/shared/jsonviewer/json-viewer.component.ts","../../../projects/epsgis/strategy/simple-reuse-strategy.ts","../../../projects/epsgis/components/menu-tab/menu-tab.service.ts","../../../projects/epsgis/components/menu-tab/menu-tab.component.html","../../../projects/epsgis/components/menu-tab/menu-tab.component.ts","../../../projects/epsgis/components/modal/modal-titlebar-button.component.ts","../../../projects/epsgis/components/modal/modal.module.ts","../../../projects/epsgis/epsgis.module.ts","../../../projects/epsgis/components/shared/ngxviewer/e-ngx-viewer.module.ts","../../../projects/epsgis/components/menu-tab/menu-tab.module.ts","../../../projects/epsgis/utils/id-generater.ts","../../../projects/epsgis/utils/localstorage-helper.ts","../../../projects/epsgis/utils/md5.ts","../../../projects/epsgis/utils/prop-watcher.ts"],"sourcesContent":["/**\n * 重写日志函数\n */\nexport class LogService {\n    /**\n     * 依赖全局配置，还是改为静态吧\n     */\n    static overwriteLog(log: boolean) {\n        const CONSOLE_METHODS = ['debug', 'error', 'info', \"log\", 'warn', 'time', 'timeEnd', 'count'];\n        CONSOLE_METHODS.forEach((item) => {\n            window.console[item] = (function (oriLogFunc) {\n                return function () {\n                    if (log) {\n                        try {\n                            oriLogFunc.call(console, ...arguments);\n                            // if (item === \"error\") {\n                            //     console.trace(...arguments);\n                            // }\n                        } catch (e) {\n                            console.error('console.log error', e);\n                        }\n                    }\n                }\n            })(window.console[item]);\n        });\n    }\n}","import * as _ from \"lodash\";\r\nimport { InjectionToken, Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { LogService } from \"../utils/console-log\";\r\nexport const AppGlobalConfigToken = new InjectionToken<AppGlobalConfig>('app_global_config');\r\nconst defaultGlobalConfigPath: string = \"assets/global.json\";\r\nconst defuaultConfigPath: string = \"assets/config.json\";\r\n/**\r\n * \r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class AppInitService {\r\n\r\n    private _mergedConfig: AppGlobalConfig;\r\n    /*\r\n    Error during template compile of 'createGlobalConfig'\r\n Function expressions are not supported in decorators\r\n   Consider changing the function expression into an exported function.\r\n   */\r\n\r\n    /**\r\n     * \r\n     * @param config \r\n     */\r\n    constructor(\r\n        private httpClient: HttpClient\r\n        // 这里不能注入ActivatedRoute？\r\n        //    , private route: ActivatedRoute\r\n    ) {\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private getPath(): string {\r\n        let fullPath, path;\r\n        fullPath = window.location.pathname;\r\n        if (fullPath === '/' || fullPath.substr(fullPath.length - 1) === '/') {\r\n            path = fullPath;\r\n        } else {\r\n            let sections = fullPath.split('/');\r\n            path = sections.join('/') + '/';\r\n        }\r\n        return path;\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private getUrlParams() {\r\n        let s = window.location.search,\r\n            p;\r\n        if (s === '') {\r\n            s = window.location.hash;\r\n            if (s && s.indexOf('?') > 0) {\r\n                s = s.substring(s.indexOf('?'));\r\n            }\r\n        }\r\n        if (s === '') {\r\n            return {};\r\n        }\r\n\r\n        p = new Object();\r\n        if (s.indexOf(\"?\") != -1) {\r\n            let strs = s.substr(1).split(\"&\");\r\n            for (let i = 0; i < strs.length; i++) {\r\n                p[strs[i].split(\"=\")[0]] = decodeURIComponent((strs[i].split(\"=\")[1]));\r\n            }\r\n        }\r\n\r\n        return p;\r\n    }\r\n    /**\r\n     * \r\n     * @param __config \r\n     */\r\n    init(__config: AppGlobalConfig) {\r\n        let __mergedConfig = _.cloneDeep(defaultAppGlobalConfig)\r\n        if (!__mergedConfig.path) {\r\n            __mergedConfig.path = __mergedConfig.appInfo.path = this.getPath();\r\n        }\r\n        __mergedConfig.urlParams = _.merge(__mergedConfig.urlParams, this.getUrlParams());\r\n\r\n        if (__mergedConfig.jimuConfig.isDesignMode === true\r\n            && typeof __mergedConfig.urlParams.config === \"string\" && __mergedConfig.urlParams.config.length >= 1) {\r\n            __mergedConfig.appInfo.configFile = \"./project/\" + __mergedConfig.urlParams.config + \"/config.json\";\r\n            __mergedConfig.appInfo.extendInitjs = \"./project/\" + __mergedConfig.urlParams.config + \"/thirdpartyLibs/init.js\";\r\n            __mergedConfig.appInfo.folderUrlPrefix = \"./project/\" + __mergedConfig.urlParams.config;\r\n        }\r\n        if (__config) {\r\n            __mergedConfig = _.merge(__mergedConfig, __config);\r\n        }\r\n        this._mergedConfig = __mergedConfig; //_.cloneDeep(__mergedConfig);\r\n        return this;\r\n    }\r\n    loadGlobalConfig(): Promise<boolean> {\r\n        return new Promise((resolve, reject) => {\r\n            this._mergedConfig.globalConfigFilePath = this._mergedConfig.globalConfigFilePath || defaultGlobalConfigPath;\r\n            if (this._mergedConfig.globalConfigFilePath) {\r\n                this.httpClient.get(this._mergedConfig.globalConfigFilePath).toPromise().then((cfg: any) => {\r\n                    //this._mergedConfig.globalConfig = { ...this._mergedConfig.globalConfig, ...cfg };\r\n                    if (cfg) {\r\n                        this._mergedConfig = { ...this._mergedConfig, ...cfg };\r\n                        if (cfg.title) {\r\n                            document.title = cfg.title;\r\n                        }\r\n                    }\r\n                    LogService.overwriteLog(this._mergedConfig.log);\r\n                    resolve(true);\r\n                }).catch(err => {\r\n                    console.log(\"配置文件global.json读取失败\");\r\n                    resolve(true);\r\n                });\r\n            } else {\r\n                console.log(\"没有global.json\");\r\n                resolve(true);\r\n            }\r\n        });\r\n    }\r\n    getConfig() {\r\n        return this._mergedConfig;\r\n    }\r\n\r\n}\r\n/**\r\n * 系统配置\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class AppGlobalConfig {\r\n    title?: string;\r\n    subtitle?: string;\r\n    logo?: string;\r\n    apiRootUrl?: string;\r\n    /**\r\n     * 定时任务服务地址\r\n     */\r\n    jobApiUrl?:string;\r\n    /**\r\n     * setting服务地址\r\n     * 服务越来越多，要整为服务。。。网关了。。。\r\n     */\r\n    settingApiUrl?:string;\r\n    // is3D?: boolean;\r\n    widgetRootPath?: string;\r\n    wabVersion?: string;\r\n    path?: string;\r\n    urlParams?: UrlParams;\r\n    jimuConfig?: JimuConfig;\r\n    appInfo?: AppInfo;\r\n    dojoConfig?: DojoConfig;\r\n    epsoConfig?: EpsoConfig;\r\n    globalConfigFilePath?: string;\r\n    // globalConfig?: any;\r\n    menuConfig?: {\r\n        notReuseRoutes?: Array<String>;\r\n        notShowInTabRoutes?: Array<String>,\r\n        menuData?: Array<MenuItem>\r\n    };\r\n    mapConfig?: {\r\n        is3D?: boolean;\r\n        jsApi?: string;\r\n        [key: string]: any;\r\n    };\r\n    /**\r\n     * 是否输出日志\r\n     */\r\n    log?: boolean;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface JimuConfig {\r\n    mapId?: string;\r\n    zIndex?: string;\r\n    isSettings?: boolean;\r\n    isDesignMode?: boolean;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface AppInfo {\r\n    path?: string;\r\n    configFile?: string;\r\n    extendInitjs?: string;\r\n    folderUrlPrefix?: string;\r\n    appPath?: string;\r\n    isRunInMobile?: boolean;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface DojoConfig {\r\n    locale?: string;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface UrlParams {\r\n    [key: string]: string | number | boolean;\r\n}\r\ninterface EpsoConfig {\r\n    showWorkAreaInAddUser?: boolean;\r\n    WorkAreaMinDepthInAddUser?: number;\r\n    defaultCityCode?: string;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * 临时这么处理下\r\n */\r\ninterface MenuItem {\r\n    name?: string;\r\n    path?: string;\r\n    children?: MenuItem[];\r\n    [key: string]: any\r\n}\r\n/**\r\n * 默认配置\r\n */\r\nexport const defaultAppGlobalConfig: AppGlobalConfig = {\r\n    title: \"EPSGIS\",\r\n    subtitle: \"山维科技\",\r\n    logo: \"\",\r\n    apiRootUrl: \"\",\r\n    // is3D: false,\r\n    widgetRootPath: \"widgets\",\r\n    wabVersion: undefined,\r\n    path: \"\",\r\n    urlParams: {\r\n        mode: \"\"\r\n    },\r\n    jimuConfig: {\r\n        zIndex: \"auto\",\r\n        isDesignMode: false,\r\n        isSettings: false,\r\n        mapId: \"mapContainer\"\r\n    },\r\n    appInfo: {\r\n        path: \"\",\r\n        configFile: defuaultConfigPath,\r\n        extendInitjs: \"\",\r\n        folderUrlPrefix: \"\",\r\n        appPath: \"\",\r\n        isRunInMobile: false\r\n    },\r\n    dojoConfig: {\r\n        locale: \"\"\r\n    },\r\n    epsoConfig: {\r\n        showWorkAreaInAddUser: true,\r\n        defaultCityCode: \"520100\"\r\n    },\r\n    globalConfigFilePath: defaultGlobalConfigPath,\r\n    // globalConfig: {},\r\n    menuConfig: {\r\n        notReuseRoutes: [],\r\n        notShowInTabRoutes: [],\r\n        menuData: []\r\n    },\r\n    mapConfig: {\r\n        is3D: false,\r\n        jsApi: \"\"\r\n    },\r\n    log: true\r\n};","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n/**\r\n * 组件容器\r\n */\r\n@Directive({\r\n    selector: '[component-host]'\r\n})\r\nexport class ComponentContainerDirective {\r\n\r\n    constructor(public viewContainerRef: ViewContainerRef) { }\r\n\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ComponentContainerDirective } from './component-container.directive';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    declarations: [\r\n        ComponentContainerDirective\r\n    ],\r\n    exports: [ComponentContainerDirective]\r\n})\r\nexport class EpsGisDirectivesModule { }","import { PanelOptions } from './base-panel';\n\n/**\n * create by ruir 191014  baseWidget.js\n */\n// export class BaseWidget {\n\n\n//     constructor() {\n\n//     }\n// }\n/**\n * 组件类型\n */\nexport enum WidgetType {\n    /**\n     * 组件\n     */\n    widget = \"widget\",\n    /**\n     * 弹窗\n     */\n    panel = \"panel\",\n    /**\n     * 图标\n     */\n    icon = \"icon\"\n}\n\n/**\n * 组件位置\n */\nexport class WidgetPosition {\n    [key: string]: any;\n    constructor(public top?: number | string,\n        public left?: number | string,\n        public bottom?: number | string,\n        public right?: number | string,\n\n        public height?: number | string,\n        public width?: number | string,\n        public zIndex?: number | string,\n        public position?: string\n        , public relativeTo: string = \"\") {\n        this.position = \"absolute\";\n    }\n}\n/**\n * 组件状态\n */\nexport enum WidgetState {\n    /**\n     * 关闭\n     */\n    closed = \"closed\",\n    /**\n     * 打开\n     */\n    opened = \"opened\",\n    /**\n     * \n     */\n    active = \"active\"\n}\n/**\n * panel状态\n */\nexport enum WidgetWindowState {\n    /**\n     * 正常\n     */\n    normal = \"normal\",\n    /**\n     * 最小化\n     */\n    minimized = \"minimized\",\n    /**\n     * 最大化\n     */\n    maximized = \"maximized\",\n    /**\n     * \n     */\n    collapsed = \"collapsed\"\n}\n// export interface IGetComponentInfo {\n//     getCompInfo(): ComponentInfo;//不能标记为static\n// }\n\n/**\n * 打开widget时的参数\n */\nexport interface WidgetOpenOptions {\n    /**\n     * 要打开组件的选择器\n     */\n    uri: string;\n    /**\n     * 打开位置，在config.json中没有配置时，需要传position\n     */\n    position?: WidgetPosition;\n    /**\n     * 要显示在panel中时，panel的参数\n     */\n    panel?: PanelOptions;\n    /**\n     * 要传递给panel或widget的数据\n     */\n    param?: any;\n    /**\n     * 仅创建组件 \n     */\n    onlyCreateWidget?: boolean;\n}","import { AfterViewInit, Directive, Input, OnDestroy, OnInit } from \"@angular/core\";\nimport { EventManager } from \"@angular/platform-browser\";\nimport * as _ from 'lodash';\nimport { ComponentLoaderService } from \"../services/component-loader.service\";\nimport { EventEmitterService } from \"../services/event-emitter.service\";\nimport { ServiceInjector } from \"../services/service-injector\";\nimport { WidgetPosition, WidgetState, WidgetType, WidgetWindowState } from \"../models/base-widget\";\nimport { AppGlobalConfig } from \"../models/models\";\nimport { CommonService } from \"../services/common.service\";\nimport { ConfigLoaderService } from \"../services/config-loader.service\";\nimport { ConfigManagerService } from \"../services/config-manager.service\";\nimport { MapManagerService } from \"../services/map-manager.service\";\nimport { PanelManagerService } from \"../services/panel-manager.service\";\nimport { HttpReqService } from \"../services/request.service\";\nimport { LayoutManagerService, WidgetManagerService, WidgetPlaceHolderService } from \"../services/services\";\nimport { UtilsService } from \"../services/utils.service\";\nimport { ModalManagerService } from \"../services/modal-manager.service\";\nimport { IComponentInfo } from \"../decorator/component-register.decorator\";\nimport { SettingService } from \"../services/setting.service\";\n@Directive()\nexport class BaseWidget implements OnInit, AfterViewInit, OnDestroy {\n    /**\n     * 类型，widget|panel|icon\n     */\n    type: WidgetType = WidgetType.widget;\n    /**\n     * 唯一标识\n     */\n    id: string = \"\";\n    /**\n     * 标题\n     */\n    label: string = undefined;\n    /**\n     * 图标地址\n     */\n    icon: string = undefined;\n    /**\n     * 组件地址\n     */\n    uri: string = undefined;\n\n    /**\n     * 最初的位置，运行中不会改变\n     */\n    originPosition: WidgetPosition = new WidgetPosition();\n    /**\n     * 位置\n     */\n    position: WidgetPosition = new WidgetPosition();\n    /**\n     * 组件(业务功能)配置信息\n     */\n    config: any = undefined;\n    /**\n     * \n     */\n    openAtStart: boolean = false;\n    /**\n     * 二维地图\n     */\n    map: any = null;\n    /**\n     * 三维场景\n     */\n    view: any = null;\n    /**\n     * 项目配置信息\n     */\n    appConfig: any = null;\n    /**\n     * 目录地址\n     */\n    folderUrl: string = null;\n    /**\n     * 组件状态\n     */\n    state: WidgetState = WidgetState.closed;\n    /**\n     * panel 状态\n     */\n    windowState: WidgetWindowState = WidgetWindowState.normal;\n    /**\n     * 组件是否已启动\n     */\n    started: boolean = false;\n    /**\n     * 组件名称\n     */\n    name: string = '';\n    /**\n     * 鼠标移动到组件时是否激活组件\n     */\n    moveTopOnActive: boolean = true;\n\n    /**\n     * 组件（自身属性）配置信息\n     */\n    widgetConfig: any = null;\n    /**\n     * \n     */\n    configId: string = null;\n\n    /**\n     * \n     */\n    style: string = \"\";\n    /**\n     * 标题\n     */\n    title: string = \"\";\n    /**\n     * 提示\n     */\n    tooltip: string = \"\";\n    /**\n     * 请求参数\n     */\n    reqPara: any = undefined;\n    /**\n     * 分组id\n     */\n    gid: string = \"\";\n    inPanel: boolean = true;\n    isOnScreen: boolean = true;\n\n    globalParams: AppGlobalConfig;\n    utils: UtilsService;\n    commonService: CommonService;\n    httpService: HttpReqService;\n    configLoader: ConfigLoaderService;\n    configManager: ConfigManagerService;\n    mapManager: MapManagerService;\n    panelManager: PanelManagerService;\n    widgetManager: WidgetManagerService;\n    widgetPlaceHolder: WidgetPlaceHolderService;\n    layoutManager: LayoutManagerService;\n    eventService: EventEmitterService;\n    jsEventManager: EventManager;\n    componentLoader: ComponentLoaderService;\n    modalManager: ModalManagerService;\n    settingService: SettingService\n    private minZindex: number = 102;\n    /**\n    * 组件路径，用于获取confing.json、manifest.json以及图片等当前组件的静态资源\n    */\n    // componentPath: string = \"\";\n    /**\n     * 组件信息\n     */\n    private _compInfo: IComponentInfo = { uri: \"\", name: \"BaseWidgetComponent\", path: \"\" };\n    /**\n     * constructor\n     */\n    constructor() { }\n\n    /**\n       * 用于AOP\n       * 之前的aspect.after(this.comRefMap.instance, \"ngOnInit\", this.test);\n       * 无法执行了，但自定义的函数可以，所以通过在钩子函数中调用自定义的函数来实现。\n       * 也就是在ngOnInit中调用afterNgOnInit\n       * 然后aspect.after(this.comRefMap.instance, \"afterNgOnInit\", this.test);\n       */\n    afterNgOnInit() {\n\n    }\n    /**\n   * 用于AOP，类同afterNgOnInit\n   */\n    afterNgAfterViewInit() {\n\n    }\n    /**\n   * 子组件必须要调用该函数\n   */\n    ngOnInit() {\n        //这样导致监听太多\n        // this.eventService.rss.on(this.eventService._viewChanged, (view) => {\n        //   this.view = view;\n        //   this.onViewChange(this.view);\n        // });\n        // this.eventService.rss.on(this.eventService._mapChanged, (map) => {\n        //   this.map = map;\n        //   this.onMapChange(this.map);\n        // });\n        this.afterNgOnInit();\n    }\n\n    /**\n     * 子组件必须要调用该函数\n     */\n    ngAfterViewInit() {\n        this.afterNgAfterViewInit();\n    }\n\n    ngOnDestroy(): void {\n    }\n\n    /**\n     * 返回组件信息\n     */\n    getCompInfo(): IComponentInfo {\n        return this._compInfo;\n    }\n    // constructor(\n    //   serviceInjector: ServiceInjector) {\n    //   this.globalParams = serviceInjector.config;\n    //   this.utils = serviceInjector.utils;\n    //   this.commonService = serviceInjector.commonService;\n    //   this.httpService = serviceInjector.httpService;\n    //   this.configLoader = serviceInjector.configLoader;\n    //   this.configManager = serviceInjector.configManager;\n    //   this.mapManager = serviceInjector.mapManager;\n    //   this.panelManager = serviceInjector.panelManager;\n    //   this.widgetManager = serviceInjector.widgetManager;\n    //   this.widgetPlaceHolder = serviceInjector.widgetPlaceHolder;\n    //   this.layoutManager = serviceInjector.layoutManager;\n    // }\n    /**\n     * 设置服务\n     * @param serviceInjector \n     */\n    setServiceInjector(serviceInjector: ServiceInjector) {\n        if (!serviceInjector) return;\n\n        this.globalParams = serviceInjector.config;\n        this.utils = serviceInjector.utils;\n        this.commonService = serviceInjector.commonService;\n        this.httpService = serviceInjector.httpService;\n        this.configLoader = serviceInjector.configLoader;\n        this.configManager = serviceInjector.configManager;\n        this.mapManager = serviceInjector.mapManager;\n        this.panelManager = serviceInjector.panelManager;\n        this.widgetManager = serviceInjector.widgetManager;\n        this.widgetPlaceHolder = serviceInjector.widgetPlaceHolder;\n        this.layoutManager = serviceInjector.layoutManager;\n        this.eventService = this.layoutManager.eventService;\n        this.jsEventManager = serviceInjector.jsEventManager;\n        this.componentLoader = serviceInjector.componentManager;\n        this.modalManager = serviceInjector.modalManaer;\n        this.settingService = serviceInjector.settingService;\n    }\n    /**\n     * 初始加载时设置元素位置\n     * @param positionConfig \n     */\n    setPosition(positionConfig: any) {\n        this.position = this.commonService.getPosition(positionConfig);\n        this.originPosition = _.cloneDeep(this.position);\n    }\n    /**\n     * 改变元素位置\n     * @param positionConfig \n     */\n    changePosition(positionConfig: any) {\n        this.position = this.commonService.getPosition(positionConfig);\n    }\n    /**\n     * \n     * @param state \n     */\n    setState(state: WidgetState) {\n        this.state = state;\n    }\n    /**\n     * \n     */\n    startup() {\n        this.started = true;\n    }\n    /**\n     * \n     */\n    onOpen() {\n        this.state = WidgetState.opened;\n        // console.log(\"widget onOpen\");\n    }\n    /**\n     * \n     */\n    resize(position?: any) {\n\n    }\n    onDeActive() {\n\n    }\n    onClose() {\n        this.state = WidgetState.closed;\n        // console.log(\"widget onClose\");\n    }\n    onAction(name: string, data?: any) {\n\n    }\n    /**\n     * 改变zindex，可选值：‘active’,'deactive',具体的值\n     */\n    setZIndex(index: string) {\n        switch (index) {\n            case \"active\":\n                this.position.zIndex = this.minZindex;\n                break;\n            case \"deactive\":\n                this.position.zIndex = \"auto\";\n                break;\n            default:\n                this.position.zIndex = index;\n                break;\n        }\n\n    }\n    onNormalize() {\n    }\n    onMinimize() { }\n    onMaximize() {\n\n    }\n    /**\n   * \n   * @param map \n   */\n    changeMap(map: any) {\n        this.map = map;\n        this.eventService.rss.emit(this.eventService._mapChanged, map);\n    }\n    /**\n     * 地图改变\n     * @param map \n     */\n    onMapChange(map: any) {\n    }\n    /**\n     * \n     * @param view \n     */\n    changeView(view: any) {\n        this.view = view;\n        this.eventService.rss.emit(this.eventService._viewChanged, view);\n    }\n    /**\n     * 场景改变\n     * @param view \n     */\n    onViewChange(view: any) {\n    }\n\n    get isSettingMode() {\n        return this.globalParams?.urlParams[\"mode\"] === \"config\";\n    }\n}","/**\n * 请求api后返回的结果实体模型\n */\nexport class RequestResultModel {\n    error?: { errorCode?: string, errorMsg?: string } = { errorCode: \"\", errorMsg: \"\" };\n    /**\n     * \n     * @param success 成功标记\n     * @param msg 描述信息\n     * @param data 数据\n     */\n    constructor(\n        public success: boolean,\n        public msg: string = \"\",\n        public data: any = null) {\n    }\n}\nexport interface TokenModel {\n    access_token?: string;\n    token_type?: string;\n    expires_in?: number;\n    refresh_token?: string;\n    error?: string;\n    error_description?: string;\n    client_id?: string;\n    user_name?: string;\n    userid?: string;\n    issued?: string;//时间\n    expires?: string;//时间\n}\nexport enum OrderByType {\n    asc = 0,\n    desc = 1\n}\n/**\n * \n */\nexport interface CurrentLoginUser {\n    userid?: string;\n    user_name?: string;\n    login_name?: string;\n    org_id?: string;\n    org_name?: string;\n    depart_ids?: string[];\n    depart_names?: string[];\n    role_ids?: string[];\n    role_names?: string[];\n    super_admin?: boolean;\n    org_admin?: boolean;\n    depart_admin?: boolean;\n    real_name?: string;\n    gender?: number;\n    mobile?: string;\n    email?: string;\n    login_date?: string;\n    last_login_date?: string;\n    token?: TokenModel;\n    work_area?: string;\n    leader?: boolean;\n}","export const ComponentRegistry: Map<string, IRegisteredComponentInfo> = new Map();\n// WeakMap\nexport interface IComponentInfo {\n  /**\n   * 选择器或唯一健值\n   */\n  uri: string\n  /**\n   * 组件路径\n   */\n  path?: string;\n  name?: string;\n}\nexport interface IRegisteredComponentInfo extends IComponentInfo {\n  component: any;\n}\n/**\n * 组件注册\n */\nexport const ComponentRegister = (info: IComponentInfo): any => {\n  return (cls: any) => {\n    // if((<BaseWidgetComponent>cls).getCompInfo()){\n\n    // }\n    if (cls.getCompInfo && typeof cls.getCompInfo === \"function\") {\n      // 如果重写了getCompInfo\n      const c = cls.getCompInfo();\n      if (!info.path) {\n        info.path = c.path;\n      }\n      if (!info.name) {\n        info.name = c.name;\n      }\n    }\n    // cls._compInfo = info;//静态属性\n    cls.prototype.getCompInfo = function () {\n      return info;\n    }\n    const reg: IRegisteredComponentInfo = Object.assign({}, info, { component: cls });\n    //切记相同key被覆盖，确保selector唯一\n    ComponentRegistry.set(info.uri.toLocaleLowerCase(), reg);\n  };\n};\n/**\n * \n * @param uri \n */\nexport function findComponentInfo(uri: string) {\n  if (!uri) {\n    return undefined;\n  }\n  //大小写不一致时取不到值...存时统一转为小写？\n  return ComponentRegistry.get(uri.toLocaleLowerCase());\n}","import { Component, ElementRef, EventEmitter, forwardRef, Input, NgZone, OnInit, Output, ViewChild } from '@angular/core';\n// import { simpleLoader } from '../../../services/simple-loader.service';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n// import * as JSONEditor from \"../../../utils/jsoneditor\";\n// import * as JSONEditor from \"jsoneditor\";\nimport { JSONEditorMode, JSONEditorOptions } from \"jsoneditor\";\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\ndeclare var JSONEditor: any;\n/**\n * Json编辑器 ruir\n */\n@ComponentRegister({\n  uri: 'epsgis-json-editor',\n  path: \"components/shared/json-editor\"\n})\n@Component({\n  selector: 'epsgis-json-editor',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => JsonEditorComponent),\n      multi: true\n    }\n  ],\n  template: `<div #jsoneditor></div>`,\n  styles: [`\n    :host ::ng-deep .jsoneditor-poweredBy{\n      display: none;\n    }\n    :host>div{\n        height: 100%;\n    }\n  `]\n})\nexport class JsonEditorComponent implements OnInit, ControlValueAccessor {\n\n  readonly jsonRess = [\n    \"assets/json-editor/930/jsoneditor.min.css\",\n    \"assets/json-editor/930/jsoneditor.min.js\"\n  ];\n  private _value: any;\n  private editor: any;\n  @ViewChild(\"jsoneditor\", { static: true }) jsonEditorContianer: ElementRef;\n  private _data;\n  //对外属性 开始\n  @Input()\n  get data() {\n    return this._data;\n  }\n  set data(val) {\n    this._data = val;\n    this.writeValue(val);\n    this.dataChange.emit(val);\n  }\n  @Output()\n  dataChange: EventEmitter<any> = new EventEmitter();\n  /**\n   * 选项\n   */\n  @Input(\"options\") editorOptions: JSONEditorOptions;\n  /**\n   * 树最大高度\n   */\n  @Input() treeMaxHeight: number;\n  @Output() onChange: EventEmitter<any> = new EventEmitter();\n  // @Output() onEditable: EventEmitter<EditableNode | object> = new EventEmitter();\n  @Output() onError: EventEmitter<Error> = new EventEmitter();\n  //对外属性 结束\n  private zone: NgZone;\n  constructor(zone: NgZone) {\n    this.zone = zone;\n  }\n\n\n  ngOnInit() {\n    // simpleLoader.loadResources(this.jsonRess,null,null,()=>{\n    //   const xx =window[\"JSONEditor\"];//为啥会为undefined？加载js不对？\n\n    // })\n  }\n  ngAfterViewInit() {\n    this.initEditor(this.editorOptions || {});\n  }\n  ngOnDestroy() {\n    this.destroy();\n  }\n  /**\n   * 初始化编辑器\n   * @param options \n   */\n  private initEditor(options: JSONEditorOptions) {\n    let defaultOptions: JSONEditorOptions = {\n      // name:\"\",//根节点名称\n      enableSort: true,\n      colorPicker: true,\n      escapeUnicode: false,\n      sortObjectKeys: true,\n      history: true,\n      modes: ['tree', 'view', 'form', 'code', 'text', 'preview'],\n      language: \"zh-CN\",\n      search: true,\n      onChangeJSON: (json: any) => {\n        //'tree', 'form', 'view'触发，代码模式不触发\n        // console.log(\"onChangeJSON:\", json);\n      },\n      onChangeText: (jsonString: string) => {\n        //console.log(\"onChangeText:\", jsonString);\n      },\n      onError: (error: Error) => {\n      }\n    }\n    // if (this.onChange.observers.length >= 1) {\n    //   defaultOptions.onChange = () => {\n    //     this.onChange.emit(this.editor.get())\n    //   };\n    // }\n    if (this.onError.observers.length >= 1) {\n      defaultOptions.onError = (v) => {\n        this.onError.emit(v);\n      };\n    }\n    const newOptions = Object.assign(options, defaultOptions);\n    //避免被外部覆盖\n    newOptions.onChange = () => {\n      if (this.editor) {\n        const value = this.editor.get();\n        this.updateValue(value);\n      }\n    },\n      this.editor = new JSONEditor(this.jsonEditorContianer.nativeElement, newOptions, this.data);\n\n  }\n  get value(): any {\n    return this._value;\n  }\n\n  set value(v: any) {\n    if (v !== this._value) {\n      this._value = v;\n      this._onChange(v);\n    }\n  }\n  _onChange(_: any) {\n  }\n\n  _onTouched() {\n  }\n  disabled = false;\n  registerOnChange(fn: any) {\n    this._onChange = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this._onTouched = fn;\n  }\n  setDisabledState?(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n  /**\n   * \n   * @param value \n   */\n  updateValue(value: any) {\n    this.zone.run(() => {\n      this.value = value;\n      this._onTouched();\n      if (this.editor) {\n        this.onChange.emit(value);\n      }\n    });\n  }\n\n  /**\n   * \n   * @param value \n   */\n  writeValue(value: any) {\n    this._value = value;\n    if (this.editor) {\n      this.editor.set(value);\n    }\n  }\n  /**\n   * 获取编辑器\n   * @returns \n   */\n  getEditor() {\n    return this.editor;\n  }\n  /**\n   * 展开节点\n   */\n  public expandAll() {\n    if (this.editor) {\n      this.editor.expandAll();\n    }\n  }\n  /**\n   * 收缩节点\n   */\n  public collapseAll() {\n    if (this.editor) {\n      this.editor.collapseAll();\n    }\n  }\n  /**\n   * 销毁编辑器\n   */\n  public destroy() {\n    if (this.editor) {\n      this.editor.destroy();\n    }\n  }\n  /**\n   * 设置焦点\n   */\n  public focus() {\n    if (this.editor) {\n      this.editor.focus();\n    }\n  }\n  /**\n   *  设置模式\n   * @param mode\n   */\n  public setMode(mode: JSONEditorMode) {\n    if (this.editor) {\n      this.editor.setMode(mode);\n    }\n  }\n  /**\n   * 设置模式\n   * @param modes \n   */\n  public setModes(modes: JSONEditorMode[]) {\n    if (this.editor) {\n      this.editor.setModes(modes);\n    }\n  }\n  /**\n   * 设置根节点\n   * @param name \n   */\n  public setName(name: string | undefined) {\n    if (this.editor) {\n      this.editor.setName(name);\n    }\n  }\n  /**\n   * 设置架构\n   * @param schema \n   */\n  public setSchema(schema: Object) {\n    if (this.editor) {\n      this.editor.setSchema(schema);\n    }\n  }\n  /**\n   * 设置json内容\n   * @param jsonString \n   */\n  public setText(jsonString: string) {\n    if (this.editor) {\n      this.editor.setText(jsonString);\n    }\n  }\n  /**\n   * 获取模式\n   * @returns \n   */\n  public getMode(): JSONEditorMode {\n    if (this.editor) {\n      return this.editor.getMode();\n    }\n  }\n  /**\n   * 获取名称（根节点） \n   * @returns \n   */\n  public getName(): string {\n    if (this.editor) {\n      return this.editor.getName();\n    }\n  }\n  /**\n   * 获取json内容\n   * @returns \n   */\n  public getText(): string {\n    if (this.editor) {\n      return this.editor.getText();\n    }\n  }\n}\n","import { BaseWidget } from '../base-widget';\nimport { Directive } from '@angular/core';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport { RequestResultModel } from '../../models/http/request.result';\n\n/**\n * 组件setting基类 ruir\n */\n@Directive()\nexport class BaseSettingComponent extends BaseWidget {\n\n    /**\n     * 组件实例\n     */\n    widgetInstance: BaseWidgetComponent;\n    configFileName = \"config.json\";\n    /**\n     * config.json网站路径\n     */\n    configJsonWebPath: string;\n\n    manifestFileName = \"manifest.json\";\n    /**\n     * manifest.json网站路径\n     */\n    manifestJsonWebPath: string;\n    /**\n     * config.json文件json数据\n     */\n    configJson: any;\n    /**\n     * manifest.json文件json数据\n     */\n    manifestJson: any;\n    /**\n    * 验证结果\n    */\n    private validateResult: RequestResultModel = new RequestResultModel(false);\n\n    /**\n     * 是否需要加载manifest.json\n     */\n    private _needLoadManifest = false;\n    public get needLoadManifest() {\n        return this._needLoadManifest;\n    }\n    public set needLoadManifest(value) {\n        this._needLoadManifest = value;\n    }\n    constructor() {\n        super();\n    }\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    ngAfterViewInit(): void {\n        super.ngAfterViewInit();\n    }\n\n    ngOnDestroy(): void {\n        super.ngOnDestroy();\n    }\n    /**\n    * config.json物理文件路径\n    */\n    public get configJsonPhysicalPath() {\n        return this.configJsonWebPath.replace(this.globalParams.widgetRootPath + \"/\", \"\");\n    }\n    /**\n     * manifest.json物理文件路径\n     */\n    public get manifestJsonPhysicalPath() {\n        return this.widgetInstance.getCompInfo().path + \"/\" + this.manifestFileName\n    }\n    getValidateResult() {\n        return this.validateResult;\n    }\n    /**\n     * 设置验证结果\n     * @param success 是否成功\n     * @param errMsg 错误信息\n     * @param data 要保存的数据\n     */\n    setValidateResult(success: boolean, errMsg?: string, data?: any) {\n        this.validateResult.success = success;\n        this.validateResult.msg = errMsg;\n        this.validateResult.data = data;\n    }\n    /**\n     * 保存config.json\n     */\n    saveConfigJson(json: any) {\n        return this.settingService.saveConfig({ filePath: this.configJsonPhysicalPath, content: (typeof json === \"string\" ? json : JSON.stringify(json)) })\n    }\n    /**\n     * 保存manifest.json\n     */\n    saveManifestJson(json: any) {\n        return this.settingService.saveConfig({ filePath: this.manifestJsonPhysicalPath, content: typeof json === \"string\" ? json : JSON.stringify(json) })\n    }\n    /**\n     * 保存失败事件\n     * @param error \n     */\n    onSaveError(error: Error) {\n        console.error(error);\n    }\n}\n// export interface IJsonFileLoad {\n//     onConfigJsonLoad(succes: boolean, err: Error);\n//     onManifestJsonLoad(succes: boolean, err: Error);\n//     saveConfigJson();\n//     saveManifestJson();\n// }\n","<!--\n    1、manifest.json配置默认不显示，用一个按钮来切换（比如图标i），点击时要么显示manifest要么config\n    2、根据hasSetting判断是否有设置组件，有的话，则加载，并可以切换为json编辑模式；如果没有，则只显示json编辑器\n-->\n<div [class.show-config]=\"currentMode==1 || currentMode==3\">\n    <!-- <div class=\"ssradio\">\n        <input class=\"radio_type\" type=\"radio\" name=\"type\" id=\"radio1\" checked=\"checked\"\n            (change)=\"this.currentMode=1\" />\n        <label for=\"radio1\">编辑器</label>\n        <input class=\"radio_type\" type=\"radio\" name=\"type\" id=\"radio2\" (change)=\"this.currentMode=3\" />\n        <label for=\"radio2\">定制UI</label>\n    </div> -->\n    <div class=\"switch\" *ngIf=\"showSwitchBtn\">\n        <span>\n            <input type=\"checkbox\" id=\"custom-ui\" [(ngModel)]=\"switchChecked\" (change)=\"changeMode($event)\" />\n            编辑器\n            <label for=\"custom-ui\"><em></em></label>\n        </span>\n    </div>\n    <div class=\"margin5\"></div>\n    <epsgis-json-editor #config [class.hide]=\"currentMode!=1\" [(data)]=\"configJson\"\n        [options]=\"{name:'组件配置信息'}\">\n    </epsgis-json-editor>\n    <div [class.hide]=\"currentMode!=3\">\n        <ng-container component-host></ng-container>\n    </div>\n</div>\n<div [class.show-manifest]=\"currentMode==2\">\n    <epsgis-json-editor #manifest [class.hide]=\"currentMode!=2\" [(data)]=\"manifestJson\" [options]=\"{name:'组件信息'}\">\n    </epsgis-json-editor>\n</div>\n<!-- <div>\n    <label class=\"ssSwitch\">\n        <input type=\"checkbox\">\n        <i></i>\n    </label> \n    <input class='switch-component' type='checkbox'>\n<label>test</label>\n\n</div> -->","import { Component, ViewChild, ViewContainerRef } from '@angular/core';\nimport { RequestResultModel } from '.././../../models/http/request.result';\nimport { ComponentContainerDirective } from '../../../directives/component-container.directive';\nimport { JsonEditorComponent } from '../../shared/json-editor/json-editor.component';\nimport { BaseSettingComponent } from '../base-setting.component';\n/**\n * 1为config，2为manifest，3为config定制开发\n */\ndeclare type mode = 0 | 1 | 2 | 3;\n/**\n * 组件设置\n */\n@Component({\n  selector: 'epsgis-widget-setting',\n  templateUrl: './widget-setting.component.html',\n  styleUrls: ['./widget-setting.component.scss'],\n})\nexport class WidgetSettingComponent extends BaseSettingComponent {\n  @ViewChild(\"config\", { read: JsonEditorComponent, static: false }) editorConfig: JsonEditorComponent;\n  @ViewChild(\"manifest\", { read: JsonEditorComponent, static: false }) editorManifest: JsonEditorComponent;\n  @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: false }) container: ViewContainerRef;\n  settingComponentInstance: BaseSettingComponent;\n  currentMode: mode = 0;\n  showSwitchBtn: boolean = false;\n  private previousMode: mode = 0;\n  switchChecked: boolean = false;\n  constructor() {\n    super();\n    this.needLoadManifest = true;\n  }\n\n  ngOnInit() {\n    this.setValidateResult(true);//test\n    this.setServiceInjector(this.widgetInstance.componentLoader.getServiceInjector());\n    this.widgetConfig = this.widgetInstance.widgetConfig;\n    this.configJsonWebPath = this.widgetConfig.folderUrl.split('?')[0] + (this.widgetConfig.configPath || this.configFileName);\n    this.manifestJsonWebPath = this.widgetConfig.folderUrl.split('?')[0] + this.manifestFileName;\n    super.ngOnInit();\n  }\n  ngAfterViewInit() {\n    //分开加载两个文件\n    this.loadWidgetConfig();\n    if (this.needLoadManifest) {\n      this.loadWidgetManifest();\n    }\n    super.ngAfterViewInit();\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n  switchToConfigOrManifest() {\n    if (this.currentMode != 2) {\n      this.previousMode = this.currentMode;\n      this.showSwitchBtn = false;\n      this.currentMode = 2;\n    } else {\n      this.currentMode = this.previousMode;\n      if (this.settingComponentInstance) {\n        this.showSwitchBtn = true;\n      }\n    }\n  }\n  /**\n   * \n   * @param evt Event\n   */\n  changeMode(evt: any) {\n    //evt.target.checked\n    if (this.switchChecked) {\n      this.currentMode = 1;\n    } else {\n      this.currentMode = 3;\n    }\n  }\n  /**\n   * 保存失败时\n   * @param error \n   */\n  onSaveError(error: Error) {\n    if (this.settingComponentInstance) {\n      this.settingComponentInstance.onSaveError(error);\n    } else {\n      //暂时这样\n      console.error(error);\n    }\n  }\n  /**\n   * 保存\n   * @returns \n   */\n  saveAll(): Promise<RequestResultModel> {\n    return new Promise<RequestResultModel>((resolve, reject) => {\n      let result: RequestResultModel;\n      switch (this.currentMode) {\n        case 1:\n          //config.json\n          result = this.getValidateResult();\n          if (result.success && this.editorConfig) {\n            this.saveConfigJson(this.editorConfig.getText()).then(res => {\n              if (res.success) {\n                res.data = {\n                  config: this.editorConfig.value,\n                  manifest: this.editorManifest.value\n                }\n              }\n              resolve(res);\n            }).catch(reject);\n          } else {\n            resolve(new RequestResultModel(false, \"验证失败\"));\n          }\n          break;\n        case 2:\n          //manifest.json\n          result = this.getValidateResult();\n          if (result.success && this.editorManifest) {\n            this.saveManifestJson(this.editorManifest.getText()).then(res => {\n              if (res.success) {\n                res.data = {\n                  config: this.editorConfig.value,\n                  manifest: this.editorManifest.value\n                }\n              }\n              resolve(res);\n            }).catch(reject);\n          } else {\n            resolve(new RequestResultModel(false, \"验证失败\"));\n          }\n          break;\n        case 3:\n          //config.json\n          if (this.settingComponentInstance) {\n            result = this.settingComponentInstance.getValidateResult();\n            if (result.success) {\n              this.settingComponentInstance.saveConfigJson(result.data).then(res => {\n                if (res.success) {\n                  res.data = {\n                    config: result.data,\n                    manifest: this.editorManifest.value\n                  }\n                }\n                resolve(res);\n              }).catch(reject);\n            }\n            else {\n              resolve(new RequestResultModel(false, \"验证失败\"));\n            }\n          } else {\n            resolve(new RequestResultModel(false, \"无组件，无法保存\"));\n          }\n          break;\n        default:\n          resolve(new RequestResultModel(false, \"不支持的模式\"));\n          break;\n      }\n    });\n  }\n  /**\n   * 加载config.json\n   * @returns \n   */\n  loadWidgetConfig() {\n    if (!this.configJsonWebPath) {\n      console.log(\"configJsonWebPath is null\");\n      return;\n    }\n    //加载config.json\n    this.settingService.getConfigContent(this.configJsonWebPath).then(result => {\n      this.configJson = result;\n      this.onConfigJsonLoad(true, null);\n    }).catch(err => this.onConfigJsonLoad(false, err));\n  }\n  /**\n  * 加载manifest.json\n  * @returns \n  */\n  loadWidgetManifest() {\n    if (!this.manifestJsonWebPath) {\n      console.log(\"manifestJsonWebPath is null\");\n      return;\n    }\n    //加载manifest.json\n    this.settingService.getConfigContent(this.manifestJsonWebPath).then(result => {\n      this.manifestJson = result;\n      this.onManifestJsonLoad(true, null);\n    }).catch(err => this.onManifestJsonLoad(false, err));\n  }\n  /**\n   * config.json文件加载完成后事件\n   * @param succes config.json文件加载成功时为true\n   * @param err \n   */\n  onConfigJsonLoad(succes: boolean, err: Error) {\n    if (!succes) {\n      console.error(err)\n    }\n    if (this.widgetConfig.hasSetting === true) {\n      //有setting\n      // 查找setting组件\n      const settingUri = this.widgetConfig.uri + \"-setting\";\n      const comp = this.componentLoader.findComponent(settingUri);\n      if (!comp) {\n        console.info(`未找到setting组件[${settingUri}]，请检查组件定义`);\n        //界面设置为json编辑器\n        this.currentMode = 1;\n        return;\n      }\n      //界面设置为定制的开发界面\n      this.showSwitchBtn = true;\n      this.currentMode = 3;\n      this.switchChecked = false;\n      const compRef = this.componentLoader.createComponent(comp, null, this.container);\n      this.settingComponentInstance = compRef.instance;\n      //设置几个关键属性\n      this.settingComponentInstance.widgetInstance = this.widgetInstance;\n      this.settingComponentInstance.configJson = this.configJson;\n      this.settingComponentInstance.configJsonWebPath = this.configJsonWebPath;\n      this.settingComponentInstance.manifestJson = this.manifestJson;\n      this.settingComponentInstance.manifestJsonWebPath = this.manifestJsonWebPath;\n      this.container.clear();\n      this.container.insert(compRef.hostView, 0);\n    } else {\n      //界面设置为json编辑器\n      this.currentMode = 1;\n    }\n\n  }\n  /**\n   * manifest.json文件加载完成后事件\n   * @param succes manifest.json文件加载成功时为true\n   * @param err \n   */\n  onManifestJsonLoad(succes: boolean, err: Error) {\n    if (!succes) {\n      console.error(err)\n    }\n  }\n\n}\n","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-setting\",\n    template: `\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" height=\"100%\" width=\"100%\">\n          <path\n            d=\"M512.6 706.2c-107 0-194.2-87-194.2-193.8 0-106.8 87-193.8 194.2-193.8 51.8 0 100.4 20.2 137.2 56.8 36.8 36.6 57 85.4 57 137 0 106.8-87.2 193.8-194.2 193.8M967.6 426h-0.2L876 405.8l-2.2-7c-6-19-13.8-38-24.2-58.2l-3.2-6.4 49.2-81.8c15-24 21.4-57 1.8-76.6l-46.2-46.2c-11.6-11.6-26.6-14-37-14-14.4 0-29.8 4.8-41.2 12.6l-0.2 0.2-79.8 51-6.6-3.4c-18.8-9.8-38.4-18-57.8-24.2l-7-2.2-20.4-92.2v-0.2c-4.8-26.2-27.6-54.4-56.4-54.4h-65.4c-27.8 0-46.6 27.8-52.8 55.4L404 148.8l-6.8 2.2c-20.8 6.6-41.6 15.4-61.6 25.8l-6.6 3.4L247.2 128l-0.2-0.2c-11.4-8-26.8-12.6-41.2-12.6-10.6 0-25.4 2.4-37 14L122.6 175.6c-19.6 19.6-13.2 52.6 1.8 76.6L175.8 338l-3.2 6.2c-9.6 19.2-16.8 37-22.2 54.4l-2.2 7L57 426h-0.2c-26.2 4.8-54.2 27.6-54.2 56.4v65.4c0 27.8 27.8 46.6 55.4 53l92 23 2.2 6.8c5.4 16.4 12.2 33 20.8 50.4l3 6.2-51.4 85.8c-15 24-21.4 57-1.8 76.6l46.2 46.2c11.6 11.6 26.6 14 37 14 14.4 0 29.8-4.8 41.2-12.6l0.2-0.2 82-52.2 6.6 3.4c20.2 10.6 41 19.4 61.8 26l6.8 2.2 22.6 90.8c6.4 27.6 25.2 55.4 52.8 55.4h65.4c28.8 0 51.6-28.2 56.4-54.4v-0.2l20.4-92.4 7-2.2c19.2-6.2 38.4-14.2 57-24l6.6-3.4 80 51 0.2 0.2c11.4 8 26.8 12.6 41.2 12.6 10.6 0 25.4-2.4 37-14l46.2-46.2c19.6-19.6 13.2-52.6-1.8-76.6l-49.2-82 3.2-6.2c9-18 16.8-36.2 22.6-54.2l2.2-6.6 92-23c27.6-6.4 55.4-25.2 55.4-53v-65.4c0-29-28.2-51.8-54.2-56.6\">\n          </path>\n        </svg>\n    `,\n    styles: []\n})\nexport class IconSettingComponent {\n//     <!-- <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n//     <path\n//       d=\"M512 88.39l-366.86 211.8v423.62L512 935.61l366.86-211.8V300.19z m302.86 598.47L512 861.71 209.14 686.86V337.14L512 162.29l302.86 174.85z\"></path>\n//     <path\n//       d=\"M315.9 512c0 108.3 87.8 196.1 196.1 196.1S708.1 620.3 708.1 512 620.3 315.9 512 315.9 315.9 403.7 315.9 512z m328.2 0a132.1 132.1 0 1 1-38.69-93.41A131.25 131.25 0 0 1 644.1 512z\"></path>\n//   </svg> -->\n//   <!-- <i style=\"color: #fff;\"  nz-icon [nzIconfont]=\"'icon-epsgis-setting'\"></i> -->\n}","// import { OnInit, AfterViewInit, OnDestroy, Directive } from '@angular/core';\nimport { ILoadScriptOptions, loadModules } from 'esri-loader';\n// import { AppGlobalConfig } from '../../models/app-config';\n// import { WidgetType, WidgetPosition, WidgetState, WidgetWindowState, ComponentInfo } from '../../models/base-widget';\n// import { WidgetManagerService } from '../../services/widget-manager.service';\n// import { PanelManagerService } from '../../services/panel-manager.service';\n// import { ConfigLoaderService } from '../../services/config-loader.service';\n// import { ConfigManagerService } from '../../services/config-manager.service';\n// import { MapManagerService } from '../../services/map-manager.service';\n// import { WidgetPlaceHolderService } from '../../services/widget-place-holder.service';\n// import { LayoutManagerService } from '../../services/layout-manager.service';\n// import { ServiceInjector } from '../../services/service-injector';\n// import { EventEmitterService } from '../../services/event-emitter.service';\n// import { EventManager } from '@angular/platform-browser';\n// import { HttpReqService } from '../../services/services';\n// import { ModalManagerService } from '../../services/modal-manager.service';\n// import { UtilsService } from '../../services/utils.service';\n// import { CommonService } from '../../services/common.service';\n// import { ComponentLoaderService } from '../../services/component-loader.service';\n// import { ModalManagerService } from \"../../services/modal-manager.service\";\nimport { BaseWidget } from '../base-widget';\nimport { Directive, HostListener, Input } from '@angular/core';\nimport { WidgetSettingComponent } from '../setting/widget-setting/widget-setting.component';\nimport * as _ from 'lodash';\nimport { IconSettingComponent } from '../icon/icon-setting.component';\n\n// @dynamic\n/**\n * create by ruir 191015  组件基类\n */\n@Directive()\nexport class BaseWidgetComponent extends BaseWidget {\n\n  widgetSettingClassName = \"ss-widget-setting\";\n  /**\n   * inPanel时是否要在组件里显示“设置”按钮，主要用于Panel的showTitle设置为false时使用，\n   * 不显示title就无法在标题栏显示设置图标\n   * 改为Input，可以在模板里使用\n   */\n  @Input() showSettingWhenInPanel = false;\n  ngOnInit() {\n    // this.loadConfig\n    if (!this.appConfig && this.widgetManager) {\n      this.widgetManager.loadConfig(this.getCompInfo(), this).then(() => {\n        this.afterNgOnInit();\n      });\n    } else {\n      this.afterNgOnInit();\n    }\n  }\n  private static settingIconEleNode = null;\n  @HostListener('mouseenter', ['$event.target'])\n  onMouseEnter(target: HTMLElement) {\n    if (this.isSettingMode === false) {\n      //非配置模式\n      return;\n    }\n    if (this.inPanel == true && this.showSettingWhenInPanel == false) {\n      return;\n    }\n    //通过className查找可能存在多个。。。比如map上有widget就有问题\n    // let nodes = target.getElementsByClassName(this.widgetSettingClassName);\n    if (target.lastElementChild.className == this.widgetSettingClassName) {\n      target.lastElementChild.classList.remove(\"hide\");\n      target.lastElementChild.classList.add(\"show\");\n    } else {\n      const div = document.createElement(\"div\");\n      div.className = this.widgetSettingClassName;\n      /*\n      const button = document.createElement(\"input\");\n      button.type = \"button\";\n      button.className = \"button\";\n      button.value = \"设置\";\n      button.onclick = () => {\n        this.openSetting();\n      }\n      div.appendChild(button);\n      */\n      //创建svg\n      //1.const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n      //2.动态创建IconSettingComponent，加入\n      if (!BaseWidgetComponent.settingIconEleNode) {\n        const settingIconCompRef = this.componentLoader.createComponent(IconSettingComponent);\n        BaseWidgetComponent.settingIconEleNode = settingIconCompRef.location.nativeElement;\n      }\n      const iconDiv = document.createElement(\"div\");\n      iconDiv.className = \"icon\";\n      const newIconEle = BaseWidgetComponent.settingIconEleNode.cloneNode(true);\n      iconDiv.appendChild(newIconEle);\n      iconDiv.onclick = () => {\n        this.openSetting();\n      }\n      iconDiv.cloneNode()\n      //if (target.hasChildNodes) {\n      //此种方式为把所有元素添加到div中，需修改相关样式\n      //     //target.children 不包括文本节点和属性节点\n      //     target.childNodes.forEach((node) => {\n      //       div.appendChild(node);//会移动\n      //     });\n      //   }\n      div.appendChild(iconDiv);\n      target.appendChild(div);\n    }\n  }\n\n  @HostListener('mouseleave', ['$event.target'])\n  onMouseLeave(target: HTMLElement) {\n    if (this.isSettingMode === false) {\n      //非配置模式\n      return;\n    }\n    if (this.inPanel == true && this.showSettingWhenInPanel == false) {\n      return;\n    }\n    if (target.lastElementChild.className == this.widgetSettingClassName) {\n      target.lastElementChild.classList.remove(\"show\");\n      target.lastElementChild.classList.add(\"hide\");\n    }\n  }\n  /**\n   * 获取组件的Panel\n   * @returns \n   */\n  getPanel() {\n    if (this.inPanel === false) {\n      return null;\n    }\n    let panel = null;\n    if (this.gid === 'widgetOnScreen' || this.gid === 'widgetPool') {\n      panel = this.panelManager.getPanelById(this.id + '_panel');\n    } else {\n      panel = this.panelManager.getPanelById(this.gid + '_panel');\n      if (panel) {\n        return panel;\n      } else {\n        panel = this.panelManager.getPanelById(this.id + '_panel');\n      }\n    }\n    if (!panel) panel = {\n      uri: \"epsgis-on-screen-widget-panel\"\n    };\n    return panel;\n  }\n  /**\n   * 组件配置变更后\n   * @param config \n   */\n  onConfigChanged(config) {\n  }\n  /**\n   * 系统配置变更后\n   * @param appConfig \n   * @param reason \n   * @param changedData \n   */\n  onAppConfigChanged(appConfig, reason, changedData) {\n\n  }\n  /**\n   * 动作，比如高亮icon\n   * @param action \n   * @param data \n   */\n  onAction(action, data) {\n\n  }\n  /**\n   * 加载arcgis js 模块\n   * @param modules \n   * @param loadScriptOptions \n   */\n  loadArcgisModules<T extends any[] = any[]>(modules: string[], loadScriptOptions?: ILoadScriptOptions): Promise<T> {\n    let _url = '';\n    // if (this.config && this.config.arcgisJsApi) {\n    //   _url = this.config.arcgisJsApi;\n    // }\n    if (this.globalParams.mapConfig.jsApi) {\n      _url = this.globalParams.mapConfig.jsApi;\n    }\n    //config.json中配置了jsApi则以它为准\n    if (this.appConfig && this.appConfig.map && this.appConfig.map.jsApi) {\n      _url = this.appConfig.map.jsApi;\n    }\n    if (!_url) {\n      console.error(\"no arcgis js api\");\n      return;\n    }\n    let options: ILoadScriptOptions = {\n      url: _url,\n      css: _url.replace(\"init.js\", \"esri/css/main.css\")\n    }\n    return loadModules(modules, Object.assign(options, loadScriptOptions));\n  }\n\n  /**\n   * 打开组件设置界面\n   * @param options \n   */\n  openSetting(options?: { width: number, height: number }) {\n    let saving = false;\n    const newOptions = Object.assign({ width: 700, height: 400 }, options);\n    const modal = this.modalManager.create({\n      title: this.label + \"-配置\",\n      content: WidgetSettingComponent,\n      componentParams: {\n        widgetInstance: this\n      },\n      top: 60,\n      width: newOptions.width,\n      height: newOptions.height,\n      titleBarButtons: [\n        {\n          icon: \"icon-epsgis-i\",\n          isIconfont: true,\n          onClick: (instance) => {\n            instance.switchToConfigOrManifest();\n          }\n        }\n      ],\n      okLoading: saving,\n      onOk: (instance: WidgetSettingComponent) => {\n        instance.saveAll().then(result => {\n          if (result.success) {\n            instance.widgetInstance.config = result.data.config;\n            instance.widgetInstance.widgetConfig.config = result.data.config;\n            instance.widgetInstance.widgetConfig.manifest = _.merge({}, instance.widgetInstance.widgetConfig.manifest, result.data.manifest);\n            instance.widgetInstance.onConfigChanged(instance.widgetInstance.widgetConfig);\n            modal.close();\n          } else {\n            instance.onSaveError(new Error(result.msg));\n          }\n          saving = false;\n        }).catch(err => {\n          instance.onSaveError(err);\n          saving = false;\n        });\n        return false;\n      }\n    });\n  }\n}\n","<img *ngIf=\"isShowImg\" [src]=\"icon\">\n<i *ngIf=\"!isShowImg\" nz-icon [nzIconfont]=\"icon\"> </i>","import { Component, OnInit, Optional, ViewContainerRef, ComponentRef, OnDestroy, AfterViewInit, HostListener, HostBinding, ChangeDetectorRef } from '@angular/core';\nimport { WidgetType, WidgetState } from '../../models/base-widget';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport * as _ from \"lodash\";\nimport { OnScreenWidgetPanelComponent } from '../on-screen-widget-panel/on-screen-widget-panel.component';\nimport { ComponentRegister } from '../../decorator/decorators';\n\n/**\n * create by ruir 191014  OnScreenWidgetIcon.js\n */\n@ComponentRegister({\n  uri: \"epsgis-on-screen-widget-icon\",\n  path: \"components/on-screen-widget-icon\"\n})\n@Component({\n  selector: 'epsgis-on-screen-widget-icon',\n  templateUrl: './on-screen-widget-icon.component.html',\n  styleUrls: ['./on-screen-widget-icon.component.scss'],\n})\nexport class OnScreenWidgetIconComponent extends BaseWidgetComponent implements OnInit, OnDestroy, AfterViewInit {\n  widget: any = null;\n  panel: ComponentRef<OnScreenWidgetPanelComponent> = null;\n  panelConfig: any = null;\n  isShowImg: Boolean = true;\n  spacing: number = 2;\n  // @HostBinding('class.hide') isHideIcon: boolean = false;// 未起作用\n  @HostBinding(\"style.display\") iconStyleDisplay: string = \"\";\n  constructor(@Optional() public viewContainerRef: ViewContainerRef, public cdrf: ChangeDetectorRef) {\n    super();\n    this.type = WidgetType.icon;\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.startup();\n  }\n  /**\n   * 设置参数\n   * @param options \n   */\n  setProps(options: { compRef: any, appConfig: any, map: any, widgetConfig: any }) {\n    if (options.compRef) {\n      this.widget = options.compRef;\n      this.appConfig = this.widget.instance.appConfig;\n      if (this.globalParams.mapConfig.is3D) {\n        this.view = this.widget.instance.view;\n      } else {\n        this.map = this.widget.instance.map;\n      }\n      this.widgetConfig = this.widget.instance.widgetConfig;\n      this.config = this.widget.instance.config;\n\n    } else {\n      this.appConfig = options.appConfig;\n      if (this.globalParams.mapConfig.is3D) {\n        this.view = options.map;\n      } else {\n        this.map = options.map;\n      }\n      this.widgetConfig = options.widgetConfig;\n      //this.config = this.widgetConfig.config;//这时还没有\n    }\n    this.id = this.configId = this.widgetConfig.id;\n    this.label = this.tooltip = this.title = this.widgetConfig.label;\n    this.folderUrl = this.widgetConfig.folderUrl;\n    if (typeof (this.widgetConfig.icon) != \"undefined\" && this.widgetConfig.icon != \"\")\n      this.icon = this.widgetConfig.icon;\n    else if (typeof (this.widgetConfig.manifest.icon) != \"undefined\" && this.widgetConfig.manifest.icon != \"\") {\n      this.icon = this.widgetConfig.manifest.icon;\n      this.isShowImg = false;\n    }\n    else\n      this.icon = this.folderUrl + \"images/icon.png\";//folderUrl后面有带/\n    this.uri = this.widgetConfig.uri;\n    this.gid = this.widgetConfig.gid;\n\n    // let _position: WidgetPosition = {\n    //   width: \"32px\",\n    //   height: \"32px\",\n    //   zIndex: this.globalParams.jimuConfig.zIndex\n    // }\n    let _position = _.cloneDeep(this.widgetConfig.position);\n    _position.width = \"32px\";\n    _position.height = \"32px\";\n    super.setPosition(_position);\n    this.panelConfig = _.cloneDeep(this.widgetConfig);\n    if (this.widgetConfig.showIcon === false) {\n      // this.isHideIcon = true;\n      this.iconStyleDisplay = \"none\";\n    }\n  }\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n  ngAfterViewInit(): void {\n    //this.resetPanelPosition();\n  }\n  resetPanelPosition() {\n    if (this.commonService.isMobile()) {\n      return this.panelConfig.position;\n    }\n    const _isInMap: boolean = this.widgetConfig.position.relativeTo !== \"browser\";\n    let _containerBounds: ClientRect | DOMRect;\n    if (_isInMap) {\n      const _ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n      if (_ele) {\n        _containerBounds = this.commonService.getElementBounds(_ele);\n      }\n    } else {\n      //应获取外层容器（epsgis-comp-container）的高宽\n      _containerBounds = document.querySelector(\"epsgis-comp-container\").getBoundingClientRect();\n    }\n    //.firstChild\n    let eleIcon = this.viewContainerRef.element.nativeElement,\n      bounds = this.commonService.getElementBounds(eleIcon),\n      inRight: boolean = false;\n    if (_containerBounds.width - bounds.right < _containerBounds.width / 2) {\n      inRight = true;\n    }\n    if (inRight) {\n      //this.panelConfig.position.left = \"auto\";\n      this.panelConfig.position.left = bounds.left - parseFloat(this.widgetConfig.position.width) - this.spacing - _containerBounds.left;\n      this.panelConfig.position.right = _containerBounds.right - bounds.left - this.spacing; //this.widgetConfig.position.right;\n    } else {\n      //如果图标的left+图标的宽度+panel的宽度小于等于可视区域的宽度则正常，反之panel的left=图标的left-panel的宽度\n      if (bounds.left + bounds.width + parseFloat(this.widgetConfig.position.width) + this.spacing > _containerBounds.width) {\n        this.panelConfig.position.left = bounds.left - parseFloat(this.widgetConfig.position.width) - this.spacing - _containerBounds.left;\n      } else {\n        this.panelConfig.position.left = bounds.left + bounds.width + this.spacing - _containerBounds.left;\n      }\n    }\n\n    //left小于0了 panel宽度太宽 重新定位\n    if (parseFloat(this.panelConfig.position.left) <= -1) {\n      if (inRight) {\n        this.panelConfig.position.left = this.spacing;\n        this.panelConfig.position.width = bounds.left - parseFloat(this.panelConfig.position.left) - this.spacing * 2 - _containerBounds.left;\n      } else {\n        this.panelConfig.position.left = bounds.left + bounds.width + this.spacing - _containerBounds.left;\n        this.panelConfig.position.width = _containerBounds.width - bounds.right - this.spacing * 2;\n      }\n    }\n    //如果图标的top+panel的高度小于等于可视区域的高度则正常，反之panel的top=图标的top-panel的高度\n    if (bounds.top + parseFloat(this.widgetConfig.position.height) + this.spacing > _containerBounds.height) {\n      this.panelConfig.position.top = bounds.top - parseFloat(this.widgetConfig.position.height) + this.spacing - _containerBounds.top;\n    } else {\n      this.panelConfig.position.top = bounds.top - _containerBounds.top;\n    }\n    //top小于0了  panel高度太高 重新定位\n    if (parseFloat(this.panelConfig.position.top) <= -1) {\n      this.panelConfig.position.top = bounds.top - _containerBounds.top;\n      this.panelConfig.position.height = _containerBounds.height - bounds.top - this.spacing * 2;\n    }\n    return this.panelConfig.position;\n  }\n  /**\n   * \n   * @param evt \n   */\n  @HostListener('click', ['$event'])\n  onMouseClick(evt) {\n    this.onClick(evt);\n  }\n\n  startup() {\n    this.started = true;\n  }\n  /**\n   * 单击图标时\n   * @param evt \n   */\n  onClick(evt) {\n    if (this.state === WidgetState.closed || (this.panel && this.panel.instance.state === WidgetState.closed)) {\n      this.switchToOpen();\n    } else {\n      this.switchToClose();\n    }\n  }\n  private _isDockPanel() {\n    let _uri = \"\", _dock = \"\";\n    if (this.widgetConfig.panel && this.widgetConfig.panel.dock) {\n      _dock = this.widgetConfig.panel.dock.toLowerCase();\n      return _dock === \"left\" || _dock === \"right\" || _dock === \"bottom\";\n    }\n    if (this.widgetConfig.panel && this.widgetConfig.panel.uri) {\n      _uri = this.widgetConfig.panel.uri;\n    }\n    if (!_uri) return false;\n    _uri = _uri.toLowerCase();\n    return _uri === \"epsgis-dockable-panel-at-left\" ||\n      _uri === \"epsgis-dockable-panel-at-bottom\" ||\n      _uri === \"epsgis-dockable-panel-at-right\";\n  }\n  /**\n   * \n   */\n  switchToOpen() {\n    if (!this._isDockPanel()) {\n      //同组互斥\n      this.panelManager.closeAllPanelsInGroup(this.widgetConfig.gid);\n    }\n    this.resetPanelPosition();\n    if (this.widgetConfig.inPanel === false) {\n      this.widgetManager.loadWidget(this.widgetConfig);\n    } else {\n      this.panelManager.showPanel(this.panelConfig, this.widget).then((panel: ComponentRef<OnScreenWidgetPanelComponent>) => {\n        this.panel = panel;\n        this.state = WidgetState.opened;\n        this.panel.instance.panelIcon = this;\n        if (this.panel.instance.isDockable()) {\n          this.panelManager.onMapResize();\n        }\n      });\n    }\n\n  }\n  /**\n   * \n   */\n  switchToClose() {\n    if (this.widgetConfig.inPanel === false) {\n      this.widgetManager.closeWidget(this.widget);\n    } else {\n      this.panelManager.closePanel(this.panel).then(panel => {\n        this.state = WidgetState.closed;\n      });\n    }\n  }\n  /**\n   * 移动\n   * @param position \n   */\n  moveTo(position) {\n  }\n  destroy() {\n    if (this.panel && this.panelManager) {\n      this.panelManager.destroyPanel(this.panel);\n    } else if (this.widget) {\n      this.widgetManager.destroyWidget(this.widget);\n    }\n  }\n  getOffPanelWidgetPosition() {\n\n  }\n  private _showLoading() {\n\n  }\n  private _hideLoading() {\n\n  }\n  onMapChange(map) {\n    this.map = map;\n  }\n  onViewChange(view) {\n    this.view = view;\n  }\n}\n","/**\n * create by ruir 191014  basePanel.js\n */\n\n/**\n * Panel 移动端显示方式\n */\nexport enum PanelInMobileShowMode {\n    /**\n     * 默认（pc端的方式）\n     */\n    default = \"default\",\n    /**\n     * 抽屉 侧滑\n     */\n    drawer = \"drawer\",\n    /**\n     * 抽屉 侧滑 右出\n     */\n    drawerRight = \"drawerright\",\n    /**\n     * 弹窗\n     */\n    popup = \"popup\",\n    /**\n     * 由底向上弹出层\n     */\n    action = \"action\",\n    /**\n     * 气泡弹窗\n     */\n    popover = \"popover\",\n    /**\n     * 模态 或 跳转到新页\n     */\n    modal = \"modal\"\n\n}\n/**\n * panel停靠方式\n */\nexport enum PanelDockMode {\n    /**\n     * 弹窗，不停靠\n     */\n    none = \"none\",\n    /**\n     * 停靠在左侧\n     */\n    left = \"left\",\n    /**\n     * 停靠在右侧\n     */\n    right = \"right\",\n    /**\n     * 停靠在下方\n     */\n    bottom = \"bottom\"\n}\n/**\n * panel 坐标以及高宽\n */\nexport interface PanelPosition {\n\n    top?: number | string;\n    left?: number | string;\n    width?: number | string;\n    height?: number | string;\n\n}\n/**\n * Panel参数\n */\nexport interface PanelOptions {\n    /**\n        * id\n        */\n    id?: string;\n    /**\n     * 标题\n     */\n    title?: string;\n    /**\n     * 是否显示标题\n     */\n    showTitle?: boolean;\n    /**\n     * 是否为模态窗口\n     */\n    modal?: boolean;\n    /**\n     * 是否自动打开\n     */\n    autoOpen?: boolean;\n    /**\n     * 动画时间\n     */\n    animationTime?: number;\n    /**\n     * 自定义样式\n     */\n    customClass?: string;\n    /**\n     * 按钮位置\n     */\n    buttonsPosition?: string;\n    /**\n     * 是否显示关闭按钮\n     */\n    buttonClose?: boolean;\n    /**\n     * 关闭按钮提示文本\n     */\n    buttonCloseText?: string;\n    /**\n     * 是否显示最大化按钮\n     */\n    buttonMaximize?: boolean;\n    /**\n     * 最大化按钮提示文本\n     */\n    buttonMaximizeText?: string;\n    /**\n     * \n     */\n    buttonUnmaximizeText?: string;\n    /**\n     * 是否显示最小化按钮\n     */\n    buttonMinimize?: boolean;\n    buttonMinimizeText?: string;\n    buttonUnminimizeText?: string;\n    /**\n     * 是否显示收缩按钮\n     */\n    buttonCollapse?: boolean;\n    buttonCollapseText?: string;\n    buttonUnCollapseText?: string;\n    /**\n     * 是否可以拖拽\n     */\n    draggable?: boolean;\n    dragOpacity?: number;\n    /**\n     * 是否可改变大小\n     */\n    resizable?: boolean;\n    resizeOpacity?: number;\n    /**\n     * 是否显示底部状态栏\n     */\n    statusBar?: boolean;\n\n    // top?: string;\n    // left?: string;\n    // right?: string ;\n    // bottom?: string ;\n\n    height?: number;\n    width?: number;\n    maxHeight?: any;\n    maxWidth?: any;\n    minHeight?: number;\n    minWidth?: number;\n    collapsedWidth?: number;\n\n    keepInViewport?: boolean;\n    mouseMoveEvents?: boolean;\n\n    dockSide?: PanelDockMode;\n    relativeTo?: string;\n    /**\n     * 静态html内容\n     */\n    innerHtml?: string; //静态内容\n    /**\n     * 显示url内容\n     */\n    url?: string;\n    /**\n     * 是否显示中间的折叠按钮，替换buttonCollapse属性\n     */\n    centerCollapse?: boolean;\n    /**\n     * 是否显示设置按钮\n     */\n    buttonSetting?: boolean;\n    /**\n     * 设置按钮提示文本\n     */\n    buttonSettingText?: string;\n\n}\n/**\n * Panel参数默认值\n */\nexport const DefaultPanelOptions: PanelOptions = {\n    /**\n     * id\n     */\n    id: \"ss_panel\",\n    /**\n     * 标题\n     */\n    title: \"SS Panel\",\n    /**\n     * 是否显示标题\n     */\n    showTitle: true,\n    /**\n     * 是否为模态窗口\n     */\n    modal: false,\n    /**\n     * 是否自动打开\n     */\n    autoOpen: false,\n    /**\n     * 动画时间\n     */\n    animationTime: 300,\n    /**\n     * 自定义样式\n     */\n    customClass: \"\",\n    /**\n     * 按钮位置\n     */\n    buttonsPosition: \"right\",\n    /**\n     * 是否显示关闭按钮\n     */\n    buttonClose: true,\n    /**\n     * 关闭按钮提示文本\n     */\n    buttonCloseText: \"关闭\",\n    /**\n     * 是否显示最大化按钮\n     */\n    buttonMaximize: true,\n    /**\n     * 最大化按钮提示文本\n     */\n    buttonMaximizeText: \"最大化\",\n    /**\n     * \n     */\n    buttonUnmaximizeText: \"还原\",\n    /**\n     * 是否显示最小化按钮\n     */\n    buttonMinimize: false,\n    buttonMinimizeText: \"最小化\",\n    buttonUnminimizeText: \"打开\",\n    /**\n     * 是否显示收缩按钮\n     */\n    buttonCollapse: true,\n    buttonCollapseText: \"收缩\",\n    buttonUnCollapseText: \"展开\",\n    /**\n     * 是否可以拖拽\n     */\n    draggable: true,\n    dragOpacity: 0.6,\n    /**\n     * 是否可改变大小\n     */\n    resizable: true,\n    resizeOpacity: 0.6,\n    /**\n     * 是否显示底部状态栏\n     */\n    statusBar: false,\n\n    // top: \"auto\";\n    // left: \"auto\";\n    // right: \"auto\";\n    // bottom: \"auto\";\n\n    height: 200,\n    width: 400,\n    maxHeight: undefined,\n    maxWidth: undefined,\n    minHeight: 100,\n    minWidth: 200,\n    collapsedWidth: undefined,\n\n    keepInViewport: true,\n    mouseMoveEvents: true,\n\n    dockSide: PanelDockMode.none,\n    relativeTo: \"map\",\n    /**\n     * 静态html内容\n     */\n    innerHtml: \"\",\n    /**\n     * 显示url内容\n     */\n    url: \"\"\n}","\r\n/**\r\n * create by ruir 191105 源自dojo/aspect.js\r\n * 提供面向切面的编程功能，允许在目标对象的方法前、后、及周围插入要执行的函数\r\n */\r\nclass AspectService {\r\n\r\n    nextId: number = 0;\r\n    /**\r\n    * 单例\r\n    */\r\n    private static _instance: AspectService = null;\r\n    private constructor() {\r\n\r\n    }\r\n    static getInstance() {\r\n        if (!this._instance) {\r\n            this._instance = new AspectService();\r\n        }\r\n        return this._instance;\r\n    }\r\n    /**\r\n     * 添加切面函数\r\n     * @param dispatcher 目标\r\n     * @param type 类型，after,before,around\r\n     * @param advice 要切入的函数\r\n     * @param receiveArguments 是否返回函数\r\n     */\r\n    private advise(dispatcher: any, type: string, advice: Function, receiveArguments?: boolean) {\r\n        let previous = dispatcher[type];\r\n        let around = type == \"around\";\r\n        let signal;\r\n        if (around) {\r\n            let advised = advice(()=> {\r\n                return previous.advice(this, arguments);\r\n            });\r\n            signal = {\r\n                remove: () => {\r\n                    if (advised) {\r\n                        advised = dispatcher = advice = null;\r\n                    }\r\n                },\r\n                advice: (target, args) => {\r\n                    //一旦调用remove，adviced变为空，便会跳过本次环绕通知，进入上一层的advice方法。\r\n                    return advised ?\r\n                        advised.apply(target, args) :  // 调用切入的函数\r\n                        previous.advice(target, args); // 已取消，跳至下一个\r\n                }\r\n            };\r\n        } else {\r\n            // 创建移除事件\r\n            signal = {\r\n                remove: () => {\r\n                    if (signal.advice) {\r\n                        let previous = signal.previous;\r\n                        let next = signal.next;\r\n                        if (!next && !previous) {\r\n                            delete dispatcher[type];\r\n                        } else {\r\n                            if (previous) {\r\n                                previous.next = next;\r\n                            } else {\r\n                                dispatcher[type] = next;\r\n                            }\r\n                            if (next) {\r\n                                next.previous = previous;\r\n                            }\r\n                        }\r\n\r\n                        // 移除后 置为空\r\n                        dispatcher = advice = signal.advice = null;\r\n                    }\r\n                },\r\n                id: dispatcher.nextId++,\r\n                advice: advice,\r\n                receiveArguments: receiveArguments\r\n            };\r\n        }\r\n        if (previous && !around) {\r\n            if (type == \"after\") {\r\n                //将侦听器添加到列表的末尾\r\n                //注意，我们必须对此循环进行一些更改，以解决一个奇怪的IE10 JIT错误 while (previous.next && (previous = previous.next)) { }\r\n                previous.next = signal;\r\n                signal.previous = previous;\r\n            } else if (type == \"before\") {\r\n                // 添加到开头\r\n                dispatcher[type] = signal;\r\n                signal.next = previous;\r\n                previous.previous = signal;\r\n            }\r\n        } else {\r\n            //替换前后或第一个\r\n            dispatcher[type] = signal;\r\n        }\r\n        return signal;\r\n    }\r\n    /**\r\n     * 切面\r\n     * @param type 类型 after,before,around\r\n     */\r\n    private _aspect(type: string) {\r\n        /**\r\n         * @target 目标对象\r\n         * @methodName 函数名\r\n         * @advice 要切入得函数\r\n         * @receiveArguments 是否传入原始参数\r\n         */\r\n        return (target: any, methodName: string, advice: Function, receiveArguments?: boolean) => {\r\n            let existing = target[methodName], dispatcher;\r\n            if (!existing || existing.target != target) {\r\n                // 还没有调度\r\n                target[methodName] = dispatcher = ()=>{\r\n                    let executionId = dispatcher.nextId;\r\n                    // before advice\r\n                    let args = arguments;\r\n                    let before = dispatcher.before;\r\n                    while (before) {\r\n                        if (before.advice) {\r\n                            args = before.advice.apply(this, args) || args;\r\n                        }\r\n                        before = before.next;\r\n                    }\r\n                    // around advice\r\n                    if (dispatcher.around) {\r\n                        let results = dispatcher.around.advice(this, args);\r\n                    }\r\n                    // after advice\r\n                    let after = dispatcher.after;\r\n                    while (after && after.id < executionId) {\r\n                        if (after.advice) {\r\n                            if (after.receiveArguments) {\r\n                                let newResults = after.advice.apply(this, args);\r\n                                // 仅当返回新值时才更改返回值\r\n                                results = newResults === undefined ? results : newResults;\r\n                            } else {\r\n                                results = after.advice.call(this, results, args);\r\n                            }\r\n                        }\r\n                        after = after.next;\r\n                    }\r\n                    return results;\r\n                };\r\n                if (existing) {\r\n                    dispatcher.around = {\r\n                        advice: (target, args) => {\r\n                            return existing.apply(target, args);\r\n                        }\r\n                    };\r\n                }\r\n                dispatcher.target = target;\r\n                dispatcher.nextId = dispatcher.nextId || 0;\r\n            }\r\n            let results = this.advise((dispatcher || existing), type, advice, receiveArguments);\r\n            advice = null;\r\n            return results;\r\n        };\r\n    }\r\n    after = this._aspect(\"after\");\r\n\r\n    before = this._aspect(\"after\");\r\n\r\n    around = this._aspect(\"around\");\r\n\r\n}\r\n// 示例:\r\n// 第一步导入库\r\n// import { aspect } from '../../../services/aspect.service';\r\n\r\n//after \r\n// let signal = aspect.after(targetObject, \"methodName\", (someArgument)=>{\r\n//     //将在调用targetObject.methodName()后执行\r\n// });\r\n//\r\n\r\n//\t返回的对象可用于移除绑定。\r\n//  signal.remove(); //移除\r\n//\t\r\n//before\r\n// aspect.before(targetObject, \"methodName\", (someArgument)=>{\r\n// \t\t//将在调用targetObject.methodName()前执行\r\n// });\r\n\r\n//around\r\n// aspect.around(targetObject, \"methodName\",  (originalFoo)()=> {\r\n//     return  ()=> {\r\n//         let start = new Date().getTime();//调用targetObject.methodName()前执行\r\n//         let results = originalFoo.apply(this, arguments); //调用原始方法targetObject.methodName()\r\n//         let end = new Date().getTime();//调用targetObject.methodName()后执行\r\n//         console.log(\"methodName execution took \" + (end - start) + \" ms\");\r\n//         return results;\r\n//     };\r\n// });\r\nexport let aspect = AspectService.getInstance();\r\n\r\nexport class TestAspect{\r\n    constructor(){\r\n        console.log(\"TestAspect constructor\")\r\n    }\r\n    testBefore(){\r\n        console.log(\"TestAspect testBefore\")\r\n    }\r\n    testAfter(){\r\n        console.log(\"TestAspect testAfter\")\r\n    }\r\n    testAround(){\r\n        console.log(\"TestAspect testAround\")\r\n    }\r\n}","import { OnInit, ComponentRef, ViewChild, ViewContainerRef, Optional, ElementRef, Renderer2, HostListener, AfterViewInit, ApplicationRef, Directive } from '@angular/core';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport { WidgetWindowState, WidgetState, WidgetPosition } from '../../models/base-widget';\nimport { PanelOptions, PanelPosition, PanelInMobileShowMode, PanelDockMode, DefaultPanelOptions } from '../../models/base-panel';\nimport * as _ from 'lodash';\nimport { aspect } from '../../services/aspect.service';\nimport { OnScreenWidgetIconComponent } from '../on-screen-widget-icon/on-screen-widget-icon.component';\nimport { ChangeDetectorRef } from \"@angular/core\";\nimport { BaseWidget } from '../base-widget';\n/**\n * \n */\n@Directive()\nexport class BasePanelComponent extends BaseWidget implements OnInit, AfterViewInit {\n  public options: PanelOptions = DefaultPanelOptions;\n  widget: ComponentRef<BaseWidgetComponent>;\n  @ViewChild(\"widget_content\", { read: ViewContainerRef, static: true }) widgetContainer: ViewContainerRef;\n  // @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: true }) widgetContainer: ViewContainerRef;\n\n  @ViewChild(\"sspanel_overlay\", { static: true }) sspanelOverlay: ElementRef;\n  @ViewChild(\"sspanel_titlebar\", { static: true }) sspanel_titlebar: ElementRef;\n  @ViewChild(\"sspanel\", { static: true }) sspanel: ElementRef;\n\n  /**\n   * \n   */\n  panelContainer: Element;\n  /**\n   * 当前位置\n   */\n  protected currentPosition: PanelPosition = undefined;\n  protected savedPosition: PanelPosition = undefined;\n  protected currentSize: { width: any, height: any } = undefined;\n  protected savedSize: { width: any, height: any } = undefined;\n  protected tempSavedData: any;\n  // private maximized: boolean = false;\n  // private collapsed: boolean = false;\n  // private minimized: boolean = false;\n  protected isMouseEvent: boolean = false;\n  /**\n   * 原始位置大小\n   */\n  protected originalPosition: PanelPosition = undefined;\n  /**\n   * 拉动大小时的参数\n   */\n  //private resizeParams:{dimension?:string,directionX?:string,directionY?:string}=undefined;\n  /**\n   * 停靠方式\n   */\n  dockMode: PanelDockMode = PanelDockMode.none;\n  //////////////移动端\n  /**\n   * 当前是否运行在移动端\n   */\n  _isRunInMobile: boolean = false;\n  /**\n   * 移动端展示方式 默认action\n   */\n  _mobileShowMode: PanelInMobileShowMode = PanelInMobileShowMode.action;\n\n  /////////////\n  panelIcon: OnScreenWidgetIconComponent;\n  /**\n   * \n   * @param _render \n   */\n  constructor(@Optional() public _render: Renderer2\n    , @Optional() public cdr: ChangeDetectorRef\n    /*public appRef: ApplicationRef*/) {\n    super();\n  }\n  /**\n   * \n   */\n  ngOnInit() {\n    this._isRunInMobile = this.commonService.isMobileNotTablet();\n    if (this.options.modal === true) {\n      if (this.sspanelOverlay) {\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"pointer-events\", \"auto\");\n      }\n    } else {\n      if (this.sspanelOverlay) {\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"transparent\");\n      }\n    }\n\n    if (this._isRunInMobile) {\n      if (this._mobileShowMode === PanelInMobileShowMode.drawer\n        || this._mobileShowMode === PanelInMobileShowMode.drawerRight) {\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"pointer-events\", \"auto\");\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"#00000080\");\n      }\n\n    } else {\n      try {\n        //ElementRef ok 这种方式不能自动调用钩子函数（如ngOnIit）\n        // const ele = (this.widget.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n        // this.widgetContainer[\"elementRef\"].nativeElement.parentElement.appendChild(ele);\n        //ElementRef insert is not a function\n        // this.widgetContainer.insert(this.widget.hostView);\n\n        // if (this.options.modal !== true) {\n        //   this._render.setStyle(this.sspanelOverlay.nativeElement, \"width\", 0);\n        //   this._render.setStyle(this.sspanelOverlay.nativeElement, \"height\", 0);\n        // }\n        this.xxxx = this._document_MouseMove.bind(this);\n        this.yyyy = this._document_MouseUp.bind(this);\n        this.started = true;\n      } catch (error) {\n        console.log(`open panel[${this.widget.instance.uri}] error`);\n        console.error(error);\n      }\n    }\n    super.ngOnInit();\n  }\n  /**\n   * \n   */\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    if (this.widget) {\n      this.widgetManager.destroyWidget(this.widget);\n    }\n  }\n  /**\n   * \n   */\n  ngAfterViewInit(): void {\n    //需异步执行，否则检测会报错Error: ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked...\n    Promise.resolve(null).then(() => {\n      this.startup();\n      this.state = WidgetState.opened;\n      this.loadAllWidgetsInOrder();\n      this.onOpen();\n      if (this.cdr && this.cdr[\"destroyed\"] === false) {\n        this.cdr.detectChanges();\n      }\n      super.afterNgAfterViewInit();\n    });\n  }\n  /**\n   * \n   * @param positionConfig \n   */\n  setPosition(positionConfig: any) {\n    if (!this.widgetConfig.position.width) {\n      this.widgetConfig.position.width = this.options.width;\n    }\n    if (!this.widgetConfig.position.height) {\n      this.widgetConfig.position.height = this.options.height;\n    }\n    //判断下高宽是否小于了最小的高宽，解决变成一条线问题\n    let w = this.commonService.getPxNumber(this.widgetConfig.position.width);\n    let h = this.commonService.getPxNumber(this.widgetConfig.position.height);\n    if (typeof w === \"number\" && w < this.options.minWidth) {\n      this.widgetConfig.position.width = this.options.minWidth;\n    }\n    if (typeof h === \"number\" && h < this.options.minWidth) {\n      this.widgetConfig.position.height = this.options.minHeight;\n    }\n\n    if (this.commonService.isMobileNotTablet()) {\n      this._setMobilePosition();\n    } else {\n      this._setPCPosition();\n    }\n    super.setPosition(this.widgetConfig.position);\n  }\n  /**\n   * \n   */\n  protected _setPCPosition() {\n    this.currentSize = { width: this.widgetConfig.position.width, height: this.widgetConfig.position.height };\n    this.currentPosition = { left: undefined, top: undefined, width: undefined, height: undefined };\n    this.currentPosition.left = this.commonService.getPxNumber(this.widgetConfig.position.left);\n    this.currentPosition.top = this.commonService.getPxNumber(this.widgetConfig.position.top);\n    this.currentPosition.width = this.commonService.getPxNumber(this.widgetConfig.position.width);\n    this.currentPosition.height = this.commonService.getPxNumber(this.widgetConfig.position.height);\n    this.savedPosition = _.cloneDeep(this.currentPosition);\n    this.originalPosition = _.cloneDeep(this.currentPosition);\n  }\n  /**\n  * 子类继承实现\n  */\n  protected _setMobilePosition() {\n\n  }\n  private loadAllWidgetsInOrder() {\n    //多个\n    // const configs = this.getAllWidgetConfigs();\n    // if (_.isArray(this.config.widgets)) {\n    //   configs = this.config.widgets;\n    // } else {\n    //   configs = [this.widgetConfig];\n    // }\n    const configs = [this.widgetConfig];\n    _.forEach(configs, (wConfig) => {\n      if (wConfig.visible === false) {\n        return;\n      }\n      //动画\n      //加载组件\n      this.widgetManager.loadWidget(wConfig).then((widget) => {\n        this.widget = widget;\n        if (this.options.showTitle === false) {\n          this.widget.instance.showSettingWhenInPanel = true;\n        }\n        this.widget.instance.reqPara = this.reqPara;\n        //ViewContainerRef insert  这种方式可自动调用钩子函数\n        this.widgetContainer.insert(this.widget.hostView);\n        // this.appRef.attachView(this.widget.hostView);//已经加入了\n        //ngAfterViewInit\n        aspect.after(this.widget.instance, \"afterNgAfterViewInit\", () => {\n          this.widget.instance.started = true;\n          this.widget.instance.state = WidgetState.opened;\n          this.widget.instance.windowState = WidgetWindowState.normal;\n          this.widget.instance.startup();\n        });\n      });\n    });\n  }\n\n  private getAllWidgetConfigs() {\n    let configs = [];\n    if (Array.isArray(this.config.widgets)) {\n      configs = this.config.widgets;\n    } else {\n      configs = [this.widgetConfig];\n    }\n    return configs;\n  }\n  /**\n   * 是否停靠的panel\n   */\n  isDockable(): boolean {\n    return this.dockMode === PanelDockMode.left ||\n      this.dockMode === PanelDockMode.bottom ||\n      this.dockMode === PanelDockMode.right;\n  }\n\n  startup() {\n    // this.panelContainer.appendChild(this.sspanelOverlay.nativeElement); //这种方式有问题\n    this.started = true;\n  }\n  /**\n   * \n   * @param widget \n   */\n  setWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    this.widget = widget;\n    if (this.options.showTitle === false) {\n      this.widget.instance.showSettingWhenInPanel = true;\n    }\n  }\n  /**\n   * 设置panel参数\n   * @param options \n   */\n  setOptions(options: PanelOptions) {\n    if (this.widgetConfig && this.widgetConfig.panel) {\n      _.merge(options, this.widgetConfig.panel);\n    }\n    this.options = _.merge(_.cloneDeep(DefaultPanelOptions), options);\n    this.options.buttonSetting = this.isSettingMode;\n  }\n  /**\n   * \n   * @param state \n   */\n  setWindowState(state: WidgetWindowState) {\n    this.windowState = state;\n  }\n  setState(state: WidgetState) {\n    switch (state) {\n      case WidgetState.opened:\n        this.showPanel();\n        break;\n      case WidgetState.closed:\n        this.hidePanel();\n        break;\n      case WidgetState.active:\n        break;\n      default:\n        break;\n    }\n    this.state = state;\n    if (this.widget) {\n      this.widget.instance.setState(state);\n    }\n  }\n  protected showPanel() {\n    this.sspanelOverlay.nativeElement.parentElement.style.display = '';\n    if (this.widget) {\n      //undefined?\n      this.commonService.getComponentRootNode(this.widget).style.display = '';\n    }\n    this.onOpen();\n    this.state = WidgetState.opened;\n  }\n  protected hidePanel() {\n    //this.widget.hostView.rootNodes[0].parentElement.parentNode.parentElement.parentElement.style.display='none'\n    this.sspanelOverlay.nativeElement.parentElement.style.display = 'none';\n    if (this.widget) {\n      //undefined?\n      this.commonService.getComponentRootNode(this.widget).style.display = 'none';\n    }\n    this.onClose();\n    //设置状态\n    this.state = WidgetState.closed;\n  }\n  /**\n   * 关闭panel\n   * @param event \n   */\n  closePanel(event) {\n    this.panelManager.closePanel(this.id);\n    // this.setState(WidgetState.closed);\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  onNormalize() {\n    if (this.widget) {\n      this.widget.instance.onNormalize();\n    }\n  }\n\n  onMinimize() {\n    if (this.widget) {\n      this.widget.instance.onMinimize();\n    }\n  }\n  onMaximize() {\n    if (this.widget) {\n      this.widget.instance.onMaximize();\n    }\n  }\n  /**\n   * \n   * @param position \n   */\n  resize(position?: any) {\n    if (position) {\n      if (position.left < 0) {\n        position.left = 0;\n      }\n      if (position.top < 0) {\n        position.top = 0;\n      }\n      if (position.width < this.options.minWidth) {\n        position.width = this.options.minWidth;\n      }\n      if (position.height < this.options.minHeight) {\n        position.height = this.options.minHeight;\n      }\n      this._render.setStyle(this.sspanel.nativeElement, \"left\", this._convertToStyleVal(position.left));\n      this._render.setStyle(this.sspanel.nativeElement, \"top\", this._convertToStyleVal(position.top));\n      this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(position.width));\n      this._render.setStyle(this.sspanel.nativeElement, \"height\", this._convertToStyleVal(position.height));\n      this.widgetConfig.position = _.merge(this.widgetConfig.position, position);\n      this.setPosition(position);\n    }\n  }\n  onResize() {\n    if (this.widget) {\n      this.widget.instance.resize();\n    }\n  }\n  onActive() {\n  }\n\n  onDeActive() {\n  }\n  onCollapse() {\n  }\n  onExpand() {\n  }\n  onMove() {\n  }\n  onPositionChange(position) {\n    this.setPosition(position);\n  }\n  onOpen() {\n    if (this.widget && this.widget.instance.started) {\n      this.widget.instance.onOpen();\n    }\n  }\n  onClose() {\n    //关闭widget\n    if (this.widget) {\n      this.widgetManager.closeWidget(this.widget);\n    }\n    // if (this.widget) {\n    //   this.widget.instance.onClose();\n    // }\n  }\n  @HostListener('mouseenter', ['$event.target'])\n  onMouseEnter(target) {\n    if (this.moveTopOnActive) {\n      this.panelManager._activePanel(this.id);\n    }\n  }\n\n  @HostListener('mouseleave')\n  onMouseLeave() {\n\n  }\n  /**\n   * \n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   */\n  /**\n   * 获取当前位置\n   */\n  private _getCurrentPosition() {\n\n    let _position = this.currentPosition;\n    if (_position.top === \"auto\") {\n      _position.top = this.position.top;\n    }\n    if (_position.left === \"auto\" || _position.left === 0) {\n      //解决在没有left属性时，第一次拖动会跑到左边的问题\n      const _panelBounds = this.commonService.getElementBounds(this.sspanel.nativeElement);\n      const _isInMap: boolean = this.widgetConfig.position.relativeTo !== \"browser\";\n      let _containerBounds: ClientRect | DOMRect;\n      if (_isInMap) {\n        const _ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n        if (_ele) {\n          _containerBounds = this.commonService.getElementBounds(_ele);\n        }\n      } else {\n        //应获取外层容器（epsgis-comp-container）的高宽\n        _containerBounds = document.querySelector(\"epsgis-comp-container\").getBoundingClientRect();\n      }\n      if (_containerBounds) {\n        //减去容器的left\n        _position.left = _panelBounds.left - _containerBounds.left;\n      }\n    }\n    return _.merge({}, _position);\n  }\n  /**\n   * 设置位置\n   * @param position \n   */\n  private _setCurrentPosition(position: PanelPosition) {\n    // console.log(\"Object.assign:\")\n    // console.log(Object.assign({ a: 1, b: 2 }, { a: 2, b: undefined }));\n    // console.log(\"_.extend:\")\n    // console.log(_.extend({ a: 1, b: 2 }, { a: 2, b: undefined }));\n    // console.log(\"_.merge:\")\n    // console.log(_.merge({ a: 1, b: 2 }, { a: 2, b: undefined }));\n    this.currentPosition = _.merge(this.currentPosition, position);\n  }\n  private _saveCurrentPosition() {\n    this.savedPosition = this._getCurrentPosition();\n  }\n  private _restoreSavedPosition() {\n    return this._changePosition(this.savedPosition);\n  }\n  /**\n   * \n   * @param params \n   */\n  private _changePosition(params: WidgetPosition | any) {\n    let defRet = this.commonService.createPromiseDefer();\n    let settings = this.options;\n    let animationTime = (params.animationTime !== undefined) ? parseInt(params.animationTime) : settings.animationTime;\n    let newPosition = {\n      top: params.top,\n      left: params.left,\n      bottom: params.bottom,\n      right: params.right\n    };\n    if (params.check) {\n      if (!(this.state === WidgetState.opened) ||\n        this.windowState === WidgetWindowState.maximized ||\n        this.windowState === WidgetWindowState.minimized) return;\n      if (settings.keepInViewport) {\n        let size = this._getCurrentSize();\n        let $window = this._getWindowSize();\n        if (newPosition.top > $window.height() - size.height) newPosition.top = $window.height() - size.height;\n        if (newPosition.left > $window.width() - size.width) newPosition.left = $window.width() - size.width;\n        if (newPosition.top < 0) newPosition.top = 0;\n        if (newPosition.left < 0) newPosition.left = 0;\n      }\n    }\n    let currentPosition = this._getCurrentPosition();\n    if (currentPosition.top != newPosition.top || currentPosition.left != newPosition.left) {\n      //动画 待实现\n      this.position = _.merge(this.position, {\n        left: newPosition.left + \"px\",\n        top: newPosition.top + \"px\"\n      });\n      this.sspanel.nativeElement.style.left = newPosition.left + \"px\";\n      this.sspanel.nativeElement.style.top = newPosition.top + \"px\";\n      this._setCurrentPosition(newPosition);\n      defRet.resolve();\n    } else {\n      defRet.resolve();\n    }\n    return defRet.promise();\n  }\n  private _getWindowSize() {\n    return {\n      height: () => {\n        return window.innerHeight;\n      },\n      width: () => {\n        return window.outerWidth;\n      }\n    }\n  }\n  /**\n   * 获取panel大小\n   */\n  private _getCurrentSize() {\n    return _.merge({}, this.currentSize);\n  }\n  /**\n   * \n   */\n  private _saveCurrentSize() {\n    //this._ssPanel.data(\"savedSize\", this._getCurrentSize());\n    this.savedSize = this._getCurrentSize();\n  }\n  private _setCurrentSize(size) {\n    this.currentSize = _.merge(this.currentSize, size);\n  }\n  private _restoreSavedSize() {\n    return this._changeSize(_.merge({\n      checkPosition: true,\n      checkSize: false,\n      event: false\n    }, this.savedSize));\n  }\n  /**\n   * 转换为style里的样式值，数字值转为带px的，非数字的直接返回\n   * @param val \n   */\n  protected _convertToStyleVal(val: any): string {\n    if (val == \"0\") return \"0px\";\n    if (!val) return \"\";\n    if (val === \"auto\" || val == \"100%\") return val;\n    let _w = parseFloat(val), _ws = \"\";\n    if (isNaN(_w)) {\n      _ws = val;\n    } else {\n      if (_w < 0) {\n        _w = 0;\n      }\n      _ws = _w + \"px\";\n    }\n    return _ws;\n  }\n  /**\n   * \n   * @param params \n   */\n  private _changeSize(params) {\n\n    let defRet = this.commonService.createPromiseDefer();\n    let settings = this.options;\n    let animationTime = (params.animationTime !== undefined) ? parseInt(params.animationTime) : settings.animationTime;\n    let newSize = {\n      width: params.width,\n      height: params.height\n    };\n    if (params.checkSize) {\n      if (this.state === WidgetState.closed\n        || this.windowState === WidgetWindowState.minimized ||\n        this.windowState === WidgetWindowState.maximized) return;\n\n      if (settings.maxWidth && newSize.width > settings.maxWidth) newSize.width = settings.maxWidth;\n      if (settings.minWidth && newSize.width < settings.minWidth) newSize.width = settings.minWidth;\n      if (settings.maxHeight && newSize.height > settings.maxHeight) newSize.height = settings.maxHeight;\n      if (settings.minHeight && newSize.height < settings.minHeight) newSize.height = settings.minHeight;\n      if (this.windowState === WidgetWindowState.collapsed) {\n        this.currentSize = _.merge({}, newSize)\n        delete newSize.height;\n      }\n    }\n    let currentSize = this._getCurrentSize();\n    if (currentSize.width != newSize.width || currentSize.height != newSize.height) {\n\n      if (newSize.height) {\n        // newSize.height=parseFloat(newSize.height); //NaN or number \n        this._render.setStyle(this.sspanel.nativeElement, \"height\", this._convertToStyleVal(newSize.height));\n      }\n      if (newSize.width) {\n        // newSize.width = parseFloat(newSize.width);//NaN or number \n\n        this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(newSize.width));\n      }\n\n      this._setCurrentSize(newSize);\n      defRet.resolve();\n    } else {\n      defRet.resolve();\n    }\n    return defRet.promise();\n  }\n\n  private _getBordersWidth(border: string): number | any {\n    if (border !== undefined) {\n      return this._getBorderWidth(this.sspanel.nativeElement, border);\n    }\n    return {\n      top: this._getBorderWidth(this.sspanel.nativeElement, \"top\"),\n      bottom: this._getBorderWidth(this.sspanel.nativeElement, \"top\"),\n      left: this._getBorderWidth(this.sspanel.nativeElement, \"top\"),\n      right: this._getBorderWidth(this.sspanel.nativeElement, \"top\")\n    };\n  }\n  private _getBorderWidth(ele: HTMLElement, border: string) {\n    if (border.toLowerCase() === \"top\") border = \"Top\";\n    if (border.toLowerCase() === \"left\") border = \"Left\";\n    if (border.toLowerCase() === \"right\") border = \"Right\";\n    if (border.toLowerCase() === \"bottom\") border = \"Bottom\";\n    let w = ele.style[`border${border}Width`];\n    if (!w) w = 0;\n    return parseInt(w, 10);\n  }\n  /**\n   * \n   * @param evt \n   */\n  public _contentClick(evt: MouseEvent) {\n    this.panelManager._activePanel(this.id);\n  }\n  /**\n   * 单击标题\n   */\n  public _titlebar_MouseDown(event: MouseEvent) {\n    if (this.commonService.isMobile()) return;\n    if (this.isDockable()) return;\n    if (this.options.draggable !== true) return;\n    this.isMouseEvent = false;\n    // if (event.currentTarget[\"className\"].indexOf(\"sspanel_titlebar_draggable\") <= -1) {\n    //   return;\n    // }\n    this.panelManager._activePanel(this.id);\n    let currentPosition = this._getCurrentPosition();\n    let settings = this.options;\n    if (!settings.modal) {\n      this.sspanelOverlay.nativeElement.style.backgroundColor = \"transparent\";\n      this.sspanelOverlay.nativeElement.style.width = \"100%\";\n      this.sspanelOverlay.nativeElement.style.height = \"100%\";\n\n    }\n    this._addDocumentMouseEventHandlers({\n      action: \"drag\",\n      opacity: settings.dragOpacity,\n      compensationX: event.pageX - parseFloat(currentPosition.left.toString()),\n      compensationY: event.pageY - parseFloat(currentPosition.top.toString())\n    });\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  /**\n   * \n   * @param event \n   * @param resizeParams \n   */\n  public _resizer_MouseDown(event: MouseEvent, resizeParams: { dimension?: string, directionX?: string, directionY?: string }) {\n    if (this.commonService.isMobile()) return;\n    let currentPosition = this._getCurrentPosition();\n    let currentSize = this._getCurrentSize();\n    let _data = {\n      action: \"resize\",\n      dimension: resizeParams.dimension,\n      directionX: resizeParams.directionX,\n      directionY: resizeParams.directionY,\n      opacity: this.options.resizeOpacity,\n      startX: event.pageX + ((resizeParams.directionX == \"left\") ? parseFloat(currentSize.width) : -parseFloat(currentSize.width)),\n      startY: event.pageY + ((resizeParams.directionY == \"top\") ? parseFloat(currentSize.height) : -parseFloat(currentSize.height)),\n      compensationX: event.pageX - parseInt(currentPosition.left.toString(), 10),\n      compensationY: event.pageY - parseInt(currentPosition.top.toString(), 10)\n    };\n    // if (isNaN(parseInt(currentPosition.left.toString(), 10))) {\n    //   _data.compensationX = event.pageX;\n    // }\n    // if (isNaN(parseInt(currentPosition.top.toString(), 10))) {\n    //   _data.compensationX = event.pageY;\n    // }\n    this._addDocumentMouseEventHandlers(_data);\n    event.preventDefault();\n  }\n  /**\n   * \n   * @param eventData \n   */\n  private _addDocumentMouseEventHandlers(eventData) {\n    this.sspanel.nativeElement.style.opacity = eventData.opacity;\n    this.sspanel.nativeElement.style.filter = \"alpha(opacity=\" + eventData.opacity * 100 + \")\"; // IE5-8\n    if (!this.options.mouseMoveEvents) {\n      this.tempSavedData = {\n        position: this._getCurrentPosition(),\n        size: this._getCurrentSize()\n      }\n    }\n    /*\n    document.addEventListener(\"mousemove\",(evt: MouseEvent) => {\n      evt[\"data\"] = eventData;\n      this._document_MouseMove(evt);\n    });\n    document.addEventListener(\"mouseup\", (evt: MouseEvent) => {\n      evt[\"data\"] = eventData;\n      this._document_MouseUp(evt);\n    });*/\n    this._eventTempData = eventData;\n    document.addEventListener(\"mousemove\", this.xxxx, false);\n    document.addEventListener(\"mouseup\", this.yyyy, false);\n  }\n  private _eventTempData: any = undefined;\n  private xxxx;\n  private yyyy;\n  /**\n   * \n   */\n  private _document_MouseMove(event) {\n    let settings = this.options;\n    let currentPosition = this._getCurrentPosition();\n    let currentSize = this._getCurrentSize();\n    let newPosition: any = {};\n    let newSize: any = {};\n    event.data = this._eventTempData;\n    switch (event.data.action) {\n      case \"drag\":\n        newPosition.top = event.pageY - event.data.compensationY;\n        newPosition.left = event.pageX - event.data.compensationX;\n        if (settings.keepInViewport) {\n          let size = this._getCurrentSize();\n          let $window = this._getWindowSize();\n          if (newPosition.top < 0) newPosition.top = 0;\n          if (newPosition.left < 0) newPosition.left = 0;\n          if (newPosition.top > $window.height() - size.height) newPosition.top = $window.height() - size.height;\n          if (newPosition.left > $window.width() - size.width) newPosition.left = $window.width() - size.width;\n        }\n        this.isMouseEvent = true;\n        break;\n      case \"resize\":\n        if (event.data.dimension != \"height\" && event.pageX > 0) {\n          let newWidth = (event.data.directionX == \"left\") ? event.data.startX - event.pageX : event.pageX - event.data.startX;\n          if (newWidth >= settings.minWidth && (!settings.maxWidth || newWidth <= settings.maxWidth)) {\n            newSize.width = newWidth;\n            if (event.data.directionX == \"left\") newPosition.left = event.pageX - event.data.compensationX;\n          }\n        }\n        if (event.data.dimension != \"width\" && event.pageY > 0) {\n          let newHeight = (event.data.directionY == \"top\") ? event.data.startY - event.pageY : event.pageY - event.data.startY;\n          if (newHeight >= settings.minHeight && (!settings.maxHeight || newHeight <= settings.maxHeight)) {\n            newSize.height = newHeight;\n            if (event.data.directionY == \"top\") newPosition.top = event.pageY - event.data.compensationY;\n          }\n        }\n        break;\n    }\n\n    if ((newPosition.top !== undefined && newPosition.top != currentPosition.top) || (newPosition.left !== undefined && newPosition.left != currentPosition.left)) {\n      if (newPosition.top < 0) {\n        newPosition.top = 0;\n      }\n      if (newPosition.left < 0) {\n        newPosition.left = 0;\n      }\n      this._changePosition(newPosition);\n      this._setCurrentPosition(newPosition);\n      if (settings.mouseMoveEvents) {\n        this.onMove();\n      }\n    }\n    if ((newSize.width !== undefined && newSize.width != currentSize.width) || (newSize.height !== undefined && newSize.height != currentSize.height)) {\n      if (newSize.height) {\n        if (newSize.height <= this.options.minHeight) {\n          newSize.height = this.options.minHeight;\n        }\n        this._render.setStyle(this.sspanel.nativeElement, \"height\", this._convertToStyleVal(newSize.height));\n      }\n      if (newSize.width) {\n        if (newSize.width <= this.options.minWidth) {\n          newSize.width = this.options.minWidth;\n        }\n        this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(newSize.width));\n      }\n      this._setCurrentSize(newSize);\n      if (settings.mouseMoveEvents) {\n        this._setIframeStyle();\n        this.onResize();\n      }\n    }\n  }\n  /**\n   * \n   */\n  private _document_MouseUp(event) {\n    let settings = this.options;\n    // this._ssPanel.fadeTo(0, 1);\n    this.sspanel.nativeElement.style.opacity = 1;\n    this.sspanel.nativeElement.style.filter = \"alpha(opacity=\" + 1 * 100 + \")\"; // IE5-8\n    // ruir:20200511 去掉setTimeout（设置管理员modal拖动问题）\n    //setTimeout(() => {\n    document.removeEventListener(\"mousemove\", this.xxxx);\n    document.removeEventListener(\"mouseup\", this.yyyy);\n    //}, 10);\n    if (this.isMouseEvent !== true) return;\n\n    if (!settings.modal) {\n      this.sspanelOverlay.nativeElement.style.width = \"0px\";\n      this.sspanelOverlay.nativeElement.style.height = \"0px\";\n      this.sspanelOverlay.nativeElement.style.backgoundColor = \"\";\n    }\n    if (!settings.mouseMoveEvents) {\n      let currentPosition = this._getCurrentPosition();\n      let currentSize = this._getCurrentSize();\n      let savedData = this.tempSavedData;\n      if (savedData.position.top != currentPosition.top || savedData.position.left != currentPosition.left) {\n        // this._triggerEvent(\"move\");\n        this.onMove();\n      }\n      if (savedData.size.width != currentSize.width || savedData.size.height != currentSize.height) {\n        // this._triggerEvent(\"resize\");\n        this._setIframeStyle();\n        this.onResize();\n      }\n      this.tempSavedData = undefined;\n      this._eventTempData = undefined;\n    }\n  }\n  private _setIframeStyle() {\n\n  }\n  private _isDockSide() {\n    return false;\n  }\n  /**\n   * 最大化\n   */\n  protected _maximize() {\n    if (this.state === WidgetState.closed ||\n      this.windowState === WidgetWindowState.maximized ||\n      this.windowState === WidgetWindowState.minimized ||\n      this.windowState === WidgetWindowState.collapsed\n    ) {\n      return;\n    }\n    let settings = this.options;\n    //隐藏最大化按钮，显示还原按钮\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_statusbar_handle *, .sspanel_resizer, .sspanel_titlebar_button_collapse\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"none\");\n    });\n    //隐藏状态栏\n    if (settings.draggable) {\n      //这时  禁止拖拽\n      this._render.removeClass(this.sspanel_titlebar.nativeElement, \"sspanel_titlebar_draggable\");\n    }\n    if (!settings.modal) {\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"transparent\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"width\", \"100%\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"height\", \"100%\");\n    }\n\n    this._saveCurrentPosition();\n    this._saveCurrentSize();\n    let nposition = {\n      top: 0,\n      left: 0\n    };\n    if (this._isDockSide()) {\n\n    }\n    let defPosition = this._changePosition(nposition);\n    let defSize = this._changeSize({\n      width: \"100%\",\n      height: \"100%\"\n      // width:this._ssPanelOptions.maxWidth,\n      // height:this._ssPanelOptions.maxHeight\n    });\n\n    return Promise.all([defPosition, defSize]).then(() => {\n      this.windowState = WidgetWindowState.maximized;\n      this._setIframeStyle();\n      this.onMaximize();\n    });\n  }\n  /**\n   * 最大化 还原\n   */\n  protected _unmaximize() {\n    if (this.state === WidgetState.closed\n      || this.windowState !== WidgetWindowState.maximized)\n      return;\n    let settings = this.options;\n    let defPosition = this._restoreSavedPosition();\n    let defSize = this._restoreSavedSize();\n    //隐藏还原按钮 显示最大化按钮\n    //显示状态栏等\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_statusbar_handle *, .sspanel_resizer, .sspanel_titlebar_button_collapse\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"\");\n    });\n    if (settings.draggable) {\n      this._render.addClass(this.sspanel_titlebar.nativeElement, \"sspanel_titlebar_draggable\")\n    }\n    if (!settings.modal) {\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"width\", \"0\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"height\", \"0\");\n    }\n\n    return Promise.all([defPosition, defSize]).then(() => {\n      this.windowState = WidgetWindowState.normal;\n      this._setIframeStyle();\n      this.onNormalize();\n    });\n  }\n  /**\n   * 最小化\n   */\n  private _minimize() {\n    //暂略\n  }\n  /**\n   * 最小化 还原\n   */\n  private _unminimize() {\n    //暂略\n  }\n  /**\n   * 收缩\n   */\n  protected _collapse() {\n    if (this.started !== true ||\n      this.state === WidgetState.closed ||\n      this.windowState === WidgetWindowState.maximized ||\n      this.windowState === WidgetWindowState.collapsed ||\n      this.windowState === WidgetWindowState.minimized) return;\n\n    let settings = this.options;\n    //隐藏收缩按钮 显示展开按钮\n    //隐藏这一堆。。。\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_content, .sspanel_statusbar, .sspanel_resizer, .sspanel_titlebar_button_maximize, .sspanel_titlebar_button_minimize\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"none\");\n    });\n    this._saveCurrentSize();\n    let defSize = this._changeSize({\n      width: settings.collapsedWidth,\n      height: this._getBordersWidth(\"top\") + this._getBordersWidth(\"bottom\") + this.sspanel_titlebar.nativeElement.offsetHeight\n    });\n\n    return Promise.all([defSize]).then(() => {\n      this.windowState = WidgetWindowState.collapsed;\n      this.onCollapse();\n    });\n  }\n  /**\n   * 展开\n   */\n  protected _uncollapse() {\n    if (this.started != true || this.state === WidgetState.closed || this.windowState !== WidgetWindowState.collapsed) return;\n    let settings = this.options;\n    let defSize = this._restoreSavedSize();\n    //  隐藏展开按钮，显示手术按钮\n    //显示这些div\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_content, .sspanel_statusbar, .sspanel_resizer, .sspanel_titlebar_button_maximize, .sspanel_titlebar_button_minimize\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"\");\n    });\n\n    return defSize.then(() => {\n      this.windowState = WidgetWindowState.normal;\n      this.onNormalize();\n    });\n  }\n  /**\n   * 最大化\n   */\n  public _buttonMax_Click(event) {\n    if (this.windowState !== WidgetWindowState.maximized) {\n      this._maximize();\n    } else {\n      this._unmaximize();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  public _buttonCollapse_Click(event) {\n    if (this.windowState !== WidgetWindowState.collapsed) {\n      this._collapse();\n    } else {\n      this._uncollapse();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  public _buttonMin_Click(event) {\n    if (this.windowState !== WidgetWindowState.minimized) {\n      this._minimize();\n    } else {\n      this._unminimize();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  /**\n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   */\n  /**setting*/\n\n  /**\n   * 打开组件设置窗口\n   * @returns \n   */\n  openWidgetSetting() {\n    if (!this.widget) {\n      this.widget = this.widgetManager.getWidgetById(this.widgetConfig.id).instance;\n    }\n    if (!this.widget) {\n      return;\n    }\n    this.widget.instance.openSetting();\n  }\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-uncollapsed\",\n    template: `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n                <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n                </g>\n            </svg>`,\n    styles: []\n})\nexport class IconUnCollapsedComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-collapsed\",\n    template: `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g fill=\"none\">\n            <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n            </g>\n            </svg>`,\n    styles: []\n})\nexport class IconCollapsedComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-unmaximize\",\n    template: `\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n    </svg>\n    `,\n    styles: []\n})\nexport class IconUnMaximizeComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-maximize\",\n    template: `\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n    </svg>\n    `,\n    styles: []\n})\nexport class IconMaximizeComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-close\",\n    template: `\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n    </svg>\n    `,\n    styles: []\n})\nexport class IconCloseComponent {\n\n}","import { Component, ElementRef, EventEmitter, Input, Output } from \"@angular/core\";\nimport { DefaultPanelOptions, PanelOptions } from \"../../models/base-panel\";\nimport { WidgetWindowState } from \"../../models/base-widget\";\n\n@Component({\n  selector: \"div[sspanel-titlebar]\",\n  template: `\n    <!-- 这影响样式 -->\n    <!-- <div class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebarMouseDown($event);\"> -->\n      <ng-container *ngIf=\"hasIcon\">\n        <div class=\"icon\">\n          <img *ngIf=\"isShowImg\" [src]=\"icon\">\n          <i *ngIf=\"!isShowImg\" nz-icon [nzIconfont]=\"icon\"></i>\n        </div>\n      </ng-container>\n      <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n      <div *ngIf=\"options.buttonSetting\" class=\"sspanel_titlebar_button sspanel_titlebar_button_setting\" title=\"{{options.buttonSettingText}}\" (click)=\"_buttonSettingClick($event);\">\n        <epsgis-icon-setting></epsgis-icon-setting>\n      </div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div *ngIf=\"options.buttonCollapse\"  class=\"sspanel_titlebar_button sspanel_titlebar_button_uncollapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapseClick($event);\">\n            <epsgis-icon-uncollapsed></epsgis-icon-uncollapsed>\n          </div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div *ngIf=\"options.buttonCollapse\" class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapseClick($event);\">\n            <epsgis-icon-collapsed></epsgis-icon-collapsed>\n          </div>\n        </ng-template>\n      </ng-container>\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n          <div *ngIf=\"options.buttonMaximize\" class=\"sspanel_titlebar_button sspanel_titlebar_button_unmaximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMaximizeClick($event);\">\n            <epsgis-icon-unmaximize></epsgis-icon-unmaximize>\n          </div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n          <div *ngIf=\"options.buttonMaximize\" class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMaximizeClick($event);\">\n            <epsgis-icon-maximize></epsgis-icon-maximize>\n            \n          </div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div  *ngIf=\"options.buttonClose\" class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"_buttonCloseClick($event);\">\n          <epsgis-icon-close></epsgis-icon-close>\n        </div>\n      </ng-container>\n    <!-- </div> -->\n    `,\n  styles: []\n})\nexport class PanelTitleBarComponent {\n  @Input() options: PanelOptions = DefaultPanelOptions;\n  @Input() hasIcon: boolean = false;\n  @Input() isShowImg: boolean;\n  @Input() icon: string;\n  @Input() windowState: WidgetWindowState;\n  @Output() onMouseDown = new EventEmitter();\n  @Output() onClickSetting = new EventEmitter();\n  @Output() onClickCollapse = new EventEmitter();\n  @Output() onClickMaximize = new EventEmitter();\n  @Output() onClickClose = new EventEmitter();\n\n  // @ViewChild(\"sspanel_titlebar\", { static: true }) _sspanelTitlebar: ElementRef;\n  constructor(private ele: ElementRef) {\n    this.ele.nativeElement.onmousedown = (evt) => {\n      this._titlebarMouseDown(evt)\n    }\n  }\n  get nativeElement() {\n    return this.ele.nativeElement;\n    // if (this._sspanelTitlebar) {\n    //   return this._sspanelTitlebar.nativeElement;\n    // }\n    // return null;\n  }\n  _titlebarMouseDown(evt) {\n    if (this.onMouseDown.observers.length >= 1) {\n      this.onMouseDown.emit(evt);\n    }\n  }\n  _buttonSettingClick(evt) {\n    if (this.onClickSetting.observers.length >= 1) {\n      this.onClickSetting.emit(evt);\n    }\n  }\n  _buttonCollapseClick(evt) {\n    if (this.onClickCollapse.observers.length >= 1) {\n      this.onClickCollapse.emit(evt);\n    }\n  }\n  _buttonMaximizeClick(evt) {\n    if (this.onClickMaximize.observers.length >= 1) {\n      this.onClickMaximize.emit(evt);\n    }\n  }\n  _buttonCloseClick(evt) {\n    if (this.onClickClose.observers.length >= 1) {\n      this.onClickClose.emit(evt);\n    }\n  }\n}\n/*\n<div class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <ng-container *ngIf=\"panelIcon\">\n        <div class=\"icon\">\n          <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n          <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n        </div>\n      </ng-container>\n      <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_setting\" title=\"设置\" (click)=\"openWidgetSetting();\">\n        <epsgis-icon-setting></epsgis-icon-setting>\n      </div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_uncollapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <epsgis-icon-uncollapsed></epsgis-icon-uncollapsed>\n          </div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <epsgis-icon-collapsed></epsgis-icon-collapsed>\n          </div>\n        </ng-template>\n      </ng-container>\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_unmaximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\">\n            <epsgis-icon-unmaximize></epsgis-icon-unmaximize>\n          </div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\">\n            <epsgis-icon-maximize></epsgis-icon-maximize>\n\n          </div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <epsgis-icon-close></epsgis-icon-close>\n        </div>\n      </ng-container>\n    </div>\n    */","import { BasePanelComponent } from '../base-panel/base-panel.component';\nimport { Component, OnInit, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { ComponentRegister } from '../../decorator/component-register.decorator';\n// import {trigger, state, style, animate, transition} from '@angular/animations';\n/**\n * create by ruir 191014  OnScreenWidgetPanel.js\n */\n@ComponentRegister({\n  uri: \"epsgis-on-screen-widget-panel\",\n  path: \"components/on-screen-widget-panel\"\n})\n@Component({\n  selector: 'epsgis-on-screen-widget-panel',\n  templateUrl: './on-screen-widget-panel.component.html',\n  styleUrls: ['./on-screen-widget-panel.component.scss']\n  // ,animations:[\n  //   trigger(\"panelresize\",[\n  //     transition(\"* => *\",animate(500))\n  //   ])\n  // ]\n})\nexport class OnScreenWidgetPanelComponent extends BasePanelComponent implements OnInit {\n\n  constructor(@Optional() _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n  }\n  ngOnInit() { super.ngOnInit(); }\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n  }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <!-- <epsgis-panel-titlebar #sspanel_titlebar [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n      (onMouseDown)=\"_titlebar_MouseDown($event)\" (onClickSetting)=\"openWidgetSetting()\"\n      (onClickCollapse)=\"_buttonCollapse_Click($event)\" (onClickMaximize)=\"_buttonMax_Click($event)\"\n      (onClickClose)=\"closePanel($event)\">\n    </epsgis-panel-titlebar> -->\n    <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n      (onMouseDown)=\"_titlebar_MouseDown($event)\" (onClickSetting)=\"openWidgetSetting()\"\n      (onClickCollapse)=\"_buttonCollapse_Click($event)\" (onClickMaximize)=\"_buttonMax_Click($event)\"\n      (onClickClose)=\"closePanel($event)\"></div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n    <div class=\"sspanel_resizer sspanel_resizer_top\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_bottom\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'bottom'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_left\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_right\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_topleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'top'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_topright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'top'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_bottomleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'bottom'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_bottomright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'bottom'});\"></div>\n  </div>\n</div>\n<div class=\"sspanel_minplaceholder\"></div>","import { Optional, Renderer2, ElementRef, ViewChild, ChangeDetectorRef, Directive } from '@angular/core';\nimport { BasePanelComponent } from '../base-panel/base-panel.component';\nimport { PanelDockMode } from '../../models/base-panel';\n\n/**\n * \n */\n@Directive()\nexport class BaseDockablePanelComponent extends BasePanelComponent {\n\n    //20200604 ruir 改为了100，“这里9999导致modal那边要设置大于9999，然后导致ngzorro的控件被挡住”，具体值需要后面再斟酌\n    zIndex: number = 100;// 9999;\n    /**\n     * panel是否收缩\n     */\n    _isCollapse: boolean = false;\n    @ViewChild(\"center_collapse\", { static: true }) sspanel_center_collapse: ElementRef;\n    constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n        super(_render, cdr);\n        this.moveTopOnActive = false;\n    }\n\n    get mapBounds() {\n\n        var rect = this.commonService.getElementBounds(this.commonService.getComponentRootNode(this.mapManager.comRefMap));\n        //获取map实际top、left：减去外包与maptop设置的值\n        rect.top = rect.top - this._getMapTop();\n        rect.left = rect.left - this._getMapLeft();\n        //rect.width=rect.width+this._getMapLeft();\n        return rect;\n    }\n    /////获取map实际top值\n    _getMapTop() {\n        var ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n        const rect = ele.getBoundingClientRect();\n        let mapSettingTop: string = \"0\";\n        if (this.widgetManager.appConfig.map.position && this.widgetManager.appConfig.map.position.top)\n            mapSettingTop = this.widgetManager.appConfig.map.position.top;\n        let chv: number = parseFloat(this.commonService.getPxNumber(mapSettingTop).toString());\n        const mapTop = rect.top - chv;//获取实际top值\n        return mapTop;\n    }\n    /////获取map实际left值\n    _getMapLeft() {\n        var ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n        const rect = ele.getBoundingClientRect();\n        var mapSettingLeft = 0;\n        if (this.widgetManager.appConfig.map.position && this.widgetManager.appConfig.map.position.left)\n            mapSettingLeft = this.widgetManager.appConfig.map.position.left;\n        var chv: number = parseFloat(this.commonService.getPxNumber(mapSettingLeft).toString());\n        const mapLeft = rect.left - chv;//获取实际left值\n        return mapLeft;\n    }\n    /**\n     * \n     */\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    /**\n     * \n     */\n    ngAfterViewInit(): void {\n        super.ngAfterViewInit();\n    }\n    /**\n     * \n     */\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n    protected _setPCPosition() {\n        this.widgetConfig.position.zIndex = this.zIndex;\n        super._setPCPosition();\n    }\n    onMove() {\n        //移动时 同时修正其他组件位置，比如已经打开了的panel\n        super.onMove();\n    }\n    onClose() {\n        //关闭时 还原其他组件位置\n        super.onClose();\n    }\n    /**\n     * 当panel大小改变时，改变map的位置\n     */\n    _resizeMapWhenResize() {\n        switch (this.dockMode) {\n            case PanelDockMode.left:\n                this.mapManager.changeMapPosition({ left: this.commonService.getPx(this.currentSize.width) });\n                break;\n            case PanelDockMode.bottom:\n                this.mapManager.changeMapPosition({ bottom: this.commonService.getPx(this.currentSize.height) });\n                break;\n            case PanelDockMode.right:\n                this.mapManager.changeMapPosition({ right: this.commonService.getPx(this.currentSize.width) });\n                break;\n\n            default:\n                break;\n        }\n    }\n    /**\n     * 当panel关闭或隐藏时，改变map的位置\n     */\n    _resizeMapWhenClose() {\n        switch (this.dockMode) {\n            case PanelDockMode.left:\n                // this.mapManager.restorePosition();\n                //只需改变left？\n                this.mapManager.changeMapPosition({ left: this.commonService.getPx(this.mapManager.originMapPosition.left) });\n                break;\n            case PanelDockMode.bottom:\n                // this.mapManager.restorePosition();\n                //只需改bottom\n                this.mapManager.changeMapPosition({ bottom: this.commonService.getPx(this.mapManager.originMapPosition.bottom) });\n                break;\n            case PanelDockMode.right:\n                // this.mapManager.restorePosition();\n                this.mapManager.changeMapPosition({ right: this.commonService.getPx(this.mapManager.originMapPosition.right) });\n                break;\n            default:\n                break;\n        }\n    }\n    showPanel() {\n        this.__expand(false);\n        super.showPanel();\n    }\n    hidePanel() {\n        this.__collapse(false);\n        super.hidePanel();\n    }\n    private __collapse(runOnClose: boolean) {\n        const _eleSvg = this.sspanel_center_collapse.nativeElement.querySelector(\"svg\");\n        if (this.dockMode === PanelDockMode.left) {\n            //super._convertToStyleVal(this.currentSize.width)\n            const _left = - this.commonService.getElementBounds(this.sspanel.nativeElement).width;\n            this._render.setStyle(this.sspanel.nativeElement, \"left\", _left + \"px\");\n            //this._render.setStyle(this.sspanel.nativeElement, \"display\", \"none\");\n            // this._render.setStyle(this.sspanel.nativeElement, \"z-index\", -this.zIndex);\n        } else if (this.dockMode === PanelDockMode.bottom) {\n            const _bottom = - this.commonService.getElementBounds(this.sspanel.nativeElement).height;\n            this._render.setStyle(this.sspanel.nativeElement, \"bottom\", _bottom + \"px\");\n        } else if (this.dockMode === PanelDockMode.right) {\n            const _right = - this.commonService.getElementBounds(this.sspanel.nativeElement).width;\n            this._render.setStyle(this.sspanel.nativeElement, \"right\", _right + \"px\");\n        }\n        this._render.addClass(_eleSvg, \"expand\");\n        //原生 this.sspanel.nativeElement.querySelector(\"svg\").classList.add(\"expand\")\n        // if (runOnClose) {\n        //     this.onClose();\n        // }\n        this._resizeMapWhenClose();\n        this._isCollapse = true;\n    }\n    private __expand(runOnOpen: boolean) {\n        const _eleSvg = this.sspanel_center_collapse.nativeElement.querySelector(\"svg\");\n        if (this.dockMode === PanelDockMode.left) {\n            this._render.setStyle(this.sspanel.nativeElement, \"left\", \"0px\");//super._convertToStyleVal(this.currentPosition.left)\n            //this._render.setStyle(this.sspanel.nativeElement, \"display\", \"\");\n            // this._render.setStyle(this.sspanel.nativeElement, \"z-index\", this.zIndex);\n        } else if (this.dockMode === PanelDockMode.bottom) {\n            this._render.setStyle(this.sspanel.nativeElement, \"bottom\", \"0px\");\n        } else if (this.dockMode === PanelDockMode.right) {\n            this._render.setStyle(this.sspanel.nativeElement, \"right\", \"0px\");\n        }\n        this._render.removeClass(_eleSvg, \"expand\");\n        //原生 this.sspanel.nativeElement.querySelector(\"svg\").classList.remove(\"expand\")\n        // if (runOnOpen) {\n        //     this.onOpen();\n        // }\n        this._resizeMapWhenResize();\n        this._isCollapse = false;\n    }\n    /**\n     * 折叠panel\n     */\n    collapsePanel(evt) {\n        //记录当前的left\n        //隐藏panel\n        //改变地图位置\n        //转换图标\n        //改变style时，是否要改变position值？\n        if (this._isCollapse) {\n            this.__expand(false);//true\n        } else {\n            this.__collapse(false);//true\n        }\n\n    }\n}","import { Component, OnInit, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { PanelDockMode, PanelOptions } from '../../../models/base-panel';\nimport * as _ from 'lodash';\nimport { BaseDockablePanelComponent } from '../base-dockable-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-dockable-panel-at-bottom',\n  path: \"components/ex-panels/dockable-panel-at-bottom\"\n})\n@Component({\n  selector: 'epsgis-dockable-panel-at-bottom',\n  templateUrl: './dockable-panel-at-bottom.component.html',\n  styleUrls: ['./dockable-panel-at-bottom.component.scss'],\n})\nexport class DockablePanelAtBottomComponent extends BaseDockablePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this.dockMode = PanelDockMode.bottom;\n  }\n \n  ngOnInit() {\n\n    // this.eventService.rss.on(this.eventService._mapPositionChanged, (pos) => {\n    //   //主要是left和width变化\n    //   this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n    //     left: this.mapBounds.left,\n    //     width: this.mapBounds.width\n    //   });\n    //   this._render.setStyle(this.sspanel.nativeElement, \"left\", this._convertToStyleVal(this.mapBounds.left));\n    //   this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(this.mapBounds.width));\n    // });\n    super.ngOnInit();\n  }\n  /**\n   * 设置panel参数\n   * @param options \n   */\n  setOptions(options: PanelOptions) {\n    options.modal = false;\n    options.draggable = false;\n    options.buttonClose = true;\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.buttonMinimize = false;\n    options.centerCollapse=true;\n    options.dockSide = PanelDockMode.bottom;\n    super.setOptions(options);\n  }\n  protected _setPCPosition() {\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      // left: 0,\n      left: this.mapBounds.left,\n      top: \"auto\",\n      bottom: 0,\n      right: 0,\n      // width: \"100%\"\n      width: this.mapBounds.width\n    });\n    super._setPCPosition();\n\n  }\n  onResize() {\n    super._resizeMapWhenResize();\n    super.onResize();\n  }\n  onOpen() {\n    super._resizeMapWhenResize();\n    super.onOpen();\n  }\n  onClose() {\n    super._resizeMapWhenClose();\n    super.onClose();\n  }\n  resize() {\n    //主要是left和width变化\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      left: this.mapBounds.left,\n      width: this.mapBounds.width\n    });\n    this._render.setStyle(this.sspanel.nativeElement, \"left\", this._convertToStyleVal(this.mapBounds.left));\n    this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(this.mapBounds.width));\n  }\n}","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  \n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n      (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  <!--\n  <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg>\n      </div>\n    </ng-container>\n  </div>\n-->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <ng-template #widget_content></ng-template>\n  </div>\n  <div class=\"sspanel_resizer sspanel_resizer_top\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n  <div #center_collapse class=\"collapse\" [ngStyle]=\"{'display':options.centerCollapse ? 'block' : 'none' }\"\n    (click)=\"collapsePanel($event);\">\n    <!-- <epsgis-icon-arrow-down></epsgis-icon-arrow-down> -->\n    <svg t=\"1575033841131\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"16367\" width=\"16\" height=\"16\">\n      <path\n        d=\"M128.759037 245.033739l383.064442 383.064442 388.096039-388.097062 0.033769 0.070608c13.138228-12.709463 31.024597-20.528546 50.730405-20.528546 40.377616 0 73.114205 32.736589 73.114205 73.115228 0 19.705807-7.820106 37.591153-20.530592 50.730405l0.035816 0.034792-438.681134 438.685227-0.035816-0.035816c-13.280468 13.780865-31.915897 22.3838-52.585659 22.3838-0.071631 0-0.107447 0-0.178055 0-0.072655 0-0.10847 0-0.146333 0-20.669762 0-39.341007-8.601912-52.621475-22.3838l-0.035816 0.035816L20.336676 343.425653l0.179079-0.179079c-12.565177-13.139252-20.313651-30.951943-20.313651-50.587142 0-40.378639 32.736589-73.115228 73.114205-73.115228C95.485213 219.544205 115.334283 229.432413 128.759037 245.033739z\"\n        p-id=\"16368\" fill=\"#bababa\"></path>\n    </svg>\n  </div>\n</div>","import { Component, OnInit, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { PanelDockMode, PanelOptions } from '../../../models/base-panel';\nimport * as _ from 'lodash';\nimport { BaseDockablePanelComponent } from '../base-dockable-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-dockable-panel-at-right',\n  path: \"components/ex-panels/dockable-panel-at-right\"\n})\n@Component({\n  selector: 'epsgis-dockable-panel-at-right',\n  templateUrl: './dockable-panel-at-right.component.html',\n  styleUrls: ['./dockable-panel-at-right.component.scss'],\n})\nexport class DockablePanelAtRightComponent extends BaseDockablePanelComponent implements OnInit {\n\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this.dockMode = PanelDockMode.right;\n  }\n\n  /**\n   * 设置panel参数\n   * @param options \n   */\n  setOptions(options: PanelOptions) {\n    options.modal = false;\n    options.draggable = false;\n    options.buttonClose = false;\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.buttonMinimize = false;\n    options.centerCollapse=true;\n    options.dockSide = PanelDockMode.right;\n    super.setOptions(options);\n  }\n  protected _setPCPosition() {\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      left: \"auto\",\n      // top: 0,\n      top: this.mapBounds.top,\n      bottom: 0,\n      right: 0,\n      //height: \"100%\"\n      height: \"auto\"\n    });\n    super._setPCPosition();\n  }\n  onResize() {\n    super._resizeMapWhenResize();\n    super.onResize();\n  }\n  onOpen() {\n    super._resizeMapWhenResize();\n    super.onOpen();\n  }\n  onClose() {\n    super._resizeMapWhenClose();\n    super.onClose();\n  }\n  resize() {\n\n  }\n}","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n  (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  <!-- <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg></div>\n    </ng-container>\n  </div> -->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <ng-template #widget_content></ng-template>\n  </div>\n  <div class=\"sspanel_resizer sspanel_resizer_left\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n  <div #center_collapse class=\"collapse\" [ngStyle]=\"{'display':options.centerCollapse ? 'block' : 'none' }\"\n    (click)=\"collapsePanel($event);\">\n    <!-- <epsgis-icon-arrow-right></epsgis-icon-arrow-right> -->\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M245.034251 895.239428l383.063419-383.063419L240.001631 124.07997l0.070608-0.033769c-12.709463-13.137205-20.530592-31.024597-20.530592-50.731428 0-40.376593 32.736589-73.111135 73.115228-73.111135 19.705807 0 37.591153 7.819083 50.730405 20.528546l0.034792-0.035816 438.686251 438.681134-0.035816 0.034792c13.779841 13.281491 22.3838 31.915897 22.3838 52.586682 0 0.071631 0 0.106424 0 0.178055 0 0.072655 0 0.10847 0 0.144286 0 20.669762-8.603959 39.341007-22.3838 52.623521l0.035816 0.033769L343.426165 1003.661789l-0.180102-0.179079c-13.140275 12.565177-30.950919 20.313651-50.588165 20.313651-40.378639 0-73.115228-32.736589-73.115228-73.114205C219.544717 928.512229 229.432924 908.664182 245.034251 895.239428z\"\n        fill=\"#bababa\"></path>\n    </svg>\n  </div>\n</div>","import { Component, OnInit, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\nimport { PanelDockMode, PanelOptions } from '../../../models/base-panel';\nimport { BaseDockablePanelComponent } from '../base-dockable-panel';\n\n@ComponentRegister({\n  uri: 'epsgis-dockable-panel-at-left',\n  path: \"components/ex-panels/dockable-panel-at-left\"\n})\n@Component({\n  selector: 'epsgis-dockable-panel-at-left',\n  templateUrl: './dockable-panel-at-left.component.html',\n  styleUrls: ['./dockable-panel-at-left.component.scss'],\n})\nexport class DockablePanelAtLeftComponent extends BaseDockablePanelComponent {\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this.dockMode = PanelDockMode.left;\n  }\n\n  /**\n   * \n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  /**\n   * \n   */\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n  }\n  /**\n   * \n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n  /**\n * 设置panel参数\n * @param options \n */\n  setOptions(options: PanelOptions) {\n    options.modal = false;\n    options.draggable = false;\n    options.buttonClose = false;\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.buttonMinimize = false;\n    options.centerCollapse=true;\n    options.dockSide = PanelDockMode.left;\n    super.setOptions(options);\n  }\n  protected _setPCPosition() {\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      left: 0,\n      top: this.mapBounds.top,\n      bottom: 0,\n      right: 0,\n      // height: \"100%\"\n      height: \"auto\"\n    });\n    super._setPCPosition();\n  }\n  onResize() {\n    super._resizeMapWhenResize();\n    super.onResize();\n  }\n  onOpen() {\n    super._resizeMapWhenResize();\n    super.onOpen();\n  }\n  onClose() {\n    super._resizeMapWhenClose();\n    super.onClose();\n  }\n  resize() {\n\n  }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  <!-- <epsgis-panel-titlebar #sspanel_titlebar [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n    (onMouseDown)=\"_titlebar_MouseDown($event)\" (onClickSetting)=\"openWidgetSetting()\"\n    (onClickClose)=\"closePanel($event)\">\n  </epsgis-panel-titlebar> -->\n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n     (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  <!-- <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg></div>\n    </ng-container>\n  </div> -->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <ng-template #widget_content></ng-template>\n  </div>\n  <div class=\"sspanel_resizer sspanel_resizer_right\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n  <div #center_collapse [ngStyle]=\"{'display':options.centerCollapse ? 'block' : 'none' }\" class=\"collapse\"\n    (click)=\"collapsePanel($event);\">\n    <!-- <epsgis-icon-arrow-left></epsgis-icon-arrow-left> -->\n    <!--hover样式有问题，后面再调-->\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z\"\n        fill=\"#bababa\"></path>\n    </svg>\n  </div>\n</div>","import { Optional, Renderer2, ChangeDetectorRef, Directive } from '@angular/core';\nimport { BasePanelComponent } from '../base-panel/base-panel.component';\nimport * as _ from 'lodash';\n\n/**\n * \n */\n@Directive()\nexport class BaseMobilePanelComponent extends BasePanelComponent {\n\n    zIndex: number = 9999;\n\n    constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n        super(_render,cdr);\n        this.moveTopOnActive = false;\n    }\n    /**\n     * \n     */\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    /**\n     * \n     */\n    ngAfterViewInit(): void {\n        super.ngAfterViewInit();\n    }\n    /**\n     * \n     */\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n    setOptions(options) {\n        if (this.widgetConfig && this.widgetConfig.mobile) {\n            _.merge(options, this.widgetConfig.mobile);\n        }\n        super.setOptions(options);\n    }\n    protected getWidthHeight() {\n        let { width, height } = this.widgetConfig.position;\n        if (this.widgetConfig.mobile\n            && this.widgetConfig.mobile.position) {\n            //暂支持高宽可设置\n            width = this.widgetConfig.mobile.position.width;\n            height = this.widgetConfig.mobile.position.height;\n        }\n        let _w = this.commonService.getPxNumber(width),\n            _h = this.commonService.getPxNumber(height);\n        if (typeof _w === \"number\") {\n            if (_w <= 0 || _w > innerWidth) {\n                _w = \"100%\"\n            }\n        }\n        if (typeof _h === \"number\") {\n            if (_h <= 0 || _w > innerHeight) {\n                _h = \"100%\"\n            }\n        }\n        return { width: _w, height: _h };\n    }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n    <div class=\"sspanel_resizer sspanel_resizer_top\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n  </div>\n</div>","import { Component, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-mobile-action-panel',\n  path: \"components/mobile/action-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-action-panel',\n  templateUrl: './action-panel.component.html',\n  styleUrls: ['./action-panel.component.scss']\n})\nexport class MobileActionPanelComponent extends BaseMobilePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.action;\n  }\n  setOptions(options) {\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    //action  由底向上弹出\n    const obj = this.getWidthHeight();\n    let _pos = new WidgetPosition(\"auto\", 0, 0, 0, obj.height, \"100%\");\n    this.widgetConfig.position = _pos;\n    //去掉边框\n    //最大高度\n    this._render.setStyle(this.sspanel.nativeElement, \"max-height\", obj.height);\n    //去掉阴影\n  }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: \"epsgis-mobile-drawer-panel\",\n  path: \"components/mobile/drawer-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-drawer-panel',\n  templateUrl: './drawer-panel.component.html',\n  styleUrls: ['./drawer-panel.component.scss']\n})\nexport class MobileDrawerPanelComponent extends BaseMobilePanelComponent {\n\n  _sspanelOverlayClickHandler: Function;\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.drawer;\n  }\n  ngOnDestroy() {\n    this._sspanelOverlayClickHandler();\n    super.ngOnDestroy();\n  }\n  setOptions(options) {\n    //去掉收缩按钮\n    options.buttonCollapse = false;\n    //去掉最大化按钮\n    options.buttonMaximize = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    let _width: any = \"80%\";\n    //没有mobile节点，或者mobile节点下没有position时，设置为80%\n    if (this.widgetConfig.mobile && this.widgetConfig.mobile.position) {\n      const obj = this.getWidthHeight();\n      if (obj.width) {\n        _width = obj.width;\n      }\n    }\n    let _pos = new WidgetPosition(0, 0, 0, 20, \"100%\", _width);\n    this.widgetConfig.position = _pos;\n    //去掉边框\n    //点击阴影时 关闭panel\n    this._sspanelOverlayClickHandler = this.jsEventManager.addEventListener(\n      this.sspanelOverlay.nativeElement, \"click\", (evt: any) => {\n        if (evt.target === this.sspanelOverlay.nativeElement) {\n          this.closePanel(evt);\n        }\n      });\n  }\n\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>\n<div class=\"sspanel_minplaceholder\"></div>\n","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { PanelInMobileShowMode, PanelOptions } from '../../../models/base-panel';\nimport { WidgetPosition } from '../../../models/base-widget';\n\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-mobile-modal-panel',\n  path: \"components/mobile/modal-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-modal-panel',\n  templateUrl: './modal-panel.component.html',\n  styleUrls: ['./modal-panel.component.scss']\n})\nexport class MobileModalPanelComponent extends BaseMobilePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this._mobileShowMode = PanelInMobileShowMode.modal;\n  }\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  setOptions(options: PanelOptions) {\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.modal = true;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    //modal\n    let _pos = new WidgetPosition(0, 0, 0, 0, \"100%\", \"100%\", \"\", \"unset\");\n    this.widgetConfig.position = _pos;\n  }\n\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>\n<div class=\"sspanel_minplaceholder\"></div>","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelOptions, PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-mobile-popup-panel',\n  path: \"components/mobile/popup-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-popup-panel',\n  templateUrl: './popup-panel.component.html',\n  styleUrls: ['./popup-panel.component.scss']\n})\nexport class MobilePopupPanelComponent extends BaseMobilePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.popup;\n  }\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  setOptions(options: PanelOptions) {\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.modal = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    //居中弹窗\n    const obj = super.getWidthHeight();\n    let _pos = new WidgetPosition(0, 0, 0, 0, obj.height, obj.width, \"\", \"unset\");\n    this.widgetConfig.position = _pos;\n    // this.currentPosition = _.cloneDeep(_pos);\n    // this.savedPosition = _.cloneDeep(_pos);\n    // this.originalPosition = _.cloneDeep(_pos);\n  }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-mobile-drawer-right-panel',\n  path: \"components/mobile/drawer-panel-right\"\n})\n@Component({\n  selector: 'epsgis-mobile-drawer-right-panel',\n  templateUrl: './drawer-panel-right.component.html',\n  styleUrls: ['./drawer-panel-right.component.scss']\n})\nexport class MobileDrawerRightPanelComponent extends BaseMobilePanelComponent {\n  // useIonicCss:boolean=true;\n  _sspanelOverlayClickHandler: Function;\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.drawerRight;\n  }\n  ngOnDestroy() {\n    this._sspanelOverlayClickHandler();\n    super.ngOnDestroy();\n  }\n  setOptions(options) {\n    //去掉收缩按钮\n    options.buttonCollapse = false;\n    //去掉最大化按钮\n    options.buttonMaximize = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    let _width: any = \"80%\";\n    //没有mobile节点，或者mobile节点下没有position时，设置为80%\n    if (this.widgetConfig.mobile && this.widgetConfig.mobile.position) {\n      const obj = this.getWidthHeight();\n      if (obj.width) {\n        _width = obj.width;\n      }\n    }\n    let _pos = new WidgetPosition(0, \"auto\", 0, 0, \"100%\", _width);\n    this.widgetConfig.position = _pos;\n    //去掉边框\n    //点击阴影时 关闭panel\n    this._sspanelOverlayClickHandler = this.jsEventManager.addEventListener(\n      this.sspanelOverlay.nativeElement, \"click\", (evt: any) => {\n        if (evt.target === this.sspanelOverlay.nativeElement) {\n          this.closePanel(evt);\n        }\n      });\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'safeurl'\n})\nexport class SafeUrlPipe implements PipeTransform {\n  /**\n   * \n   * @param sanitizer \n   */\n  constructor(private sanitizer: DomSanitizer) { }\n  /**\n   * \n   * @param url \n   * @param tag \n   */\n  transform(url: any, tag: string = \"img\"): any {\n    if (tag == \"img\") {\n      return this.sanitizer.bypassSecurityTrustUrl(url);\n    }\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  \n  <!-- <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg></div>\n    </ng-container>\n  </div> -->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <iframe *ngIf=\"isShowIframe\" #iframeContent [src]=\"url | safeurl :'iframe'\" class=\"iframe_content\"></iframe>\n    <ng-container #content *ngIf=\"!isShowIframe\">\n      {{url}}\n    </ng-container>\n  </div>\n\n  <div class=\"sspanel_resizer sspanel_resizer_top\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_bottom\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'bottom'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_left\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_right\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_topleft\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'top'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_topright\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'top'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_bottomleft\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'bottom'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_bottomright\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'bottom'});\"></div>\n</div>","import { Component, OnInit, Renderer2, Optional, ViewChild, ElementRef, ChangeDetectorRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { BasePanelComponent } from '../../base-panel/base-panel.component';\nimport { WidgetState } from '../../../models/base-widget';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-iframe-panel',\n  path: \"components/ex-panels/iframe-panel\"\n})\n@Component({\n  selector: 'epsgis-iframe-panel',\n  templateUrl: './iframe-panel.component.html',\n  styleUrls: ['./iframe-panel.component.scss'],\n})\nexport class IframePanelComponent extends BasePanelComponent {\n  @ViewChild(\"iframeContent\", { static: true }) iframeEl: ElementRef;\n\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n  }\n  url: string = \"\";\n  isShowIframe: boolean = false;\n  \n  ngOnInit() {\n\n    super.ngOnInit();\n    this.url = this.options.url;\n    if (this.options.url) {\n      this.isShowIframe = true;\n    }\n  }\n  ngAfterViewInit() {\n    this.startup();\n    this.state = WidgetState.opened;\n  }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SafeUrlPipe } from './safeurl.pipe';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        SafeUrlPipe\n    ],\n    exports:[\n        SafeUrlPipe\n    ]\n})\nexport class PipesModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'epsgis-result-fof',\n  templateUrl: './resultfof.component.html',\n  styleUrls: ['./resultfof.component.scss']\n})\nexport class ResultfofComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","<nz-result nzStatus=\"404\" nzTitle=\"404\" nzSubTitle=\"抱歉，您访问的页面不存在。\">\n  <div nz-result-extra>\n    <!-- <button nz-button nzType=\"primary\">Back Home</button> -->\n  </div>\n</nz-result>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'epsgis-result-foo',\n  templateUrl: './resultfoo.component.html',\n  styleUrls: ['./resultfoo.component.scss']\n})\nexport class ResultfooComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","<nz-result nzStatus=\"500\" nzTitle=\"500\" nzSubTitle=\"抱歉，服务器上有错误.\">\n  <div nz-result-extra>\n    <!-- <button nz-button nzType=\"primary\">Back Home</button> -->\n  </div>\n</nz-result>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'epsgis-result-fot',\n  templateUrl: './resultfot.component.html',\n  styleUrls: ['./resultfot.component.scss']\n})\nexport class ResultfotComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","<nz-result nzStatus=\"403\" nzTitle=\"403\" nzSubTitle=\"抱歉，您无权访问此页面。\">\n  <div nz-result-extra>\n    <!-- <button nz-button nzType=\"primary\">Back Home</button> -->\n  </div>\n</nz-result>","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { JsonEditorComponent } from \"./json-editor/json-editor.component\";\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        JsonEditorComponent\n    ],\n    entryComponents: [],\n    exports: [JsonEditorComponent]\n\n})\nexport class EpsGisSharedModule {\n    \n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-arrow-down\",\n    template: `\n    <svg t=\"1575033841131\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"16367\" width=\"16\" height=\"16\">\n      <path\n        d=\"M128.759037 245.033739l383.064442 383.064442 388.096039-388.097062 0.033769 0.070608c13.138228-12.709463 31.024597-20.528546 50.730405-20.528546 40.377616 0 73.114205 32.736589 73.114205 73.115228 0 19.705807-7.820106 37.591153-20.530592 50.730405l0.035816 0.034792-438.681134 438.685227-0.035816-0.035816c-13.280468 13.780865-31.915897 22.3838-52.585659 22.3838-0.071631 0-0.107447 0-0.178055 0-0.072655 0-0.10847 0-0.146333 0-20.669762 0-39.341007-8.601912-52.621475-22.3838l-0.035816 0.035816L20.336676 343.425653l0.179079-0.179079c-12.565177-13.139252-20.313651-30.951943-20.313651-50.587142 0-40.378639 32.736589-73.115228 73.114205-73.115228C95.485213 219.544205 115.334283 229.432413 128.759037 245.033739z\"\n        p-id=\"16368\" fill=\"#bababa\"></path>\n    </svg>\n    `,\n    styles: [\n      `\n      .expand {\n          -webkit-transform: rotate(180deg);\n          -moz-transform: rotate(180deg);\n          -o-transform: rotate(180deg);\n          -ms-transform: rotate(180deg);\n          transform: rotate(180deg);\n      }\n      `\n    ]\n})\nexport class IconArrowDownComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-arrow-left\",\n    template: `\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z\"\n        ></path>\n    </svg>\n    `,\n    styles: [\n        `\n\n        .expand{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }\n        `\n    ]\n})\nexport class IconArrowLeftComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-arrow-right\",\n    template: `\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M245.034251 895.239428l383.063419-383.063419L240.001631 124.07997l0.070608-0.033769c-12.709463-13.137205-20.530592-31.024597-20.530592-50.731428 0-40.376593 32.736589-73.111135 73.115228-73.111135 19.705807 0 37.591153 7.819083 50.730405 20.528546l0.034792-0.035816 438.686251 438.681134-0.035816 0.034792c13.779841 13.281491 22.3838 31.915897 22.3838 52.586682 0 0.071631 0 0.106424 0 0.178055 0 0.072655 0 0.10847 0 0.144286 0 20.669762-8.603959 39.341007-22.3838 52.623521l0.035816 0.033769L343.426165 1003.661789l-0.180102-0.179079c-13.140275 12.565177-30.950919 20.313651-50.588165 20.313651-40.378639 0-73.115228-32.736589-73.115228-73.114205C219.544717 928.512229 229.432924 908.664182 245.034251 895.239428z\"\n        fill=\"#bababa\"></path>\n    </svg>\n    `,\n    styles: [\n        `\n        .expand{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }\n        `\n    ]\n})\nexport class IconArrowRightComponent {\n\n}","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { IconArrowDownComponent } from \"./icon-arrow-down.component\";\nimport { IconArrowLeftComponent } from \"./icon-arrow-left.component\";\nimport { IconArrowRightComponent } from \"./icon-arrow-right.component\";\nimport { IconCloseComponent } from \"./icon-close.component\";\nimport { IconCollapsedComponent } from \"./icon-collapsed.component\";\nimport { IconMaximizeComponent } from \"./icon-maximize.component\";\nimport { IconSettingComponent } from \"./icon-setting.component\";\nimport { IconUnCollapsedComponent } from \"./icon-uncollapsed.component\";\nimport { IconUnMaximizeComponent } from \"./icon-unmaximize.component\";\nconst _components = [\n    IconCloseComponent,\n    IconCollapsedComponent,\n    IconUnCollapsedComponent,\n    IconMaximizeComponent,\n    IconUnMaximizeComponent,\n    IconSettingComponent,\n    IconArrowLeftComponent,\n    IconArrowRightComponent,\n    IconArrowDownComponent\n];\n@NgModule({\n    imports: [CommonModule],\n    declarations: _components,\n    exports: _components\n})\nexport class EpsGisIconModule {\n\n}","import { EpsGisDirectivesModule } from '../directives/directives.module';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { NzResultModule } from 'ng-zorro-antd/result';\r\nimport { OnScreenWidgetIconComponent } from './on-screen-widget-icon/on-screen-widget-icon.component';\r\nimport { OnScreenWidgetPanelComponent } from './on-screen-widget-panel/on-screen-widget-panel.component';\r\nimport { DockablePanelAtBottomComponent } from './ex-panels/dockable-panel-at-bottom/dockable-panel-at-bottom.component';\r\nimport { DockablePanelAtRightComponent } from './ex-panels/dockable-panel-at-right/dockable-panel-at-right.component';\r\nimport { DockablePanelAtLeftComponent } from \"./ex-panels/dockable-panel-at-left/dockable-panel-at-left.component\";\r\nimport { MobileActionPanelComponent } from './mobile/action-panel/action-panel.component';\r\nimport { MobileDrawerPanelComponent } from './mobile/drawer-panel/drawer-panel.component';\r\nimport { MobileModalPanelComponent } from './mobile/modal-panel/modal-panel.component';\r\nimport { MobilePopupPanelComponent } from './mobile/popup-panel/popup-panel.component';\r\nimport { MobileDrawerRightPanelComponent } from './mobile/drawer-panel-right/drawer-panel-right.component';\r\nimport { IframePanelComponent } from './ex-panels/iframe-panel/iframe-panel.component';\r\nimport { PipesModule } from '../pipes/pipes.module';\r\nimport { ResultfofComponent } from './shared/resultfof/resultfof.component';\r\nimport { ResultfooComponent } from './shared/resultfoo/resultfoo.component';\r\nimport { ResultfotComponent } from './shared/resultfot/resultfot.component';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { WidgetSettingComponent } from './setting/widget-setting/widget-setting.component';\r\nimport { EpsGisSharedModule } from './shared/shared.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { EpsGisIconModule } from './icon/icon-module';\r\nimport { PanelTitleBarComponent } from './base-panel/panel-titlebar.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        // PortalModule,\r\n        // OverlayModule,\r\n        // BrowserAnimationsModule,\r\n        FormsModule,\r\n        NzIconModule,\r\n        NzResultModule,\r\n        EpsGisDirectivesModule,\r\n        PipesModule,\r\n        EpsGisSharedModule,\r\n        EpsGisIconModule\r\n    ],\r\n    declarations: [\r\n        OnScreenWidgetIconComponent,\r\n        OnScreenWidgetPanelComponent,\r\n        DockablePanelAtLeftComponent,\r\n        DockablePanelAtBottomComponent,\r\n        DockablePanelAtRightComponent,\r\n        IframePanelComponent,\r\n        MobileActionPanelComponent,\r\n        MobileDrawerPanelComponent,\r\n        MobileModalPanelComponent,\r\n        MobilePopupPanelComponent,\r\n        MobileDrawerRightPanelComponent,\r\n        ResultfofComponent,\r\n        ResultfooComponent,\r\n        ResultfotComponent,\r\n        WidgetSettingComponent,\r\n        PanelTitleBarComponent\r\n    ],\r\n    entryComponents: [\r\n        OnScreenWidgetIconComponent,\r\n        OnScreenWidgetPanelComponent,\r\n        DockablePanelAtLeftComponent,\r\n        DockablePanelAtBottomComponent,\r\n        DockablePanelAtRightComponent,\r\n        IframePanelComponent,\r\n        MobileActionPanelComponent,\r\n        MobileDrawerPanelComponent,\r\n        MobileModalPanelComponent,\r\n        MobilePopupPanelComponent,\r\n        MobileDrawerRightPanelComponent,\r\n        WidgetSettingComponent\r\n    ],\r\n    exports: [\r\n        PanelTitleBarComponent,\r\n        ResultfofComponent,\r\n        ResultfooComponent,\r\n        ResultfotComponent\r\n    ],\r\n    providers: [\r\n        //{ provide: OverlayContainer, useClass: FullscreenOverlayContainer }\r\n    ]\r\n})\r\nexport class EpsGisWidgetBaseModule { }","import { Injectable } from '@angular/core';\nimport * as _ from \"lodash\";\n\n/**\n * create by ruir 191014  shared/utils.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class SharedUtilsService {\n\n  widgetProperties: Array<string> = ['inPanel', 'hasLocale', 'hasStyle', 'hasConfig', 'hasUIFile',\n    'hasSettingPage', 'hasSettingUIFile', 'hasSettingLocale', 'hasSettingStyle',\n    'keepConfigAfterMapSwithched', 'isController', 'hasVersionManager', 'isThemeWidget',\n    'supportMultiInstance'\n  ];\n  constructor() {\n\n  }\n  /**\n   * \n   */\n  isHostedService() {\n    return false;\n  }\n  /**\n   * 给widget添加默认属性\n   * @param manifest \n   */\n  processWidgetProperties(manifest: any) {\n    if (typeof manifest.properties === \"undefined\") {\n      manifest.properties = {};\n    }\n    if (typeof manifest.properties.isController === 'undefined') {\n      manifest.properties.isController = false;\n    }\n    if (typeof manifest.properties.isThemeWidget === 'undefined') {\n      manifest.properties.isThemeWidget = false;\n    }\n    if (typeof manifest.properties.hasVersionManager === 'undefined') {\n      manifest.properties.hasVersionManager = false;\n    }\n\n    this.widgetProperties.forEach(function (p) {\n      if (typeof manifest.properties[p] === 'undefined') {\n        manifest.properties[p] = true;\n      }\n    });\n    manifest.properties.hasLocale = false;\n    manifest.properties.supportMultiInstance = false;\n    manifest.properties.hasVersionManager = false;\n    manifest.properties.hasSettingLocale = false;\n\n    if (manifest.properties.hasSetting !== true) {\n      manifest.properties.hasSettingPage = false;\n      manifest.properties.hasSettingUIFile = false;\n      manifest.properties.hasSettingStyle = false;\n    }\n  }\n  /**\n   * 如果组件的uri中有参数，则解析到组件的reqPara属性\n   * @param widget \n   */\n  processWidgetUriPara(widget: any) {\n    if (typeof (widget.uri) === \"string\" && widget.uri.length >= 1) {\n      var url = widget.uri,\n        paraString, p = new Object();\n      var index = url.lastIndexOf(\"?\");\n      if (index >= 0) {\n        widget.uri = url.substring(0, index);\n        paraString = url.substring(index + 1);\n        var strs = paraString.split(\"&\");\n        for (var i = 0; i < strs.length; i++) {\n          p[strs[i].split(\"=\")[0]] = decodeURIComponent((strs[i].split(\"=\")[1]));\n        }\n        widget.reqPara = p;\n      }\n    } else {\n      widget.uri = \"\";\n    }\n  }\n  /**\n   * \n   * @param appConfig 配置对象\n   * @param id \n   */\n  getConfigElementById(appConfig, id) {\n    var c;\n    if (id === 'map') {\n      return appConfig.map;\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.id === id) {\n        c = e;\n        return true;\n      }\n    });\n    return c;\n  }\n  /**\n   * \n   * @param appConfig \n   * @param cb \n   */\n  visitElement(appConfig: any, cb: Function) {\n    this.visitBigSection(appConfig, 'widgetOnScreen', cb);\n    this.visitBigSection(appConfig, 'widgetPool', cb);\n  }\n  /**\n   * \n   * @param appConfig \n   * @param section \n   * @param cb \n   */\n  private visitBigSection(appConfig: any, section: string, cb: Function) {\n    var i, j, group, widget, isOnScreen = (section === 'widgetOnScreen'),\n      tempobject, isHeadMenu = (section === \"widgetPool\");\n\n\n    if (appConfig[section]) {\n      if (appConfig[section].groups) {\n        for (i = 0; i < appConfig[section].groups.length; i++) {\n          group = appConfig[section].groups[i];\n          tempobject = {\n            index: i,\n            isWidget: false,\n            groupId: group.id,\n            gid: group.id,\n            isThemeWidget: false,\n            isOnScreen: isOnScreen\n          };\n          group = _.extend(group, tempobject);//Object.assign();\n          cb(group, tempobject);\n          if (!group.widgets) {\n            continue;\n          }\n          for (j = 0; j < group.widgets.length; j++) {\n            widget = group.widgets[j];\n            tempobject = {\n              index: j,\n              isWidget: true,\n              groupId: group.id,\n              gid: group.id,\n              //isThemeWidget: widget.uri && widget.uri.indexOf('themes/' + appConfig.theme.name) > -1,\n              isThemeWidget:false,\n              isOnScreen: isOnScreen\n            };\n            widget = _.extend(widget, tempobject);\n            Object.assign\n            this.processWidgetUriPara(widget);\n            cb(widget, tempobject);\n          }\n        }\n      }\n\n      if (appConfig[section].widgets) {\n        let visitHeaderMenu = (widget, cb) => { //支持子组件\n          if (widget.children && widget.children.length >= 1) {\n            for (var k = 0; k < widget.children.length; k++) {\n              var item = widget.children[k];\n              tempobject = {\n                index: i,\n                isWidget: true,\n                groupId: section,\n                gid: section, //有的地方用的gid\n                //isThemeWidget: item.uri && item.uri.indexOf('themes/' + appConfig.theme.name) > -1,\n                isThemeWidget:false,\n                isOnScreen: isOnScreen,\n                isHeadMenu: isHeadMenu\n              };\n              if (item.groupId || item.gid) {\n                tempobject.groupId = item.groupId || item.gid;\n                tempobject.gid = tempobject.groupId;\n              }\n              item = _.extend(item, tempobject)\n              this.processWidgetUriPara(item);\n              cb(item, tempobject);\n              visitHeaderMenu(item, cb);\n            }\n          }\n        }\n        for (i = 0; i < appConfig[section].widgets.length; i++) {\n          widget = appConfig[section].widgets[i];\n          tempobject = {\n            index: i,\n            isWidget: true,\n            groupId: section,\n            gid: section, //有的地方用的gid\n            //isThemeWidget: widget.uri && widget.uri.indexOf('themes/' + appConfig.theme.name) > -1,\n            isThemeWidget:false,\n            isOnScreen: isOnScreen,\n            isHeadMenu: isHeadMenu\n          };\n          if (widget.groupId || widget.gid) {\n            tempobject.groupId = widget.groupId || widget.gid;\n            tempobject.gid = tempobject.groupId;\n          }\n          widget = _.extend(widget, tempobject)\n          this.processWidgetUriPara(widget);\n          cb(widget, tempobject);\n          visitHeaderMenu(widget, cb);\n        }\n      }\n    }\n  }\n  /**\n   * 根据label或name属性取得配置\n   * @param appConfig \n   * @param label \n   */\n  getConfigElementByLabel(appConfig: any, label: string) {\n    var c;\n    if (label === 'map') {\n      return appConfig.map;\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.label || e.name === label) {\n        c = e;\n        return true;\n      }\n    });\n    return c;\n\n  }\n  /**\n   * 根据name属性取得配置\n   * @param appConfig \n   * @param name \n   */\n  getConfigElementsByName(appConfig: any, name: string) {\n    var elements = [];\n    if (name === 'map') {\n      return [appConfig.map];\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.name === name) {\n        elements.push(e);\n      }\n    });\n    return elements;\n  }\n  /**\n   * 根据uri取得配置\n   * @param appConfig \n   * @param uri \n   */\n  getConfigElementsByUri(appConfig: any, uri: string) {\n    var elements = [];\n    if (uri === 'map') {\n      return [appConfig.map];\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.uri && e.uri.toLowerCase() === uri.toLowerCase()) {\n        elements.push(e);\n      }\n    });\n    return elements;\n  }\n  /**\n   * 根据uri取得组件名\n   * @param uri \n   */\n  getWidgetNameFromUri(uri: string) {\n    var segs = uri.split('/');\n    segs.pop();\n    return segs.pop();\n  }\n  /**\n   * \n   * @param uri \n   */\n  getAmdFolderFromUri(uri: string) {\n    var segs = uri.split('/');\n    segs.pop();\n    return segs.join('/') + '/';\n  }\n}\n","export type Platforms = keyof typeof PLATFORMS_MAP;\n\ninterface IsPlatformSignature {\n    (plt: Platforms): boolean;\n    (win: Window, plt: Platforms): boolean;\n}\n\nexport const getPlatforms = (win: any) => setupPlatforms(win);\n\nexport const isPlatform: IsPlatformSignature = (winOrPlatform: Window | Platforms | undefined, platform?: Platforms) => {\n    if (typeof winOrPlatform === 'string') {\n        platform = winOrPlatform;\n        winOrPlatform = undefined;\n    }\n    // return getPlatforms(winOrPlatform).includes(platform!);\n    if (!winOrPlatform) {\n        winOrPlatform = window;\n    }\n    if(!platform){\n        platform=\"desktop\";\n    }\n    return PLATFORMS_MAP[platform](winOrPlatform as Window);\n};\n\nexport const setupPlatforms = (win: any = window) => {\n    win.Ionic = win.Ionic || {};\n\n    let platforms: Platforms[] | undefined | null = win.Ionic.platforms;\n    if (platforms == null) {\n        platforms = win.Ionic.platforms = detectPlatforms(win);\n        platforms.forEach(p => win.document.documentElement.classList.add(`plt-${p}`));\n    }\n    return platforms;\n};\n\nconst detectPlatforms = (win: Window) =>\n    (Object.keys(PLATFORMS_MAP) as Platforms[]).filter(p => PLATFORMS_MAP[p](win));\n\nconst isMobileWeb = (win: Window): boolean =>\n    isMobile(win) && !isHybrid(win);\n\nconst isIpad = (win: Window) => {\n    // iOS 12 and below\n    if (testUserAgent(win, /iPad/i)) {\n        return true;\n    }\n\n    // iOS 13+\n    if (testUserAgent(win, /Macintosh/i) && isMobile(win)) {\n        return true;\n    }\n\n    return false;\n};\n\nconst isIphone = (win: Window) =>\n    testUserAgent(win, /iPhone/i);\n\nconst isIOS = (win: Window) =>\n    testUserAgent(win, /iPhone|iPod/i) || isIpad(win);\n\nconst isAndroid = (win: Window) =>\n    testUserAgent(win, /android|sink/i);\n\nconst isAndroidTablet = (win: Window) => {\n    return isAndroid(win) && !testUserAgent(win, /mobile/i);\n};\n\nconst isPhablet = (win: Window) => {\n    const width = win.innerWidth;\n    const height = win.innerHeight;\n    const smallest = Math.min(width, height);\n    const largest = Math.max(width, height);\n\n    return (smallest > 390 && smallest < 520) &&\n        (largest > 620 && largest < 800);\n};\n\nconst isTablet = (win: Window) => {\n    const width = win.innerWidth;\n    const height = win.innerHeight;\n    const smallest = Math.min(width, height);\n    const largest = Math.max(width, height);\n\n    return (\n        isIpad(win) ||\n        isAndroidTablet(win) ||\n        (\n            (smallest > 460 && smallest < 820) &&\n            (largest > 780 && largest < 1400)\n        )\n    );\n};\n\nconst isMobile = (win: Window) => {\n    // return matchMedia(win, '(any-pointer:coarse)');\n    // modify by sy 2020/8/5\n    // var isTouchScreen = !!navigator.userAgent.match(/AppleWebkit.*Mobile.*/) || \"ontouchstart\" in win ||\n    // (win.matchMedia ? win.matchMedia(\"(pointer:coarse)\").matches || !!win.matchMedia(\"-moz-touch-enabled\").matches : false);\n\n    let isTouchScreen = !!navigator.userAgent.match(/AppleWebkit.*Mobile.*/) || \"ontouchstart\" in win ||\n        (matchMedia(win, '(pointer:coarse)') || !!matchMedia(win, \"-moz-touch-enabled\"));\n    return isTouchScreen;\n};\n\n\nconst isDesktop = (win: Window) =>\n    !isMobile(win);\n\nconst isHybrid = (win: Window) =>\n    isCordova(win) || isCapacitorNative(win);\n\nconst isCordova = (win: any): boolean =>\n    !!(win['cordova'] || win['phonegap'] || win['PhoneGap']);\n\nconst isCapacitorNative = (win: any): boolean => {\n    const capacitor = win['Capacitor'];\n    return !!(capacitor && capacitor.isNative);\n};\n\nconst isElectron = (win: Window): boolean =>\n    testUserAgent(win, /electron/i);\n\nconst isPWA = (win: Window): boolean =>\n    !!(win.matchMedia('(display-mode: standalone)').matches || (win.navigator as any).standalone);\n\nexport const testUserAgent = (win: Window, expr: RegExp) =>\n    expr.test(win.navigator.userAgent);\n\nconst matchMedia = (win: Window, query: string): boolean =>\n    win.matchMedia(query).matches;\n\nconst PLATFORMS_MAP = {\n    'ipad': isIpad,\n    'iphone': isIphone,\n    'ios': isIOS,\n    'android': isAndroid,\n    'phablet': isPhablet,\n    'tablet': isTablet,\n    'cordova': isCordova,\n    'capacitor': isCapacitorNative,\n    'electron': isElectron,\n    'pwa': isPWA,\n    'mobile': isMobile,\n    'mobileweb': isMobileWeb,\n    'desktop': isDesktop,\n    'hybrid': isHybrid\n};","import { Injectable, ChangeDetectorRef } from '@angular/core';\nimport { SharedUtilsService } from './shared/shared-utils.service';\nimport * as _ from \"lodash\";\nimport { AppGlobalConfig } from '../models/app-config';\n/**\n * create by ruir 191014  utils.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilsService extends SharedUtilsService {\n\n  constructor(private globalParams: AppGlobalConfig) {\n    super();\n  }\n  /**\n   * \n   * @param uri \n   */\n  getUriInfo(uri: string) {\n    //菜单的可能循环调用了 已处理过 直接返回{} ruir 190412\n    if (!uri || uri.indexOf(this.globalParams.appInfo.folderUrlPrefix) >= 0) return {};\n    let pos,\n      firstSeg,\n      info: any = {},\n      amdFolder;\n    pos = uri.indexOf('/');\n    firstSeg = uri.substring(0, pos);\n    //config using package\n    amdFolder = uri.substring(0, uri.lastIndexOf('/') + 1);\n    if (this.globalParams.jimuConfig.isDesignMode === true && this.globalParams.appInfo.folderUrlPrefix) {\n      info.folderUrl = this.globalParams.appInfo.folderUrlPrefix + \"/\" + amdFolder;\n    } else {\n      info.folderUrl = amdFolder;//require(mo.getRequireConfig()).toUrl(amdFolder);\n    }\n\n    info.amdFolder = amdFolder;\n    return info;\n  }\n  /**\n   * \n   * @param setting \n   */\n  processWidgetSetting(setting: any) {\n    if (!setting.uri) {\n      return setting;\n    }\n    _.extend(setting, this.getUriInfo(setting.uri));\n    /*\n    *191108 icon不管有无配置都不敢，没配就是undefined\n    if (this.globalParams.jimuConfig.isDesignMode === true && this.globalParams.appInfo.folderUrlPrefix) {\n      if (setting.icon) {\n        if (setting.icon.indexOf(this.globalParams.appInfo.folderUrlPrefix) <= -1)\n          setting.icon = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.icon;\n      } else {\n        setting.icon = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.amdFolder + 'images/icon.png';\n      }\n      if (setting.thumbnail) {\n        if (setting.thumbnail.indexOf(this.globalParams.appInfo.folderUrlPrefix) <= -1)\n          setting.thumbnail = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.icon;\n      } else {\n        setting.thumbnail = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.amdFolder + 'images/thumbnail.png';\n      }\n      if (setting.uri.indexOf(this.globalParams.appInfo.folderUrlPrefix) <= -1)\n        setting.uri = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.uri;\n    } else {\n      if (!setting.icon && setting.isHeadMenu !== true) {\n        setting.icon = setting.amdFolder + 'images/icon.png';\n      }\n      if (!setting.thumbnail && setting.isHeadMenu !== true) {\n        setting.thumbnail = setting.amdFolder + 'images/thumbnail.png';\n      }\n    }*/\n\n    if (!setting.position) {\n      setting.position = {\n        \"left\": 100,\n        \"top\": 100,\n        \"width\": 300,\n        \"height\": 400,\n        \"relativeTo\": \"map\"\n      };\n    }\n\n    //setting.label has been processed when loading config.\n    return setting;\n  }\n  /**\n   * \n   * @param widgetJson \n   * @param manifest \n   */\n  addManifest2WidgetJson(widgetJson: any, manifest: any) {\n    _.extend(widgetJson, manifest.properties);\n    widgetJson.name = manifest.name;\n    if (!widgetJson.label) {\n      widgetJson.label = manifest.label;\n    }\n    widgetJson.manifest = manifest;\n  }\n  addManifestProperies(manifest: any) {\n    if (manifest.url) {\n      manifest.icon = manifest.url + 'images/icon.png';\n    }\n\n    if (manifest.category === \"theme\") {\n      this.addThemeManifestProperies(manifest);\n    } else {\n      this.addWidgetManifestProperties(manifest);\n    }\n  }\n  addThemeManifestProperies(manifest: any) {\n    manifest.panels.forEach(function (panel) {\n      panel.uri = 'panels/' + panel.name + '/Panel.js';\n    });\n\n    manifest.styles.forEach(function (style) {\n      style.uri = 'styles/' + style.name + '/style.css';\n    });\n\n    manifest.layouts.forEach(function (layout) {\n      layout.uri = 'layouts/' + layout.name + '/config.json';\n      layout.icon = 'layouts/' + layout.name + '/icon.png';\n      layout.RTLIcon = 'layouts/' + layout.name + '/icon_rtl.png';\n    });\n  }\n  /**\n   * \n   * @param manifest \n   */\n  addWidgetManifestProperties(manifest: any) {\n    //because tingo db engine doesn't support 2D, 3D property, so, change here\n    if (typeof manifest['2D'] !== 'undefined') {\n      manifest.support2D = manifest['2D'];\n    }\n    if (typeof manifest['3D'] !== 'undefined') {\n      manifest.support3D = manifest['3D'];\n    }\n\n    if (typeof manifest['2D'] === 'undefined' && typeof manifest['3D'] === 'undefined') {\n      manifest.support2D = true;\n    }\n\n    delete manifest['2D'];\n    delete manifest['3D'];\n\n    if (typeof manifest.properties === 'undefined') {\n      manifest.properties = {};\n    }\n\n    super.processWidgetProperties(manifest);\n  }\n\n  /**\n   * \n   * @param manifest \n   * @param locale \n   */\n  processManifestLabel(manifest, locale) {\n    manifest.label = manifest.i18nLabels && (manifest.i18nLabels[locale] ||\n      manifest.i18nLabels.defaultLabel) ||\n      manifest.label ||\n      manifest.name;\n    if (manifest.layouts) {\n      _.forEach(manifest.layouts, (layout) => {\n        let key = 'i18nLabels_layout_' + layout.name;\n        layout.label = manifest[key] && (manifest[key][locale] ||\n          manifest[key].defaultLabel) ||\n          layout.label ||\n          layout.name;\n      });\n    }\n    if (manifest.styles) {\n      _.forEach(manifest.styles, (_style) => {\n        let key = 'i18nLabels_style_' + _style.name;\n        _style.label = manifest[key] && (manifest[key][locale] ||\n          manifest[key].defaultLabel) ||\n          _style.label ||\n          _style.name;\n      });\n    }\n  }\n  /**\n   * \n   * @param obj \n   * @param props \n   */\n  replacePlaceHolder(obj, props) {\n    let str = JSON.stringify(obj),\n      m = str.match(/\\$\\{(\\w)+\\}/g),\n      i;\n\n    if (m === null) {\n      return obj;\n    }\n    for (i = 0; i < m.length; i++) {\n      let p = m[i].match(/(\\w)+/g)[0];\n      if (props[p]) {\n        str = str.replace(m[i], props[p]);\n      }\n    }\n    return JSON.parse(str);\n  }\n  /**\n   * \n   * @param manifest \n   */\n  addI18NLabel(manifest: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      if (manifest.i18nLabels) {\n        resolve(manifest);\n        return;\n      }\n      manifest.i18nLabels = {};\n      if (manifest.properties && manifest.properties.hasLocale === false) {\n        resolve(manifest);\n      }\n      resolve(manifest);\n    });\n\n  }\n  /**\n   * \n   * @param url \n   */\n  processUrlInAppConfig(url) {\n    if (!url) {\n      return;\n    }\n    if (url.startWith('data:') || url.startWith('http') || url.startWith('/')) {\n      return url;\n    } else {\n      return this.globalParams.appInfo.appPath + url;\n    }\n  }\n  /**\n   * \n   * @param o1 \n   * @param o2 \n   */\n  isEqual(o1, o2) {\n    let leftChain, rightChain;\n\n    function compare2Objects(x, y) {\n      let p;\n      if (x === null && y === null || typeof x === 'undefined' && typeof y === 'undefined') {\n        return true;\n      }\n\n      if (x === null && y !== null || y === null && x !== null ||\n        typeof x === 'undefined' && typeof y !== 'undefined' ||\n        typeof y === 'undefined' && typeof x !== 'undefined') {\n        return false;\n      }\n\n      // remember that NaN === NaN returns false\n      // and isNaN(undefined) returns true\n      if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n        return true;\n      }\n      // Compare primitives and functions.\n      // Check if both arguments link to the same object.\n      // Especially useful on step when comparing prototypes\n      if (x === y) {\n        return true;\n      }\n      // Works in case when functions are created in constructor.\n      // Comparing dates is a common scenario. Another built-ins?\n      // We can even handle functions passed across iframes\n      if ((typeof x === 'function' && typeof y === 'function') ||\n        (x instanceof Date && y instanceof Date) ||\n        (x instanceof RegExp && y instanceof RegExp) ||\n        (x instanceof String && y instanceof String) ||\n        (x instanceof Number && y instanceof Number)) {\n        return x.toString() === y.toString();\n      }\n      // check for infinitive linking loops\n      if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\n        return false;\n      }\n      // Quick checking of one object beeing a subset of another.\n      // todo: cache the structure of arguments[0] for performance\n      if (y !== null) {\n        for (p in y) {\n          if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n            return false;\n          } else if (typeof y[p] !== typeof x[p]) {\n            return false;\n          }\n        }\n        for (p in x) {\n          if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n            return false;\n          } else if (typeof y[p] !== typeof x[p]) {\n            return false;\n          }\n          switch (typeof (x[p])) {\n            case 'object':\n            case 'function':\n              leftChain.push(x);\n              rightChain.push(y);\n              if (!compare2Objects(x[p], y[p])) {\n                return false;\n              }\n              leftChain.pop();\n              rightChain.pop();\n              break;\n            default:\n              if (x[p] !== y[p]) {\n                return false;\n              }\n              break;\n          }\n        }\n      }\n\n      return true;\n    }\n\n    leftChain = []; //todo: this can be cached\n    rightChain = [];\n    if (!compare2Objects(o1, o2)) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * \n   * @param mapOptions \n   */\n  deleteMapOptions(mapOptions: any) {\n    if (!mapOptions) {\n      return;\n    }\n    delete mapOptions.extent;\n    delete mapOptions.lods;\n    delete mapOptions.center;\n    delete mapOptions.scale;\n    delete mapOptions.zoom;\n    delete mapOptions.maxScale;\n    delete mapOptions.maxZoom;\n    delete mapOptions.minScale;\n    delete mapOptions.minZoom;\n  }\n  /**\n   * \n   * @param obj \n   */\n  reCreateObject(obj: any) {\n    let ret;\n\n    function copyArray(_array) {\n      let retArray = [];\n      _array.forEach(function (a) {\n        if (Array.isArray(a)) {\n          retArray.push(copyArray(a));\n        } else if (typeof a === 'object') {\n          retArray.push(copyObject(a));\n        } else {\n          retArray.push(a);\n        }\n      });\n      return retArray;\n    }\n\n    function copyObject(_obj) {\n      let ret = {};\n      for (let p in _obj) {\n        if (!_obj.hasOwnProperty(p)) {\n          continue;\n        }\n        if (_obj[p] === null) {\n          ret[p] = null;\n        } else if (Array.isArray(_obj[p])) {\n          ret[p] = copyArray(_obj[p]);\n        } else if (typeof _obj[p] === 'object') {\n          ret[p] = copyObject(_obj[p]);\n        } else {\n          ret[p] = _obj[p];\n        }\n      }\n      return ret;\n    }\n\n    if (Array.isArray(obj)) {\n      ret = copyArray(obj);\n    } else {\n      ret = copyObject(obj);\n    }\n    return ret;\n  }\n  /**\n   * \n   * @param _position \n   */\n  getPositionStyle(_position: any) {\n    let style: any = {};\n    if (!_position) {\n      return style;\n    }\n    let position = _.clone(_position);\n    // if (window.isRTL) {\n    if (false) {\n      let temp;\n      if (typeof position.left !== 'undefined' && typeof position.right !== 'undefined') {\n        temp = position.left;\n        position.left = position.right;\n        position.right = temp;\n      } else if (typeof position.left !== 'undefined') {\n        position.right = position.left;\n        delete position.left;\n      } else if (typeof position.right !== 'undefined') {\n        position.left = position.right;\n        delete position.right;\n      }\n\n      if (typeof position.paddingLeft !== 'undefined' &&\n        typeof position.paddingRight !== 'undefined') {\n        temp = position.paddingLeft;\n        position.paddingLeft = position.paddingRight;\n        position.paddingRight = temp;\n      } else if (typeof position.paddingLeft !== 'undefined') {\n        position.paddingRight = position.paddingLeft;\n        delete position.paddingLeft;\n      } else if (typeof position.paddingRight !== 'undefined') {\n        position.paddingLeft = position.paddingRight;\n        delete position.paddingRight;\n      }\n    }\n\n    let ps = ['left', 'top', 'right', 'bottom', 'width', 'height',\n      'padding', 'paddingLeft', 'paddingRight', 'paddingTop', 'paddingBottom'\n    ];\n    for (let i = 0; i < ps.length; i++) {\n      let p = ps[i];\n      if (typeof position[p] === 'number') {\n        style[p] = position[p] + 'px';\n      } else if (typeof position[p] !== 'undefined') {\n        style[p] = position[p];\n      } else {\n        if (p.substr(0, 7) === 'padding') {\n          style[p] = 0;\n        } else {\n          style[p] = 'auto';\n        }\n      }\n    }\n\n    if (typeof position.zIndex === 'undefined') {\n      //set zindex=auto instead of 0, because inner dom of widget may need to overlay other widget\n      //that has the same zindex.\n      style.zIndex = this.globalParams.jimuConfig.zIndex;//'auto';\n    } else {\n      style.zIndex = position.zIndex;\n    }\n    return style;\n  }\n\n  /**\n   * 变更检测\n   * @param cdr ChangeDetectorRef\n   */\n  static detectChanges(cdr: ChangeDetectorRef): void {\n    if (cdr && cdr[\"destroyed\"] === false) {\n      cdr.detectChanges();\n    }\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable, NgZone } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { isPlatform, Platforms, getPlatforms } from \"../utils/platform\";\n\nexport interface BackButtonEventDetail {\n  register(priority: number, handler: () => Promise<any> | void): void;\n}\nexport interface BackButtonEmitter extends Subject<BackButtonEventDetail> {\n  subscribeWithPriority(priority: number, callback: () => Promise<any> | void): Subscription;\n}\n@Injectable({\n  providedIn: 'root'\n})\nexport class PlatformService {\n\n  private _readyPromise: Promise<string>;\n  private win: any;\n\n  /**\n   * @hidden\n   */\n  backButton: BackButtonEmitter = new Subject<BackButtonEventDetail>() as any;\n\n  /**\n   * The pause event emits when the native platform puts the application\n   * into the background, typically when the user switches to a different\n   * application. This event would emit when a Cordova app is put into\n   * the background, however, it would not fire on a standard web browser.\n   */\n  pause = new Subject<void>();\n\n  /**\n   * The resume event emits when the native platform pulls the application\n   * out from the background. This event would emit when a Cordova app comes\n   * out from the background, however, it would not fire on a standard web browser.\n   */\n  resume = new Subject<void>();\n\n  /**\n   * The resize event emits when the browser window has changed dimensions. This\n   * could be from a browser window being physically resized, or from a device\n   * changing orientation.\n   */\n  resize = new Subject<void>();\n\n  constructor(@Inject(DOCUMENT) private doc: any, zone: NgZone) {\n    zone.run(() => {\n      this.win = doc.defaultView;\n      this.backButton.subscribeWithPriority = function (priority, callback) {\n        return this.subscribe(ev => (\n          ev.register(priority, () => zone.run(callback))\n        ));\n      };\n\n      proxyEvent(this.pause, doc, 'pause');\n      proxyEvent(this.resume, doc, 'resume');\n      proxyEvent(this.backButton, doc, 'ionBackButton');\n      proxyEvent(this.resize, this.win, 'resize');\n\n      let readyResolve: (value: string) => void;\n      this._readyPromise = new Promise(res => { readyResolve = res; });\n      if (this.win && this.win['cordova']) {\n        doc.addEventListener('deviceready', () => {\n          readyResolve('cordova');\n        }, { once: true });\n      } else {\n        readyResolve!('dom');\n      }\n    });\n  }\n  /*\n   *\n   * | Platform Name   | Description                        |\n   * |-----------------|------------------------------------|\n   * | android         | on a device running Android.       |\n   * | cordova         | on a device running Cordova.       |\n   * | ios             | on a device running iOS.           |\n   * | ipad            | on an iPad device.                 |\n   * | iphone          | on an iPhone device.               |\n   * | phablet         | on a phablet device.               |\n   * | tablet          | on a tablet device.                |\n   * | electron        | in Electron on a desktop device.   |\n   * | pwa             | as a PWA app.                      |\n   * | mobile          | on a mobile device.                |\n   * | mobileweb       | on a mobile device in a browser.   |\n   * | desktop         | on a desktop device.               |\n   * | hybrid          | is a cordova or capacitor app.     |\n   *\n   */\n  is(platformName: Platforms): boolean {\n    return isPlatform(this.win, platformName);\n  }\n\n  /**\n   * @returns the array of platforms\n   * @description\n   * Depending on what device you are on, `platforms` can return multiple values.\n   * Each possible value is a hierarchy of platforms. For example, on an iPhone,\n   * it would return `mobile`, `ios`, and `iphone`.\n   */\n  platforms(): string[] {\n    return getPlatforms(this.win);\n  }\n\n  /**\n   * Returns a promise when the platform is ready and native functionality\n   * can be called. If the app is running from within a web browser, then\n   * the promise will resolve when the DOM is ready. When the app is running\n   * from an application engine such as Cordova, then the promise will\n   * resolve when Cordova triggers the `deviceready` event.\n   *\n   * The resolved value is the `readySource`, which states which platform\n   * ready was used. For example, when Cordova is ready, the resolved ready\n   * source is `cordova`. The default ready source value will be `dom`. The\n   * `readySource` is useful if different logic should run depending on the\n   * platform the app is running from. For example, only Cordova can execute\n   * the status bar plugin, so the web should not run status bar plugin logic.\n   *\n   * ```\n   */\n  ready(): Promise<string> {\n    return this._readyPromise;\n  }\n\n  /**\n   * Returns if this app is using right-to-left language direction or not.\n   * We recommend the app's `index.html` file already has the correct `dir`\n   * attribute value set, such as `<html dir=\"ltr\">` or `<html dir=\"rtl\">`.\n   * [W3C: Structural markup and right-to-left text in HTML](http://www.w3.org/International/questions/qa-html-dir)\n   */\n  get isRTL(): boolean {\n    return this.doc.dir === 'rtl';\n  }\n\n  /**\n   * Get the query string parameter\n   */\n  getQueryParam(key: string): string | null {\n    return readQueryParam(this.win.location.href, key);\n  }\n\n  /**\n   * Returns `true` if the app is in landscape mode.\n   */\n  isLandscape(): boolean {\n    return !this.isPortrait();\n  }\n\n  /**\n   * Returns `true` if the app is in portait mode.\n   */\n  isPortrait(): boolean {\n    return this.win.matchMedia && this.win.matchMedia('(orientation: portrait)').matches;\n  }\n\n  testUserAgent(expression: string): boolean {\n    const nav = this.win.navigator;\n    return !!(nav && nav.userAgent && nav.userAgent.indexOf(expression) >= 0);\n  }\n\n  /**\n   * Get the current url.\n   */\n  url() {\n    return this.win.location.href;\n  }\n\n  /**\n   * Gets the width of the platform's viewport using `window.innerWidth`.\n   */\n  width() {\n    return this.win.innerWidth;\n  }\n\n  /**\n   * Gets the height of the platform's viewport using `window.innerHeight`.\n   */\n  height(): number {\n    return this.win.innerHeight;\n  }\n}\n\nconst readQueryParam = (url: string, key: string) => {\n  key = key.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp('[\\\\?&]' + key + '=([^&#]*)');\n  const results = regex.exec(url);\n  return results ? decodeURIComponent(results[1].replace(/\\+/g, ' ')) : null;\n};\n\nconst proxyEvent = <T>(emitter: Subject<T>, el: EventTarget, eventName: string) => {\n  if ((el as any)) {\n    el.addEventListener(eventName, (ev: Event | undefined | null) => {\n      // ?? cordova might emit \"null\" events\n      emitter.next(ev != null ? (ev as any).detail as T : undefined);\n    });\n  }\n};","import { UtilsService } from './utils.service';\nimport { Injectable, ComponentRef, EmbeddedViewRef } from '@angular/core';\nimport { WidgetPosition } from '../models/base-widget';\nimport { isPlatform, Platforms } from '../utils/platform'\nimport { PlatformService } from \"./platform.service\";\n/**\n * create by ruir 191015  通用功能函数\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class CommonService {\n\n  constructor(\n    private utils: UtilsService,\n    private platform: PlatformService\n  ) {\n\n  }\n  /**\n   * \n   */\n  createPromiseDefer() {\n    let resolve, reject;\n    const promise = new Promise<any>(function () {\n      resolve = arguments[0];\n      reject = arguments[1];\n    });\n    return {\n      resolve: resolve,\n      reject: reject,\n      promise: () => promise\n    };\n  }\n\n  /**\n   * 获取组件根级元素\n   * @param componentRef \n   */\n  getComponentRootNode(componentRef: ComponentRef<any>): HTMLElement {\n    if (!componentRef) {\n      console.log('componentRef undefined');\n      return null;\n    }\n    return (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n  }\n  /**\n   * 获取元素范围边界\n   * @param ele \n   */\n  getElementBounds(ele: HTMLElement) {\n    if (!ele) return null;\n    const rect = ele.getBoundingClientRect();\n\n    const top = document.documentElement.clientTop;\n\n    const left = document.documentElement.clientLeft;\n\n    return {\n\n      top: rect.top - top,\n      left: rect.left - left,\n      bottom: rect.bottom - top,\n      right: rect.right - left,\n      width: rect.width,\n      height: rect.height\n    }\n  }\n\n  /**\n   * \n   * @param px \n   */\n  getPx(px) {\n    // let xxxxx = _.isNumber(\"300\");//居然是false\n    if (!px) return \"0px\";\n    if (typeof px === \"string\" && px.indexOf(\"px\") >= 0) {\n      return px;\n    }\n    if (px.toString().indexOf(\"%\") >= 0 || px === \"auto\") return px;\n    if (typeof px === \"number\")\n      return px + \"px\";\n    let _temp = parseFloat(px);\n    if (isNaN(_temp)) {\n      return \"0px\";\n    }\n    return _temp + \"px\";\n\n  }\n  /**\n   * \n   * @param px \n   */\n  getPxNumber(px: number | string): number | string {\n    if (!px) return 0;\n\n    if (typeof px === \"string\" && px.indexOf(\"px\") >= 0) {\n      return parseInt(px, 10);\n    }\n    if (px.toString().indexOf(\"%\") >= 0 || px === \"auto\") return px;\n\n    if (typeof px === \"number\")\n      return px;\n\n    let _temp = parseFloat(px.toString());\n    if (isNaN(_temp)) {\n      return 0;\n    }\n    return _temp;\n  }\n  /**\n   * \n   * @param positionConfig \n   */\n  getPosition(positionConfig: any): WidgetPosition {\n    let _position: WidgetPosition = new WidgetPosition();\n    if (positionConfig.top || positionConfig.top == 0) {\n      _position.top = this.getPx(positionConfig.top);\n    }\n    if (positionConfig.left || positionConfig.left == 0) {\n      _position.left = this.getPx(positionConfig.left);\n    }\n    if (positionConfig.right || positionConfig.right == 0) {\n      _position.right = this.getPx(positionConfig.right);\n    }\n    if (positionConfig.bottom || positionConfig.bottom == 0) {\n      _position.bottom = this.getPx(positionConfig.bottom);\n    }\n    if (positionConfig.width || positionConfig.width == 0) {\n      _position.width = this.getPx(positionConfig.width);\n    } else {\n      _position.width = \"100%\";\n    }\n    if (positionConfig.height || positionConfig.height == 0) {\n      _position.height = this.getPx(positionConfig.height);\n    } else {\n      _position.height = \"100%\";\n    }\n    if (positionConfig.zIndex || positionConfig.zIndex == 0) {\n      _position.zIndex = positionConfig.zIndex;\n    }\n    return _position;\n  }\n  /**\n   * 设置组件位置\n   * @param compRef \n   * @param widgetPosition \n   */\n  setWidgetPosition(compRef: ComponentRef<any>, widgetPosition: any) {\n    let ele: HTMLElement = this.getComponentRootNode(compRef);\n    let css = this.utils.getPositionStyle(widgetPosition);\n    ele.style.position = \"absolute\";\n    if (css.top || css.top == 0) {\n      ele.style.top = css.top;\n    }\n    if (css.right || css.right == 0) {\n      ele.style.right = css.right;\n    }\n    if (css.bottom || css.bottom == 0) {\n      ele.style.bottom = css.bottom;\n    }\n    if (css.left || css.left == 0) {\n      ele.style.left = css.left;\n    }\n    if (css.width || css.width == 0) {\n      ele.style.width = css.width;\n    }\n    if (css.height || css.height == 0) {\n      ele.style.height = css.height;\n    }\n    if (css.zIndex || css.zIndex == 0) {\n      ele.style.zIndex = css.zIndex;\n    }\n  }\n  private win: any;\n  is(platformName: Platforms): boolean {\n    return isPlatform(this.win, platformName);\n  }\n\n  /**\n   * 返回当前平台名称\n   */\n  getPlatformName(): string {\n\n    if (this.isAndroid())\n      return 'android';\n\n    if (this.isIos())\n      return 'ios';\n\n    if (!this.isMobile())\n      return 'browser'\n\n    return 'unknown';\n  }\n  /**\n   * 是否移动端环境\n   */\n  isMobileNotTablet(): boolean {\n    return this.isMobile()\n      && this.platform.is(\"ipad\") == false\n      && this.platform.is(\"phablet\") == false\n      && this.platform.is(\"tablet\") == false;\n  }\n  /**\n   * 是否移动端环境\n   */\n  isMobile(): boolean {\n    return this.platform.is(\"mobile\") || this.platform.is(\"mobileweb\");\n  }\n  /**\n   * 是否真机环境\n   */\n  isMobileRealMachine(): boolean {\n    return this.platform.is('mobile') && !this.platform.is('mobileweb');\n  }\n  /**\n   * 是否android真机环境\n   */\n  isAndroid(): boolean {\n    return this.isMobileRealMachine() && this.platform.is('android');\n  }\n  /**\n   * 是否ios真机环境\n   */\n  isIos(): boolean {\n    return this.isMobileRealMachine() && (this.platform.is('ios') || this.platform.is('ipad') || this.platform.is('iphone'));\n  }\n}\n","import { Injectable, ComponentFactoryResolver, Type, ViewContainerRef, OnDestroy, ComponentRef, Injector, forwardRef, Inject, EmbeddedViewRef, ApplicationRef } from '@angular/core';\r\nimport { ComponentRegistry, findComponentInfo } from '../decorator/component-register.decorator';\r\nimport { ServiceInjector } from './service-injector';\r\n/**\r\n * create by ruir 191018  组件加载器\r\n */\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ComponentLoaderService implements OnDestroy {\r\n    /**\r\n     * 最外层容器\r\n     */\r\n    viewContainerInHome: ViewContainerRef = null;\r\n    /**\r\n     * 地图组件中的容器\r\n     */\r\n    viewContainerInMap: ViewContainerRef = null;\r\n    private serviceInjector: ServiceInjector = null;\r\n    factories = null;\r\n    factoriesArray: Array<any> = null;\r\n    constructor(\r\n        private componentFactoryResolver: ComponentFactoryResolver\r\n        // ,private applicationRef: ApplicationRef,\r\n        //, @Inject(forwardRef(() => ServiceInjector))\r\n        //  private serviceInjector: ServiceInjector\r\n    ) {\r\n        // setTimeout(() => {\r\n        //     let injector = ReflectiveInjector.resolveAndCreate([ServiceInjector]);\r\n        //     let dependence1 = injector.get(ServiceInjector, null);\r\n        // }, 500);\r\n        this.factories = this.componentFactoryResolver[\"_factories\"];\r\n        if (this.factories) {\r\n            this.factoriesArray = Array.from(this.factories);\r\n        }\r\n    }\r\n    /**\r\n     * 创建组件\r\n     * @param component 组件\r\n     * @param params 参数\r\n     * @param container 容器\r\n     */\r\n    public createComponent(component: Type<any>, params?: any, container?: ViewContainerRef) {\r\n\r\n        let inputs = {};\r\n        if (params) {\r\n            inputs = params;\r\n        }\r\n        let inputProviders = Object.keys(inputs).map((inputName) => {\r\n            return { provide: inputName, useValue: inputs[inputName] };\r\n        });\r\n        //过时\r\n        //Injector.create(inputProviders)\r\n        //过时\r\n        // const resolvedInputs = ReflectiveInjector.resolve(inputProviders);\r\n        // const resolvedInputs= Injector.create({\r\n        //     providers:inputProviders\r\n        // })\r\n        // let parent = null;\r\n        // if (container) {\r\n        //     parent = container.parentInjector;\r\n        // }\r\n        // const injector = ReflectiveInjector.fromResolvedProviders(resolvedInputs, parent);\r\n        const injector = Injector.create({ providers: inputProviders, parent: container?.parentInjector });\r\n        const factory = this.componentFactoryResolver.resolveComponentFactory(component);\r\n        // container?.createComponent(factory,0,injector);\r\n        const compRef = factory.create(injector);\r\n        if (typeof compRef.instance.setServiceInjector === \"function\") {\r\n            compRef.instance.setServiceInjector(this.serviceInjector);\r\n        }\r\n        // this.applicationRef.attachView(compRef.hostView);\r\n        return compRef;\r\n    }\r\n    /**\r\n     * 获取组件的路径\r\n     * @param name 组件的selector\r\n     */\r\n    getComponentPath(name: string) {\r\n        const compInfo = findComponentInfo(name);\r\n        if (compInfo) {\r\n            return compInfo.path || compInfo.uri;\r\n        }\r\n        const comp = this.findComponent(name);\r\n        if (comp) {\r\n            return (typeof comp.getCompInfo === \"function\") ? comp.getCompInfo().path : \"\";\r\n        }\r\n        return \"\";\r\n    }\r\n    /**\r\n     * 查找组件\r\n     * @param name 组件的selector\r\n     */\r\n    findComponent(name: string) {\r\n        let comp = null;\r\n        if (this.factories) {\r\n            //ng8\r\n            //let factories: Array<any> =Array.from( this.componentFactoryResolver[\"_factories\"].values());\r\n            if (!this.factories || this.factories.size <= 0) return null;\r\n            //Array.from(factories)[0]  0:class 1:ComponentFactory_\r\n            //[...factories.values()] ComponentFactory_\r\n            /*\r\n            factories.forEach((value: any, key: any) => {\r\n                //value.componentType.name \"OnScreenWidgetIconComponent\"\r\n                //value.selector \"epsgis-on-screen-widget-icon\"\r\n                let _cname: string = key.name;\r\n                //key :NzDropdownContextComponent\r\n                if (_cname.toLowerCase() !== name.toLowerCase() && typeof key.getCompInfo === \"function\") {\r\n                    _cname = key.getCompInfo().name;\r\n                }\r\n                console.log(_cname);\r\n                if (_cname.toLowerCase() === name.toLowerCase()) {\r\n                    comp = key;\r\n                    return true;\r\n                }\r\n            });\r\n            */\r\n\r\n            let item = this.factoriesArray.find((value, index: number, arr) => {\r\n                //console.log(`value[0].name:${value[0].name}`); //变了\r\n                //console.log(`value[1].componentType.name:${value[1].componentType.name}`); //变了\r\n                //console.log(`value[1].selector:${value[1].selector}`); //\r\n                return value[1].selector.toLowerCase() === name.toLowerCase();\r\n            });\r\n            if (item) {\r\n                comp = item[0];\r\n                //console.log(JSON.stringify(comp.getCompInfo()));\r\n            }\r\n        } else {\r\n            //ng9及以上\r\n            const compInfo = findComponentInfo(name);\r\n            if (compInfo) {\r\n                return compInfo.component;\r\n            }\r\n        }\r\n        return comp;\r\n\r\n    }\r\n    getServiceInjector() {\r\n        return this.serviceInjector;\r\n    }\r\n    /**\r\n     * \r\n     * @param serviceInjector \r\n     */\r\n    setServiceInjector(serviceInjector: ServiceInjector) {\r\n        this.serviceInjector = serviceInjector;\r\n    }\r\n    ///////////////////////////\r\n    /**\r\n     * 设置组件容器\r\n     * @param container \r\n     */\r\n    setViewContainerInHome(container: ViewContainerRef) {\r\n        this.viewContainerInHome = container;\r\n    }\r\n    /**\r\n     * 创建组件\r\n     * @param component 组件\r\n     * @param params 参数\r\n     */\r\n    createComponentToHome(component: Type<any>, params?: any) {\r\n        return this.createComponent(component, params, this.viewContainerInHome);\r\n    }\r\n    /**\r\n     * 显示组件\r\n     */\r\n    showInHome(compRef: ComponentRef<any>) {\r\n        if (!compRef) {\r\n            return;\r\n        }\r\n        if (!this.viewContainerInHome) {\r\n            console.error(\"未设置容器，无法显示组件\");\r\n            return;\r\n        }\r\n        this.viewContainerInHome.insert(compRef.hostView);\r\n    }\r\n    /////////////////////////\r\n\r\n    /**\r\n     * 设置组件容器\r\n     * @param container \r\n     */\r\n    setViewContainerInMap(container: ViewContainerRef) {\r\n        this.viewContainerInMap = container;\r\n    }\r\n    /**\r\n     * 创建组件到地图组件中\r\n     * @param component 组件\r\n     * @param params 参数\r\n     */\r\n    createComponentToMap(component: Type<any>, params?: any) {\r\n        return this.createComponent(component, params, this.viewContainerInMap);\r\n    }\r\n    /**\r\n     * 显示组件（相对于地图组件）\r\n     */\r\n    showInMap(compRef: ComponentRef<any>) {\r\n        if (!compRef) {\r\n            return;\r\n        }\r\n        if (!this.viewContainerInMap) {\r\n            console.error(\"未设置容器，无法显示组件\");\r\n            return;\r\n        }\r\n        this.viewContainerInMap.insert(compRef.hostView);\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    ngOnDestroy() {\r\n        if (this.viewContainerInHome) {\r\n            this.viewContainerInHome.clear();\r\n        }\r\n        if (this.viewContainerInMap) {\r\n            this.viewContainerInMap.clear();\r\n        }\r\n    }\r\n}\r\n","/**\n * create by ruir 191014  baseWidgetFrame.js\n */\nexport class BaseWidgetFrame {\n}\n","/**\n * create by ruir 191014  baseWidgetPanel.js\n */\nexport class BaseWidgetPanel {\n}\n","/**\n * create by ruir 191014  baseWidgetSetting.js\n */\nexport class BaseWidgetSetting {\n}\n","/**\n * create by ruir 191014  OnScreenWidgetPanel.js\n */\nexport class OnScreenWidgetPanel {\n}\n","/**\n * \n */\nexport class WidgetPlaceholder {\n\n    index: number = 0;\n    configId: string = \"\";\n    id = \"dijit__WidgetBase_\" + this.index;\n    class = 'jimu-widget-placeholder';\n    params: any = null;\n    constructor(options: any) {\n        this.params = options;\n    }\n    /**\n     * \n     */\n    postCreate() {\n\n\n    }\n    /**\n     * \n     * @param position \n     */\n    moveTo(position) {\n\n    }\n    /**\n     * \n     * @param index \n     */\n    setIndex(index: number) {\n\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { EventEmitter } from 'events';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EventEmitterService {\n\n  rss: EventEmitter = new EventEmitter();\n  /**\n   * 地图加载完成\n   */\n  readonly _mapLoaded: string = \"manLoaded\";\n  /**\n   * 地图改变\n   */\n  readonly _mapChanged: string = \"mapChanged\";\n  /**\n   * \n   */\n  readonly _viewLoaded: string = \"viewLoaded\";\n  /**\n   * \n   */\n  readonly _viewChanged: string = \"viewChanged\";\n  /**\n   * 组件创建成功\n   */\n  readonly _widget_Created: string = \"widget-created\";\n  /**\n   * 组件创建成功\n   */\n  readonly _widgetCreated: string = \"widgetCreated\";\n  /**\n   * \n   */\n  readonly _designConfigChanged: string = \"DesignConfigChanged\";\n  /**\n   * \n   */\n  readonly _appConfigLoaded: string = \"appConfigLoaded\";\n\n  readonly _appConfigChanged: string = \"appConfigChanged\";\n  readonly _header_ConfigChanged = \"header-configChanged\";\n  /**\n   * \n   */\n  readonly _createPanelContainer: string = \"createPanelContainer\";\n  /**\n   * \n   */\n  readonly _mapPositionChanged: string = \"mapPositionChanged\";\n\n  /**\n   * 变更检测 add yly 20200327\n   */\n  readonly _checkChangeDetector: string = \"detectChanges\";\n  /**\n   * 图片查看器，索引改变\n   */\n  readonly _imageViewerIndexChanged: string = \"imageViewerIndexChanged\";\n  constructor() {\n    //Possible EventEmitter memory leak detected. 11 mapChanged listeners added. Use emitter.setMaxListeners() to increase limit\n    //this.rss.setMaxListeners(50);\n  }\n  /**\n   * 移除监听\n   */\n  removeListener(event: string | any, listener: (...args: any[]) => void) {\n    if (typeof listener === \"function\") {\n      return this.rss.removeListener(event, listener);\n    }\n    return this.rss;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\nimport { RequestResultModel, TokenModel, OrderByType } from '../models/http/request.result';\nimport { AppGlobalConfig } from '../models/models';\n// export const ApiRootUrl = new InjectionToken<string>('ApiRootUrl');\n@Injectable({\n    providedIn: 'root'\n})\nexport class HttpReqService {\n    private ServiceUrl: string = '';\n    headers = new HttpHeaders().set(\n        \"Content-type\",\n        \"application/json; charset=UTF-8\"\n    );\n    private _tokenKey = \"__token\";\n    private _tokenValue = \"\";\n    constructor(\n        public httpClient: HttpClient,\n        // @Optional() @Inject(ApiRootUrl) private ApiRootUrl: string\n        public config: AppGlobalConfig\n    ) {\n        this.ServiceUrl = config.apiRootUrl;\n    }\n    /**\n     * 获取本地保存的token\n     */\n    getLocalToken(): TokenModel {\n        if (window.sessionStorage) {\n            let str = sessionStorage.getItem(this._tokenKey);\n            if (str != \"\") {\n                return JSON.parse(str);\n            }\n        } else {\n            console.log(\"浏览器不支持sessionStorage\");\n        }\n        return null;\n    }\n    /**\n     * sessionStorage中的key\n     */\n    getTokenKey() {\n        return this._tokenKey;\n    }\n    /**\n     * token更新后需要调用此函数更新本实例中的值\n     * @param token \n     */\n    setAccessToken(token: string) {\n        this._tokenValue = token;\n    }\n    /**\n     * \n     */\n    getAccessToken() {\n        let token: string = \"\";\n        if (this._tokenValue) {\n            token = this._tokenValue;\n        } else {\n            let m: TokenModel = this.getLocalToken();\n            if (m) {\n                this.setAccessToken(m.access_token);\n                token = m.access_token;\n            }\n        }\n        return token;\n    }\n    /**\n     * 获取带有token的headers\n     */\n    getAuthHeaders() {\n        return this.headers.set(\"Authorization\", `Bearer ${this.getAccessToken()}`);\n    }\n    /**\n     * 请求json文件\n     * @param configFilePath \n     */\n    getJsonFile(configFilePath: string) {\n        return this.httpClient.get(configFilePath, { responseType: 'json' }).toPromise();\n    }\n\n    private _toHttpParams(paras: Array<HttpPara>): HttpParams {\n        if (!paras) return null;\n        let obj = {};\n        paras.forEach(x => {\n            obj[x.name] = x.value;\n        })\n        return new HttpParams({ fromObject: obj });\n    }\n    /**\n     * \n     * @param para \n     */\n    private _toParaString(para: Array<HttpPara>): string {\n        if (!para || para.length <= 0) return '';\n        let str = '';\n        para.forEach(s => {\n            str += `&${s.name}=${s.value}`;\n        });\n        return str.substring(1);\n    }\n    /**\n     * \n     * @param para \n     */\n    private _toHttpParams2(para: ObjectPara | string) {\n        let _httpParams = null;\n        if (typeof para === \"string\") {\n            _httpParams = new HttpParams({ fromString: para });\n        } else {\n            _httpParams = new HttpParams({ fromObject: para as ObjectPara });\n        }\n        return _httpParams;\n    }\n    /**\n     * \n     * @param para \n     */\n    private _toParaString2(para: ObjectPara | string): string {\n        if (!para) return '';\n        if (typeof para === \"string\") {\n            if (para.startsWith(\"&\") || para.startsWith(\"?\")) {\n                return para.substring(1);\n            }\n            return para;\n        } else {\n            let str = '';\n            for (const key in para) {\n                if (para.hasOwnProperty(key)) {\n                    str += `&${key}=${para[key]}`;\n                }\n            }\n            return str.substring(1);\n        }\n    }\n    /**\n     * get请求\n     * @param apiName api\n     * @param para 参数\n     * @param serviceUrl 服务地址\n     */\n    getNoAuthGeneric<T>(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        let url = this.ServiceUrl;\n        if (serviceUrl) url = serviceUrl;\n        return this.httpClient.get<T>(`${url}/${apiName}`, {\n            headers: this.headers,\n            //params: new HttpParams({ fromString: paraString })\n            params: this._toHttpParams2(para)\n        }).toPromise<T>();\n    }\n    /**\n     * \n     * @param apiName api\n     * @param para 参数字符串\n     * @param serviceUrl 服务地址\n     */\n    getNoAuth(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        return this.getNoAuthGeneric<RequestResultModel>(apiName, para, serviceUrl);\n    }\n    /**\n    * get请求-带验证\n    * @param apiName api\n    * @param para 参数字符串\n    * @param serviceUrl 服务地址\n    */\n    getGeneric<T>(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        let url = this.ServiceUrl;\n        if (serviceUrl) url = serviceUrl;\n        return this.httpClient.get<T>(`${url}/${apiName}`, {\n            headers: this.getAuthHeaders(),\n            // params: new HttpParams({ fromString: paraString })\n            params: this._toHttpParams2(para)\n        }).toPromise<T>();\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n     */\n    get(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        return this.getGeneric<RequestResultModel>(apiName, para, serviceUrl);\n    }\n    /**\n     * 获取分页数据\n     * @param apiName \n     * @param pageIndex 页码\n     * @param pageSize 每页大小\n     * @param orderBy 排序\n     * @param direction 排序方向\n     * @param para 参数\n     * @param serviceUrl 自定义url\n     */\n    getPage(apiName: string, pageIndex: number, pageSize: number, orderBy?: string, direction?: OrderByType, para?: ObjectPara | string, serviceUrl?: string) {\n        if (pageIndex <= 0) {\n            pageIndex = 1;\n        }\n        if (pageSize <= 0) {\n            pageSize = 20;\n        }\n        let pager: ObjectPara = {\n            page: pageIndex.toString(),\n            size: pageSize.toString(),\n            orderby: orderBy ? orderBy : \"\",\n            direction: direction === OrderByType.desc ? \"1\" : \"0\"\n        };\n        let paraString = this._toParaString2(pager);\n        if (para) {\n            paraString = paraString + \"&\" + this._toParaString2(para);\n        }\n        return this.getGeneric<RequestResultModel>(apiName, paraString, serviceUrl);\n    }\n    /**\n    * post请求\n    * @param apiName 方法名\n    * @param para 参数\n    * @param serviceUrl 服务地址\n    * @param receiveAsObject api是否以对象接收参数\n    */\n    postNoAuthGeneric<T>(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean): Promise<T> {\n        let url = this.ServiceUrl;\n        if (typeof serviceUrl === 'string' && serviceUrl) url = serviceUrl;\n        if (receiveAsObject === true || (typeof serviceUrl === 'boolean' && serviceUrl === true)) {\n            return this.httpClient.post<T>(`${url}/${apiName}`, para, { headers: this.headers }).toPromise<T>();\n        } else {\n            return this.httpClient.post<T>(\n                `${url}/${apiName}`,\n                this._toParaString2(para),//要字符串\n                {\n                    headers: {\n                        'Content-Type': \"application/x-www-form-urlencoded;charset=UTF-8\"//也必须要设置。。。坑。。。                \n                    }\n                    //,params: this._toHttpParams(para)//这里是get参数\n                }).toPromise<T>();\n        }\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n    * @param receiveAsObject api是否以对象接收参数\n     */\n    postNoAuth(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean): Promise<RequestResultModel> {\n        return this.postNoAuthGeneric<RequestResultModel>(apiName, para, serviceUrl, receiveAsObject);\n    }\n\n\n    /**\n      * post请求-带验证\n      * @param apiName 方法名\n      * @param para 参数\n     * @param serviceUrl 服务地址\n    * @param receiveAsObject api是否以对象接收参数\n      */\n    postGeneric<T>(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean) {\n        let url = this.ServiceUrl;\n        if (typeof serviceUrl === 'string' && serviceUrl) url = serviceUrl;\n        if (receiveAsObject === true || (typeof serviceUrl === 'boolean' && serviceUrl === true)) {\n            return this.httpClient.post<T>(`${url}/${apiName}`, para, { headers: this.getAuthHeaders() }).toPromise<T>();\n        } else {\n            return this.httpClient.post<T>(\n                `${url}/${apiName}`,\n                this._toParaString2(para),//要字符串\n                {\n                    headers: {\n                        'Content-Type': \"application/x-www-form-urlencoded;charset=UTF-8\"//也必须要设置。。。坑。。。\n                        , \"Authorization\": `Bearer ${this.getAccessToken()}`\n                    }\n                    //,params: this._toHttpParams(para)//这里是get参数\n                }).toPromise<T>();\n        }\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n    * @param receiveAsObject api是否以对象接收参数\n     */\n    post(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean) {\n        return this.postGeneric<RequestResultModel>(apiName, para, serviceUrl, receiveAsObject);\n    }\n\n    /**\n     * 获取分页数据\n     * @param apiName \n     * @param pageIndex 页码\n     * @param pageSize 每页大小\n     * @param orderBy 排序\n     * @param direction 排序方向\n     * @param para 参数\n     * @param serviceUrl 自定义url\n    * @param receiveAsObject api是否以对象接收参数\n     */\n    postPage(apiName: string, pageIndex: number, pageSize: number, orderBy?: string, direction?: OrderByType, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean) {\n        if (pageIndex <= 0) {\n            pageIndex = 1;\n        }\n        if (pageSize <= 0) {\n            pageSize = 20;\n        }\n        let pager: ObjectPara = {\n            page: pageIndex.toString(),\n            size: pageSize.toString(),\n            orderby: orderBy ? orderBy : \"\",\n            direction: direction === OrderByType.desc ? \"1\" : \"0\"\n        };\n        let paraString = this._toParaString2(pager);\n        if (para) {\n            paraString = paraString + \"&\" + this._toParaString2(para);\n        }\n        return this.postGeneric<RequestResultModel>(apiName, paraString, serviceUrl, receiveAsObject);\n    }\n    /**\n     * delete请求\n     * @param apiName \n     * @param para \n     * @param serviceUrl \n     */\n    deleteGeneric<T>(apiName: string, para: ObjectPara | string, serviceUrl?: string) {\n        let url = this.ServiceUrl;\n        if (serviceUrl) url = serviceUrl;\n\n        return this.httpClient.delete<T>(`${url}/${apiName}`,\n            {\n                params: this._toHttpParams2(para),\n                headers: {\n                    \"Authorization\": `Bearer ${this.getAccessToken()}`\n                }\n            }\n        ).toPromise<T>();\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n     */\n    delete(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        return this.deleteGeneric<RequestResultModel>(apiName, para, serviceUrl);\n    }\n}\ninterface HttpPara {\n    name: string;\n    value: any;\n}\n\nexport interface ObjectPara {\n    [param: string]: string | ReadonlyArray<string>;\n}","import { CommonService } from './common.service';\nimport { HttpReqService } from './request.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport { Injectable, ComponentRef } from '@angular/core';\nimport { UtilsService } from './utils.service';\nimport * as _ from \"lodash\";\nimport { ComponentLoaderService } from './component-loader.service';\nimport { WidgetState, WidgetOpenOptions } from '../models/base-widget';\nimport { ConfigLoaderService } from './config-loader.service';\nimport { PanelDockMode } from '../models/base-panel';\nimport { PanelManagerService } from './panel-manager.service';\nimport { BaseWidgetComponent } from '../components/base-widget/base-widget.component';\nimport { AppGlobalConfig } from '../models/models';\nimport { IComponentInfo } from '../decorator/component-register.decorator';\nimport { BaseWidget } from '../components/base-widget';\n/**\n * create by ruir 191014  widgetManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetManagerService {\n  loaded: Array<ComponentRef<BaseWidgetComponent>> = null;\n  missedActions: Array<any> = null;\n  activeWidget: ComponentRef<BaseWidgetComponent> = null;\n  map: any = null;\n  view: any = null;\n  appConfig: any = null;\n  configLoader: ConfigLoaderService;\n  panelManager: PanelManagerService;\n  constructor(\n    private globalParams: AppGlobalConfig,\n    private eventService: EventEmitterService,\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private commonService: CommonService,\n    private componentLoader: ComponentLoaderService) {\n    this.loaded = [];\n    this.missedActions = [];\n    this.activeWidget = null;\n    // this.eventService.rss.on(this.eventService._mapLoaded, this._onMapLoaded);\n    // this.eventService.rss.on(this.eventService._mapChanged, this._onMapChanged);\n  }\n  /**\n    * \n    * @param map 二维地图或三维场景\n    */\n  setMap(map) {\n    if (this.globalParams.mapConfig.is3D === true) {\n      this.view = map;\n    } else {\n      this.map = map;\n    }\n  }\n  setAppConfig(appConfig) {\n\n    this.appConfig = appConfig;//appConfig有些问题\n    //this.appConfig = _layoutManager.appConfig;\n\n  }\n  _onMapLoaded(map) {\n\n  }\n\n  _onMapChanged(map) {\n\n  }\n  /**\n   * \n   * @param compInfo\n   * @param widget \n   */\n  loadConfig(compInfo: IComponentInfo, widget: BaseWidget): Promise<boolean> {\n    //view/map 赋值，其实setWidgetPorp也会赋值\n    widget.appConfig = this.appConfig;\n    widget.view = this.view;\n    widget.map = this.map;\n    let def = this.commonService.createPromiseDefer();\n    //从appConfig中查找组件的配置，查找到后直接赋值\n    let item = this.appConfig.widgetOnScreen.widgets.find(f => f.uri.toLowerCase() === compInfo.uri.toLowerCase());\n    if (item) {\n      if (!item.config) {\n        this.tryLoadWidgetConfig(item).then(widgetJson => {\n          this.setWidgetPorp(widget, widgetJson);\n          widget.started = true;\n          widget.state = WidgetState.opened;\n          return def.resolve(true);\n        }).catch(err => {\n          return def.resolve(true);\n        });\n      }\n\n    } else {\n      //如果没有查找到，则请求配置文件，再赋值\n      const aconfig = {\n        \"widgetOnScreen\":\n        {\n          \"widgets\": [{\n            \"uri\": compInfo.uri,\n            \"label\": compInfo.name\n          }]\n        }\n      };\n      this.configLoader._upgradeAppConfig(aconfig);\n      this.configLoader._processAfterTryLoad(aconfig);\n      this.configLoader.loadWidgetsManifest(aconfig).then(appconfig => {\n        const wConfig = appconfig.widgetOnScreen.widgets[0];\n        this.tryLoadWidgetConfig(wConfig).then(widgetJson => {\n          this.setWidgetPorp(widget, widgetJson);\n          widget.started = true;\n          widget.state = WidgetState.opened;\n          return def.resolve(true);\n        }).catch(err => {\n          return def.resolve(true);\n        });\n      });\n    }\n    return def.promise();\n  }\n  /**\n   * 打开组件\n   * @param options \n   */\n  openWidget(options: WidgetOpenOptions): Promise<BaseWidgetComponent> {\n    let _openPanelOrWidget = (_config) => {\n      const _options = _.cloneDeep(options);\n      let inPanel = _config.inPanel;\n      //仅创建组件时，panel不显示\n      if (options.onlyCreateWidget === true) { inPanel = false; }\n\n      if (inPanel !== false) {\n        //打开panel\n        this.panelManager.showPanel(_config, null, options.panel, _options).then((panel) => {\n          if (panel.instance.isDockable()) {\n            this.panelManager.onMapResize();\n          }\n          def.resolve(panel);\n        });\n      } else {\n        //打开组件\n        this.loadWidget(_config, _options).then((compRef) => {\n          if (options.onlyCreateWidget === true) {\n            def.resolve(compRef);\n          }\n          else {\n            this.showWidget(compRef);\n            compRef.instance.setPosition(_config.position);\n            this.commonService.setWidgetPosition(compRef, _config.position);\n            _config.loaded = true;\n            compRef.instance.configId = _config.id;\n            def.resolve(compRef.instance);\n          }\n        }).catch((err) => def.reject(err));\n      }\n    }\n    let def = this.commonService.createPromiseDefer();\n    if (!options.uri) {\n      console.error(\"no uri\");\n      def.reject(new Error(\"no uri\"));\n      return def.promise();\n    }\n    //查找appConfig，是否有配置\n    let item = this.appConfig.widgetOnScreen.widgets.find(f => f.uri.toLowerCase() === options.uri.toLowerCase());\n    if (item) {\n      //有配置\n      _openPanelOrWidget(item);\n    } else {\n      //没有配置\n      if (!options.position) {\n        console.error(\"no position\");\n        def.reject(new Error(\"no position\"));\n        return def.promise();\n      }\n      //有position 完善属性\n      let _config = {\n        \"label\": \"\",\n        \"uri\": options.uri,\n        \"position\": {\n        }\n      };\n      _config.position = _.merge(_config.position, options.position);\n      if (options.panel) {\n        _config.label = options.panel.title;\n        if (options.panel.dockSide) {\n          switch (options.panel.dockSide) {\n            case PanelDockMode.left:\n              _config[\"panel\"] = {\n                uri: \"epsgis-dockable-panel-at-left\"\n              };\n              break;\n            case PanelDockMode.bottom:\n              _config[\"panel\"] = {\n                uri: \"epsgis-dockable-panel-at-bottom\"\n              };\n              break;\n            case PanelDockMode.right:\n              _config[\"panel\"] = {\n                uri: \"epsgis-dockable-panel-at-right\"\n              };\n              break;\n            default:\n              break;\n          }\n        }\n      }\n      if (!_config.label) {\n        _config.label = _config.uri;\n      }\n      let _appConfig = {\n        \"widgetOnScreen\": {\n          \"widgets\": [\n            _config\n          ]\n        }\n      };\n      this.configLoader._processAfterTryLoad(_appConfig);\n      this.configLoader.loadWidgetsManifest(_appConfig).then((cfg) => {\n        const _widgetConfig = cfg.widgetOnScreen.widgets[0];\n        this.appConfig.widgetOnScreen.widgets.push(_widgetConfig);\n        //加载组件\n        _openPanelOrWidget(_widgetConfig);\n      }).catch(err => def.reject(err));\n\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param setting \n   */\n  loadWidget(setting, openOptions?: WidgetOpenOptions): Promise<any> {\n    //setting 至少要包含id和uri（组件地址）\n    let def = this.commonService.createPromiseDefer();\n\n    let findWidget;\n    setting = _.clone(setting);\n    if (!setting.folderUrl) {\n      this.utils.processWidgetSetting(setting);\n    }\n    findWidget = this.getWidgetById(setting.id);\n    if (findWidget) {\n      if (openOptions) {\n        findWidget.instance.reqPara = openOptions.param;\n      }\n      def.resolve(findWidget);\n    } else {\n      def.resolve(this.createWidget(setting, openOptions));\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param widget \n   * @param setting \n   */\n  private setWidgetPorp(widget: BaseWidget, setting) {\n    setting.rawConfig = _.cloneDeep(setting);\n    setting['class'] = 'jimu-widget';\n    if (!setting.label) {\n      setting.label = setting.name;\n    }\n    if (this.globalParams.mapConfig.is3D) {\n      if (this.view) {\n        setting.view = this.view;\n        widget.view = this.view;\n      }\n    } else {\n      if (this.map) {\n        setting.map = this.map;\n        widget.map = this.map;\n      }\n    }\n\n    widget.appConfig = this.appConfig;\n    widget.widgetConfig = setting;\n    widget.config = setting.config;\n    widget.configId = widget.id = setting.id;\n    widget.folderUrl = setting.folderUrl;\n    widget.icon = setting.icon;\n    widget.label = widget.title = widget.tooltip = setting.label;\n    widget[\"baseClass\"] = setting.class;\n    widget.gid = setting.gid;\n    widget.uri = setting.uri;\n    widget.openAtStart = setting.openAtStart === true;\n    if (setting.manifest\n      && setting.manifest.properties\n      && setting.manifest.properties.inPanel === false) {\n      widget.inPanel = setting.inPanel = setting.manifest.properties.inPanel;\n    } else {\n      widget.inPanel = setting.inPanel = true;\n    }\n  }\n  /**\n   * 创建组件\n   * @param setting \n   * @param clazz \n   * @param resouces \n   */\n  private async createWidget(setting: any, openOptions?: WidgetOpenOptions): Promise<any> {\n    const def = this.commonService.createPromiseDefer();\n    let widget;\n    let _widget = this.getWidgetById(setting.id);\n    if (_widget) {\n      def.resolve(_widget);\n      return def.promise();\n    }\n    try {\n      let comp = this.componentLoader.findComponent(setting.uri), compRef = null, inMap = false;\n      if (!comp) {\n        const _msg = 'widget [' + setting.uri + '] not find';\n        console.log(_msg);\n        def.reject(new Error(_msg));\n        return def.promise();\n      }\n      if (setting.position.relativeTo !== \"map\") {\n        compRef = this.componentLoader.createComponentToHome(comp);\n      } else {\n        compRef = this.componentLoader.createComponentToMap(comp);\n        inMap = true;\n      }\n      if (!compRef) {\n        const _msg = `widget [${setting.label}] create fail`;\n        console.log(_msg);\n        def.reject(new Error(_msg));\n        return def.promise();\n      }\n      widget = compRef.instance;\n      //compRef.componentType.getCompInfo() 获取组件信息\n\n      if (openOptions) {\n        widget.reqPara = openOptions.param;\n      }\n      //获取组件的config.json 或 manifest.json\n      if (!setting.config) {\n        await this.tryLoadWidgetConfig(setting);\n      }\n      if (!setting.manifest) {\n        await this.loadWidgetManifest(setting);\n      }\n      this.setWidgetPorp(widget, setting);\n      this.loaded.push(compRef);\n      console.log('widget [' + setting.uri + '] created.');\n      this.eventService.rss.emit(this.eventService._widgetCreated, widget);\n      def.resolve(compRef);\n    } catch (err) {\n      console.log('create [' + setting.uri + '] error:' + err.stack);\n      def.reject(err);\n    }\n    return def.promise();\n  }\n  /**\n   * 获取所有已经加载的组件\n   */\n  getAllWidgets() {\n    return this.loaded;\n  }\n  /**\n   * \n   * @param setting \n   */\n  loadWidgetClass(setting: any) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   * @param setting \n   */\n  loadWidgetResources(setting) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   * @param widgetJson \n   */\n  tryLoadWidgetConfig(widgetJson) {\n    var def = this.commonService.createPromiseDefer();\n    // modify by sy 2020/6/22 增加对configPath的支持\n    let configPath = widgetJson.configPath || 'config.json';\n    var url = widgetJson.folderUrl + configPath;\n    var foldrUrl = widgetJson.folderUrl.split('?');\n    if (foldrUrl.length > 0) {\n      url = foldrUrl[0] + configPath + '?' + (foldrUrl[1] ? foldrUrl[1] : '');\n    }\n\n    if (widgetJson.config) {\n      def.resolve(widgetJson);\n      return def.promise();\n    }\n    try {\n      this.httpService.getJsonFile(url).then((config) => {\n        widgetJson.config = config;\n        def.resolve(widgetJson);\n      }).catch(err => {\n        console.error(`load [${widgetJson.uri}] config.json error`);\n        console.error(err);\n        def.resolve(widgetJson);\n      });\n    } catch (error) {\n      console.error(error);\n      def.resolve(widgetJson);\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param setting \n   */\n  _tryLoadWidgetConfig(setting) {\n\n  }\n  /**\n   * \n   * @param widgetJson \n   */\n  loadWidgetManifest(widgetJson: any): Promise<any> {\n    let def = this.commonService.createPromiseDefer();\n    var url = widgetJson.folderUrl + 'manifest.json';\n    var foldrUrl = widgetJson.folderUrl.split('?');\n    if (foldrUrl.length > 0) {\n      url = foldrUrl[0] + 'manifest.json?' + (foldrUrl[1] ? foldrUrl[1] : '');\n    }\n\n    if (widgetJson.manifest) {\n      def.resolve(widgetJson);\n      return def.promise();\n    }\n    // if (jimuConfig.isDesignMode === true) {\n    //     url=appInfo.path+url;\n    // }\n    let process = (manifest) => {\n      manifest.amdFolder = widgetJson.amdFolder;\n      manifest.category = 'widget';\n      let _w = \"auto\", _h = \"auto\";\n      if (manifest.properties.inPanel !== false) {\n        //widget\n        _w = \"300\";\n        _h = \"400\";\n      }\n      if (typeof widgetJson.position.width === \"undefined\") {\n        widgetJson.position.width = _w;\n      }\n      if (typeof widgetJson.position.height === \"undefined\") {\n        widgetJson.position.height = _h;\n      }\n      if (!widgetJson.label) {\n        this.utils.addI18NLabel(manifest).then(() => {\n          this._processManifest(manifest);\n          this.utils.addManifest2WidgetJson(widgetJson, manifest);\n          def.resolve(widgetJson);\n        });\n      } else {\n        this._processManifest(manifest);\n        this.utils.addManifest2WidgetJson(widgetJson, manifest);\n        def.resolve(widgetJson);\n      }\n    }\n\n    this.httpService.getJsonFile(url).then(process).catch((err) => {\n      if (err.readyState === 4 && err.status === 200 && err.responseText === \"\") {\n        //有文件，内容为空\n        var manifest: any = {};\n        manifest.amdFolder = widgetJson.amdFolder;\n        manifest.category = 'widget';\n        process(manifest);\n      } else {\n        console.error(`load [${widgetJson.uri}] config.json error`);\n        console.error(err);\n        def.resolve(widgetJson);\n      }\n    });\n    return def.promise();\n  }\n  /**\n   * 加载widget的配置页面\n   * @param  setting \n   */\n  loadWidgetSettingPage(setting): Promise<any> {\n    const def = this.commonService.createPromiseDefer();\n    //待开发\n    return def.promise();\n  }\n  /**\n   * 加载setting类\n   * @param  setting \n   */\n  loadWidgetSettingClass(setting) {\n    var def = this.commonService.createPromiseDefer();\n    return def.promise();\n  }\n  /**\n   * 加载setting需要的资源\n   * @param  setting \n   */\n  loadWidgetSettingPageResources(setting) {\n    var def = this.commonService.createPromiseDefer();\n    //待开发\n    return def.promise();\n\n  }\n  /**\n   * 创建setting\n   * @param  setting \n   * @param  clazz \n   */\n  createWidgetSetting(setting, clazz) {\n    //待开发\n    return null;\n  }\n  _hideLoading() {\n\n  }\n  /**\n   * \n   * @param id \n   */\n  getWidgetById(id) {\n    var ret;\n    _.some(this.loaded, (w) => {\n      if (w.instance.id === id) {\n        ret = w;\n        return true;\n      }\n    });\n    return ret;\n  }\n  /**\n   * \n   * @param label \n   */\n  getWidgetByLabel(label) {\n    var ret;\n    _.some(this.loaded, (w) => {\n      if (w.instance.label === label) {\n        ret = w;\n        return true;\n      }\n    });\n    return ret;\n  }\n  /**\n   * \n   * @param name \n   */\n  getWidgetsByName(name) {\n    var ret = [];\n    _.some(this.loaded, (w) => {\n      if (w.instance.name === name) {\n        ret.push(w);\n      }\n    });\n    return ret;\n  }\n  /**\n   * \n   * @param groupId \n   */\n  getOpenedWidgetByGroupId(groupId) {\n    return _.find(this.loaded, (w) => {\n      return w.instance.gid === groupId && (w.instance.state === WidgetState.opened || w.instance.state === WidgetState.active);\n    });\n  }\n  /**\n   * \n   * @param compRef  ng 组件\n   */\n  showWidget(compRef: ComponentRef<BaseWidgetComponent>) {\n    if (!compRef) return;\n    let widget = compRef.instance;\n    if (typeof widget === 'string') {\n      widget = this.getWidgetById(widget);\n      if (!widget) {\n        return;\n      }\n    }\n    if (!widget.started) {\n      try {\n        widget.started = true;\n        if (widget.widgetConfig.position.relativeTo === \"browser\") {\n          this.componentLoader.showInHome(compRef);\n        } else {\n          this.componentLoader.showInMap(compRef);\n        }\n        widget.startup();\n      } catch (err) {\n        console.error('fail to startup widget ' + widget.name + '. ' + err.stack);\n      }\n    }\n    if (widget.state === WidgetState.closed) {\n      widget.setState(WidgetState.opened);\n      try {\n        widget.onOpen();\n      } catch (err) {\n        console.error('fail to open widget ' + widget.name + '. ' + err.stack);\n      }\n    }\n  }\n  /**\n   * \n   * @param widget \n   */\n  closeOtherWidgetsInTheSameGroup(widget: ComponentRef<BaseWidgetComponent>) {\n    if (typeof widget === 'string') {\n      widget = this.getWidgetById(widget);\n      if (!widget) {\n        return;\n      }\n    }\n    var widgets = this.getAllWidgets();\n    for (var i = 0; i < widgets.length; i++) {\n      if (widgets[i].instance.gid === widget.instance.gid && widgets[i].instance.id !== widget.instance.id) {\n        this.closeWidget(widgets[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param groupId \n   */\n  closeAllWidgetsInGroup(groupId) {\n    var widgets = this.getAllWidgets();\n    for (var i = 0; i < widgets.length; i++) {\n      if (widgets[i].instance.gid === groupId) {\n        this.closeWidget(widgets[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param widget \n   */\n  closeWidget(widget: ComponentRef<BaseWidgetComponent> | string) {\n    let def = this.commonService.createPromiseDefer();\n    let _widget: ComponentRef<BaseWidgetComponent>;\n    if (typeof widget === 'string') {\n      _widget = this.getWidgetById(widget);\n    } else {\n      _widget = widget;\n    }\n    if (!_widget) {\n      def.reject(new Error(\"widget is null\"));\n      return def.promise();\n    }\n    if (_widget.instance.state !== WidgetState.closed) {\n      try {\n        if (this.activeWidget && this.activeWidget.instance.id === _widget.instance.id) {\n          this.activeWidget.instance.onDeActive();\n          this.activeWidget = null;\n        }\n        this.commonService.getComponentRootNode(_widget).style.display = 'none';\n        _widget.instance.setState(WidgetState.closed);\n\n        _widget.instance.onClose();\n        def.resolve(_widget);\n      } catch (err) {\n        console.log(console.error('fail to close widget ' + _widget.instance.name + '. ' + err.stack));\n        def.reject(err);\n      }\n\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param widget \n   */\n  destroyWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    var m;\n    if (typeof widget === 'string') {\n      m = this.getWidgetById(widget);\n      if (!m) {\n        //maybe, the widget is loading\n        return;\n      } else {\n        widget = m;\n      }\n    }\n    this._removeWidget(widget);\n    try {\n      widget.destroy();\n      console.log('destroy widget [' + widget.instance.id + '].');\n    } catch (err) {\n      console.log(console.error('fail to destroy widget ' + widget.instance.name + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param manifest \n   */\n  _processManifest(manifest) {\n    this.utils.addManifestProperies(manifest);\n    this.utils.processManifestLabel(manifest, 'zh-cn');\n  }\n\n  /**\n   * \n   * @param setting \n   * @param flag \n   */\n  _tryLoadResource(setting, flag) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   * @param id \n   */\n  _replaceId(id) {\n    return id.replace(/\\//g, '_').replace(/\\./g, '_');\n  }\n  /**\n   * \n   * @param widgetSetting \n   */\n  loadWidgetStyle(widgetSetting) {\n    //待开发\n  }\n  /**\n   * \n   * @param widgetSetting \n   */\n  loadWidgetSettingStyle(widgetSetting) {\n    //待开发\n  }\n\n  loadWidgetConfig(widgetSetting) {\n    //待开发\n  }\n\n  loadWidgetI18n(widgetSetting) {\n\n  }\n\n  loadWidgetSettingI18n(widgetSetting) {\n\n  }\n\n  loadWidgetTemplate(widgetSetting) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n\n  loadWidgetSettingTemplate(widgetSetting) {\n\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   */\n  getOnScreenOffPanelWidgets() {\n    return _.filter(this.loaded, function (widget) {\n      return (widget.instance.isOnScreen && !widget.instance.inPanel) || (widget.instance.widgetConfig.isOnScreen && !widget.instance.widgetConfig.inPanel);\n    });\n  }\n\n  _postWidgetStartup(widgetObject) {\n    //待开发\n  }\n  /**\n   * \n   * @param widget \n   */\n  _triggerMissedAction(widget: ComponentRef<BaseWidgetComponent>) {\n    this.missedActions.forEach(function (info) {\n      if (info.id === widget.instance.id) {\n        widget.instance.onAction(info.action.name, info.action.data);\n      }\n    });\n  }\n  /**\n   * \n   * @param id \n   */\n  _remove(id) {\n    return _.some(this.loaded, (w, i) => {\n      if (w.instance.id === id) {\n        this.loaded.splice(i, 1);\n        return true;\n      }\n    });\n  }\n  /**\n   * \n   * @param widget \n   */\n  _onDestroyWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    if (widget.instance.state !== WidgetState.closed) {\n      this.closeWidget(widget);\n    }\n    this._removeWidget(widget);\n    console.log('destroy widget [' + widget.instance.uri + '].');\n  }\n  _onDestroyWidgetSetting(settingWidget) {\n    this.removeWidgetSettingStyle(settingWidget);\n  }\n  /**\n   * \n   * @param widget \n   */\n  _removeWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    var m;\n    if (typeof widget === 'string') {\n      m = this.getWidgetById(widget);\n      if (!m) {\n        return;\n      } else {\n        widget = m;\n      }\n    }\n\n    if (this.activeWidget && this.activeWidget.instance.id === widget.instance.id) {\n      this.activeWidget = null;\n    }\n    this._remove(widget.instance.id);\n    if (this.getWidgetsByName(widget.instance.name).length === 0) {\n      this.removeWidgetStyle(widget);\n    }\n  }\n  removeWidgetStyle(widget) {\n    //待开发\n  }\n  removeWidgetSettingStyle(widget) {\n    //待开发\n  }\n  _onClickWidget(widget, evt) {\n\n    this._activeWidget(widget);\n  }\n  _activeWidget(widget) {\n\n    //待开发\n  }\n  getOffPanelWidgets() {\n    return _.filter(this.loaded, function (widget) {\n      return !widget.instance.inPanel;\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from \"lodash\";\nimport { WidgetManagerService } from './widget-manager.service';\nimport { UtilsService } from './utils.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport { CommonService } from './common.service';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { HttpReqService } from './request.service';\n\n/**\n * create by ruir 191014  configLoader.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigLoaderService {\n  urlParams: any = null;\n  appConfig: any = null;\n  rawAppConfig: any = null;\n  configFile: string = null;\n  _configLoaded: boolean = false;\n  portalSelf: any = null;\n  options: any = null;\n  constructor(\n    private widgetManager: WidgetManagerService,\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private globalParams: AppGlobalConfig,\n    private commonService: CommonService,\n    private componentLoader: ComponentLoaderService) {\n    this.urlParams = globalParams.urlParams;\n    this._removeHash(this.urlParams);\n  }\n  /**\n   * \n   * @param urlParams \n   */\n  private _removeHash(urlParams: any) {\n    for (var p in urlParams) {\n      if (urlParams[p]) {\n        urlParams[p] = urlParams[p].replace('#', '');\n      }\n    }\n  }\n  /**\n   * 加载总的配置文件（config.json）\n   */\n  loadConfig(config?: any): Promise<any> {\n    console.time('Load Config');\n    const def = this.commonService.createPromiseDefer();\n\n    const _processResult = (appConfig) => {\n      //原始配置\n      this.rawAppConfig = _.cloneDeep(appConfig);\n      let globalConfigTemp = _.cloneDeep(this.globalParams.mapConfig) ;\n      //0924改为合并全局配置\n      appConfig =_.merge(globalConfigTemp,appConfig);\n      appConfig = this._upgradeAppConfig(appConfig);\n      this._processAfterTryLoad(appConfig);\n      //config.json中有定义title时，以它为准\n      if (appConfig.title) {\n        document.title = appConfig.title;\n      }\n      this.loadWidgetsManifest(appConfig).then((appConfig) => {\n        return this._upgradeAllWidgetsConfig(appConfig);\n      }).then((appConfig) => {\n        this._configLoaded = true;\n        this.appConfig = appConfig;\n        def.resolve(this.getAppConfig());\n      });\n    }\n    if (typeof config === \"string\") {\n      this._tryLoadConfig(config).then(_processResult).catch((error) => {\n        if (error.readyState === 4 && error.status === 200 && error.responseText !== \"\") {\n          //当json文件mime类型配置为\"application/x-javascript\" 时，会将json当做字符串返回到这里\n          //这种情况其他有请求json的地方都需要修改\n          try {\n            var _obj = JSON.parse(error.responseText);\n          } catch (error) {\n            console.log(\"将json串转为对象出错\");\n            def.reject(error);\n            return;\n          }\n          _processResult(_obj);\n\n        } else {\n          console.log(\"Load Config error\");\n          def.reject(error);\n        }\n      });\n    } else {\n      _processResult(config);\n    }\n    return def.promise();\n  }\n  /**\n   * \n   */\n  getAppConfig() {\n    var c = _.clone(this.appConfig);\n    c.getConfigElementById = (id) => {\n      return this.utils.getConfigElementById(this, id);\n    };\n\n    c.getConfigElementsByName = (name) => {\n      return this.utils.getConfigElementsByName(this, name);\n    };\n\n    c.visitElement = (cb) => {\n      this.utils.visitElement(this, cb);\n    };\n\n    this._addAuthorizedCrossOriginDomains(this.portalSelf, c);\n\n    return c;\n  }\n  /**\n   * \n   * @param portalSelf \n   * @param appConfig \n   */\n  _addAuthorizedCrossOriginDomains(portalSelf, appConfig) {\n\n  }\n  /**\n   * \n   */\n  _tryLoadConfig(configJsonFile?: string) {\n    if (configJsonFile) {\n      this.configFile = configJsonFile;\n    } else {\n      this.configFile = this.globalParams.appInfo.configFile;\n    }\n    return this.httpService.getJsonFile(this.configFile);\n  }\n  _processAfterTryLoad(appConfig) {\n\n    //this._processUrlParams(appConfig);\n\n    this.addNeedValues(appConfig);\n    this.processProxy(appConfig);\n\n    return appConfig;\n  }\n  getUriInfo(uri) {\n    //已移植到utils\n  }\n  /**\n   * \n   * @param setting \n   */\n  processWidgetSetting(setting) {\n    this.utils.processWidgetSetting(setting);\n  }\n  /**\n   * \n   * @param appConfig \n   */\n  _processWidgetJsons(appConfig) {\n    this.utils.visitElement(appConfig, (e, info) => {\n      if (info.isWidget && e.uri) {\n        this.processWidgetSetting(e);\n      }\n    });\n  }\n\n  _processNoUriWidgets(appConfig) {\n    var i = 0;\n    this.utils.visitElement(appConfig, (e, info) => {\n      if (info.isWidget) {/* && !e.uri */\n        i++;\n        e.placeholderIndex = i;\n      }\n    });\n  }\n\n  _addElementId(appConfig) {\n    var maxId = 0,\n      i;\n\n    this.utils.visitElement(appConfig, (e) => {\n      if (!e.id) {\n        return;\n      }\n      //fix element id\n      e.id = e.id.replace(/\\//g, '_');\n\n      var li = e.id.lastIndexOf('_');\n      if (li > -1) {\n        i = e.id.substr(li + 1);\n        maxId = Math.max(maxId, i);\n      }\n    });\n\n    this.utils.visitElement(appConfig, (e) => {\n      if (!e.id) {\n        maxId++;\n        e.id = e.uri ? (e.uri.replace(/\\//g, '_') + '_' + maxId) : ('' + '_' + maxId);\n      }\n    });\n  }\n  addNeedValues(appConfig) {\n    this._processNoUriWidgets(appConfig);\n    this._addElementId(appConfig);\n    this._processWidgetJsons(appConfig);\n  }\n  processProxy(appConfig) {\n\n    if (appConfig.httpProxy && appConfig.httpProxy.useProxy && appConfig.httpProxy.url) { }\n    if (appConfig.httpProxy && appConfig.httpProxy.useProxy && appConfig.httpProxy.rules) {\n\n    }\n  }\n  _upgradeAppConfig(appConfig) {\n    var appVersion = this.globalParams.wabVersion;\n    var configVersion = appConfig.wabVersion;\n    var newConfig: any = {};\n\n    if (appVersion === configVersion) {\n      return appConfig;\n    } {\n\n      newConfig.isUpgraded = true;\n      return newConfig;\n    }\n  }\n  /**\n   * \n   * @param appConfig \n   */\n  _upgradeAllWidgetsConfig(appConfig): Promise<any> {\n    /*\n    var defs = [];\n    if (appConfig.isUpgraded !== undefined && !appConfig.isUpgraded) {\n      return Promise.resolve(appConfig);\n    }\n    delete appConfig.isUpgraded;\n    this.utils.visitElement(appConfig, (e) => {\n      if (!e.uri) {\n        return;\n      }\n      if (e.config) {\n        //更新\n        defs.push(this.widgetManager.tryLoadWidgetConfig(e));\n      } else {\n        e.version = e.manifest ? e.manifest.version : \"\";\n      }\n    });\n\n    Promise.all(defs).then(() => {\n      Promise.resolve(appConfig);\n    });*/\n    return Promise.resolve(appConfig);\n  }\n  /**\n   * \n   * @param config \n   */\n  loadWidgetsManifest(config: any) {\n    let defs = [], def = this.commonService.createPromiseDefer();\n\n    if (this.globalParams.jimuConfig.isSettings === true) {\n\n    } else {\n      this.utils.visitElement(config, (e) => {\n        if (!e.widgets && e.uri) {\n          const _path = this.componentLoader.getComponentPath(e.uri);\n          if (_path) {\n            e.folderUrl = e.amdFolder = this.globalParams.widgetRootPath + \"/\" + _path + \"/\";\n            if (e.icon) {\n              e.icon = this.globalParams.widgetRootPath + \"/\" + _path + \"/\" + e.icon;\n            }\n            defs.push(this.widgetManager.loadWidgetManifest(e));\n          } else {\n            console.log(`widget [${e.uri}] not config componentPath`);\n            defs.push(Promise.resolve(e));\n          }\n\n        }\n      });\n    }\n    Promise.all(defs).then(() => {\n      def.resolve(config);\n    });\n    return def.promise();\n  }\n  /**\n   * \n   * @param manifest \n   */\n  _addNeedValuesForManifest(manifest: Object) {\n    this.utils.addManifestProperies(manifest);\n    this.utils.processManifestLabel(manifest, this.globalParams.dojoConfig.locale);\n  }\n  /**\n   * \n   */\n  _loadMergedWidgetManifests() {\n    var file = this.globalParams.appInfo.appPath + 'widgets/widgets-manifest.json';\n    return this.httpService.getJsonFile(file);\n  }\n}\n","import { CommonService } from './common.service';\nimport { ConfigLoaderService } from './config-loader.service';\nimport { WidgetManagerService } from './widget-manager.service';\nimport { Injectable } from '@angular/core';\nimport { UtilsService } from './utils.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport * as _ from \"lodash\";\nimport { AppGlobalConfig } from '../models/app-config';\n/**\n * create by ruir 191014  configManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigManagerService {\n  urlParams: any = null;\n  appConfig: any = null;\n  configFile: any = null;\n  _configLoaded: any = false;\n  portalSelf: any = null;\n  _originConfig: any = null;\n\n  constructor(private utils: UtilsService,\n    private globalParams: AppGlobalConfig,\n    private eventService: EventEmitterService,\n    private widgetManager: WidgetManagerService,\n    private configLoader: ConfigLoaderService,\n    private commonService: CommonService) {\n    this.urlParams = globalParams.urlParams;\n    this.listenBuilderEvents();\n  }\n  listenBuilderEvents() {\n    this.eventService.rss.on(this.eventService._designConfigChanged, this._onDesignConfigChanged);\n  }\n  loadConfig(config?: any) {\n    //这if判断暂时注释，不知道当时的逻辑\n    // if (this.urlParams.mode === 'preview' ||\n    //   this.urlParams.mode === 'config') {\n    //   return;\n    // }\n    this.widgetManager.configLoader = this.configLoader;\n    return this.configLoader.loadConfig(config).then((appConfig) => {\n      this.portalSelf = this.configLoader.portalSelf;\n      this.appConfig = this._addDefaultValues(appConfig);\n\n      this.globalParams.appInfo.isRunInMobile = this._isRunInMobile();\n\n      if (this.appConfig.logo && this.globalParams.appInfo.folderUrlPrefix) {\n        this.appConfig.logo = this.globalParams.appInfo.folderUrlPrefix + \"/\" + this.appConfig.logo;\n      }\n      this.eventService.rss.emit(this.eventService._appConfigLoaded, this.appConfig);\n      //Rss.done(\"appConfigLoaded\", _self.appConfig);\n    }, function (err) {\n      console.error(err);\n      if (err && err.message && typeof err.message === 'string') {\n\n      }\n    });\n  }\n  _isRunInMobile() {\n    return false;\n  }\n  /**********************************************\n   * Add default values\n   ************************************************/\n  _addDefaultValues(config) {\n    this._addDefaultPortalUrl(config);\n    this._addDefaultGeometryService(config);\n    this._addDefaultStyle(config);\n    this._addDefaultMap(config);\n    this._addDefaultVisible(config);\n\n    //preload widgets\n    if (typeof config.widgetOnScreen === 'undefined') {\n      config.widgetOnScreen = {};\n    }\n\n    if (typeof config.widgetPool === 'undefined') {\n      config.widgetPool = {};\n    }\n    return config;\n  }\n\n  _addDefaultPortalUrl(config) {\n    config.portalUrl = 'https://www.supermap.com/cn';\n  }\n\n  _addDefaultGeometryService(appConfig) {\n\n\n  }\n\n  _addDefaultStyle(config) {\n    if (config.theme) {\n      if (!config.theme.styles || config.theme.styles.length === 0) {\n        config.theme.styles = ['default'];\n      }\n    }\n  }\n\n  _addDefaultMap(config) {\n    config.map.id = 'mapCantainer';\n\n    if (typeof config.map['3D'] === 'undefined' && typeof config.map['2D'] === 'undefined') {\n      config.map['2D'] = true;\n    }\n\n    if (typeof config.map.position === 'undefined') {\n      config.map.position = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0\n      };\n    }\n\n    if (typeof config.map.portalUrl === 'undefined') {\n      config.map.portalUrl = config.portalUrl;\n    }\n  }\n\n  _addDefaultVisible(config) {\n    if (config.visible === undefined) {\n      config.visible = true;\n    }\n  }\n\n  _addDefaultPanelAndPosition(config) {\n\n  }\n  processMenuWidgetConfig(menus) {\n\n    function visitHeaderMenu(widget: any, cb?: Function) { //支持子组件\n      if (widget.children && widget.children.length >= 1) {\n        for (var k = 0; k < widget.children.length; k++) {\n          var item = widget.children[k];\n          var tempobject: any = {\n            index: widget.index + \"\" + k,\n            isWidget: true,\n            groupId: section,\n            gid: section, //有的地方用的gid\n            isThemeWidget: false,\n            isOnScreen: isOnScreen,\n            isHeadMenu: isHeadMenu\n          };\n          tempobject.id = item.uri ? (item.uri.replace(/\\//g, '_') + '_' + (parseInt(tempobject.index) + 1)) : ('' + '_' + (parseInt(tempobject.index) + 1))\n          if (item.groupId || item.gid) {\n            tempobject.groupId = item.groupId || item.gid;\n            tempobject.gid = tempobject.groupId;\n          }\n          item = _.extend(item, tempobject)\n          this.utils.processWidgetUriPara(item);\n          if (item.isWidget && item.uri) {\n            _self.configLoader.processWidgetSetting(item);\n            //加载manifest\n            defs.push(_self.widgetManager.loadWidgetManifest(item));\n          }\n          visitHeaderMenu(item, cb);\n        }\n      }\n    }\n    var isHeadMenu = true, isOnScreen = false, i, section = \"widgetPool\";//headerMenu\n    var defs = [],\n      def = this.commonService.createPromiseDefer();\n    var maxId = this.appConfig.widgetOnScreen.widgets.length + 2;\n    i = maxId - 1; var _self = this;\n    _.forEach(menus, (widget, index, list) => {\n      widget.id = widget.uri ? (widget.uri.replace(/\\//g, '_') + '_' + maxId) : ('' + '_' + maxId);\n      widget.index = i;\n      //设置属性\n      widget.isWidget = true;\n      widget.groupId = section;\n      widget.gid = section;//有的地方用的gid\n      widget.isThemeWidget = widget.uri && widget.uri.indexOf('themes/' + _self.appConfig.theme.name) > -1;\n      widget.isOnScreen = isOnScreen;\n      widget.isHeadMenu = isHeadMenu;\n      widget.reqPara = {};\n      widget.version = undefined;\n      this.utils.processWidgetUriPara(widget);\n      visitHeaderMenu(widget);\n      if (widget.isWidget && widget.uri) {\n        _self.configLoader.processWidgetSetting(widget);\n        //加载manifest\n        defs.push(_self.widgetManager.loadWidgetManifest(widget));\n      }\n      i++;\n    });\n    Promise.all(defs).then(() => {\n      def.resolve(menus);\n    });\n    return def.promise();\n  }\n  _onWidgetAdded(obj, any) {\n    var widget = _.extend({}, obj);\n    //这里将原始的json对象，经过处理后传递给layoutmanager\n    //添加id\n    var maxId = this.appConfig.widgetOnScreen.widgets.length;\n    widget.id = widget.uri ? (widget.uri.replace(/\\//g, '_') + '_' + maxId) : ('' + '_' + maxId);\n    widget.index = maxId - 1;\n    //设置属性\n    widget.isWidget = true;\n    widget.groupId = \"widgetOnScreen\";\n    widget.gid = \"widgetOnScreen\";//有的地方用的gid\n    widget.isThemeWidget = widget.uri && widget.uri.indexOf('themes/' + this.appConfig.theme.name) > -1;\n    widget.isOnScreen = true;\n    widget.isHeadMenu = false;\n    widget.reqPara = {};\n    widget.version = undefined;\n    this.utils.processWidgetUriPara(widget);\n    if (widget.isWidget && widget.uri) {\n      this.configLoader.processWidgetSetting(widget);\n      //加载manifest\n      this.widgetManager.loadWidgetManifest(widget).then((config) => {\n        this.appConfig.widgetOnScreen.widgets.push(config);\n        // Rss.done(\"appConfigChanged\", { type: \"widgetAdded\", appConfig: _self.appConfig, data: config });\n        this.eventService.rss.emit(this.eventService._appConfigChanged, { type: \"widgetAdded\", appConfig: this.appConfig, data: config });\n      }).catch(function (err) {\n        console.log(\"loadWidgetManifest err\", err);\n      });\n    }\n\n  }\n  _getCleanConfig(config) {\n\n    var newConfig = _.clone(config);\n    var properties = this.utils.widgetProperties;\n\n    delete newConfig.mode;\n    this.utils.visitElement(newConfig, (e, info) => {\n      if (e.widgets) {\n        delete e.isOnScreen;\n        delete e.gid;\n        delete e.openType;\n        if (info.isOnScreen) {\n          if (e.panel && this.utils.isEqual(e.panel, newConfig.widgetOnScreen.panel)) {\n            delete e.panel;\n          }\n        }\n        return;\n      }\n\n      if (e.icon && e.icon === e.amdFolder + 'images/icon.png') {\n        delete e.icon;\n      }\n\n      delete e.panel;\n      delete e.folderUrl;\n      delete e.amdFolder;\n      delete e.thumbnail;\n      delete e.configFile;\n      delete e.gid;\n      delete e.isOnScreen;\n\n      properties.forEach(function (p) {\n        delete e[p];\n      });\n\n\n      if (e.visible) {\n        delete e.visible;\n      }\n      delete e.manifest;\n    });\n    delete newConfig.rawAppConfig;\n\n    delete newConfig._ssl;\n\n    delete newConfig.getConfigElementById;\n    delete newConfig.getConfigElementsByName;\n    delete newConfig.getConfigElementByLabel;\n\n    delete newConfig.getConfigElementsByUri;\n\n    delete newConfig.processNoUriWidgets;\n    delete newConfig.addElementId;\n    delete newConfig.getCleanConfig;\n    delete newConfig.visitElement;\n\n    delete newConfig.agolConfig;\n    delete newConfig._itemData;\n    delete newConfig.oldWabVersion;\n\n    return newConfig;\n  }\n  getAppConfig() {\n    var c;\n    if (this.globalParams.appInfo.isRunInMobile) {\n\n    } else {\n      c = _.clone(this.appConfig);\n    }\n\n    c.getConfigElementById = (id) => {\n      return this.utils.getConfigElementById(this, id);\n    };\n\n    c.getConfigElementByLabel = (label) => {\n      return this.utils.getConfigElementByLabel(this, label);\n    };\n\n    c.getConfigElementsByName = (name) => {\n      return this.utils.getConfigElementsByName(this, name);\n    };\n\n    c.getConfigElementsByUri = (uri) => {\n      return this.utils.getConfigElementsByUri(this, uri);\n    };\n\n    c.getCleanConfig = () => {\n      if (this._originConfig) {\n        return this._getCleanConfig(this._originConfig);\n      } else {\n        return this._getCleanConfig(this.appConfig);\n      }\n    };\n\n    c.visitElement = function (cb) {\n      this.utils.visitElement(this, cb);\n    };\n    return c;\n  }\n  _getAppConfigFromTheme(theme) {\n    var def = this.commonService.createPromiseDefer();\n    var config, styles = [];\n    var currentConfig = this.getAppConfig().getCleanConfig();\n\n    currentConfig.mode = this.urlParams.mode;\n\n    _.forEach(currentConfig.widgetPool.groups, (group) => {\n      delete group.panel;\n    });\n\n    if (theme.appConfig) {\n      config = _.clone(theme.appConfig);\n      config.map = currentConfig.map;\n      config.map.position = theme.appConfig.map.position;\n      // this._copyPoolToThemePool(currentConfig, config);\n\n      config.links = currentConfig.links;\n      config.title = currentConfig.title;\n      config.subtitle = currentConfig.subtitle;\n      config.logo = currentConfig.logo;\n    } else {\n\n    }\n\n    this.configLoader.addNeedValues(config);\n    this.configLoader.loadWidgetsManifest(config).then(() => {\n      this._addDefaultValues(config);\n      def.resolve(config);\n    });\n    return def.promise();\n  }\n  _onDesignConfigChanged(params) {\n\n    //根据不同事件处理相应的配置\n    var _preProcessConfig4Design = {\n      // type:'appAttributeChanged',\n      //     data:{\n      //     'appConfig':appConfig,\n      //     'changeData':{'title':'标题','subtitle':'副标题','logo':'1.jpg','links':'www.baidu.com'}\n      //     }\n      /**\n       * 基本信息改变 ，如logo，主、副标题\n       * @param  _params \n       * \n       */\n      appAttributeChanged: (_params) => {\n        _params.data.appConfig.logo = this.globalParams.appInfo.folderUrlPrefix + \"/\" + _params.data.appConfig.logo;\n        _params.data.changeData.logo = _params.data.appConfig.logo;\n        //Rss.done(\"appConfigChanged\", _params);\n\n      },\n      // type:'mapChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * 地图相关\n       * @param  _params \n       */\n      mapChanged: (_params) => {\n        var newJson = this.utils.reCreateObject(_params.data.appConfig.map);\n\n        if (newJson.itemId && newJson.itemId !== this.appConfig.map.itemId) {\n          if (this.appConfig.map.mapOptions) {\n            this.utils.deleteMapOptions(this.appConfig.map.mapOptions);\n          }\n        }\n        _.extend(this.appConfig.map, newJson);\n        // this.configLoader.addNeedValues(this.appConfig);\n        // this._addDefaultValues(this.appConfig);\n        _params.data.appConfig = this.getAppConfig();\n        // Rss.done(\"appConfigChanged\", _params);\n        this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n      },\n      // type:'themeChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * 主题\n       * @param  _params \n       */\n      themeChanged: (_params) => {\n        this._getAppConfigFromTheme(_params.data).then((config) => {\n          this.appConfig = config;\n          _params.data.appConfig = this.getAppConfig();\n          // Rss.done(\"appConfigChanged\", _params);\n          this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n        });\n      },\n      // type:'layoutChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * 布局\n       * @param  _params \n       */\n      layoutChanged: (_params) => {\n        this._getAppConfigFromTheme(_params.data).then((config) => {\n          this.appConfig = config;\n          _params.data.appConfig = this.getAppConfig();\n          // Rss.done(\"appConfigChanged\", _params);\n          this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n        });\n      },\n      // type:'styleChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{'name':'blue'}\n      // }\n      /**\n       * 样式\n       * @param  _params \n       */\n      styleChanged: (_params) => {\n        this.appConfig.theme.styles = this._genStyles(this.appConfig.theme.styles, _params.data.appConfig.theme.styles[0]);\n        _params.data.appConfig = this.getAppConfig();\n        // Rss.done(\"appConfigChanged\", _params);\n        this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n      },\n      // type:'widgetChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{\n      //     widgetList:[]//变更得widget数组，如果action为add，那这就是添加的widget，其他同理\n      // }\n      // \"action\":\"add\"//delete,modify\n      // }\n      /**\n       * widget\n       * @param  _params \n       */\n      widgetChanged: (_params) => {\n        _params.data.appConfig = this.getAppConfig();\n        // Rss.done(\"appConfigChanged\", _params);\n        this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n      },\n      // type:'widgetPoolChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * \n       * @param  _params \n       */\n      widgetPoolChanged: (_params: any) => {\n        _params.data.appConfig = this.getAppConfig();\n      }\n      // {\n      //     \"type\": \"actionTriggered\",\n      //     \"data\": {\n      //         \"actionInfo\": {\n      //             \"widget\": {\n\n      //             }\n      //             \"isOnScreen\": true,\n      //             \"action\": \"highLight\"\n      //         }\n      //         \"changeData\": {}\n      //     }\n      // }\n      , actionTriggered: (_params) => {\n        var id = \"\",\n          actionInfo = _params.data.actionInfo,\n          widget = actionInfo.widget,\n          cwidget = undefined\n          ;\n        if (widget.id) {\n          //cwidget = this.widgetManager.getWidgetById(widget.id);\n          id = widget.id;\n        }\n        else if (widget.uri || widget.oldUri) {\n          var uri = widget.uri ? widget.uri : widget.oldUri;\n          if (this.globalParams.appInfo.folderUrlPrefix) {\n            uri = this.globalParams.appInfo.folderUrlPrefix + \"/\" + uri;\n          }\n          var arr = this.utils.getConfigElementsByUri(this.appConfig, uri);\n          var _widget = _.find(arr, (w, index) => {\n            return w.isOnScreen === actionInfo.isOnScreen\n          });\n          if (_widget) {\n            // cwidget = this.widgetManager.getWidgetById(_widget.id);\n            id = _widget.id;\n          }\n        }\n        // if (cwidget) {//这只是widget\n        //     cwidget.onAction(actionInfo.action, _params);\n        // }\n        _params.data.eleid = id;\n        //Rss.done(\"appConfigChanged\", _params);\n\n      }\n    }\n    var _params = _.extend({}, params);\n    _preProcessConfig4Design[_params.type].call(this, _params);\n\n  }\n  _genStyles(allStyle, currentStyle) {\n    var styles = [];\n    styles.push(currentStyle);\n    _.forEach(allStyle, function (_style) {\n      if (styles.indexOf(_style) < 0) {\n        styles.push(_style);\n      }\n    });\n    return styles;\n  }\n\n}\n","import { WidgetState, WidgetWindowState, WidgetOpenOptions } from '../models/base-widget';\nimport { Injectable, ComponentFactoryResolver, ComponentRef, EmbeddedViewRef, ApplicationRef, ReflectiveInjector, ChangeDetectorRef } from '@angular/core';\n// import { Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\n// import { ComponentPortal } from '@angular/cdk/portal';\n// import { ComponentLoaderService } from './component-loader.service';\nimport { CommonService } from './common.service';\nimport { WidgetManagerService } from './widget-manager.service';\nimport * as _ from \"lodash\";\nimport { PanelOptions } from '../models/base-panel';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport { EventEmitterService } from './event-emitter.service';\nimport { OnScreenWidgetPanelComponent } from '../components/on-screen-widget-panel/on-screen-widget-panel.component';\nimport { BaseWidgetComponent } from '../components/base-widget/base-widget.component';\n\n/**\n * create by ruir 191014  panelManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class PanelManagerService {\n\n  // private _overlayConnectRef: OverlayRef;\n  // constructor(public overlay: Overlay, public ccc: ComponentLoaderService) {\n\n  // }\n  // globalOverlayPosition = 0;\n  // openPanel(viewContainer: ViewContainerRef) {\n  //   const strategy = this.overlay.position().connectedTo(\n  //     viewContainer.element.nativeElement, {\n  //     originX: 'end',\n  //     originY: 'top',\n  //   } {\n  //     overlayX: 'start',\n  //     overlayY: 'top'\n  //   }\n\n  //   );\n  //   strategy.withLockedPosition(true);\n  //   const config = new OverlayConfig({ positionStrategy: strategy });\n  //   config.scrollStrategy = this.overlay.scrollStrategies.reposition();\n  //   this._overlayConnectRef = this.overlay.create(config);\n  //   this._overlayConnectRef.attach(new ComponentPortal(OnScreenWidgetPanelComponent, viewContainer));\n  // }\n  // closePanel() {\n  //   if (this._overlayConnectRef && this._overlayConnectRef.hasAttached()) {\n  //     this._overlayConnectRef.dispose();\n  //   }\n  // }\n  /**\n   * 所有打开的panel\n   */\n  panels: Array<ComponentRef<OnScreenWidgetPanelComponent>> = [];\n  /**\n   * 当前激活的panel\n   */\n  activePanel: ComponentRef<OnScreenWidgetPanelComponent> = null;\n  map: any = null;\n  view: any = null;\n  /**\n   * \n   */\n  panelContainer: Element;\n  /**\n   * panel容器加载到map容器中\n   */\n  panelAddToMap: boolean = true;\n  /**\n   * \n   * @param commonService \n   * @param widgetManager \n   */\n  constructor(\n    private globalParams: AppGlobalConfig,\n    public commonService: CommonService,\n    public widgetManager: WidgetManagerService,\n    private appRef: ApplicationRef,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private componentLoader: ComponentLoaderService,\n    public eventService: EventEmitterService\n  ) {\n    this.eventService.rss.on(this.eventService._createPanelContainer, (ele) => {\n      this.createPanelContainer(ele); //直接写居然不执行？？？\n    });\n    this.eventService.rss.on(this.eventService._mapPositionChanged, (pos) => {\n      this.onMapResize();\n    });\n  }\n  /**\n   * \n   * @param component \n   * @param params \n   */\n  private create<T>(component: ComponentType<T>, params: any) {\n    let inputs = {};\n    if (params) {\n      inputs = params;\n    }\n    let inputProviders = Object.keys(inputs).map((inputName) => {\n      return { provide: inputName, useValue: inputs[inputName] };\n    });\n\n    const factory = this.componentFactoryResolver.resolveComponentFactory(component);\n    const compRef = factory.create(ReflectiveInjector.resolveAndCreate(inputProviders));\n    return compRef;\n  }\n\n  /**\n   * \n   */\n  private createPanelContainer(eleMapContainer: HTMLElement) {\n    // 容器\n    let container = document.querySelector(\".sspanel_container\");\n    if (container == null) {\n      container = window.document.createElement(\"div\");\n      container.className = \"sspanel_container\";\n      if (this.commonService.isMobileNotTablet()) {\n        //this.componentLoader.viewContainerInHome.element.nativeElement.parentElement.parentElement.parentElement\n        const ionApp = document.querySelector(\"ion-app\");\n        if (ionApp) {\n          ionApp.appendChild(container);\n        } else {\n          window.document.body.appendChild(container);\n        }\n\n      } else {\n        if (this.panelAddToMap) {\n          if (eleMapContainer) {\n            eleMapContainer.appendChild(container);\n          } else {\n            window.document.body.appendChild(container);\n          }\n        } else {\n          window.document.body.appendChild(container);\n        }\n      }\n    }\n    this.panelContainer = container;\n  }\n  /**\n   * \n   * @param panel \n   */\n  private show(panel: ComponentRef<OnScreenWidgetPanelComponent>) {\n    if (!panel.instance.started) {\n      if (panel.instance.isDockable()) {\n        this.componentLoader.showInHome(panel);\n      } else {\n        this.panelContainer.appendChild(this.commonService.getComponentRootNode(panel));\n        // 加入angular脏检查\n        this.appRef.attachView(panel.hostView);\n      }\n    }\n  }\n\n  /**\n   * \n   * @param map 二维地图或三维场景\n   */\n  setMap(map) {\n    if (this.globalParams.mapConfig.is3D === true) {\n      this.view = map;\n    } else {\n      this.map = map;\n    }\n  }\n  /**\n   * 获取panel组件uri\n   * @param widgetConfig \n   */\n  private _findPanelUri(widgetConfig: any) {\n    const _uri_default: string = \"epsgis-on-screen-widget-panel\";\n    if (this.commonService.isMobileNotTablet()) {\n      //检查是否有停靠[左停靠=》drawer，右停靠=》drawerRight，底部停靠=》action] \n      if (widgetConfig.panel) {\n        switch (widgetConfig.panel.dock) {\n          case \"left\": return \"epsgis-mobile-drawer-panel\";\n          case \"right\": return \"epsgis-mobile-drawer-right-panel\";\n          case \"bottom\": return \"epsgis-mobile-action-panel\";\n        }\n        //uri 之前的配置方式，倒是也可以不要\n        switch (widgetConfig.panel.uri) {\n          case \"epsgis-dockable-panel-at-left\":\n            return \"epsgis-mobile-drawer-panel\"\n          case \"epsgis-dockable-panel-at-bottom\":\n            return \"epsgis-mobile-action-panel\";\n          case \"epsgis-dockable-panel-at-right\":\n            return \"epsgis-mobile-drawer-right-panel\";\n        }\n      }\n      if (widgetConfig.mobile && widgetConfig.mobile.mode) {\n        switch (widgetConfig.mobile.mode.toLowerCase()) {\n          case \"drawer\":\n            return \"epsgis-mobile-drawer-panel\";\n          case \"drawerright\":\n            return \"epsgis-mobile-drawer-right-panel\";\n          case \"modal\":\n            return \"epsgis-mobile-modal-panel\";\n          case \"popup\":\n            return \"epsgis-mobile-popup-panel\";\n          case \"popover\":\n            return _uri_default;\n        }\n      }\n      return \"epsgis-mobile-action-panel\";\n    } else {\n      if (widgetConfig.panel) {\n        switch (widgetConfig.panel.dock) {\n          case \"left\": return \"epsgis-dockable-panel-at-left\";\n          case \"right\": return \"epsgis-dockable-panel-at-right\";\n          case \"bottom\": return \"epsgis-dockable-panel-at-bottom\";\n        }\n        if (widgetConfig.panel.uri) {\n          return widgetConfig.panel.uri;\n        }\n      }\n      return _uri_default;\n    }\n  }\n  /**\n   * \n   * @param config \n   * @param widget\n   * @param options \n   */\n  showPanel(config: any, widget?: ComponentRef<BaseWidgetComponent>, options?: PanelOptions, openOptions?: WidgetOpenOptions): Promise<ComponentRef<OnScreenWidgetPanelComponent>> {\n    let def = this.commonService.createPromiseDefer();\n    let pid = config.id + '_panel',\n      panel = this.getPanelById(pid);\n    if (panel) {\n      if (panel.instance.state === WidgetState.closed) {\n        if (openOptions) {\n          panel.instance.reqPara = openOptions.param;\n          if (panel.instance.widget) {\n            panel.instance.widget.instance.reqPara = openOptions.param; //config.reqPara;\n          }\n        }\n        this.openPanel(panel);\n      }\n      def.resolve(panel);\n    } else {\n      try {\n        const _comp = this.componentLoader.findComponent(this._findPanelUri(config));\n        if (!_comp) {\n          const _msg = `not find panel [${config.panel.uri}]`;\n          console.error(_msg);\n          return def.reject(new Error(_msg));\n        }\n        panel = this.componentLoader.createComponent(_comp);\n        if (!options) {\n          options = {};\n          options.id = pid;\n          options.title = config.label;\n        }\n        options.buttonMaximize = !(config.maximizable === false);\n        options.buttonCollapse = !(config.collapsible === false);\n        options.modal = config.modal === true;\n        if (openOptions && openOptions.panel) {\n          options = _.merge(options, openOptions.panel);\n        }\n        panel.instance.label = panel.instance.title = panel.instance.tooltip = config.label;\n        panel.instance.widgetConfig = config;\n        if (this.globalParams.mapConfig.is3D) {\n          panel.instance.view = this.view;\n        } else {\n          panel.instance.map = this.map;\n        }\n        panel.instance.id = pid;\n        panel.instance.gid = config.gid;\n        if (openOptions) {\n          panel.instance.reqPara = openOptions.param;\n        }\n        panel.instance.setOptions(options);\n        panel.instance.setPosition(config.position);\n        if (widget) {\n          panel.instance.setWidget(widget);\n          panel.instance.widget.instance.reqPara = openOptions.param;\n        }\n        console.log('panel [' + pid + '] created.');\n        this.openPanel(panel);\n        this.panels.push(panel);\n        def.resolve(panel);\n      } catch (error) {\n        console.log('create panel error: ' + error + ', panelId: ' + pid);\n        def.reject(error);\n        return;\n      }\n    }\n    return def.promise();\n  }\n  /**\n   * 打开panel（静态内容或网页地址）\n   * @param  panelOptions panel的参数配置\n   *  {\n          id: \"ss_panel\",\n          title: \"SS Panel\",\n          modal: false\n          buttonsPosition: \"right\"\n          draggable: true\n          resizable: true\n          statusBar: false,\n          top: \"auto\",\n          left: \"auto\",\n          right: \"auto\",\n          bottom: \"auto\",\n          height: 200,\n          width: 400,\n          maxHeight: undefined,\n          maxWidth: undefined,\n          minHeight: 100,\n          minWidth: 200,\n          dockSide: \"\", //bottom\n          innerHtml:\"\",//静态内容\n          url:\"\"//设置URL时，嵌套iframe\n      }\n   */\n  /**\n   * \n   * @param panelOptions \n   */\n  showPanelNotWidget(panelOptions: PanelOptions) {\n    let position = {\n      width: panelOptions.width + 'px',\n      height: panelOptions.height + 'px',\n      relativeTo: panelOptions.relativeTo,\n    };\n    let config = {\n      id: panelOptions.id ? panelOptions.id : \"ss_panel\",\n      label: panelOptions.title ? panelOptions.title : \"SS Panel\",\n      position: position,\n      dockSide:panelOptions.dockSide,\n      panel: {\n        uri: 'epsgis-iframe-panel'    \n      },\n      resizable:panelOptions.resizable,\n      draggable:panelOptions.draggable,\n      gid: \"panelOfNotWidget\"\n    };\n    this.closeAllPanelsInGroup(config.gid);\n    let def = this.commonService.createPromiseDefer();\n    let pid = config.id,\n      panel = this.getPanelById(pid);\n    if (panel) {\n      if (panel.instance.state === WidgetState.closed) {\n        this.openPanel(panel);\n      }\n      def.resolve(panel);\n    } else {\n\n      this.showPanel(config, null, panelOptions);\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param panel \n   */\n  closeOtherPanelsInTheSameGroup(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.isDockable()) continue;\n      if (this.panels[i].instance.gid === panel.instance.gid\n        && this.panels[i].instance.id !== panel.instance.id) {\n        this.closePanel(this.panels[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param groupId \n   */\n  closeAllPanelsInGroup(groupId: string) {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.isDockable()) continue;\n      if (this.panels[i].instance.gid === groupId) {\n\n        this.closePanel(this.panels[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  openPanel(panel: ComponentRef<OnScreenWidgetPanelComponent>) {// | string\n    let def = this.commonService.createPromiseDefer();\n    if (!panel.instance.started) {\n      try {\n        this.show(panel);\n      } catch (err) {\n        console.error('fail to startup panel ' + panel.instance.id + '. ' + err.stack);\n      }\n    }\n\n    if (panel.instance.state === WidgetState.opened) {\n      def.resolve(panel);\n      return def.promise();\n    }\n    if (panel.instance.started) {\n      panel.instance.setState(WidgetState.opened);\n      this.playOpenPanelAnimation(panel).then(() => {\n        this._activePanel(panel);\n        def.resolve(panel);\n      });\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param panel \n   */\n  closePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    let def = this.commonService.createPromiseDefer();\n    let _panel: ComponentRef<OnScreenWidgetPanelComponent>;\n    if (typeof panel === 'string') {\n      _panel = this.getPanelById(panel);\n    } else {\n      _panel = <ComponentRef<OnScreenWidgetPanelComponent>>panel;\n    }\n    if (!_panel) {\n      def.reject(new Error(\"panel is null\"));\n      return def.promise();\n    }\n    if (_panel.instance.state === WidgetState.closed) {\n      def.resolve(_panel);\n      return def.promise();\n    }\n    this.playClosePanelAnimation(_panel).then(() => {\n      if (this.activePanel && this.activePanel.instance.id === _panel.instance.id) {\n        this.activePanel.instance.onDeActive();\n        this.activePanel = null;\n      }\n      _panel.instance.setState(WidgetState.closed);\n      def.resolve(_panel);\n    });\n    return def.promise();\n  }\n  /**\n   * \n   * @param panel \n   */\n  minimizePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state === WidgetState.closed) {\n      this.openPanel(panel);\n    }\n\n    panel.instance.setWindowState(WidgetWindowState.minimized);\n\n    try {\n      panel.instance.onMinimize();\n    } catch (err) {\n      console.log(console.error('fail to minimize panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  maximizePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state === WidgetState.closed) {\n      this.openPanel(panel);\n    }\n\n    panel.instance.setWindowState(WidgetWindowState.maximized);\n    try {\n      panel.instance.onMaximize();\n    } catch (err) {\n      console.log(console.error('fail to maximize panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  normalizePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state === WidgetState.closed) {\n      this.openPanel(panel);\n    }\n\n    panel.instance.setWindowState(WidgetWindowState.normal);\n    try {\n      panel.instance.onNormalize();\n    } catch (err) {\n      console.log(console.error('fail to noralize panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param panel \n   * @param state \n   */\n  changeWindowStateTo(panel: ComponentRef<OnScreenWidgetPanelComponent> | string, state: WidgetWindowState) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (state === WidgetWindowState.normal) {\n      this.normalizePanel(panel);\n    } else if (state === WidgetWindowState.minimized) {\n      this.minimizePanel(panel);\n    } else if (state === WidgetWindowState.maximized) {\n      this.maximizePanel(panel);\n    } else {\n      console.log('error state: ' + state);\n    }\n  }\n  /**\n   * \n   * @param pid \n   */\n  getPanelById(pid: string) {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.id === pid) {\n        return this.panels[i];\n      }\n    }\n  }\n  /**\n   * \n   */\n  onWindowResize() {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.state !== WidgetState.closed &&\n        this.panels[i].instance.position.relativeTo !== 'map') {\n        this.panels[i].instance.resize();\n      }\n    }\n  }\n  /**\n   * \n   */\n  onMapResize() {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.isDockable()) {\n        this.panels[i].instance.resize();\n      } else {\n        // if (this.panels[i].instance.state !== WidgetState.closed &&\n        //   this.panels[i].instance.position.relativeTo === 'browser') {\n        //   if (this.panels[i].instance.panelIcon) {\n        //     this.panels[i].instance.resize(this.panels[i].instance.panelIcon.resetPanelPosition());\n        //   } else {\n        //     //咋玩?\n        //   }\n        // }\n      }\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  destroyPanel(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state !== WidgetState.closed) {\n      this.closePanel(panel);\n    }\n    this._removePanel(panel);\n    try {\n      panel.destroy();\n      console.log('destroy panel [' + panel.instance.id + '].');\n    } catch (err) {\n      console.log(console.error('fail to destroy panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   */\n  destroyAllPanels() {\n    let allPanelIds = _.map(this.panels, function (panel) {\n      return panel.instance.id;\n    });\n    _.forEach(allPanelIds, (panelId) => {\n      this.destroyPanel(panelId);\n    });\n    this.panels = [];\n  }\n  /**\n   * \n   * @param panel \n   */\n  playOpenPanelAnimation(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    return Promise.resolve(true);\n  }\n  /**\n   * \n   * @param panel \n   */\n  playClosePanelAnimation(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    return Promise.resolve(true);\n  }\n  /**\n   * \n   * @param panel \n   */\n  getPositionOnMobile(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return {};\n      }\n    }\n    //待开发\n  }\n  /**\n   * \n   * @param panel \n   */\n  _onPanelClick(panel) {\n    this._activePanel(panel);\n  }\n  /**\n   * \n   * @param panel \n   */\n  _activePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === \"string\") {\n      panel = this.getPanelById(panel);\n    }\n    if (!panel) return;\n    if (panel.instance.isDockable()) return;\n    if (this.activePanel) {\n      if (this.activePanel.instance.id === panel[\"instance\"].id) {\n        if (this.activePanel.instance.moveTopOnActive) {\n          this.activePanel.instance.setZIndex(\"active\");\n        }\n        return;\n      }\n      if (this.activePanel.instance.state === WidgetState.active) {\n        this.activePanel.instance.setState(WidgetState.opened);\n        if (this.activePanel.instance.position.zIndex !== 'undefined') {\n          // this.activePanel.instance.setZIndex(this.activePanel.instance.position.zIndex);\n          this.activePanel.instance.setZIndex(\"deactive\");\n        } else {\n          this.activePanel.instance.setZIndex(\"deactive\");\n        }\n        this.activePanel.instance.onDeActive();\n      }\n    }\n\n    let aw = this.widgetManager.activeWidget;\n    if (aw && aw.instance.state === WidgetState.active && aw.instance.getPanel() !== panel) {\n      aw.instance.setState(WidgetState.opened);\n      if (aw.instance.inPanel === false) {\n        if (aw.instance.position.zIndex !== 'undefined') {\n          // aw.instance.setZIndex(aw.instance.position.zIndex);\n          aw.instance.setZIndex(\"deactive\");\n        } else {\n          aw.instance.setZIndex(\"deactive\");\n        }\n      }\n      aw.instance.onDeActive();\n      this.widgetManager.activeWidget = null;\n    }\n\n    this.activePanel = panel;\n    if (this.activePanel.instance.state === WidgetState.active) {\n      return;\n    }\n    this.activePanel.instance.setState(WidgetState.active);\n    if (this.activePanel.instance.moveTopOnActive) {\n      this.activePanel.instance.setZIndex(\"active\");\n    }\n    _.forEach(this.panels, (p, index, arr) => {\n      if (p.instance.isDockable() == false && p.instance.id != this.activePanel.instance.id) {\n        p.instance.setZIndex(\"deactive\");\n      }\n    });\n    this.activePanel.instance.onActive();\n\n  }\n  /**\n   * \n   * @param panel \n   */\n  _removePanel(panel: ComponentRef<OnScreenWidgetPanelComponent>) {\n    let index = this.panels.indexOf(panel);\n    if (index > -1) {\n      this.panels.splice(index, 1);\n    }\n\n    if (this.activePanel && this.activePanel.instance.id === panel.instance.id) {\n      this.activePanel = null;\n    }\n  }\n\n  _onMoveStart(mover) {\n    //\n  }\n  /**\n   * \n   * @param widget \n   */\n  _onWidgetActived(widget) {\n    if (this.activePanel &&\n      this.activePanel.instance.state === WidgetState.active &&\n      widget.getPanel() !== this.activePanel) {\n      this.activePanel.instance.setState(WidgetState.opened);\n\n      if (this.activePanel.instance.position.zIndex !== 'undefined') {\n        //待开发 设置index\n      } else {\n        //待开发 设置index\n      }\n      this.activePanel.instance.onDeActive();\n      this.activePanel = null;\n    }\n  }\n\n  _loadPanelClass(panelUri) {\n\n  }\n\n  _loadThemeI18N(panelUri) {\n\n  }\n  getAllPanels() {\n    return this.panels;\n  }\n}\nexport interface ComponentType<T> {\n  new(...args: any[]): T;\n}\n","import { aspect, TestAspect } from './aspect.service';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { Injectable, Injector, ComponentRef } from '@angular/core';\nimport { UtilsService } from './utils.service';\nimport { HttpReqService } from './request.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport { CommonService } from './common.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport * as _ from 'lodash';\n/**\n * create by ruir 191014  mapManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapManagerService {\n  originMapPosition: any = null;\n  mapPosition: any = null;\n  appConfig: any = null;\n  id: string = \"\";\n  mapDivId: string = '';\n  map: any = null;\n  view: any = null;\n  previousInfoWindow: any = null;\n  mobileInfoWindow: any = null;\n  isMobileInfoWindow: boolean = false;\n  tiandituToken: string = \"95c02448602e3ee0683e07de5e772e96\";//后面放config\n  layerInfosObj: any = null;\n  options: any = null;\n  urlParams: any = null;\n  comRefMap: ComponentRef<any> = null;\n  //componentLoader:ComponentLoaderService;\n  constructor(\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private globalParams: AppGlobalConfig,\n    private eventService: EventEmitterService,\n    private commonService: CommonService,\n    private componentLoader: ComponentLoaderService\n    //private injector: Injector\n  ) {\n    // setTimeout(() => {\n\n    // Promise.resolve().then(() => {\n    //   this.componentLoader = injector.get(ComponentLoaderService);\n    // });\n    // }, 600);\n    this.mapDivId = this.id = this.globalParams.jimuConfig.mapId;\n    this.urlParams = this.globalParams.urlParams;\n  }\n  setAppConfig(config) {\n    this.appConfig = config;\n  }\n  restorePosition() {\n    this.changeMapPosition(this.originMapPosition);\n  }\n  changeMapPosition(position, triggerEvent: boolean = true) {\n    this.mapPosition = _.merge(this.mapPosition, position);\n    this.commonService.setWidgetPosition(this.comRefMap, this.mapPosition);\n    if (this.comRefMap.instance.resize) {\n      this.comRefMap.instance.resize();\n    }\n    if (triggerEvent) {\n      this.eventService.rss.emit(this.eventService._mapPositionChanged, this.mapPosition);\n    }\n  }\n  setMapPosition(position) {\n    this.mapPosition = position;\n    this.originMapPosition = _.cloneDeep(position);\n    //待开发\n  }\n\n  getMapPosition() {\n    return this.mapPosition;\n  }\n  centerAtMap(lgtd, lttd, s) {\n\n  }\n  async showMap() {\n    let mapComp = this.componentLoader.findComponent(this.appConfig.map.uri);\n    if (!mapComp) {\n      console.log(\"没有找到map组件，请检查config.json文件map[uri]配置\");\n      return;\n    }\n    const _path = (typeof mapComp.prototype.getCompInfo === \"function\") ? mapComp.prototype.getCompInfo().path : \"\";\n    let _config, _manifest;\n    if (_path) {\n      try {\n        const _rpath = this.globalParams.widgetRootPath + \"/\" + _path;\n        _manifest = await this.httpService.getJsonFile(_rpath + \"/manifest.json\");\n        // modify by sy 2020/6/22 增加对configPath和config的支持\n        _config = this.appConfig.map.config;\n        if (!_config) {\n          let configPath = this.appConfig.map.configPath || 'config.json';\n          _config = await this.httpService.getJsonFile(_rpath + \"/\" + configPath);\n        }\n        // this.appConfig.map.config = _config;\n        // this.appConfig.map.manifest = _manifest;\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    this.comRefMap = this.componentLoader.createComponentToHome(mapComp);\n    // this.comRefMap.instance.showSettingWhenInPanel=true;\n    this.comRefMap.instance.setProps({\n      appConfig: this.appConfig,\n      config: _config,\n      manifest: _manifest\n    });\n    let _position = _.cloneDeep(this.appConfig.map.position);\n    // if (_position.top) {\n    //   if (_position.height === \"100%\") {\n    //     const _top: number = parseInt(this.commonService.getPxNumber(_position.top.toString()).toString(), 10);\n    //     const h = document.body.clientHeight - _top;\n    //     _position.height = this.commonService.getPx(h);\n    //   }\n    // }\n    this.commonService.setWidgetPosition(this.comRefMap, _position);\n    //aspect.after(this.comRefMap.instance, \"ngOnInit\", this.test);\n    aspect.after(this.comRefMap.instance, \"afterNgOnInit\", ()=>{\n      this.initMap();\n    });\n    this.componentLoader.showInHome(this.comRefMap);\n    //this.comRefMap.instance[\"ngOnInit\"]();\n    // const test = new TestAspect();\n    // aspect.before(test, \"testBefore\", () => {\n    //   console.log(\"testBefore complate\");\n    // });\n    // aspect.after(test, \"testAfter\", () => {\n    //   console.log(\"testAfter complate\");\n    // });\n    // aspect.around(test, \"testAround\", () => {\n    //   console.log(\"testAround complate\");\n    // });\n    // test.testBefore();\n    // test.testAfter();\n    // test.testAround();\n\n  }\n  /**\n   * 销毁地图组件\n   */\n  destoryMap() {\n    if (this.comRefMap) {\n      this.comRefMap.destroy();\n      console.log('destroy map.');\n    }\n  }\n  initMap() {\n    this.comRefMap.instance.initMap().then((map) => {\n      console.log('map loaded.');\n      if (this.globalParams.mapConfig.is3D === true) {\n        this.view = map;\n        this.comRefMap.instance.view = map;\n      } else {\n        this.comRefMap.instance.map = map;\n        this.map = map;\n      }\n      //因有openAtStart的panel，所以先创建panel容器\n      this.eventService.rss.emit(this.eventService._createPanelContainer, this.commonService.getComponentRootNode(this.comRefMap));\n      //再加载地图及组件\n      this.eventService.rss.emit(this.eventService._mapLoaded, map);\n    }, (msg) => {\n      console.log(msg);\n    });\n  }\n}\n","import { MapManagerService } from './map-manager.service';\nimport { WidgetManagerService } from './widget-manager.service';\nimport { PanelManagerService } from './panel-manager.service';\nimport { Injectable, ComponentRef, ChangeDetectorRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { UtilsService } from './utils.service';\nimport { HttpReqService } from './request.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport { CommonService } from './common.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { OnScreenWidgetIconComponent } from '../components/on-screen-widget-icon/on-screen-widget-icon.component';\nimport { aspect } from './aspect.service';\n/**\n * create by ruir 191014  layoutManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class LayoutManagerService {\n\n  map: any = null\n  view: any = null;\n  mapId: string = 'mapContainer';\n  widgetPlaceholders: Array<any> = [];\n  preloadWidgetIcons: Array<ComponentRef<OnScreenWidgetIconComponent>> = [];\n  preloadGroupPanels: Array<any> = [];\n  invisibleWidgetIds: Array<any> = [];\n  id: string = \"\";\n  urlParams: any = \"\";\n  appConfig: any = null;\n  constructor(\n    private panelManager: PanelManagerService,\n    private widgetManager: WidgetManagerService,\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private globalParams: AppGlobalConfig,\n    public eventService: EventEmitterService,\n    private commonService: CommonService,\n    private mapManager: MapManagerService,\n    private componentLoader: ComponentLoaderService\n    // @Inject(forwardRef(() => MapManagerService))\n    // @Optional() private mapManager: MapManagerService\n  ) {\n    this.widgetPlaceholders = [];\n    this.preloadWidgetIcons = [];\n    this.preloadGroupPanels = [];\n    this.invisibleWidgetIds = [];\n\n    this.eventService.rss.on(this.eventService._appConfigLoaded, (config) => this.onAppConfigLoaded(config));\n    this.eventService.rss.on(this.eventService._appConfigChanged, (config) => this.onAppConfigChanged(config));\n    this.eventService.rss.on(this.eventService._mapLoaded, (map) => this.onMapLoaded(map));\n    this.eventService.rss.on(this.eventService._mapChanged, (map) => this.onMapChanged(map));\n    this.eventService.rss.on(this.eventService._viewChanged, (view) => this.onViewChanged(view));\n    //待开发\n  }\n  startup() {\n    console.log(\"layout startup\");\n    this.widgetManager.panelManager = this.panelManager;\n  }\n  resize() {\n    _.forEach(this.widgetManager.getAllWidgets(), (w) => {\n      if (w.instance.inPanel === false) {\n        w.instance.resize();\n      }\n    });\n  }\n  onAppConfigLoaded(config) {\n    this.appConfig = config;\n    if (this.appConfig.theme) {\n      this._loadTheme(this.appConfig.theme);\n    }\n    this._loadMap();\n  }\n  onAppConfigChanged(params) {\n  }\n  _loadMap() {\n    //待开发\n    this.mapManager.setAppConfig(this.appConfig);\n    this.mapManager.setMapPosition(this.appConfig.map.position);\n    this.mapManager.showMap();/*.then(map=>{\n      this.onMapLoaded(map);\n    });*/\n  }\n  onMapLoaded(map) {\n    if (this.globalParams.mapConfig.is3D === true) {\n      this.view = map;\n    } else {\n      this.map = map;\n    }\n    this.panelManager.setMap(map);\n    this.widgetManager.setMap(map);\n    this.widgetManager.setAppConfig(this.appConfig);\n    this._loadPreloadWidgets(this.appConfig);\n  }\n  /**\n   * \n   * @param map \n   */\n  onMapChanged(map) {\n    this.map = map;\n    this.panelManager.map = map;//.setMap(map);\n    this.widgetManager.map = map;//.setMap(map);\n    this.mapManager.map = map;\n    this.preloadWidgetIcons.forEach(icon => {\n      icon.instance.map = this.map;\n      icon.instance.onMapChange(this.map);\n    });\n    this.panelManager.getAllPanels().forEach(panel => {\n      panel.instance.map = this.map;\n      panel.instance.onMapChange(this.map);\n    })\n    this.widgetManager.getAllWidgets().forEach(widget => {\n      widget.instance.map = this.map;\n      widget.instance.onMapChange(this.map);\n    });\n  }\n  /**\n   * \n   * @param view \n   */\n  onViewChanged(view) {\n    this.view = view;\n    this.panelManager.view = view;\n    this.widgetManager.view = view;\n    this.mapManager.view = view;\n    this.preloadWidgetIcons.forEach(icon => {\n      icon.instance.view = this.view;\n      icon.instance.onViewChange(this.view);\n    });\n    this.panelManager.getAllPanels().forEach(panel => {\n      panel.instance.view = this.view;\n      panel.instance.onViewChange(this.view);\n    })\n    this.widgetManager.getAllWidgets().forEach(widget => {\n      widget.instance.view = this.view;\n      widget.instance.onViewChange(this.view);\n    });\n  }\n  _loadPreloadWidgets(appConfig) {\n    console.time('Load widgetOnScreen');\n    let defs = [],\n      def = this.commonService.createPromiseDefer();\n    //加载组件\n    _.each(appConfig.widgetOnScreen.widgets, (widgetConfig, index, list) => {\n      if (widgetConfig.headerMenu === true) {\n        return true;\n      }\n      if (widgetConfig.visible === false || (this.commonService.isMobile() && typeof widgetConfig.mobile !== \"undefined\" && widgetConfig.mobile.visible === false)) {\n        this.invisibleWidgetIds.push(widgetConfig.id);\n      } else {\n        defs.push(this._loadPreloadWidget(widgetConfig, appConfig));\n      }\n    });\n    //加载分组中的部件 未实现\n    // _.forEach(appConfig.widgetOnScreen.groups, function(groupConfig) {\n    //     defs.push(this._loadPreloadGroup(groupConfig, appConfig));\n    //   }, this);\n\n    Promise.all(defs).then(() => {\n      console.timeEnd('Load widgetOnScreen');\n      //Rss.one(\"preloadWidgetsLoaded\")\n      //closeProgressBar();\n      //组件加载完成发送事件，脏检测 add yly 20200327\n      this.eventService.rss.emit(this.eventService._checkChangeDetector, defs);\n      this._hideLoading();\n    }).catch(() => {\n      // closeProgressBar();\n      this._hideLoading();\n    });\n\n    return def.promise();\n  }\n  _hideLoading() {\n    //待开发\n  }\n  _doPostLoad() {\n\n  }\n  /**\n   * \n   * @param widgetConfig \n   * @param appConfig \n   */\n  async _loadPreloadWidget(widgetConfig, appConfig) {\n    let def = this.commonService.createPromiseDefer();\n    //创建组件\n    if (!widgetConfig || !widgetConfig.uri) {\n      console.error(`widget [${widgetConfig.label}] no uri`);\n      return def.resolve(null);\n    }\n    //let compRef = await this.widgetManager.createWidget(widgetConfig);\n\n    if (((this.globalParams.jimuConfig.isDesignMode === true && this.urlParams.config && this.globalParams.appInfo.folderUrlPrefix) || appConfig.mode === 'config') && !widgetConfig.uri) {\n      //ruir 190718 解决占位符得高宽变成了panel得高宽问题 （获取下manifest信息）\n      if (widgetConfig.oldUri) {\n        let _tempUrl = widgetConfig.oldUri;\n        if (_tempUrl.startsWith(\"/\")) {\n          _tempUrl = _tempUrl.substring(1);\n        }\n        widgetConfig.amdFolder = _tempUrl.substring(0, _tempUrl.toLowerCase().lastIndexOf(\"/widget\")) + \"/\";\n        widgetConfig.folderUrl = this.globalParams.appInfo.folderUrlPrefix + \"/\" + widgetConfig.amdFolder;\n        this.widgetManager.loadWidgetManifest(widgetConfig).then((widgetConfigNew) => {\n          let placeholder = this._createPreloadWidgetPlaceHolder(widgetConfigNew);\n          def.resolve(placeholder);\n        });\n      } else {\n        let placeholder = this._createPreloadWidgetPlaceHolder(widgetConfig);\n        def.resolve(placeholder);\n      }\n      return def.promise();\n    }\n    let iconDijit;\n    if (widgetConfig.inPanel || widgetConfig.closeable) {\n      //创建图标\n      iconDijit = this._createPreloadWidgetIcon(widgetConfig);\n      def.resolve(iconDijit);\n    } else {\n      /*\n      this.widgetManager.openWidget(compRef);\n      compRef.instance.setPosition(widgetConfig.position);\n      this.commonService.setWidgetPosition(compRef, widgetConfig.position);\n      widgetConfig.loaded = true;\n      def.resolve(compRef);\n      */\n      //加载组件\n      this.widgetManager.loadWidget(widgetConfig).then((compRef) => {\n        this.widgetManager.showWidget(compRef);\n        compRef.instance.setPosition(widgetConfig.position);\n        this.commonService.setWidgetPosition(compRef, widgetConfig.position);\n        widgetConfig.loaded = true;\n        compRef.instance.configId = widgetConfig.id;\n        def.resolve(compRef);\n      }).catch((err) => {\n        console.error(err);\n      });\n\n\n    }\n\n    return def.promise();\n  }\n  _createPreloadWidgetPlaceHolder(widgetConfig) {\n\n  }\n  /**\n   * 创建图标\n   * @param widgetConfig 组件配置\n   * @param component 组件\n   */\n  _createPreloadWidgetIcon(widgetConfig, component?: any) {\n    let iconDijit = null;\n    let inMap: boolean = false;\n    if (widgetConfig.position.relativeTo === \"browser\") {\n      iconDijit = this.componentLoader.createComponentToHome(OnScreenWidgetIconComponent);\n    } else {\n      inMap = true;\n      iconDijit = this.componentLoader.createComponentToMap(OnScreenWidgetIconComponent);\n    }\n\n    iconDijit.instance.setProps({\n      compRef: component,\n      appConfig: this.appConfig,\n      map: this.globalParams.mapConfig.is3D ? this.view : this.map,\n      widgetConfig: widgetConfig\n    });\n    aspect.before(iconDijit.instance, 'destroy', () => {\n      this._onDestroyIcon(iconDijit);\n    });\n\n    this.preloadWidgetIcons.push(iconDijit);\n    if (inMap) {\n      this.componentLoader.showInMap(iconDijit);\n    } else {\n      this.componentLoader.showInHome(iconDijit);\n    }\n    let _ele = this.commonService.getComponentRootNode(iconDijit);\n    if (_ele) {\n      _ele.classList.add(\"jimu-widget-onscreen-icon\");\n      _ele.title = widgetConfig.label;\n    }\n    let _position = _.cloneDeep(widgetConfig.position);\n    // _position.height = 32;\n    // _position.width = 32;\n    //ruir 20210315 删除高宽属性，要不然样式里修改后会因这里设置里高宽导致无效\n    delete _position.height;\n    delete _position.width;\n    this.commonService.setWidgetPosition(iconDijit, _position);\n\n    // iconDijit.startup();\n    //图标位置显示后自动打开\n    if (widgetConfig.openAtStart === true) {\n      iconDijit.instance.switchToOpen();\n    }\n\n    return iconDijit;\n  }\n  /**\n   * \n   * @param placeholder \n   */\n  _onDestroyPlaceholder(placeholder) {\n    let index = 0, idx = -1;\n    for (; index < this.widgetPlaceholders.length; index++) {\n      let ci = this.widgetPlaceholders[index];\n      if (placeholder.id === ci.id || placeholder.configId === ci.configId) {\n        idx = index;\n        break;\n      }\n    }\n    if (idx >= 0) {\n      this.widgetPlaceholders.splice(idx, 1);\n    }\n    console.log('destroy placeholder [' + placeholder.id + '].');\n  }\n  /**\n   * 销毁图标之前\n   * @param  icon \n   */\n  _onDestroyIcon(icon) {\n    //_版本低了，没有findIndex函数\n    // let idx = _.findIndex(this.preloadWidgetIcons, function (ci) { return icon.id === ci.id; }, this);\n    let index = 0, idx = -1;\n    for (; index < this.preloadWidgetIcons.length; index++) {\n      let ci = this.preloadWidgetIcons[index];\n      if (icon.instance.id === ci.instance.id) {\n        idx = index;\n        break;\n      }\n    }\n    if (idx >= 0) {\n      this.preloadWidgetIcons.splice(idx, 1);\n    }\n    console.log('destroy icon [' + icon.instance.id + '].');\n  }\n  _loadPreloadGroup(groupJson, appConfig) {\n    let def = this.commonService.createPromiseDefer();\n    if (!appConfig.mode && (!groupJson.widgets || groupJson.widgets.length === 0)) {\n      def.resolve(null);\n      return def;\n    }\n    //待开发\n    return def.promise();\n  }\n  _getThemeCommonStyleId(theme) {\n    return 'theme_' + theme.name + '_style_common';\n  }\n  _getThemeCurrentStyleId(theme) {\n    return 'theme_' + theme.name + '_style_' + theme.styles[0];\n  }\n  _loadTheme(theme) {\n    //待开发\n  }\n  _loadThemeCommonStyle(theme) {\n    //待开发\n  }\n  _removeThemeCommonStyle(theme) {\n    //待开发\n  }\n  _loadThemeCurrentStyle(theme) {\n    //待开发\n  }\n  _removeThemeCurrentStyle(theme) {\n    //待开发\n  }\n\n  _destroyPreloadWidgetIcons() {\n    // _.each(this.preloadWidgetIcons, function (icon) {\n    //     icon.destroy();\n    // }, this);\n    //ruir 190719:这里需要从后往前循环，因icon.destroy();中会删除元素\n    for (let index = this.preloadWidgetIcons.length - 1; index >= 0; index--) {\n      const icon = this.preloadWidgetIcons[index];\n      icon.destroy();\n    }\n    this.preloadWidgetIcons = [];\n  }\n\n  _destroyOffPanelWidgets() {\n    _.forEach(this.widgetManager.getOffPanelWidgets(), (widget) => {\n      this.widgetManager.destroyWidget(widget);\n    });\n  }\n  _destroyWidgetPlaceholders() {\n    // _.forEach(this.widgetPlaceholders, function (placeholder) {\n    //     placeholder.destroy();\n    // }, this);\n    //ruir 190719:这里需要从后往前循环，因placeholder.destroy();中会删除元素\n    for (let index = this.widgetPlaceholders.length - 1; index >= 0; index--) {\n      const placeholder = this.widgetPlaceholders[index];\n      placeholder.destroy();\n    }\n    this.widgetPlaceholders = [];\n  }\n  _destroyPreloadPanels() {\n    this.panelManager.destroyAllPanels();\n  }\n  _destroyPreloadGroupPanels() {\n    // _.forEach(this.preloadGroupPanels, function (panel) {\n    //   this.panelManager.destroyPanel(panel);\n    // }, this);\n    this.preloadGroupPanels = [];\n  }\n  /**\n   * 主题改变\n   * @param  appConfig \n   */\n  _onThemeChange(appConfig) {\n    //待开发\n  }\n  /**\n  * 布局改变\n  * @param  appConfig \n  */\n  _onLayoutChange2(appConfig) {\n    //待开发\n  }\n  /**\n   * 布局改变\n   * @param  appConfig \n   */\n  _onLayoutChange(appConfig) {\n    this._onLayoutChange2(appConfig);\n\n  }\n  /**\n   * 样式改变\n   * @param  appConfig \n   */\n  _onStyleChange(appConfig) {\n    // 待开发\n\n  }\n  _changeMapPosition(appConfig) {\n\n    //待开发\n  }\n  /**\n   * 图层、map位置等改变\n   * @param  appConfig \n   */\n  _onMapChange(appConfig) {\n\n    //待开发\n  }\n  /**\n   * 菜单改变\n   * @param  appConfig \n   */\n  _onWidgetPoolChange(appConfig: any, changeData?: any) {\n\n  }\n  /**\n   * \n   * @param  appConfig \n   * @param  action\n   * @param  eleid 元素id\n   */\n  _onActionTriggerd(appConfig, action, eleid) {\n    let panelIcon = _.find(this.preloadWidgetIcons, (w, index) => {\n      return w.instance.configId === eleid;\n    });\n    if (panelIcon) {\n      panelIcon.instance.onAction(action,\"TODO\");\n    }\n    // let widget = this.widgetManager.getWidgetById(eleid);//从panel打开的widget也会被高亮\n    let widget = _.find(this.widgetManager.getOnScreenOffPanelWidgets(), (w) => {\n      return (w.instance.id === eleid);\n    });\n    if (widget) {\n      widget.instance.onAction(action,\"TODO\");\n    }\n    let placeholder = _.find(this.widgetPlaceholders, (w, index) => {\n      return w.configId === eleid;\n    });\n    if (placeholder) {\n      placeholder.onAction(action,\"TODO\");\n    }\n  }\n  /**\n   * 组件改变\n   * @param  appConfig \n   * @param  changeData  \n   * @param  action add、delete、edit \n   */\n  _onWidgetChange(appConfig, changeData, action) {\n    let changedWidgets = changeData.widgetList;\n    if (!changedWidgets || changedWidgets.length <= 0) {\n      return;\n    }\n    let _self = this;\n    function loadWidget(widgetConfig, appConfig, isIcon, state) {\n      if (widgetConfig.headerMenu === true) {\n        return true;\n      }\n      if (widgetConfig.visible === false) {\n        _self.invisibleWidgetIds.push(widgetConfig.id);\n        return true;\n      }\n      _self._loadPreloadWidget(widgetConfig, appConfig).then(function (iconNew) {\n        if (isIcon) {\n          if (widgetConfig.uri && state === 'opened') {\n            iconNew.onClick();\n          }\n        }\n      });\n    }\n    function process(wc) {\n      let uri = this.globalParams.appInfo.folderUrlPrefix + \"/\" + (wc.oldUri ? wc.oldUri : wc.uri);\n      let icon = _.find(_self.preloadWidgetIcons, function (w) { return wc.id === w.instance.configId || uri === w.instance.uri });\n      let state = undefined, widgetConfig = undefined;\n      if (icon) {\n        state = icon.instance.state, widgetConfig = icon.instance.widgetConfig;\n        if (icon.instance.widget) {\n          icon.instance.widget.destroy();\n        }\n        icon.destroy();\n        if (action === \"delete\") {//删除\n          _self._createPreloadWidgetPlaceHolder(widgetConfig);\n        }\n        else if (action === \"modify\") {//编辑配置\n          loadWidget(widgetConfig, appConfig, true, state);\n        }\n      } else {\n        let widget = _.find(_self.widgetManager.getOnScreenOffPanelWidgets(), function (w) {\n          return (wc.id === w.instance.configId) || uri === w.instance.uri;\n        }, this);\n        if (widget) {\n          widgetConfig = widget.instance.widgetConfig;\n          widget.destroy();\n          if (action === \"delete\") {//删除\n            _self._createPreloadWidgetPlaceHolder(widgetConfig);\n          }\n          else if (action === \"modify\") {//编辑配置\n            loadWidget(widgetConfig, appConfig, false, '');\n          }\n        } else {\n          //删除组件后添加或占位符添加\n          let eleConfig = this.utils.getConfigElementById(appConfig, wc.id);\n          if (eleConfig) {\n            let placeholder = _.find(_self.widgetPlaceholders, function (w) {\n              return (wc.id === w.configId || wc.id === w.id);\n            }, this);\n            if (placeholder) {\n              placeholder.destroy();\n            }\n            if (eleConfig.loaded === true) {\n              delete eleConfig.amdFolder;\n              delete eleConfig.checked;\n              delete eleConfig.folderUrl;\n              delete eleConfig.hasConfig;\n              delete eleConfig.hasLocale;\n              delete eleConfig.hasSetting;\n              delete eleConfig.hasSettingLocale;\n              delete eleConfig.hasSettingPage;\n              delete eleConfig.hasSettingStyle;\n              delete eleConfig.hasSettingUIFile;\n              delete eleConfig.hasStyle;\n              delete eleConfig.hasUIFile;\n              delete eleConfig.hasVersionManager;\n              delete eleConfig.icon;\n              delete eleConfig.inPanel;\n              delete eleConfig.isController;\n              delete eleConfig.isHeadMenu;\n              //delete eleConfig.isWidget;\n              delete eleConfig.keepConfigAfterMapSwithched;\n              delete eleConfig.loaded;\n              delete eleConfig.manifest;\n              delete eleConfig.supportMultiInstance;\n              delete eleConfig.thumbnail;\n              delete eleConfig.uri;\n              delete eleConfig.version;\n            }\n\n            {\n              widgetConfig = _.extend(eleConfig, wc);\n              this.configManager.configLoader._processAfterTryLoad(appConfig);\n              _self.widgetManager.loadWidgetManifest(widgetConfig).then((config) => {\n                loadWidget(widgetConfig, appConfig, false, '');\n              }).catch(function (err) {\n                console.log(\"loadWidgetManifest err\", err);\n              });\n\n            }\n          } else {\n            _.forEach(_self.invisibleWidgetIds, (widgetId) => {\n              if (widgetId === wc.id && wc.visible !== false) {\n                widgetConfig = this.utils.getConfigElementById(appConfig, wc.id);\n                _self._loadPreloadWidget(widgetConfig, appConfig);\n                let i = _self.invisibleWidgetIds.indexOf(widgetConfig.id);\n                _self.invisibleWidgetIds.splice(i, 1);\n              }\n            });\n          }\n        }\n      }\n\n    }\n    _.forEach(changedWidgets, process);\n  }\n\n}","import { Injectable } from '@angular/core';\n/**\n * create by ruir 191014  widgetPlaceHolder.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetPlaceHolderService {\n\n  constructor() { }\n}\n","import { Subject } from 'rxjs';\nimport { SSModalAPI } from './modal-options';\nimport { SsModalOptions } from './modal-types';\nimport { ModalContainerComponent } from './modal-container/modal-container.component';\nimport { EventEmitter, ComponentRef } from '@angular/core';\n// import { OverlayRef } from '@angular/cdk/overlay';\n\nexport const enum SsModalState {\n  OPEN,\n  CLOSING,\n  CLOSED\n}\n\nexport const enum SsTriggerAction {\n  CANCEL = 'cancel',\n  OK = 'ok'\n}\nexport function isPromise<T>(obj: any): obj is Promise<T> {\n  return !!obj && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\nexport class SsModalRef<T = any, R = any> implements SSModalAPI<T, R> {\n  containerInstance: ModalContainerComponent;\n  componentRef: ComponentRef<T>;\n  componentInstance: T | null = null;\n  result?: R;\n  state: SsModalState = SsModalState.OPEN;\n  afterClose: Subject<R> = new Subject();\n  afterOpen: Subject<void> = new Subject();\n\n  private closeTimeout?: number;\n\n  // constructor(private overlayRef: OverlayRef,private config: SsModalOptions, public containerInstance: ModalContainerComponent) {\n  //   containerInstance.cancelTriggered.subscribe(() => this.trigger(SsTriggerAction.CANCEL));\n  //   containerInstance.okTriggered.subscribe(() => this.trigger(SsTriggerAction.OK));\n  //   containerInstance.onCloseTreggered.subscribe(() => {\n  //     this.afterClose.next(this.result);\n  //     this.afterClose.complete();\n  //     if (config.nzAfterClose instanceof EventEmitter) {\n  //       config.nzAfterClose.emit(this.result);\n  //     }\n  //     this.componentInstance = null;\n  //     //dispose\n  //   });\n  // }\n  constructor(private config: SsModalOptions, private containerRef: ComponentRef<ModalContainerComponent>) {\n    this.containerInstance = containerRef.instance;\n    this.containerInstance.cancelTriggered.subscribe(() => this.trigger(SsTriggerAction.CANCEL));\n    this.containerInstance.okTriggered.subscribe(() => this.trigger(SsTriggerAction.OK));\n    this.containerInstance.onCloseTreggered.subscribe(() => {\n      this.afterClose.next(this.result);\n      this.afterClose.complete();\n      if (config.afterClose instanceof EventEmitter) {\n        config.afterClose.emit(this.result);\n      }\n      this.containerRef = null;\n      this.containerInstance = null;\n      this.componentRef = null;\n      this.componentInstance = null;\n      //dispose\n    });\n  }\n  getContentComponent(): T {\n    return this.componentInstance as T;\n  }\n\n  getElement(): HTMLElement {\n    return this.containerInstance.getNativeElement();\n  }\n\n  destroy(result?: R): void {\n    this.close(result);\n  }\n\n  triggerOk(): void {\n    this.trigger(SsTriggerAction.OK);\n  }\n\n  triggerCancel(): void {\n    this.trigger(SsTriggerAction.CANCEL);\n  }\n\n  /**\n   * Open the modal.\n   * @deprecated Opened when create, this method is useless.\n   * @breaking-change 10.0.0\n   */\n  open(): void {\n    // noop\n  }\n\n  close(result?: R): void {\n    this.result = result;\n    // 可关闭 \n    // this.overlayRef.detachBackdrop();\n    // this.overlayRef.dispose();\n    this.componentRef.destroy();\n    this.containerRef.destroy();\n    this.state = SsModalState.CLOSED;\n    //关闭事件传递结果\n    this.afterClose.next(this.result);\n  }\n\n  updateConfig(config: SsModalOptions): void {\n    Object.assign(this.config, config);\n    this.containerInstance.cdr.markForCheck();\n  }\n\n  getState(): SsModalState {\n    return this.state;\n  }\n\n  getConfig(): SsModalOptions {\n    return this.config;\n  }\n\n  getBackdropElement(): HTMLElement | null {\n    // return this.overlayRef.backdropElement;\n    return null;\n  }\n\n  private trigger(action: SsTriggerAction): void {\n    const trigger = { ok: this.config.onOk, cancel: this.config.onCancel }[action];\n    const loadingKey = { ok: 'okLoading', cancel: 'cancelLoading' }[action] as 'okLoading' | 'cancelLoading';\n    const loading = this.config[loadingKey];\n    if (loading) {\n      return;\n    }\n    if (trigger instanceof EventEmitter) {\n      trigger.emit(this.getContentComponent());\n    } else if (typeof trigger === 'function') {\n      const result = trigger(this.getContentComponent());\n      const caseClose = (doClose: boolean | void | {}) => doClose !== false && this.close(doClose as R);\n      if (isPromise(result)) {\n        this.config[loadingKey] = true;\n        const handleThen = (doClose: boolean | void | {}) => {\n          this.config[loadingKey] = false;\n          this.closeWhitResult(doClose);\n        };\n        result.then(handleThen).catch(handleThen);\n      } else {\n        caseClose(result);\n      }\n    }\n  }\n\n  private closeWhitResult(result: any): void {\n    if (result !== false) {\n      this.close(result);\n    }\n  }\n}","import { TemplateRef, EventEmitter, Type, ViewContainerRef } from '@angular/core';\n\n\nexport type OnClickCallback<T> = (instance: T) => (false | void | {}) | Promise<false | void | {}>;\n\nexport type SsButtonType = 'primary' | 'default' | 'dashed' | 'danger' | 'link' | null;\nexport type SsButtonShape = 'circle' | 'round' | null;\nexport type SsButtonSize = 'large' | 'default' | 'small';\nexport type SsModalTypes = 'default' | 'confirm'; // Different modal styles we have supported\n\nexport type SsConfirmType = 'confirm' | 'info' | 'success' | 'error' | 'warning'; // Subtypes of Confirm Modal\n\nexport interface SsStyleObjectLike {\n  [key: string]: string;\n}\n\nconst noopFun = () => void 0;\n\nexport class SsModalOptions<T = any, R = any> {\n  closable?: boolean = true;\n  okLoading?: boolean = false;\n  okDisabled?: boolean = false;\n  cancelDisabled?: boolean = false;\n  cancelLoading?: boolean = false;\n  noAnimation?: boolean = false;\n  autofocus?: 'ok' | 'cancel' | 'auto' | null = 'auto';\n  mask?: boolean = true;\n  maskClosable?: boolean = true;\n  keyboard?: boolean = true;\n  zIndex?: number = 1000;\n  top?: number | string = 50;\n  width?: number | string = 520;\n  height?: number | string = 400;\n  closeIcon?: string | TemplateRef<void> = 'close';\n  okType?: SsButtonType = 'primary';\n  modalType?: SsModalTypes = 'default';\n  onCancel?: EventEmitter<T> | OnClickCallback<T> = noopFun;\n  onOk?: EventEmitter<T> | OnClickCallback<T> = noopFun;\n  componentParams?: Partial<T>;\n  maskStyle?: SsStyleObjectLike;\n  bodyStyle?: SsStyleObjectLike;\n  wrapClassName?: string;\n  className?: string;\n  styles?: object;\n  title?: string | TemplateRef<{}>;\n  footer?: string | TemplateRef<{}> | Array<SsModalButtonOptions<T>> | null; // Default Modal ONLY\n  cancelText?: string | null;\n  okText?: string | null;\n  content?: string | TemplateRef<any> | Type<T>;\n  closeOnNavigation?: boolean = true;\n  viewContainerRef?: ViewContainerRef;\n\n  /**\n   * Reset the container element.\n   * @deprecated Not supported.\n   * @breaking-change 10.0.0\n   */\n  getContainer?: HTMLElement;\n\n  /**\n   * 模板时用\n   */\n  afterOpen?: EventEmitter<void>;\n  afterClose?: EventEmitter<R>;\n\n  /**\n   * Confirm\n   */\n  iconType?: string = 'question-circle';\n  fullScreen?: boolean = false;\n  /**\n   * 标题栏（图标）按钮\n   */\n  titleBarButtons?: Array<SsModalTitleBarButtonOptions<T>> | null;\n}\n\nexport interface SsModalButtonOptions<T = any> {\n  label: string;\n  type?: SsButtonType;\n  shape?: SsButtonShape;\n  ghost?: boolean;\n  size?: SsButtonSize;\n  autoLoading?: boolean; // Default: true, indicate whether show loading automatically while onClick returned a Promise\n  // [NOTE] \"componentInstance\" will refer to the component's instance when using Component\n  show?: boolean | ((this: SsModalButtonOptions<T>, contentComponentInstance?: T) => boolean);\n  loading?: boolean | ((this: SsModalButtonOptions<T>, contentComponentInstance?: T) => boolean); // This prop CAN'T use with autoLoading=true\n  disabled?: boolean | ((this: SsModalButtonOptions<T>, contentComponentInstance?: T) => boolean);\n  onClick?(this: SsModalButtonOptions<T>, contentComponentInstance?: T): any | Promise<any>;\n  [key: string]: any;\n}\n/**\n * 图标按钮选项\n */\nexport interface SsModalTitleBarButtonOptions<T = any> {\n  /**\n   * 对应ngzorro的type或阿里图标\n   */\n  icon: string;\n  theme?: string;\n  spin?: boolean;\n  /**\n   * theme 为“twotone”时可用\n   */\n  twotoneColor?: string;\n  /**\n   * 是否为阿里图标\n   */\n  isIconfont?: boolean;\n  rotate?: number;\n  title?: string;\n  /**\n   * 自定义样式，建议不要设置color，全局样式默认会设置为白色\n   */\n  style?: string;\n  onClick?(this: SsModalTitleBarButtonOptions<T>, contentComponentInstance?: T): any | Promise<any>;\n}","import { SsModalOptions } from './modal-types';\nimport { SSModalComponent } from './modal.component';\n\nexport function applyConfigDefaults(config: SsModalOptions, defaultOptions: SsModalOptions): SsModalOptions {\n  return { ...defaultOptions, ...config };\n}\n\n\nexport function setContentInstanceParams<T>(instance: T, params: Partial<T> | undefined): void {\n  Object.assign(instance, params);\n}\n\nexport function getConfigFromComponent(component: SSModalComponent): SsModalOptions {\n  const {\n    mask,\n    maskClosable,\n    closable,\n    okLoading,\n    okDisabled,\n    cancelDisabled,\n    cancelLoading,\n    keyboard,\n    noAnimation,\n    content,\n    componentParams,\n    footer,\n    getContainer,\n    zIndex,\n    width,\n    wrapClassName,\n    className,\n    styles,\n    title,\n    closeIcon,\n    maskStyle,\n    bodyStyle,\n    okText,\n    cancelText,\n    okType,\n    iconType,\n    modalType,\n    onOk,\n    onCancel,\n    afterOpen,\n    afterClose\n  } = component;\n  return {\n    mask,\n    maskClosable,\n    closable,\n    okLoading,\n    okDisabled,\n    cancelDisabled,\n    cancelLoading,\n    keyboard,\n    noAnimation,\n    content,\n    componentParams,\n    footer,\n    getContainer,\n    zIndex,\n    width,\n    wrapClassName,\n    className,\n    styles,\n    title,\n    closeIcon,\n    maskStyle,\n    bodyStyle,\n    okText,\n    cancelText,\n    okType,\n    iconType,\n    modalType,\n    onOk,\n    onCancel,\n    afterOpen,\n    afterClose\n  };\n}\n","<div class=\"ssmodal_overlay\" #ssmodal_overlay>\n  <div class=\"ssmodal\" #ssmodal id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div class=\"ssmodal_titlebar ssmodal_titlebar_draggable\" #ssmodal_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"ssmodal_titlebar_text\"><span class=\"ssmodal_titlebar_text_span\">{{options.title}}</span></div>\n      <!--icon button-->\n      <div class=\"ssmodal_titlebar_custom_buttons\" *ngIf=\"config.titleBarButtons\" ss-modal-titlebar-button [modalRef]=\"modalRef\"></div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"ssmodal_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n    <div class=\"ssmodal_statusbar\" *ngIf=\"showStatusBar\">\n      <div class=\"ssmodal_statusbar_content\">\n        <div *ngIf=\"config.footer !== null\" ss-modal-footer [modalRef]=\"modalRef\" (cancelTriggered)=\"onCloseClick()\"\n          (okTriggered)=\"onOkClick()\"></div>\n      </div>\n      <!-- <div class=\"ssmodal_statusbar_handle\"> -->\n        <div class=\"ssmodal_resizer ssmodal_resizer_bottom\"\n          (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'bottom'});\"></div>\n      <!-- </div> -->\n    </div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_top\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_left\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_right\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_topleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'top'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_topright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'top'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_bottomleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'bottom'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_bottomright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'bottom'});\"></div>\n  </div>\n</div>\n<div class=\"ssmodal_minplaceholder\"></div>","import { Component, OnInit, Renderer2, ElementRef, EventEmitter, ChangeDetectorRef, NgZone, ComponentRef, EmbeddedViewRef, ViewChild } from '@angular/core';\nimport { BasePanelComponent } from '../../base-panel/base-panel.component';\nimport { SsModalRef } from '../modal-ref';\nimport { SsModalOptions } from '../modal-types';\nimport { ServiceInjector } from '../../../services/service-injector';\nimport { WidgetState, WidgetWindowState, WidgetPosition } from '../../../models/base-widget';\n// import { CdkPortalOutlet, ComponentPortal } from '@angular/cdk/portal';\nexport function throwNzModalContentAlreadyAttachedError(): never {\n  throw Error('Attempting to attach modal content after content is already attached');\n}\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\nimport { CommonService } from '../../../services/common.service';\nimport { PanelManagerService } from '../../../services/panel-manager.service';\nimport { WidgetManagerService } from '../../../services/widget-manager.service';\nimport { AppGlobalConfig } from '../../../models/app-config';\nimport { MapManagerService } from '../../../services/map-manager.service';\n@ComponentRegister({\n  uri: 'epsgis-modal-container',\n  path: \"components/modal/modal-container\"\n})\n@Component({\n  selector: 'epsgis-modal-container',\n  templateUrl: './modal-container.component.html',\n  styleUrls: ['./modal-container.component.scss'],\n})\nexport class ModalContainerComponent extends BasePanelComponent implements OnInit {\n\n  animationStateChanged = new EventEmitter<AnimationEvent>();\n  containerClick = new EventEmitter<void>();\n  cancelTriggered = new EventEmitter<void>();\n  okTriggered = new EventEmitter<void>();\n  document: Document;\n  modalRef!: SsModalRef;\n  isStringContent: boolean = false;\n  private elementFocusedBeforeModalWasOpened: HTMLElement | null = null;\n  private latestMousedownTarget: HTMLElement | null = null;\n  private oldMaskStyle: { [key: string]: string } | null = null;\n\n  onCloseTreggered = new EventEmitter<any>();\n  @ViewChild(\"ssmodal_overlay\", { static: true }) sspanelOverlay: ElementRef;\n  @ViewChild(\"ssmodal_titlebar\", { static: true }) sspanel_titlebar: ElementRef;\n  @ViewChild(\"ssmodal\", { static: true }) sspanel: ElementRef;\n  @ViewChild('ssmodal', { static: true }) modalElementRef!: ElementRef<HTMLDivElement>;\n  // portalOutlet!: CdkPortalOutlet;\n  showStatusBar: boolean = false;\n  defaultZIndex = 110;\n  constructor(\n    protected elementRef: ElementRef,\n    public cdr: ChangeDetectorRef,\n    protected render: Renderer2,\n    protected zone: NgZone,\n    public config: SsModalOptions,\n    // private serviceInjecter: ServiceInjector,\n    public commonService:CommonService,\n    public panelManager:PanelManagerService,\n    public widgetManager:WidgetManagerService,\n    public globalParams:AppGlobalConfig,\n    public mapManager:MapManagerService\n  ) {\n    super(render, cdr);\n    // this.setServiceInjector(this.serviceInjecter);\n    this.document = document;\n    this.isStringContent = typeof config.content === 'string';\n    this.setContainer();\n    if (this.config.footer != null) {\n      this.showStatusBar = true;\n    } else if (this.config.okDisabled !== true) {\n      this.showStatusBar = true;\n    } else if (this.config.cancelDisabled !== true) {\n      this.showStatusBar = true;\n    }\n  }\n  ngOnInit() {\n    if (this.commonService.isMobile()) {\n      this.widgetConfig = {\n        position: new WidgetPosition(0, 0, 0, 0, \"100%\", \"100%\", \"\", \"unset\")\n      };\n    } else {\n      let left = 0;\n      if (this.config.width === \"100%\") {\n        left = 0;\n      } else if (this.config.width === \"auto\") {\n\n      } else if (typeof this.config.width === \"number\") {\n        left = (window.innerWidth - this.config.width) / 2;\n      } else if (typeof this.config.width === \"string\") {\n        let x = parseInt(this.config.width, 10);\n        left = (window.innerWidth - x) / 2;\n      }\n      this.widgetConfig = {\n        position: {\n          top: this.config.top,\n          left: left,\n          width: this.config.width,\n          height: this.config.height,\n          zIndex: this.config.zIndex || this.defaultZIndex\n        }\n      };\n    }\n    let _index = this.defaultZIndex - 1;\n    if (this.config.zIndex >= 1) {\n      _index = this.config.zIndex - 1;\n    }\n    //如果设置了zIndex，则将背景div的zindex减1。解决背景无法遮盖高于它的div\n    this.render.setStyle(this.sspanelOverlay.nativeElement, 'z-index', _index);\n    this.setOptions({\n      buttonMaximize: true,\n      buttonClose: true,\n      buttonCollapse: false,\n      modal: this.config.mask,\n      title: this.config.title.toString(),\n      minHeight: 100,\n      minWidth: 200\n    });\n    this.label = this.tooltip = this.config.title.toString();\n    if (this.globalParams.mapConfig.is3D) {\n      this.view = this.mapManager.view;\n    } else {\n      this.map = this.mapManager.map;\n    }\n    this.id = \"ss-modal\";\n    this.gid = \"ss-modal\";\n\n    this.setPosition(this.widgetConfig.position);\n    this.state = WidgetState.opened;\n    this.windowState = WidgetWindowState.normal;\n\n    super.ngOnInit();\n  }\n  ngAfterViewInit() {\n    this.modalRef.afterOpen.next();\n    if (this.config.fullScreen) {\n      this._maximize();\n    }\n  }\n  onClose() {\n    this.onCloseTreggered.emit();\n  }\n  onMousedown(e: MouseEvent): void {\n    this.latestMousedownTarget = (e.target as HTMLElement) || null;\n  }\n\n  onMouseup(e: MouseEvent): void {\n    if (e.target === this.latestMousedownTarget && e.target === this.elementRef.nativeElement) {\n      this.containerClick.emit();\n    }\n    this.latestMousedownTarget = null;\n  }\n\n  onCloseClick(): void {\n    this.cancelTriggered.emit();\n  }\n\n  onOkClick(): void {\n    this.okTriggered.emit();\n  }\n\n  //  attach2<T>(portal: ComponentPortal<T>){\n  //   if (this.portalOutlet.hasAttached()) {\n  //     throwNzModalContentAlreadyAttachedError();\n  //   }\n  //   this.savePreviouslyFocusedElement();\n  //   this.setModalTransformOrigin();\n  //   return this.portalOutlet.attachComponentPortal(portal);\n  //  }\n  attachComponentPortal<T>(compRef: ComponentRef<T>): ComponentRef<T> {\n    this.savePreviouslyFocusedElement();\n    this.setModalTransformOrigin();\n    this.widgetContainer.insert(compRef.hostView);\n    return compRef;\n  }\n\n  attachTemplatePortal<C>(): EmbeddedViewRef<C> {\n    //TODO \n    return null;\n  }\n\n  getNativeElement(): HTMLElement {\n    return this.elementRef.nativeElement;\n  }\n\n  private animationDisabled(): boolean {\n    // return this.config.nzNoAnimation || this.animationType === 'NoopAnimations';\n    return false;\n  }\n\n  private setModalTransformOrigin(): void {\n    const modalElement = this.modalElementRef.nativeElement;\n    if (this.elementFocusedBeforeModalWasOpened as HTMLElement) {\n      const previouslyDOMRect = this.elementFocusedBeforeModalWasOpened!.getBoundingClientRect();\n\n      const lastPosition = this.commonService.getElementBounds(this.elementFocusedBeforeModalWasOpened);\n      const x = lastPosition.left + previouslyDOMRect.width / 2;\n      const y = lastPosition.top + previouslyDOMRect.height / 2;\n      const transformOrigin = `${x - modalElement.offsetLeft}px ${y - modalElement.offsetTop}px 0px`;\n      this.render.setStyle(modalElement, 'transform-origin', transformOrigin);\n    }\n  }\n\n  private savePreviouslyFocusedElement(): void {\n    if (this.document) {\n      this.elementFocusedBeforeModalWasOpened = this.document.activeElement as HTMLElement;\n      if (this.elementRef.nativeElement.focus) {\n        Promise.resolve().then(() => this.elementRef.nativeElement.focus());\n      }\n    }\n  }\n\n  private trapFocus(): void {\n\n  }\n\n  private restoreFocus(): void {\n\n  }\n\n  private setEnterAnimationClass(): void {\n\n  }\n\n  private setExitAnimationClass(): void {\n\n  }\n\n  private cleanAnimationClass(): void {\n    if (this.animationDisabled()) {\n      return;\n    }\n\n  }\n\n  private bindBackdropStyle(): void {\n  }\n\n  /**\n   * Set the container element.\n   * @deprecated Not supported.\n   * @breaking-change 10.0.0\n   */\n  private setContainer(): void {\n    const container = this.getContainer();\n    if (container) {\n      this.render.appendChild(container, this.elementRef.nativeElement);\n    }\n  }\n\n  /**\n   * Reset the container element.\n   * @deprecated Not supported.\n   * @breaking-change 10.0.0\n   */\n  private resetContainer(): void {\n    const container = this.getContainer();\n    if (container) {\n    }\n  }\n\n  private getContainer(): HTMLElement | null {\n    // const { nzGetContainer } = this.config;\n    // const container = typeof nzGetContainer === 'function' ? nzGetContainer() : nzGetContainer;\n    // return container instanceof HTMLElement ? container : null;\n    return this.config.getContainer;\n  }\n\n  onAnimationDone(event: AnimationEvent): void {\n\n  }\n\n  onAnimationStart(event: AnimationEvent): void {\n\n  }\n\n  startExitAnimation(): void {\n    this.state = WidgetState.closed;\n    this.cdr.markForCheck();\n  }\n  /**\n  * 关闭panel\n  * @param event \n  */\n  closePanel(event) {\n    this.cancelTriggered.emit();\n  }\n}\n","import { Injectable, OnDestroy, Injector, SkipSelf, Optional, TemplateRef, ComponentFactoryResolver, ReflectiveInjector, ApplicationRef, ComponentRef, Type } from '@angular/core';\nimport { SsModalRef } from '../components/modal/modal-ref';\nimport { Subject, Observable, defer } from 'rxjs';\nimport { startWith } from 'rxjs/operators';\nimport { SsModalOptions } from '../components/modal/modal-types';\nimport { setContentInstanceParams, applyConfigDefaults } from '../components/modal/utils';\nimport { PortalInjector, ComponentPortal } from '@angular/cdk/portal';\nimport { ModalContainerComponent } from '../components/modal/modal-container/modal-container.component';\nimport { ComponentType } from './services';\nimport { CommonService } from './common.service';\nimport { ServiceInjector } from './service-injector';\nimport { OverlayRef, OverlayConfig, Overlay } from '@angular/cdk/overlay';\nimport { findComponentInfo } from '../decorator/component-register.decorator';\ntype ContentType<T> = ComponentType<T> | TemplateRef<T> | string;\n\n/**\n * 模态对话框 \n * create by 20200508\n */\n@Injectable({ providedIn: 'root' })\nexport class ModalManagerService implements OnDestroy {\n  private openModalsAtThisLevel: SsModalRef[] = [];\n  private readonly afterAllClosedAtThisLevel = new Subject<void>();\n  factories = new Map();\n  factoriesArray: Array<any> = null;\n  get openModals(): SsModalRef[] {\n    return this.parentModal ? this.parentModal.openModals : this.openModalsAtThisLevel;\n  }\n\n  get _afterAllClosed(): Subject<void> {\n    const parent = this.parentModal;\n    return parent ? parent._afterAllClosed : this.afterAllClosedAtThisLevel;\n  }\n\n  readonly afterAllClose: Observable<void> = defer(() =>\n    this.openModals.length ? this._afterAllClosed : this._afterAllClosed.pipe(startWith(undefined))\n  ) as Observable<void>;\n  constructor(\n    private overlay: Overlay,\n    private injector: Injector,\n    @Optional() @SkipSelf() private parentModal: ModalManagerService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private appRef: ApplicationRef,\n    private commonService: CommonService\n  ) {\n    this.factories = this.componentFactoryResolver[\"_factories\"];\n    if (this.factories) {\n      this.factoriesArray = Array.from(this.factories);\n    }\n  }\n\n  readonly modalContainerClass: string = \"ssmodal_container\";\n\n  modalContainer: Element;\n\n  private createModalContainer() {\n    // 容器\n    let container = document.querySelector(this.modalContainerClass);\n    if (container == null) {\n      container = window.document.createElement(\"div\");\n      container.className = this.modalContainerClass;\n      window.document.body.appendChild(container);\n    }\n    this.modalContainer = container;\n  }\n  /**\n   * \n   * @param config \n   */\n  create<T, R = any>(config: SsModalOptions<T, R>): SsModalRef<T, R> {\n    return this.open<T, R>(config.content as ComponentType<T>, config);\n  }\n  /**\n   * \n   */\n  closeAll(): void {\n    this.closeModals(this.openModals);\n  }\n  private attachModalContainer2(overlayRef: OverlayRef, config: SsModalOptions): ModalContainerComponent {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n    const injector = new PortalInjector(\n      userInjector || this.injector,\n      new WeakMap<any, any>([\n        [OverlayRef, overlayRef],\n        [SsModalOptions, config]\n      ])\n    );\n\n    const ContainerComponent = ModalContainerComponent;\n\n    const containerPortal = new ComponentPortal<ModalContainerComponent>(ContainerComponent, config.viewContainerRef, injector);\n    const containerRef = overlayRef.attach<ModalContainerComponent>(containerPortal);\n\n    return containerRef.instance;\n  }\n  /**\n   * \n   * @param componentOrTemplateRef \n   * @param config \n   */\n  private open<T, R>(componentOrTemplateRef: ContentType<T>, config?: SsModalOptions): SsModalRef<T, R> {\n    const configMerged = applyConfigDefaults(config || {}, new SsModalOptions());\n    const modalContainerRef = this.attachModalContainer(configMerged);\n    const modalRef = this.attachModalContent<T, R>(componentOrTemplateRef, configMerged, modalContainerRef);\n    modalContainerRef.instance.modalRef = modalRef;\n    this.openModals.push(modalRef);\n    // const overlayRef = this.createOverlay(configMerged);\n    // const modalContainer = this.attachModalContainer2(overlayRef, configMerged);\n    // const modalRef = this.attachModalContent2<T, R>(componentOrTemplateRef, modalContainer, overlayRef, configMerged);\n    // modalContainer.modalRef = modalRef;\n    modalRef.afterClose.subscribe(() => this.removeOpenModal(modalRef));\n    return modalRef;\n  }\n  /**\n   * \n   * @param modalRef \n   */\n  private removeOpenModal(modalRef: SsModalRef): void {\n    const index = this.openModals.indexOf(modalRef);\n    if (index > -1) {\n      this.openModals.splice(index, 1);\n\n      if (!this.openModals.length) {\n        this._afterAllClosed.next();\n      }\n    }\n  }\n  /**\n   * \n   * @param dialogs \n   */\n  private closeModals(dialogs: SsModalRef[]): void {\n    let i = dialogs.length;\n    while (i--) {\n      dialogs[i].close();\n      if (!this.openModals.length) {\n        this._afterAllClosed.next();\n      }\n    }\n  }\n  // private createOverlay(config: SsModalOptions): OverlayRef {\n  //   const overlayConfig = new OverlayConfig({\n  //     hasBackdrop: true,\n  //     scrollStrategy: this.overlay.scrollStrategies.block(),\n  //     positionStrategy: this.overlay.position().global(),\n  //     disposeOnNavigation: config.nzCloseOnNavigation\n  //   });\n\n  //   if (config.nzMask) {\n  //     overlayConfig.backdropClass = \"ant-modal-mask\";\n  //   }\n\n  //   return this.overlay.create(overlayConfig);\n  // }\n\n  // private attachModalContent2<T, R>(\n  //   componentOrTemplateRef: ContentType<T>,\n  //   modalContainer: ModalContainerComponent,\n  //   overlayRef: OverlayRef,\n  //   config: SsModalOptions<T>\n  // ): SsModalRef<T, R> {\n  //   const modalRef = new SsModalRef<T, R>(overlayRef, config, modalContainer);\n\n  //   if (componentOrTemplateRef instanceof TemplateRef) {\n\n  //   } else if (componentOrTemplateRef!=null && typeof componentOrTemplateRef !== 'string') {\n  //     const injector = this.createInjector<T, R>(modalRef, config);\n  //     const contentRef = modalContainer.attach2<T>(\n  //       new ComponentPortal(componentOrTemplateRef, config.nzViewContainerRef, injector)\n  //     );\n  //     setContentInstanceParams<T>(contentRef.instance, config.nzComponentParams);\n  //     modalRef.componentInstance = contentRef.instance;\n  //   }\n  //   return modalRef;\n  // }\n  /**\n   * \n   * @param config \n   */\n  private attachModalContainer(config: SsModalOptions): ComponentRef<ModalContainerComponent> {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n    const injector = new PortalInjector(\n      userInjector || this.injector,\n      new WeakMap<any, any>([\n        [SsModalOptions, config]\n      ])\n    );\n    this.createModalContainer();\n    // const ContainerComponent =\n    //   config.nzModalType === 'confirm'\n    //       NzModalConfirmContainerComponent:\n    //       ModalContainerComponent;\n    let inputs = {\n      config: config\n    };\n    let inputProviders = Object.keys(inputs).map((inputName) => {\n      return { provide: inputName, useValue: inputs[inputName] };\n    });\n    const ContainerComponent = ModalContainerComponent;\n    const factory = this.componentFactoryResolver.resolveComponentFactory(ContainerComponent);\n    const injectorc = Injector.create({ providers: inputProviders,parent:injector });\n    //const containerRef = factory.create(ReflectiveInjector.resolveAndCreate(inputProviders, injector));\n    const containerRef = factory.create(injectorc);\n    this.modalContainer.appendChild(this.commonService.getComponentRootNode(containerRef));\n    // 加入angular脏检查\n    this.appRef.attachView(containerRef.hostView);\n    return containerRef;\n  }\n\n  findComponent(name: string): Type<any> {\n    let comp = null;\n    if (this.factories) {\n      if (!this.factories || this.factories.size <= 0) return null;\n      let item = this.factoriesArray.find((value, index: number, arr) => {\n        return value[1].selector.toLowerCase() === name.toLowerCase() || value[0].name.toLowerCase() === name.toLocaleLowerCase();\n      });\n      if (item) {\n        comp = item[0];\n      }\n    } else {\n      //ng9及以上\n      const compInfo = findComponentInfo(name);\n      if (compInfo) {\n        return compInfo.component;\n      }\n    }\n    return comp;\n\n  }\n  /**\n   * \n   * @param componentOrTemplateRef \n   * @param config \n   * @param modalContainer\n   */\n  private attachModalContent<T, R>(\n    componentOrTemplateRef: ContentType<T>,\n    config: SsModalOptions<T>,\n    modalContainerRef: ComponentRef<ModalContainerComponent>,\n  ): SsModalRef<T, R> {\n    const modalRef = new SsModalRef<T, R>(config, modalContainerRef);\n\n    if (componentOrTemplateRef instanceof TemplateRef) {\n      // TODO \n\n    } else if (componentOrTemplateRef && typeof componentOrTemplateRef !== 'string') {\n      let inputs = {};\n      if (config.componentParams) {\n        inputs = config.componentParams;\n      }\n      let inputProviders = Object.keys(inputs).map((inputName) => {\n        return { provide: inputName, useValue: inputs[inputName] };\n      });\n      let component = componentOrTemplateRef;\n      if (this.factories && !this.factories.get(componentOrTemplateRef)) {\n        component = this.findComponent(componentOrTemplateRef.name);\n      }\n      const factory = this.componentFactoryResolver.resolveComponentFactory(component);\n      const injector = Injector.create({ providers: inputProviders, parent: this.createInjector(modalRef, config) });\n      // const compRef = factory.create(ReflectiveInjector.resolveAndCreate(inputProviders, this.createInjector(modalRef, config)));\n      const compRef = factory.create(injector);\n      setContentInstanceParams<T>(compRef.instance, config.componentParams);\n      modalContainerRef.instance.attachComponentPortal<T>(compRef);\n      modalRef.componentInstance = compRef.instance;\n      modalRef.componentRef = compRef;\n    }\n    return modalRef;\n  }\n\n  private createInjector<T, R>(modalRef: SsModalRef<T, R>, config: SsModalOptions<T>): PortalInjector {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n    const injectionTokens = new WeakMap<any, any>([[SsModalRef, modalRef]]);\n\n    return new PortalInjector(userInjector || this.injector, injectionTokens);\n  }\n\n\n  ngOnDestroy(): void {\n    this.closeModals(this.openModalsAtThisLevel);\n    this.afterAllClosedAtThisLevel.complete();\n  }\n}","import { Injectable } from '@angular/core';\nimport { RequestResultModel } from '../models/http/request.result';\nimport { HttpReqService } from './request.service';\n\n/**\n * Setting服务\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class SettingService {\n  readonly API_SAVE_SETTING: string = \"api/setting/content\";\n  constructor(public req: HttpReqService) { }\n  /**\n   * 获取配置文件内容\n   * @param filePath 配置文件路径\n   */\n  getConfigContent(filePath: string) {\n    return this.req.getJsonFile(filePath);\n  }\n  /**\n   * 保存配置文件\n   * @param data \n   */\n  saveConfig(data: ISettingSaveModel): Promise<RequestResultModel> {\n    if (!data) {\n      return Promise.resolve({\n        success: false,\n        msg: \"data is null\",\n        data: null\n      });\n    }\n    if (!data.filePath) {\n      return Promise.resolve({\n        success: false,\n        msg: \"data.filePath is null\",\n        data: null\n      });\n    }\n    return this.req.postNoAuth(this.API_SAVE_SETTING, data, this.req.config.settingApiUrl, true);\n  }\n}\nexport interface ISettingSaveModel {\n  filePath: string;\n  content: string;\n}\n\n","import { Injectable } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { AppGlobalConfig, defaultAppGlobalConfig } from '../models/app-config';\r\nimport { LayoutManagerService } from './layout-manager.service';\r\nimport { WidgetPlaceHolderService } from './widget-place-holder.service';\r\nimport { PanelManagerService } from './panel-manager.service';\r\nimport { MapManagerService } from './map-manager.service';\r\nimport { ConfigManagerService } from './config-manager.service';\r\nimport { ConfigLoaderService } from './config-loader.service';\r\nimport { WidgetManagerService } from './widget-manager.service';\r\nimport { CommonService } from './common.service';\r\nimport { UtilsService } from './utils.service';\r\nimport { HttpReqService } from './request.service';\r\nimport { ModalManagerService } from './modal-manager.service';\r\nimport { ComponentLoaderService } from './component-loader.service';\r\nimport { SettingService } from './setting.service';\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ServiceInjector {\r\n\r\n    constructor(\r\n        public config: AppGlobalConfig,\r\n        public utils: UtilsService,\r\n        public commonService: CommonService,\r\n        public httpService: HttpReqService,\r\n        public configLoader: ConfigLoaderService,\r\n        public configManager: ConfigManagerService,\r\n        public mapManager: MapManagerService,\r\n        public panelManager: PanelManagerService,\r\n        public widgetManager: WidgetManagerService,\r\n        public widgetPlaceHolder: WidgetPlaceHolderService,\r\n        public layoutManager: LayoutManagerService,\r\n        public jsEventManager: EventManager,\r\n        private route: ActivatedRoute,\r\n        public componentManager: ComponentLoaderService,\r\n        public modalManaer: ModalManagerService,\r\n        public settingService: SettingService\r\n        // @Inject(forwardRef(() => ConfigLoaderService))\r\n        // public configLoader: ConfigLoaderService,\r\n\r\n        // @Inject(forwardRef(() => ConfigManagerService))\r\n        // public configManager: ConfigManagerService,\r\n\r\n        // @Inject(forwardRef(() => PanelManagerService))\r\n        // public panelManager: PanelManagerService,\r\n\r\n        // @Inject(forwardRef(() => WidgetManagerService))\r\n        // public widgetManager: WidgetManagerService,\r\n\r\n        // @Inject(forwardRef(() => WidgetPlaceHolderService))\r\n        // public widgetPlaceHolder: WidgetPlaceHolderService,\r\n\r\n        // @Inject(forwardRef(() => MapManagerService))\r\n        // public mapManager: MapManagerService,\r\n\r\n        // @Inject(forwardRef(() => LayoutManagerService))\r\n        // public layoutManager: LayoutManagerService\r\n    ) {\r\n        if (!config) {\r\n            config = Object.assign({}, defaultAppGlobalConfig);\r\n        }\r\n        //url中参数改变时，重新给全局参数中的urlParams赋值\r\n        this.route.queryParams.subscribe(params => {\r\n            this.config.urlParams = Object.assign(this.config.urlParams, params);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * create by ruir  js 、css加载器\r\n */\r\nclass SimpleLoaderService {\r\n    /**\r\n     * 单例\r\n     */\r\n    private static _instance: SimpleLoaderService = null;\r\n    private constructor() {\r\n\r\n    }\r\n    static getInstance() {\r\n        if (!this._instance) {\r\n            this._instance = new SimpleLoaderService();\r\n        }\r\n        return this._instance;\r\n    }\r\n    /**\r\n     * 类型判断\r\n     * @param type \r\n     * @param obj \r\n     */\r\n    private is(type: string, obj: any) {\r\n        let clas = Object.prototype.toString.call(obj).slice(8, -1);\r\n        return obj !== undefined && obj !== null && clas === type;\r\n    }\r\n    /**\r\n     * 是否数组\r\n     * @param item \r\n     */\r\n    private isArray(item: any) {\r\n        return this.is(\"Array\", item);\r\n    }\r\n\r\n    /**\r\n     * 获取url扩展名\r\n     * @param url \r\n     */\r\n    private getExtension(url: string) {\r\n        url = url || \"\";\r\n        let items = url.split(\"?\")[0].split(\".\");\r\n        return items[items.length - 1].toLowerCase();\r\n    }\r\n    /**\r\n     * 创建元素\r\n     * @param config \r\n     */\r\n    private createElement(config: any) {\r\n        let e = document.createElement(config.element);\r\n        for (let i in config) {\r\n            if (i !== 'element' && i !== 'appendTo') {\r\n                e[i] = config[i];\r\n            }\r\n        }\r\n        let root = document.getElementsByTagName(config.appendTo)[0];\r\n        return (typeof root.appendChild(e) === 'object');\r\n    }\r\n    /**\r\n     * \r\n     * @param url \r\n     * @param onLoad \r\n     */\r\n    private elementLoaded(url: string, onLoad?: Function) {\r\n        if (onLoad) {\r\n            onLoad(url);\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param url \r\n     * @param thisObj \r\n     * @param onLoad 加载事件\r\n     */\r\n    private elementReadyStateChanged(url: string, thisObj: any, onLoad?: Function) {\r\n        if (thisObj.readyState === 'loaded' || thisObj.readyState === 'complete') {\r\n            this.elementLoaded(url, onLoad);\r\n        }\r\n    }\r\n    /**\r\n     * 加载css\r\n     * @param url css url\r\n     * @param onLoad 加载事件\r\n     */\r\n    private loadCss(url: string, onLoad?: Function) {\r\n        let result = this.createElement({\r\n            element: 'link',\r\n            rel: 'stylesheet',\r\n            type: 'text/css',\r\n            href: url,\r\n            onload: () => {\r\n                this.elementLoaded(url, onLoad);\r\n            },\r\n            appendTo: 'head'\r\n        });\r\n\r\n        //对于不触发加载事件的浏览器\r\n        // Safari在加载样式时更新document.stylesheets。\r\n        let ti = setInterval(() => {\r\n            let styles = document.styleSheets;\r\n            for (let i = 0; i < styles.length; i++) {\r\n                // console.log(styles[i].href);\r\n                if (styles[i].href &&\r\n                    styles[i].href.substr(styles[i].href.indexOf(url), styles[i].href.length) === url) {\r\n                    clearInterval(ti);\r\n                    this.elementLoaded(url, onLoad);\r\n                }\r\n            }\r\n        }, 500);\r\n\r\n        return result;\r\n    }\r\n    /**\r\n     * 加载js\r\n     * @param url js url\r\n     * @param onLoad 加载事件\r\n     */\r\n    private loadJs(url: string, onLoad?: Function) {\r\n        let result = this.createElement({\r\n            element: 'script',\r\n            type: 'text/javascript',\r\n            onload: () => {\r\n                this.elementLoaded(url, onLoad);\r\n            },\r\n            onreadystatechange: () => {\r\n                this.elementReadyStateChanged(url, this, onLoad);\r\n            },\r\n            src: url,\r\n            appendTo: 'body'\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 加载JavaScript、Css资源（多个）\r\n     * @param ress 资源路径数组\r\n     * @param onOneBeginLoad 单个资源开始加载回调事件\r\n     * @param onOneLoad 单个资源加载完成回调事件\r\n     * @param onLoad 所有资源加载完成回调事件\r\n     */\r\n    loadResources(ress: string[], onOneBeginLoad?: Function, onOneLoad?: Function, onLoad?: Function) {\r\n        let loaded = [];\r\n        /**\r\n         * 检测是否已经触发过onload事件\r\n         * @param url \r\n         */\r\n        const checkHaveLoaded = (url) => {\r\n            for (let i = 0; i < loaded.length; i++) {\r\n                if (loaded[i] === url) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        /**\r\n         * onload\r\n         * @param url \r\n         */\r\n        const _onOneLoad = (url) => {\r\n            //避免多次出发onload事件\r\n            if (checkHaveLoaded(url)) {\r\n                return;\r\n            }\r\n            loaded.push(url);\r\n            if (onOneLoad) {\r\n                onOneLoad(url, loaded.length);\r\n            }\r\n            if (loaded.length === ress.length) {\r\n                if (onLoad) {\r\n                    onLoad();\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < ress.length; i++) {\r\n            this.loadResource(ress[i], onOneBeginLoad, _onOneLoad);\r\n        }\r\n\r\n    }\r\n    /**\r\n     * 加载JavaScript、Css资源（一个）\r\n     * @param url 资源路径\r\n     * @param onBeginLoad 开始加载回调事件\r\n     * @param onLoad 资源加载完成回调事件\r\n     */\r\n    loadResource(url: string, onBeginLoad?: Function, onLoad?: Function) {\r\n        if (onBeginLoad) {\r\n            onBeginLoad(url);\r\n        }\r\n        let type = this.getExtension(url);\r\n        if (type.toLowerCase() === 'css') {\r\n            this.loadCss(url,onLoad);\r\n        } else {\r\n            this.loadJs(url,onLoad);\r\n        }\r\n\r\n    }\r\n\r\n}\r\nexport const simpleLoader = SimpleLoaderService.getInstance();\r\n\r\n//test\r\n// simpleLoader.loadResource(\"assets/smlib/2d/libs/moment.js/moment.min.js\", () => {\r\n//   console.log(\"simpleLoader.loadResource OnBeginLoad\");\r\n// }, () => {\r\n//   console.log(\"simpleLoader.loadResource OnLoad\");\r\n//   console.log(`moment.now():${window[\"moment\"].now()}`);\r\n// });\r\n/*\r\nsimpleLoader.loadResources([\r\n    \"assets/smlib/3d/js/china.js\",\r\n    \"assets/smlib/3d/js/config.js\",\r\n    \"assets/smlib/3d/js/echarts.js\"\r\n], (url) => {\r\n    console.log(`simpleLoader.loadResources [${url}]开始加载`);\r\n}, (url) => {\r\n    console.log(`simpleLoader.loadResources [${url}]加载完成`);\r\n}, () => {\r\n    console.log(`simpleLoader.loadResources 所有加载完成`);\r\n});\r\n*/\r\n","import { Injectable } from '@angular/core';\nimport { HttpReqService, ObjectPara } from './request.service';\nimport { TokenModel, RequestResultModel, CurrentLoginUser } from '../models/http/request.result';\n/**\n * create by ruir 20200224\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n    private _tokenKey = \"\";\n    private _userKey = \"__current_user\";\n    private _currentUser: CurrentLoginUser = null;\n    constructor(private req: HttpReqService) {\n        this._tokenKey = this.req.getTokenKey();\n    }\n    /**\n     * \n     * @param key \n     * @param data \n     */\n    private saveInfo2Local(key: string, data: any) {\n        if (window.sessionStorage) {//localStorage\n            sessionStorage.setItem(key, JSON.stringify(data));\n        } else {\n            console.log(\"浏览器不支持sessionStorage\");\n        }\n    }\n    /**\n     * \n     * @param key \n     */\n    private getInfoFromLocal(key: string): string {\n        if (window.sessionStorage) {\n            return sessionStorage.getItem(key);\n        } else {\n            console.log(\"浏览器不支持sessionStorage\");\n        }\n        return \"\";\n    }\n    /**\n     * \n     * @param data \n     */\n    private saveToken(data: TokenModel) {\n        this.saveInfo2Local(this._tokenKey, data);\n        this.req.setAccessToken(data.access_token);\n    }\n    /**\n     * 获取本地保存的token\n     */\n    getLocalToken(): TokenModel {\n        let str = this.getInfoFromLocal(this._tokenKey);\n        if (str != \"\") {\n            return JSON.parse(str);\n        }\n        return null;\n    }\n    /**\n     * 刷新token\n     */\n    refreshToken(refresh_token: string): Promise<RequestResultModel> {\n        return new Promise<RequestResultModel>((resolve, reject) => {\n            this.req.get('epsoffice/token/refresh', { \"refresh_token\": refresh_token }).then(result => {\n                if (result.success) {\n                    this.saveToken(result.data);\n                }\n                resolve(result);\n            }).catch(err => reject(err));\n        });\n    }\n    /**\n     * 登录\n     * @param username \n     * @param password \n     */\n    userLogin(username: string, password: string): Promise<RequestResultModel> {\n        return new Promise((resolve, reject) => {\n            this.req.post(\"epsoffice/user/login\", { \"username\": username, \"password\": password })\n                .then(result => {\n                    if (result.success) {\n                        this._currentUser = result.data;\n                        this.saveInfo2Local(this._userKey, result.data);\n                        this.saveToken(result.data.token);\n                    }\n                    resolve(result);\n                }).catch(reject);\n        });\n    }\n\n    /**\n     * 验证token\n     */\n    checkLogin(): Promise<RequestResultModel> {\n        return this.req.get(\"epsoffice/user/login/validate\");\n    }\n    /**\n     * \n     */\n    logout() {\n        return new Promise<boolean>((resove, reject) => {\n            this.req.post(\"epsoffice/user/logout\").then(result => {\n                if (result.success) {\n                    this.removeToken();\n                }\n                resove(result.success);\n            }).catch(err => {\n                console.error(err);\n                resove(false);\n            });\n        });\n    }\n    removeToken() {\n        this._currentUser = null;\n        this.req.setAccessToken(\"\");\n        sessionStorage.removeItem(this._tokenKey);\n        sessionStorage.removeItem(this._userKey);\n    }\n    /**\n     * 远程获取用户信息\n     */\n    getRemoteUser(): Promise<CurrentLoginUser> {\n        return new Promise<CurrentLoginUser>((resolve, reject) => {\n            this.req.get(\"epsoffice/user/login/info\").then(result => {\n                if (result.success) {\n                    this._currentUser = result.data;\n                    this.saveInfo2Local(this._userKey, result.data);\n                    this._currentUser.token = this.getLocalToken();\n                    resolve(result.data);\n                } else {\n                    console.error(result.msg);\n                    resolve(null);\n                }\n            }).catch(err => {\n                console.error(err);\n                resolve(null);\n            });\n        });\n    }\n    /**\n     * 获取当前用户信息\n     */\n    getCurrentUser(): CurrentLoginUser {\n        if (this._currentUser) {\n            return this._currentUser;\n        }\n        const str = this.getInfoFromLocal(this._userKey);\n        if (str) {\n            const _user = JSON.parse(str);\n            this._currentUser = _user;\n            this._currentUser.token = this.getLocalToken();\n        }\n        return this._currentUser;\n    }\n}\n","export class GISAuthService {\n  static message: string = \"请获取开发授权！\";\n  static authtype: string = \"开发版\";\n  static encryptCode: string = \"\";\n  static decrypt(str: string, pwd?: string | number | boolean) {\n    try {\n      if (str == '') {\n        return '';\n      }\n      if (!pwd || pwd == '') {\n        pwd = 'sunway_webgis_auth_code';\n      }\n      pwd = encodeURIComponent(pwd);\n      if (str == undefined || str.length < 8) {\n        return '';\n      }\n      if (pwd == undefined || pwd.length <= 0) {\n        return '';\n      }\n      var prand: any = '';\n      for (var i = 0, len = pwd.length; i < len; i += 1) {\n        prand += pwd.charCodeAt(i).toString();\n      }\n      var sPos = Math.floor(prand.length / 5);\n      var mult = parseInt(prand.charAt(sPos) + prand.charAt(sPos * 2) + prand.charAt(sPos * 3) +\n        prand.charAt(sPos * 4) + prand.charAt(sPos * 5));\n      var incr = Math.round(pwd.length / 2);\n      var modu = Math.pow(2, 31) - 1;\n      var salt = parseInt(str.substring(str.length - 8, str.length), 16);\n      str = str.substring(0, str.length - 8);\n      prand += salt;\n      while (prand.length > 10) {\n        prand = (parseInt(prand.substring(0, 10)) +\n          parseInt(prand.substring(10, prand.length))).toString();\n      }\n      if (this.isIE()) {\n        prand++;\n      }\n      prand = (mult * prand + incr) % modu;\n      var encChr: any = '';\n      var encStr: any = '';\n      for (var i = 0, len = str.length; i < len; i += 2) {\n        encChr = parseInt(str.substring(i, i + 2), 16) ^ Math.floor((prand / modu) * 255);\n        encStr += String.fromCharCode(encChr);\n        prand = (mult * prand + incr) % modu;\n      }\n      return decodeURIComponent(encStr);\n    } catch (error) {\n      return \"\";\n    }\n  }\n\n  static validateAuth(encryptCode: string) {\n    setTimeout(() => {\n      this.doValidateAuth(encryptCode);\n    }, 0);\n  }\n  static doValidateAuth(encryptCode: string) {\n    this.encryptCode = encryptCode;\n    var enCodeStr = this.decrypt(this.encryptCode);\n    var hosts = enCodeStr.split('|')[0]; //支持多个ip同时授权，以逗号隔开\n    var deadline = enCodeStr.split('|')[1];\n    this.authtype = enCodeStr.split('|')[2];\n\n    // localhost\n    let hostname = window.location.hostname.toUpperCase();\n    if (hostname === \"LOCALHOST\") {\n      return;\n    }\n\n    var bHostPass = false;\n    var hostArry = hosts.split(',');\n    hostArry.forEach(host => {\n      if (host.toUpperCase() === hostname) {\n        bHostPass = true;\n        return;\n      }\n    });\n\n    if (!bHostPass) {\n      this.showAuthDlg(\"软件未授权，请联系软件提供商，获取授权码！\");\n      return;\n    }\n\n    //是否过期\n    if (typeof (deadline) == \"undefined\") {\n      //重定向到err页;\n      this.showAuthDlg(\"软件未授权，请联系软件提供商，获取授权码！\");\n    }\n    var oDate1 = this.getServerDate();\n    var oDate2 = new Date(deadline);\n    if (oDate1.getTime() > oDate2.getTime()) {\n      //重定向到err页;\n      this.showAuthDlg(this.authtype + \"有限期至【\" + deadline + \"】\" + \"已过期，请重新授权！@山维科技\");\n    }\n\n    if (this.authtype != \"正式版\") {\n      this.showAuthInfo(\"开发预览版，有限期至【\" + deadline + \"】\" + \"@山维科技\");\n    }\n\n  }\n\n  static isIE() { //ie?\n    if (!!window[\"ActiveXObject\"] || \"ActiveXObject\" in window) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  static getServerDate() {\n    var xhr = null;\n    if (window['XMLHttpRequest']) {\n      xhr = new window['XMLHttpRequest']();\n    } else { // ie\n      xhr = new window[\"ActiveXObject\"](\"Microsoft\")\n    }\n    xhr.open(\"GET\", \"/\", false) //false不可变\n    xhr.send(null);\n    var date = xhr.getResponseHeader(\"Date\");\n    return new Date(date);\n  }\n  //右下角显示开发版内容\n  static showAuthInfo(msg: string) {\n\n    var chObj = document.getElementById(\"copyrightinfo\");\n    if (chObj) {\n      //存在 \n      chObj.innerHTML = msg;\n    } else {\n      var node = document.createElement(\"div\");\n      node.id = \"copyrightinfo\";\n      node.style.position = \"absolute\";\n      node.style.bottom = \"0px\";\n      node.style.right = \"20px\";\n      node.style.fontSize = \"14px\";\n      node.style.zIndex = \"700\";\n      node.style.color = \"#e51c23\";\n      var textnode = document.createTextNode(msg);\n      node.appendChild(textnode);\n      document.body.appendChild(node);\n    }\n  }\n  static showAuthDlg(msg: string) {\n\n    var chObj = document.getElementById(\"copyDlginfo\");\n    if (!chObj) {\n\n      //插入遮障 \n\n      var oMask = document.createElement(\"div\");\n      oMask.id = \"mask\";\n      oMask.style.background = \"#000\";\n      oMask.style.opacity = \"0.65\";\n      oMask.style.width = \"100%\";\n      oMask.style.position = \"absolute\";\n      oMask.style.left = \"0\";\n      oMask.style.top = \"0\";\n      oMask.style.bottom = \"0\";\n      oMask.style.zIndex = \"1000\";\n\n      document.body.appendChild(oMask);\n\n\n      //插入内容显示\n      var html = '<div style=\"text-align:center; margin-top:150px;\"><p style=\"color:red\">' + msg + '</p><a href=\"#\" id=\"hideWin\">刷新</a> </div>';\n\n      var node = document.createElement(\"div\");\n      node.id = \"copyDlginfo\";\n      node.style.position = \"absolute\";\n      node.style.top = \"0\";\n      node.style.right = \"0\";\n      node.style.bottom = \"0\";\n      node.style.left = \"0\";\n      node.style.margin = \"auto\";\n      node.style.fontSize = \"14px\";\n      node.style.borderRadius = \"20px\";\n      node.style.zIndex = \"1001\";\n      node.style.width = \"500px\"\n      node.style.height = \"300px\"\n      node.style.color = \"#e51c23\";\n      node.style.background = \"#fff\";\n      // node.style.display = \"none\";\n\n      node.innerHTML = html;\n      document.body.appendChild(node);\n\n      // let nodeTop = -1000;\n      // let timer = setInterval(() => {\n      //   if (nodeTop < 0) {\n      //     nodeTop = nodeTop + 1;\n      //     node.style.top = nodeTop + \"px\";\n      //   } else {\n      //     clearInterval(timer);\n      //   }\n      // }, 1);\n\n\n      document.getElementById('hideWin').onclick = function () {\n        window.location.reload();\n      }\n    }\n  }\n\n}\n","import { Component, OnInit, ViewChild, ViewContainerRef, Input, Output, EventEmitter, AfterViewInit, ChangeDetectorRef } from '@angular/core';\nimport { ComponentContainerDirective } from '../../directives/component-container.directive';\nimport { ServiceInjector } from '../../services/service-injector';\nimport { ComponentLoaderService } from '../../services/component-loader.service';\nimport { EventEmitterService } from '../../services/event-emitter.service';\nimport { UtilsService } from '../../services/services';\n// import { ComponentRegister } from '../../decorator/decorators';\n// @ComponentRegister({\n//   selector: 'epsgis-comp-container'\n// })\n@Component({\n  selector: 'epsgis-comp-container',\n  templateUrl: './comp-container.component.html',\n  styleUrls: ['./comp-container.component.scss'],\n})\nexport class CompContainerComponent implements OnInit, AfterViewInit {\n\n  @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: true }) container: ViewContainerRef;\n  @Input(\"config-json-file\") configJsonFile: string;\n  /**\n     * 自定义model变量\n     */\n  private _configJsonFile: string;\n  /**\n   * 返回父组件变化后的值\n   */\n  @Input()\n  get jsonFile() {\n    return this._configJsonFile;\n  }\n\n  /**\n   * 组件值产生变化后父组件改变\n   * @param value\n   */\n  set jsonFile(value) {\n    this._configJsonFile = value;\n    this.configJsonFile = value;\n    this.jsonFileChange.emit(value);\n  }\n  @Output()\n  jsonFileChange: EventEmitter<any> = new EventEmitter();\n  //增加对象配置 ruir 20200909\n  /**\n     * 自定义model变量\n     */\n  private _config: any;\n  /**\n   * 返回父组件变化后的值\n   */\n  @Input()\n  get config() {\n    return this._config;\n  }\n\n  /**\n   * 组件值产生变化后父组件改变\n   * @param value\n   */\n  set config(value) {\n    this._config = value;\n    if (typeof value === \"string\") {\n      this._configJsonFile = value;\n      this.configJsonFile = value;\n    }\n    this.configChange.emit(value);\n  }\n  @Output()\n  configChange: EventEmitter<any> = new EventEmitter();\n  /**\n   * 默认加载\n   */\n  @Input() autoLoad: boolean = true;\n  /**\n   * \n   * @param serviceInjector \n   * @param componentLoader \n   */\n  constructor(\n    public serviceInjector: ServiceInjector,\n    public cdr: ChangeDetectorRef,\n    public eventService: EventEmitterService,\n    public componentLoader: ComponentLoaderService) {\n\n    //订阅变化检测事件，当组件执行完后 add yly 20200327\n    this.eventService.rss.on(this.eventService._checkChangeDetector, (obj: any) => {\n      UtilsService.detectChanges(this.cdr);\n      // setInterval(() => { this.cdr.detectChanges(); }, 5000);\n    });\n  }\n  ngOnInit(): void {\n\n  }\n  ngAfterViewInit() {\n    this.componentLoader.setViewContainerInHome(this.container);\n    this.componentLoader.setServiceInjector(this.serviceInjector);\n    if (this.autoLoad) {\n      this._init();\n    }\n  }\n  private _init() {\n    this.serviceInjector.layoutManager.startup();\n    if (this.config) {\n      this.serviceInjector.configManager.loadConfig(this.config);\n    } else {\n      let _configJsonFile = this.serviceInjector.config.appInfo.configFile;\n      if (this.configJsonFile) {\n        _configJsonFile = this.configJsonFile;\n      }\n      this.serviceInjector.configManager.loadConfig(_configJsonFile);\n    }\n  }\n  //对外提供的函数开始\n  /**\n   * 清除已经加载的组件\n   */\n  clear() {\n    this.serviceInjector.layoutManager._destroyPreloadWidgetIcons();\n    this.serviceInjector.layoutManager._destroyOffPanelWidgets();\n    this.serviceInjector.layoutManager._destroyWidgetPlaceholders();\n    this.serviceInjector.layoutManager._destroyPreloadPanels();\n    this.serviceInjector.layoutManager._destroyPreloadGroupPanels();\n    this.serviceInjector.mapManager.destoryMap();\n  }\n  reload() {\n    this.clear();\n    this._init();\n  }\n  // 对外提供的函数结束\n}\n","<ng-template component-host> </ng-template>","import { EpsGisDirectivesModule } from '../../directives/directives.module';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CompContainerComponent } from './comp-container.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        EpsGisDirectivesModule\n    ],\n    declarations: [\n        CompContainerComponent\n    ],\n    entryComponents: [CompContainerComponent],\n    exports: [CompContainerComponent],\n    providers: []\n})\nexport class EpsGisCompContainerModule { }","import { Component, OnInit, ChangeDetectionStrategy, OnChanges, SimpleChanges, Input, TemplateRef, Type, Output, EventEmitter, ViewChild, ViewContainerRef, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { SSModalAPI } from './modal-options';\nimport { Observable } from 'rxjs';\nimport { SsStyleObjectLike, SsButtonType, SsModalTypes, OnClickCallback, SsModalOptions, SsModalButtonOptions } from './modal-types';\nimport { SsModalRef } from './modal-ref';\nimport { ModalManagerService } from '../../services/modal-manager.service';\nimport { getConfigFromComponent } from './utils';\nimport { BasePanelComponent } from '../base-panel/base-panel.component';\n\nimport { ComponentRegister } from '../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-modal',\n  path: \"epsgis/components/modal\"\n})\n@Component({\n  selector: 'epsgis-modal',\n  template: ` <ng-template><ng-content></ng-content></ng-template> `,\n  styleUrls: ['./modal.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SSModalComponent<T = any, R = any> extends BasePanelComponent implements OnChanges, SSModalAPI<T, R> {\n\n  @Input() mask: boolean = true;\n  @Input() maskClosable: boolean = true;\n  @Input() visible: boolean = false;\n  @Input() closable: boolean = true;\n  @Input() okLoading: boolean = false;\n  @Input() okDisabled: boolean = false;\n  @Input() cancelDisabled: boolean = false;\n  @Input() cancelLoading: boolean = false;\n  @Input() keyboard: boolean = true;\n  @Input() noAnimation = false;\n  @Input() content?: string | TemplateRef<{}> | Type<T>;\n  @Input() componentParams?: T;\n  @Input() footer?: string | TemplateRef<{}> | Array<SsModalButtonOptions<T>> | null;\n  @Input() getContainer?: HTMLElement;\n  @Input() zIndex: number = 1000;\n  @Input() width: number | string = 520;\n  @Input() wrapClassName?: string;\n  @Input() className?: string;\n  @Input() styles?: object;\n  @Input() title: string;//| TemplateRef<{}>;\n  @Input() closeIcon: string | TemplateRef<void> = 'close';\n  @Input() maskStyle?: SsStyleObjectLike;\n  @Input() bodyStyle?: SsStyleObjectLike;\n  @Input() okText?: string | null;\n  @Input() cancelText?: string | null;\n  @Input() okType: SsButtonType = 'primary';\n  @Input() iconType: string = 'question-circle'; // Confirm Modal ONLY\n  @Input() modalType: SsModalTypes = 'default';\n\n  @Input()\n  @Output()\n  readonly onOk: EventEmitter<T> | OnClickCallback<T> = new EventEmitter<T>();\n  @Input()\n  @Output()\n  readonly onCancel: EventEmitter<T> | OnClickCallback<T> = new EventEmitter<T>();\n\n  @Output() readonly afterOpen = new EventEmitter<void>();\n  @Output() readonly afterClose = new EventEmitter<R>();\n  @Output() readonly visibleChange = new EventEmitter<boolean>();\n\n  @ViewChild(TemplateRef, { static: true }) contentTemplateRef!: TemplateRef<{}>;\n\n  modalRef: SsModalRef | null = null;\n\n  get afterOpenObservable(): Observable<void> {\n    return this.afterOpen.asObservable();\n  }\n\n  get afterCloseObservable(): Observable<R> {\n    return this.afterClose.asObservable();\n  }\n  // set modalFooter(value: NzModalFooterDirective) {\n  //   if (value && value.templateRef) {\n  //     this.setFooterWithTemplate(value.templateRef);\n  //   }\n  // }\n  constructor(\n    private modalService: ModalManagerService,\n    private viewContainerRef: ViewContainerRef,\n    @Optional() public _render: Renderer2\n    , @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr)\n  }\n  ngOnInit() {\n\n  }\n\n\n  onCloseClick(): void {\n  }\n\n  onOkClick(): void {\n  }\n  private getConfig(): SsModalOptions {\n    const componentConfig = getConfigFromComponent(this);\n    componentConfig.viewContainerRef = this.viewContainerRef;\n    if (!this.content) {\n      componentConfig.content = this.contentTemplateRef;\n    }\n    return componentConfig;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { Visible, ...otherChanges } = changes;\n\n    if (Object.keys(otherChanges).length && this.modalRef) {\n      this.modalRef.updateConfig(getConfigFromComponent(this));\n    }\n\n    if (Visible) {\n      if (this.visible) {\n        this.open();\n      } else {\n        this.close();\n      }\n    }\n  }\n\n\n  open(): void {\n    if (!this.visible) {\n      this.visible = true;\n      this.visibleChange.emit(true);\n    }\n\n    if (!this.modalRef) {\n      const config = this.getConfig();\n      this.modalRef = this.modalService.create(config);\n    }\n  }\n  close(result?: R): void {\n    if (this.visible) {\n      this.visible = false;\n      this.visibleChange.emit(false);\n    }\n\n    if (this.modalRef) {\n      this.modalRef.close(result);\n      this.modalRef = null;\n    }\n  }\n  destroy(result?: R): void {\n    this.close(result);\n  }\n  triggerOk(): void {\n    this.modalRef != null ? this.modalRef.triggerOk() : null;\n  }\n  triggerCancel(): void {\n    this.modalRef != null ? this.modalRef.triggerCancel() : null;\n  }\n  getContentComponent(): void | T {\n    return this.modalRef != null ? this.modalRef.getContentComponent() : null;\n  }\n  getElement(): void | HTMLElement {\n    return this.modalRef != null ? this.modalRef.getElement() : null;\n  }\n\n  getModalRef(): SsModalRef | null {\n    return this.modalRef;\n  }\n}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnDestroy, Output } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { SsModalRef, isPromise } from './modal-ref';\nimport { SsModalButtonOptions, SsModalOptions } from './modal-types';\n\n@Component({\n  selector: 'div[ss-modal-footer]',\n  template: `\n    <ng-container *ngIf=\"config.footer; else defaultFooterButtons\">\n      <ng-container>\n        <div *ngIf=\"!buttonsFooter\" [innerHTML]=\"config.title\"></div>\n        <ng-container *ngIf=\"buttonsFooter\">\n          <button\n            *ngFor=\"let button of buttons\"\n            nz-button\n            (click)=\"onButtonClick(button)\"\n            [hidden]=\"!getButtonCallableProp(button, 'show')\"\n            [class]=\"getButtonClass(button)\"\n          >\n            {{ button.label }}\n          </button>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n    <ng-template #defaultFooterButtons>\n      <button\n        *ngIf=\"config.cancelText !== null\"\n        [attr.cdkFocusInitial]=\"config.autofocus === 'cancel'\"\n        nz-button\n        (click)=\"onCancel()\"\n        [disabled]=\"config.cancelDisabled\"\n        class=\"ss-btn ss-btn-default\"\n      >\n        {{ config.cancelText || locale.cancelText }}\n      </button>\n      <button\n        *ngIf=\"config.okText !== null\"\n        [attr.cdkFocusInitial]=\"config.autofocus === 'ok'\"\n        nz-button\n        class=\"ss-btn ss-btn-primary \"\n        (click)=\"onOk()\"\n        [disabled]=\"config.okDisabled\"\n      >\n        {{ config.okText || locale.okText }}\n      </button>\n    </ng-template>\n  `,\n  host: {\n    class: ''\n  },\n  changeDetection: ChangeDetectionStrategy.Default\n})\nexport class SsModalFooterComponent implements OnDestroy {\n  buttonsFooter = false;\n  buttons: SsModalButtonOptions[] = [];\n  locale: { okText?: string; cancelText?: string } = { okText: \"确定\", cancelText: \"取消\" };\n  @Output() readonly cancelTriggered = new EventEmitter<void>();\n  @Output() readonly okTriggered = new EventEmitter<void>();\n  @Input() modalRef!: SsModalRef;\n  private destroy$ = new Subject<void>();\n\n  constructor(public config: SsModalOptions) {\n    if (Array.isArray(config.footer)) {\n      this.buttonsFooter = true;\n      this.buttons = (config.footer as SsModalButtonOptions[]).map(mergeDefaultOption);\n    }\n  }\n  getButtonClass(button: SsModalButtonOptions) {\n    switch (button.type) {\n      case \"primary\":\n        return \"ss-btn ss-btn-primary\";\n      case \"dashed\":\n        return \"ss-btn ss-btn-dashed\";\n      case \"danger\":\n        return \"ss-btn ss-btn-danger\";\n      case \"link\":\n        return \"ss-btn ss-btn-link\";\n    }\n    return \"ss-btn ss-btn-default\";\n  }\n\n  onCancel(): void {\n    this.cancelTriggered.emit();\n  }\n\n  onOk(): void {\n    this.okTriggered.emit();\n  }\n\n  getButtonCallableProp(options: SsModalButtonOptions, prop: keyof SsModalButtonOptions): boolean {\n    const value = options[prop];\n    if (this.modalRef) {\n      const componentInstance = this.modalRef.getContentComponent();\n      return typeof value === 'function' ? value.apply(options, componentInstance && [componentInstance]) : value;\n    }\n    return false;\n  }\n\n\n  onButtonClick(options: SsModalButtonOptions): void {\n    const loading = this.getButtonCallableProp(options, 'loading');\n    if (!loading) {\n      const result = this.getButtonCallableProp(options, 'onClick');\n      if (options.autoLoading && isPromise(result)) {\n        options.loading = true;\n        result.then(() => (options.loading = false)).catch(() => (options.loading = false));\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n\nfunction mergeDefaultOption(options: SsModalButtonOptions): SsModalButtonOptions {\n  return {\n    type: null,\n    size: 'default',\n    autoLoading: true,\n    show: true,\n    loading: false,\n    disabled: false,\n    ...options\n  };\n}\n","import { OnInit, ViewContainerRef, ViewChild, ChangeDetectorRef, Directive } from '@angular/core';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport { ComponentLoaderService } from '../../services/component-loader.service';\nimport { ComponentContainerDirective } from '../../directives/component-container.directive';\nimport { WidgetState } from '../../models/base-widget';\n/**\n * \n */\n@Directive()\nexport class BaseMapComponent extends BaseWidgetComponent implements OnInit {\n  @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: true }) container: ViewContainerRef;\n  //@ViewChild('mapinnercontainer', { read: ViewContainerRef, static: true }) container: ViewContainerRef;\n  private _is3d: boolean = false;\n  /**\n   * 是否3D\n   */\n  get is3D() {\n    return this._is3d;\n  }\n  /**\n   * \n   */\n  set is3D(val: boolean) {\n    this._is3d = val;\n    this.globalParams.mapConfig.is3D = val;//设置全局 用于其他地方取值\n  }\n\n  constructor(\n    public componentLoader: ComponentLoaderService\n  ) {\n    super();\n  }\n  ngOnInit() {\n    this.componentLoader.setViewContainerInMap(this.container);\n    super.ngOnInit();\n  }\n  /**\n   * \n   * @param options \n   */\n  setProps(options: { appConfig: any, config: any, manifest: any }) {\n    this.appConfig = options.appConfig;\n    //默认读取总的config.json的map.jsApi\n    if (!this.appConfig.map.jsApi) {\n      //如果没有，则读取当前组件的配置mapJsApi\n      if(this.globalParams.mapConfig.jsApi){\n        this.appConfig.map.jsApi = this.globalParams.mapConfig.jsApi;\n      }else{\n        this.appConfig.map.jsApi = this.config.mapJsApi;\n      }\n    }\n    this.widgetConfig = this.appConfig.map;\n    this.config = options.config;\n    this.widgetConfig.manifest = options.manifest;\n    this.started=true;\n    this.state=WidgetState.opened;\n    this.name=options.manifest?.name;\n    this.inPanel=options.manifest?.properties?.inPanel;\n    this.label=\"地图\";\n    this.uri=this.getCompInfo().uri;\n    this.folderUrl=this.globalParams.widgetRootPath+\"/\"+this.getCompInfo().path+\"/\";\n    this.widgetConfig.folderUrl=this.folderUrl;\n    super.setPosition(this.appConfig.map.position);\n  }\n  /**\n   * 初始化地图\n   */\n  async initMap(): Promise<any> {\n    return Promise.resolve(null);\n  }\n}\n","\nimport { Directive, Optional, TemplateRef } from '@angular/core';\nimport { SsModalRef } from './modal-ref';\n\n@Directive({\n  selector: '[SsModalFooter]',\n  exportAs: 'SsModalFooter'\n})\nexport class SsModalFooterDirective {\n  constructor(@Optional() private ssModalRef: SsModalRef, public templateRef: TemplateRef<{}>) {\n    if (this.ssModalRef) {\n      this.ssModalRef.updateConfig({\n        footer: this.templateRef\n      });\n    }\n  }\n}\n","\nimport { Observable } from 'rxjs';\n\nexport abstract class SSModalAPI<T, R> {\n  abstract afterOpen: Observable<void>;\n  abstract afterClose: Observable<R>;\n\n  abstract open(): void;\n  abstract close(result?: R): void;\n  abstract destroy(result?: R): void;\n\n  /**\n   * 手动触发nzOnOk / nzOnCancel\n   */\n  abstract triggerOk(): void;\n  abstract triggerCancel(): void;\n  /**\n   * 当指定nzContent作为组件时，返回nzContent的组件实例\n   */\n  abstract getContentComponent(): T | void;\n\n  /**\n   * 获取此Modal的dom元素\n   */\n  abstract getElement(): HTMLElement | void;\n}\n","<div class=\"pdfViewerContainer\" #pdfViewerContainer>\n\t<iframe *ngIf=\"pdfUrl\" [src]=\"pdfUrl\" frameborder=\"0\" [style.height]=\"pdfViewHeight\"></iframe>\n</div>\n","import {Component, OnInit, Input, Output, EventEmitter, ViewChild, AfterViewInit} from '@angular/core';\nimport {DomSanitizer, SafeResourceUrl} from \"@angular/platform-browser\";\nimport { ComponentRegister } from '../../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: \"pdf-viewer\",\n  path: \"components/shared/ngxviewer/pdf-viewer\"\n})\n@Component({\n  selector: \"pdf-viewer\",\n  templateUrl: \"./pdf-viewer.component.html\",\n  styleUrls: [\"./pdf-viewer.component.scss\"],\n})\nexport class PDFViewerComponent implements OnInit, AfterViewInit {\n  @ViewChild(\"pdfViewerContainer\") pdfViewerContainer: any;\n\n  @Input() width: number = 0;\n  @Input() height: number = 0;\n  @Input() viewerUrl: string;\n  @Input() source: string;\n  @Output() ready: EventEmitter<any> = new EventEmitter<any>(false);\n\n  pdfUrl: SafeResourceUrl;\n  pdfViewHeight: string = \"600px\";\n\n  constructor(public domSanitizer: DomSanitizer) {}\n\n  ngAfterViewInit(): void {\n    setTimeout(() => {\n      this.resetViewHeight();\n    }, 1000);\n  }\n\n  ngOnInit() {\n    this.pdfUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(\n      this.viewerUrl + \"?file=\" + this.source\n    );\n    this.ready.emit(\"pdf viewer initialize!\");\n  }\n\n  resetViewHeight() {\n    let height = this.getMainWindowHeight();\n    if (height > 0) {\n      this.pdfViewHeight = height - 5 + \"px\";\n    } else {\n      this.pdfViewHeight = \"600px\";\n    }\n  }\n\n  /**窗体高度 */\n  getMainWindowHeight(): number {\n    let parentNode = this.pdfViewerContainer.nativeElement.parentNode;\n    while (parentNode) {\n      if (parentNode.className &&\n        (parentNode.className === \"ssmodal_content\" ||\n          parentNode.className === \"sspanel_content\")\n      ) {\n        break;\n      }\n      parentNode = parentNode.parentNode;\n    }\n    if (parentNode) {\n      return parentNode.clientHeight - 30;\n    } else {\n      parentNode = this.pdfViewerContainer.nativeElement.parentNode;\n      let contentNode = null;\n      while (parentNode) {\n        if (parentNode.childNodes && parentNode.childNodes.length > 0) {\n          for (const child of parentNode.childNodes) {\n            if (child.nodeName.toLocaleUpperCase() === \"NZ-CONTENT\") {\n              contentNode = child;\n              break;\n            }\n          }\n        }\n        if (contentNode) {\n          break;\n        }\n        parentNode = parentNode.parentNode;\n      }\n      if (contentNode) {\n        return contentNode.clientHeight;\n      }\n    }\n    return this.height;\n  }\n}\n","<div class=\"imageViewerContainer\" #imageViewerContainer>\n\t<div class=\"imageViewer\"\n\t\t (dragstart)=\"cancleCurrentImageDrag($event)\"\n\t\t (mousedown)=\"currentImageDragStart($event)\"\n\t\t (mousemove)=\"currentImageDrag($event)\"\n\t\t (mouseup)=\"currentImageDragEnd($event)\"\n\t\t [style.width]=\"imageViewerContainer.style.width\"\n\t\t [style.height]=\"imageViewHeight\" #imageViewer>\n\n\t\t<img [src]=\"currentImageUrl\"\n\t\t\t (load)=\"currentImageLoaded(showImg, imageViewer)\" #showImg>\n\n\t\t<div class=\"previousImg\" (click)=\"preOrNextImg('pre')\">\n\t\t\t<span class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\" title=\"上一张\">\n\t\t\t\t<svg t=\"1588945968636\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"18261\" width=\"60\" height=\"60\"><path d=\"M564.3264 737.0752l41.5744-41.5744-184.4224-184.1152 184.4224-184.1152-41.5744-41.5744L338.944 511.3856z\" p-id=\"18262\"></path><path d=\"M511.7952 101.5808c-226.304 0-409.8048 183.5008-409.8048 409.8048s183.5008 409.8048 409.8048 409.8048S921.6 737.792 921.6 511.3856 738.0992 101.5808 511.7952 101.5808z m0 58.5728c194.048 0 351.3344 157.2864 351.3344 351.3344s-157.3888 351.232-351.3344 351.232c-194.048 0-351.3344-157.2864-351.3344-351.3344 0-93.184 36.9664-182.4768 102.912-248.4224s155.2384-102.8096 248.4224-102.8096z\" p-id=\"18263\"></path></svg>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"nextImg\" (click)=\"preOrNextImg('next')\">\n\t\t\t<span class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\" title=\"下一张\">\n\t\t\t\t<svg t=\"1588946002551\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"18478\" width=\"60\" height=\"60\"><path d=\"M459.3664 737.0752L417.792 695.5008l184.4224-184.1152L417.792 327.2704l41.5744-41.5744 225.3824 225.6896z\" p-id=\"18479\"></path><path d=\"M511.7952 101.5808c-226.304 0-409.8048 183.5008-409.8048 409.8048s183.5008 409.8048 409.8048 409.8048S921.6 737.792 921.6 511.3856 738.0992 101.5808 511.7952 101.5808z m0 58.5728c194.048 0 351.3344 157.2864 351.3344 351.3344s-157.3888 351.232-351.3344 351.232c-194.048 0-351.3344-157.2864-351.3344-351.3344 0-93.184 36.9664-182.4768 102.912-248.4224s155.2384-102.8096 248.4224-102.8096z\" p-id=\"18480\"></path></svg>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div *ngIf=\"imageSources.length>1;\" class=\"smallImageViewer\">\n\t\t<div class=\"toImg previousImgs\" title=\"向左查看\" (click)=\"previousImg(moreImg, imageViewer)\">\n\t\t\t<svg t=\"1588946161601\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4499\" width=\"16\" height=\"16\"><path d=\"M854.656 182.656a32 32 0 1 0-45.312-45.312l-352 352a32 32 0 0 0 0 45.312l352 352a32 32 0 0 0 45.312-45.312L525.248 512l329.408-329.344z m-320 0a32 32 0 1 0-45.312-45.312l-352 352a32 32 0 0 0 0 45.312l352 352a32 32 0 0 0 45.312-45.312L205.248 512l329.408-329.344z\" fill=\"#ffffff\" p-id=\"4500\"></path></svg>\t</div>\n\t\t<div class=\"toImg nextImgs\" title=\"向右查看\" (click)=\"nextImg(moreImg, imageViewer)\">\n\t\t\t<svg t=\"1588946137834\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4373\" width=\"16\" height=\"16\"><path d=\"M556.8 535.893L170.667 149.76c-13.227-13.227-13.227-34.987 0-48.213 13.226-13.227 34.986-13.227 48.213 0L605.013 487.68c13.227 13.227 13.227 34.987 0 48.213-13.226 13.227-34.986 13.227-48.213 0z\" fill=\"#ffffff\" p-id=\"4374\"></path><path d=\"M170.667 873.813L556.8 487.68c13.227-13.227 34.987-13.227 48.213 0 13.227 13.227 13.227 34.987 0 48.213L218.88 922.027c-13.227 13.226-34.987 13.226-48.213 0a33.493 33.493 0 0 1 0-48.214zM825.173 536.32L439.04 150.187c-13.227-13.227-13.227-34.987 0-48.214 13.227-13.226 34.987-13.226 48.213 0l386.134 386.134c13.226 13.226 13.226 34.986 0 48.213a33.493 33.493 0 0 1-48.214 0z\" fill=\"#ffffff\" p-id=\"4375\"></path><path d=\"M439.04 874.24l386.133-386.133c13.227-13.227 34.987-13.227 48.214 0 13.226 13.226 13.226 34.986 0 48.213L487.253 922.453c-13.226 13.227-34.986 13.227-48.213 0-13.227-13.226-13.227-34.56 0-48.213z\" fill=\"#ffffff\" p-id=\"4376\"></path></svg>\t</div>\n\t\t<div class=\"moreImg\" #moreImg [style.left]=\"moreImgInitLeft + 'px'\">\n\t\t\t<img *ngFor=\"let imgUrl of imageSources; let i = index;\" [src]=\"imgUrl\" (click)=\"changeCurrentImageUrl(imgUrl,i)\">\n\t\t</div>\n\t</div>\n\t<div class=\"imageTools\">\n\t\t<button class=\"toolsBtn imageZoomin\" title=\"放大\" (click)=\"imageZoomin()\">\n\t\t\t<svg t=\"1588941022678\" class=\"icon\" viewBox=\"0 0 1027 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"8990\" width=\"20\" height=\"20\"><path d=\"M722.489 642.844c45.511-62.577 73.955-136.533 73.955-216.177 0-204.8-164.977-369.778-369.777-369.778S56.889 221.867 56.889 426.667s164.978 369.777 369.778 369.777c79.644 0 153.6-28.444 216.177-68.266l221.867 221.866c22.756 22.756 56.889 22.756 79.645 0 22.755-22.755 22.755-56.888 0-79.644L722.489 642.844z m-295.822 96.712c-170.667 0-312.89-142.223-312.89-312.89S256 113.779 426.668 113.779 739.556 256 739.556 426.667s-142.223 312.889-312.89 312.889\" p-id=\"8991\"></path><path d=\"M227.556 398.222h398.222v56.89H227.556z\" p-id=\"8992\"></path><path d=\"M398.222 227.556h56.89v398.222h-56.89z\" p-id=\"8993\"></path></svg>\t\t\n\t\t</button>\n\t\t<button class=\"toolsBtn imageZoomout\" title=\"缩小\" (click)=\"imageZoomout()\">\n\t\t\t<svg t=\"1588941306698\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9115\" width=\"20\" height=\"20\"><path d=\"M446.258717 823.960011c-51.124378 0-100.745519-10.005888-147.456377-29.814026-45.097104-19.050891-85.673242-46.388517-120.438023-81.153298-34.762735-34.764781-62.102407-75.340919-81.153298-120.438023-19.803022-46.709835-29.814026-96.324836-29.814026-147.449213s10.011005-100.745519 29.814026-147.456377c19.050891-45.097104 46.38954-85.673242 81.153298-120.438023 34.764781-34.762735 75.340919-62.102407 120.438023-81.153298 46.709835-19.803022 96.331999-29.814026 147.456377-29.814026 51.124378 0 100.739379 10.011005 147.449213 29.814026 45.097104 19.050891 85.673242 46.38954 120.438023 81.153298 34.764781 34.764781 62.102407 75.340919 81.153298 120.438023 19.808138 46.709835 29.813003 96.331999 29.813003 147.456377s-10.005888 100.739379-29.813003 147.449213c-19.050891 45.097104-46.388517 85.673242-81.153298 120.438023-34.764781 34.764781-75.340919 62.102407-120.438023 81.153298-46.604434 19.808138-96.220459 29.814026-147.449213 29.814026z m0-688.833451c-170.920788 0-309.97889 139.058103-309.978891 309.978891 0 170.915671 139.058103 309.971727 309.978891 309.971727 170.915671 0 309.971727-139.057079 309.971727-309.971727 0-170.920788-138.951679-309.97889-309.971727-309.978891z m0 0\" p-id=\"9116\"></path><path d=\"M924.025031 957.314205c-8.823969 0-17.646915-3.337002-24.321942-10.115382L680.137395 727.635175c-13.453407-13.453407-13.453407-35.307134 0-48.76054 13.453407-13.453407 35.300994-13.453407 48.755424 0l219.563648 219.565694c13.453407 13.453407 13.453407 35.305087 0 48.759518-6.779404 6.77838-15.603373 10.114358-24.431436 10.114358z m0 0\" p-id=\"9117\"></path><path d=\"M602.106204 488.047472H290.730501c-16.679891 0-30.133298-13.453407-30.133298-30.135344 0-16.685008 13.453407-30.139437 30.133298-30.139438h311.265186c16.687054 0 30.140461 13.453407 30.140461 30.139438 0 16.681938-13.45443 30.135344-30.029944 30.135344z m0 0\" p-id=\"9118\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn rotateLeft\" title=\"向左旋转\" (click)=\"rotateLeft()\">\n\t\t\t<svg t=\"1588941359139\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9333\" width=\"20\" height=\"20\"><path d=\"M296.78775165 822.42764344a29.24918237 29.24918237 0 0 0 11.88822868 9.74972721 366.76451243 366.76451243 0 0 0 423.03239697-29.18019793c162.18119742-127.48228586 196.37422746-360.55595902 75.100495-518.98903088S456.301571 100.94781045 292.07385008 230.29266234a90.07000608 90.07000608 0 0 0-13.17592873 10.96844358c-12.57806845-15.8433068-23.52351697-30.99677536-33.82511584-43.8047899-12.8769982-16.97004443-22.07485451-30.2149576-25.70800781-33.96308395a18.16576575 18.16576575 0 0 0-14.57860182-10.00266835 19.33849276 19.33849276 0 0 0-21.70694032 16.39517847l0.3679142 1.14973193-1.33368944 20.67218142-19.49945517 135.66837756-3.1502653 18.78662109-2.71336744 16.09624873a19.82137999 19.82137999 0 0 0 3.05828656 14.14170319 16.09624795 16.09624795 0 0 0 12.44010034 7.08234912l15.86630188 2.02352844 18.62565868 2.32245896 134.08174776 13.79678406 19.75239556 1.9085554 1.14973193-0.3679142a21.08608498 21.08608498 0 0 0 21.3850155-17.63688915 18.39571183 18.39571183 0 0 0-6.43849871-16.71710329c-2.52941073-4.1620299-12.83100961-16.97004443-25.68501352-33.94008965-8.82994211-12.09518046-19.49945518-26.00693834-30.19196253-39.96468481 3.90908875-3.90908875 9.26683997-6.99037039 13.19892302-10.92245345 132.33415478-104.39566674 320.33833383-85.49407262 418.52544794 43.22992316a306.51855469 306.51855469 0 0 1-61.25772156 422.98640759 298.07952184 298.07952184 0 0 1-349.05863961 20.94811763 33.94008889 33.94008889 0 0 0-38.49302728 3.35721709 33.71014281 33.71014281 0 0 0-6.94438178 47.92083044z\" fill=\"#333333\" p-id=\"9334\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn rotateRight\" title=\"向右旋转\" (click)=\"rotateRight()\">\n\t\t\t<svg t=\"1588941386678\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9485\" width=\"20\" height=\"20\"><path d=\"M727.29746405 822.42764344a29.24918237 29.24918237 0 0 1-11.91122374 9.74972721 366.76451243 366.76451243 0 0 1-422.98640759-29.20319301C130.2416296 675.49189255 96.00261019 442.44121292 217.27634341 284.03113615s350.57628573-183.12931506 514.84999526-53.80745826a90.07000608 90.07000608 0 0 1 13.15293443 10.96844359c12.57806845-15.8203125 23.52351697-30.97378029 33.84811014-43.78179482 12.83100961-16.97004443 22.02886514-30.2149576 25.70800782-33.96308396a18.16576575 18.16576575 0 0 1 14.55560752-10.04865772 19.33849276 19.33849276 0 0 1 21.70694031 16.39517846l-0.34491988 1.14973194 1.33368941 20.69517649 19.36148706 135.76035631 3.17326038 18.7866211 2.71336744 16.09624793a19.82137999 19.82137999 0 0 1-3.05828733 14.14170397 16.09624795 16.09624795 0 0 1-12.44010035 7.05935405l-15.88929616 2.0465235-18.57966932 2.29946389-134.10474207 13.79678407-19.75239632 1.9315497-1.14973194-0.3909085a21.08608498 21.08608498 0 0 1-21.38501549-17.61389485 18.39571183 18.39571183 0 0 1 6.43849949-16.7171033c2.50641566-4.1850242 12.83100961-16.97004443 25.68501351-33.94008887 8.82994211-12.11817552 19.49945518-26.02993264 30.19196255-39.96468481-3.90908875-3.90908875-9.26683997-7.01336545-13.19892381-10.94544852-132.33415478-104.39566674-320.33833383-85.49407262-418.52544717 43.22992316A306.51855469 306.51855469 0 0 0 332.87039983 750.45441943a298.07952184 298.07952184 0 0 0 348.98965516 20.74116586 33.94008889 33.94008889 0 0 1 38.51602234 3.38021216 33.71014281 33.71014281 0 0 1 6.9443818 47.92082966z\" fill=\"#333333\" p-id=\"9486\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn flipVertical\" title=\"垂直翻转\" (click)=\"flipVertical()\">\n\t\t\t<svg t=\"1588941411559\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9669\" width=\"20\" height=\"20\"><path d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\" p-id=\"9670\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn flipHorizontal\" title=\"水平翻转\" (click)=\"flipHorizontal()\">\n\t\t\t<svg t=\"1588941431636\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9885\" width=\"20\" height=\"20\"><path d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\" p-id=\"9886\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn imageReset\" title=\"重置\" (click)=\"currentImgReset()\">\n\t\t\t<svg t=\"1588941445066\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"10072\" width=\"20\" height=\"20\"><path d=\"M666.1 731.4c-48.6 35-105.6 52.5-163.8 51.8-7.7-0.1-15.3-0.7-22.9-1.3-3.1-0.3-6.1-0.8-9.2-1.3-6-0.8-11.9-1.5-17.7-2.8-3.6-0.6-7.2-1.7-10.6-2.5-5.7-1.3-11.4-2.6-16.9-4.3-2.6-1-5.1-1.9-7.8-3-6.5-2.1-12.9-4.4-19-7-1.4-0.6-2.8-1.2-4.1-1.7-7.2-3.4-14.4-6.9-21.3-10.6-0.3-0.2-0.6-0.3-0.9-0.5-23.5-13.3-44.9-29.6-63.7-49-0.3-0.3-0.6-0.7-0.9-1-5.8-6-11.4-12.2-16.7-18.9-1.1-1.4-2.1-2.7-3.3-4.3-38.2-49.1-61.2-111.3-61.2-178.8h73.6L182 314.7 64.2 496.1h73.5c0 79.4 24.2 153.1 65.2 214.2 0.5 0.9 0.8 1.9 1.4 2.6 4.2 6.3 9 12 13.5 17.8 1.8 2.1 3.3 4.3 5.1 6.7 6.6 8.2 13.9 16.1 21.1 23.8 0.8 0.8 1.4 1.4 2 2.1 24.7 25.4 52.4 46.6 82.7 63.8 0.8 0.5 1.5 0.8 2.4 1.4 8.7 4.8 17.7 9.3 26.7 13.3 2.3 1 4.5 2.1 6.7 3 7.8 3.4 15.8 6.2 23.8 9.1 3.8 1.4 7.5 2.6 11.4 3.9 7 2.1 14.2 3.9 21.5 5.6 4.8 1.2 9.5 2.4 14.4 3.4 2 0.5 3.9 1.2 5.9 1.4 6.9 1.3 13.7 1.9 20.5 2.8 2.5 0.5 5 0.9 7.4 1.2 12.3 1.2 24.5 2 36.8 2 74.7 0 147.7-23.5 210.3-68.5 19.9-14.4 24.8-42.7 10.9-63.1-13.9-20.8-41.3-25.7-61.3-11.2z m219.5-206.6c0-79.3-23.9-152.9-64.7-213.6-0.6-1-1-2.1-1.5-3-5.3-7.5-10.7-14.4-16.2-21.5-0.6-0.8-1.3-1.7-1.8-2.6-37.5-46.4-84.4-82.4-137.4-106-1.6-0.6-2.9-1.4-4.5-2-8.5-3.6-17.2-6.7-26-9.8-3-1-6.2-2.2-9.3-3.2-7.7-2.4-15.3-4.3-23.1-6.2-4.3-1-8.7-2.1-13-3-2.1-0.4-4.1-1-6.3-1.5-5.8-1-11.5-1.5-17.4-2.3-4.1-0.5-8-1.1-12-1.5-9.8-1-19.5-1.4-29.2-1.5-1.8 0-3.5-0.3-5.3-0.3-0.3 0-0.6 0.1-0.9 0.1-74.6 0.1-147.5 23.2-210 68.3-19.9 14.3-24.8 42.6-10.8 63.2 13.9 20.4 41.5 25.5 61.5 11 48.2-34.7 104.6-52.3 162.3-51.8 8.3 0.1 16.6 0.5 24.6 1.3 2.5 0.2 4.9 0.6 7.4 1 6.6 0.8 13.2 1.7 19.8 3.2 2.8 0.5 5.7 1.3 8.4 1.9 6.5 1.5 12.7 3 18.9 5 2.1 0.6 4 1.3 5.8 2.1 7.2 2.4 14.2 4.9 21 7.9 0.8 0.2 1.4 0.8 2.1 1 41.2 18.2 77.3 46.1 105.5 81.2 0.1 0.1 0.2 0.4 0.4 0.6 39.6 49.6 63.5 113 63.5 182h-73.7l117.9 181.5 117.6-181.5h-73.6z\" p-id=\"10073\"></path></svg>\n\t\t</button>\n\t</div>\n</div>\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl } from \"@angular/platform-browser\";\nimport { EventEmitterService } from '../../../../services/event-emitter.service';\n\nimport { ComponentRegister } from '../../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: \"image-viewer\",\n  path: \"components/shared/ngxviewer/image-viewer\"\n})\n@Component({\n  selector: \"image-viewer\",\n  templateUrl: \"./image-viewer.component.html\",\n  styleUrls: [\"./image-viewer.component.scss\"],\n})\nexport class ImageViewerComponent implements OnInit {\n  @ViewChild(\"imageViewerContainer\")\n  imageViewerContainer: any;\n  @ViewChild(\"showImg\") showImg: any;\n\n  @Input() width: number = 0;\n  @Input() height: number = 0;\n  @Input() source: string[];\n  @Input() first: number = 0;\n  @Output() ready: EventEmitter<any> = new EventEmitter<any>(false);\n\n  private currentImage: HTMLImageElement;\n  imageSources: SafeResourceUrl[] = [];\n  currentImageUrl: SafeResourceUrl; // 当前主图路径\n  private radian: number = 0; // 旋转变换参数\n  private x: number = 1; // 水平变换参数\n  private y: number = 1; // 垂直变换参数\n  private zoom: number = 0.1; // 缩放比率\n  private initTop: number; // 图片初始css的top值\n  private initLeft: number; // 图片初始css的left值\n  moreImgInitLeft: number = 0; // 图片列表容器初始css的left值\n  private currentImageTempTop: number = 0;\n  private currentImageTempLeft: number = 0;\n  private dragStartClientX: number = 0;\n  private dragStartClientY: number = 0;\n  private isStartMove: boolean = false;\n  imageViewHeight: string = \"400px\";\n  mainWindowHeight: number = 0;\n\n  constructor(\n    public domSanitizer: DomSanitizer,\n    private eventService: EventEmitterService\n  ) {}\n\n  ngOnInit() {\n    this.convertUrl(this.source);\n  }\n  private convertUrl(sources: string[]) {\n    this.imageSources.splice(0);\n    if (sources && sources.length > 0) {\n      sources.forEach((imgUrl: string) => {\n        this.imageSources.push(\n          this.domSanitizer.bypassSecurityTrustResourceUrl(imgUrl)\n        );\n      });\n      if (this.first == null) {\n        this.currentImageUrl = this.imageSources[0];\n      } else {\n        this.currentImageUrl = this.imageSources[this.first];\n      }\n      this.ready.emit(\"image viewer initialize!\");\n    } else {\n      throw \"没有图片源，请传入！\";\n    }\n  }\n  /**\n   *\n   * @param sources\n   */\n  changeImageSources(sources: string[]) {\n    this.source = sources;\n    this.convertUrl(this.source);\n  }\n  /**\n   * 主图加载完成\n   * @param img\n   * @param viewer\n   */\n  currentImageLoaded(img: HTMLImageElement, viewer: HTMLDivElement) {\n    this.currentImage = img;\n    this.initTop = (viewer.clientHeight - img.offsetHeight) / 2;\n    this.initLeft = (viewer.clientWidth - img.offsetWidth) / 2;\n    if (this.currentImage) {\n      this.currentImage.style.top = this.initTop + \"px\";\n      this.currentImage.style.left = this.initLeft + \"px\";\n    }\n    this.mainWindowHeight = this.getMainWindowHeight();\n    if (this.imageSources.length > 1) {\n      this.imageViewHeight = this.mainWindowHeight - 96 + \"px\";\n    } else {\n      this.imageViewHeight = this.mainWindowHeight - 46 + \"px\";\n    }\n    // viewer注册滚轮事件, 火狐浏览器滚轮事件为DOMMouseScroll，其它浏览器为mousewheel\n    if (this.checkBrowser().firefox) {\n      viewer.addEventListener(\"DOMMouseScroll\", (e: any) => {\n        this.currentImageZoomByWheel(e);\n      });\n    } else {\n      viewer.addEventListener(\"mousewheel\", (e: any) => {\n        this.currentImageZoomByWheel(e);\n      });\n    }\n  }\n\n  preOrNextImg(type: string) {\n    let index: number = this.imageSources.indexOf(this.currentImageUrl);\n    if (type == \"pre\") {\n      if (index != 0) {\n        index--;\n        this.currentImageUrl = this.imageSources[index];\n        this.eventService.rss.emit(this.eventService._imageViewerIndexChanged, {\n          index: index,\n        });\n      }\n    } else if (type == \"next\") {\n      if (index != this.imageSources.length - 1) {\n        index++;\n        this.currentImageUrl = this.imageSources[index];\n        this.eventService.rss.emit(this.eventService._imageViewerIndexChanged, {\n          index: index,\n        });\n      }\n    }\n    this.currentImgReset();\n  }\n\n  /**\n   * 根据变换参数改变主图\n   */\n  changeCurrentImg() {\n    let matrix: any = this.getMatrix(this.radian, this.x, this.y);\n    if (this.currentImage) {\n      this.currentImage.style.transform =\n        \"matrix(\" +\n        matrix.M11.toFixed(16) +\n        \",\" +\n        matrix.M21.toFixed(16) +\n        \",\" +\n        matrix.M12.toFixed(16) +\n        \",\" +\n        matrix.M22.toFixed(16) +\n        \", 0, 0)\";\n    }\n  }\n\n  /**\n   * 获取变换参数函数\n   *  radian\n   *  x\n   *  y\n   *  {{M11: number, M12: number, M21: number, M22: number}}\n   */\n  getMatrix(radian: number, x: number, y: number): any {\n    let Cos = Math.cos(radian),\n      Sin = Math.sin(radian);\n    return {\n      M11: Cos * x,\n      M12: -Sin * y,\n      M21: Sin * x,\n      M22: Cos * y,\n    };\n  }\n\n  /**\n   * 设置垂直翻转有关变量\n   */\n  vertical() {\n    this.radian = Math.PI - this.radian;\n    this.y *= -1;\n  }\n\n  /**\n   * 设置水平翻转有关变量\n   */\n  horizontal() {\n    this.radian = Math.PI - this.radian;\n    this.x *= -1;\n  }\n\n  /**\n   * 设置旋转的弧度\n   * @param radian\n   */\n  rotate(radian: number) {\n    this.radian = radian;\n  }\n\n  /**\n   * 设置弧度为向左转90度\n   */\n  rotateLeftBy90() {\n    this.radian -= Math.PI / 2;\n  }\n\n  /**\n   * 设置弧度为向左转90度\n   */\n  rotateRightBy90() {\n    this.radian += Math.PI / 2;\n  }\n\n  /**\n   * 根据角度设置旋转的弧度\n   *  degress\n   */\n  rotateByDegress(degress: number) {\n    this.radian = (degress * Math.PI) / 180;\n  }\n\n  /**\n   * 判断是否可以放大/缩小\n   *  scale\n   *  zoom\n   *  {number}\n   */\n  getZoom(scale: number, zoom: number): number {\n    return scale > 0 && scale > -zoom\n      ? zoom\n      : scale < 0 && scale < zoom\n      ? -zoom\n      : 0;\n  }\n\n  /**\n   * 设置缩放的有关变量\n   * @param zoom\n   */\n  scale(zoom: number) {\n    if (zoom) {\n      let hZoom: number = this.getZoom(this.x, zoom),\n        vZoom: number = this.getZoom(this.y, zoom);\n      if (hZoom && vZoom) {\n        this.x += hZoom;\n        this.y += vZoom;\n      }\n    }\n  }\n\n  /**\n   * 设置放大的有关变量\n   */\n  zoomin() {\n    this.scale(Math.abs(this.zoom));\n  }\n\n  /**\n   * 设置缩小的有关变量\n   */\n  zoomout() {\n    this.scale(-Math.abs(this.zoom));\n  }\n\n  /**\n   * 重置参数\n   */\n  reset() {\n    this.radian = 0;\n    this.x = 1;\n    this.y = 1;\n    this.zoom = 0.1;\n    if (this.currentImage) {\n      this.currentImage.style.top = this.initTop + \"px\";\n      this.currentImage.style.left = this.initLeft + \"px\";\n    }\n  }\n\n  // 以下为工具栏的按钮点击事件\n\n  /**\n   * 放大按钮事件\n   */\n  imageZoomin() {\n    this.zoomin();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 缩小按钮事件\n   */\n  imageZoomout() {\n    this.zoomout();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 向左旋转按钮事件\n   */\n  rotateLeft() {\n    this.rotateLeftBy90();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 向右旋转按钮事件\n   */\n  rotateRight() {\n    this.rotateRightBy90();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 垂直翻转按钮事件\n   */\n  flipVertical() {\n    this.horizontal();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 水平翻转按钮事件\n   */\n  flipHorizontal() {\n    this.vertical();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 主图恢复初始状态\n   */\n  currentImgReset() {\n    this.reset();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 下一页图片\n   * @param moreImg\n   * @param viewer\n   */\n  previousImg(moreImg: HTMLDivElement, viewer: HTMLDivElement) {\n    let moveVal: number =\n      Number(moreImg.style.left.split(\"px\")[0]) + viewer.clientWidth;\n    this.moreImgInitLeft = moveVal < 0 ? moveVal : 0;\n    if (this.moreImgInitLeft <= 0) {\n      this.moreImgInitLeft = 30;\n    }\n  }\n\n  /**\n   * 下一页图片\n   * @param moreImg\n   * @param viewer\n   */\n  nextImg(moreImg: HTMLDivElement, viewer: HTMLDivElement) {\n    let moveVal: number =\n      Number(moreImg.style.left.split(\"px\")[0]) - viewer.clientWidth;\n    this.moreImgInitLeft =\n      -moreImg.clientWidth < moveVal ? moveVal : this.moreImgInitLeft;\n    if (this.moreImgInitLeft <= 0) {\n      this.moreImgInitLeft = 30;\n    }\n  }\n\n  /**\n   * 点击小图加载主图事件\n   * @param imgUrl\n   */\n  changeCurrentImageUrl(imgUrl: string, index: number) {\n    this.currentImageUrl = imgUrl;\n    this.currentImgReset();\n    this.eventService.rss.emit(this.eventService._imageViewerIndexChanged, {\n      index: index,\n    });\n  }\n  /**\n   * 根据索引切换图片\n   */\n  changeCurrentIndex(index: number) {\n    if (index >= 0 && index < this.imageSources.length) {\n      this.currentImageUrl = this.imageSources[index];\n      this.currentImgReset();\n    }\n  }\n  /**\n   * 滚轮缩放\n   * @param e\n   */\n  currentImageZoomByWheel(e: any) {\n    e.preventDefault(); // 禁用滚轮事件的默认操作\n    let scale: number =\n      (e.wheelDelta ? e.wheelDelta / -180 : (e.detail || 0) / 3) *\n      Math.abs(this.zoom);\n    this.scale(scale);\n    if (this.x >= 0.1 && this.y >= 0.1) {\n      // 修复chrome下图片缩小到一定程度会突然变大的bug\n      this.changeCurrentImg();\n    }\n  }\n\n  /**\n   * 主图拖动开始事件\n   * @param e\n   */\n  currentImageDragStart(e: MouseEvent) {\n    if (this.currentImage) {\n      this.currentImageTempTop = parseInt(this.currentImage.style.top);\n      this.currentImageTempLeft = parseInt(this.currentImage.style.left);\n    }\n    this.dragStartClientX = e.clientX;\n    this.dragStartClientY = e.clientY;\n    if (this.currentImage) {\n      this.currentImage.style.transition = \"all 0s ease-out\";\n    }\n    this.isStartMove = true;\n  }\n\n  /**\n   * 设置照片高度\n   */\n  setImageHeight() {\n    const height = this.getMainWindowHeight();\n    if (height !== this.mainWindowHeight) {\n      this.mainWindowHeight = height;\n      if (this.imageSources.length > 1) {\n        this.imageViewHeight = height - 96 + \"px\";\n      } else {\n        this.imageViewHeight = height - 46 + \"px\";\n      }\n    }\n  }\n\n  /**\n   * 主图拖动中事件\n   * @param e\n   */\n  currentImageDrag(e: MouseEvent) {\n    this.setImageHeight();\n    if (this.isStartMove) {\n      let offsetX: number = e.clientX - this.dragStartClientX;\n      let offsetY: number = e.clientY - this.dragStartClientY;\n      if (this.currentImage) {\n        this.currentImage.style.top = this.currentImageTempTop + offsetY + \"px\";\n        this.currentImage.style.left =\n          this.currentImageTempLeft + offsetX + \"px\";\n      }\n    }\n  }\n\n  /**\n   * 主图拖动结束事件\n   * @param e\n   */\n  currentImageDragEnd(e: MouseEvent) {\n    if (this.currentImage) {\n      this.currentImage.style.transition = \"all 0.5s ease-out\";\n    }\n    this.isStartMove = false;\n  }\n\n  /**\n   * 取消默认的拖拽事件\n   *  e\n   */\n  cancleCurrentImageDrag(e: DragEvent) {\n    e.preventDefault();\n  }\n\n  /**\n   * 计算窗体高度，\n   * ssmodal_content 为模态对话框；\n   * sspanel_content 为map中的panel。\n   */\n  getMainWindowHeight(): number {\n    let parentNode = this.imageViewerContainer.nativeElement.parentNode;\n    while (parentNode) {\n      if (parentNode.className &&\n        (parentNode.className === \"ssmodal_content\" ||\n          parentNode.className === \"sspanel_content\")\n      ) {\n        break;\n      }\n      parentNode = parentNode.parentNode;\n    }\n    if (parentNode) {\n      return parentNode.clientHeight - 30;\n    } else {\n      parentNode = this.imageViewerContainer.nativeElement.parentNode;\n      let contentNode = null;\n      while (parentNode) {\n        if (parentNode.childNodes && parentNode.childNodes.length > 0) {\n          for (const child of parentNode.childNodes) {\n            if (child.nodeName.toLocaleUpperCase() === \"NZ-CONTENT\") {\n              contentNode = child;\n              break;\n            }\n          }\n        }\n        if (contentNode) {\n          break;\n        }\n        parentNode = parentNode.parentNode;\n      }\n      if (contentNode) {\n        return contentNode.clientHeight;\n      }\n    }\n    return this.height;\n  }\n\n  /**\n   * 检测浏览器\n   *  {any}\n   */\n  checkBrowser(): any {\n    let browser: any = {},\n      ua: string = navigator.userAgent;\n\n    // 检测Presto内核的Opera浏览器\n    if (window[\"opera\"]) {\n      browser.ver = window[\"opera\"].version();\n      browser.opera = parseFloat(browser.ver);\n    } else {\n      //确定 Microsoft Edge\n      if (/Edge\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.misEdge = parseFloat(browser.ver);\n      }\n\n      // 确定 WebKit内核Opera\n      else if (/OPR\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.opera = parseFloat(browser.ver);\n      }\n\n      // 确定 Chrome\n      else if (/Chrome\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.chrome = parseFloat(browser.ver);\n      }\n\n      // 确定 Safari\n      else if (/Version\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.safari = parseFloat(browser.ver);\n      }\n\n      // 确定 Firefox\n      else if (/Firefox\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.firefox = parseFloat(browser.ver);\n      }\n\n      // 检测 IE\n      else if (/MSIE ([^;]+)/.test(ua) || /rv:([^\\)]+)\\) like Gecko/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.ie = parseFloat(browser.ver);\n      }\n\n      // 检测 KHTML 用于Konqueror3.1及更早版本中不包含KHTML的版本，故而就要使用Konqueror的版本来代替\n      else if (/KHTML\\/(\\S+)/.test(ua) || /Konqueror\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.konq = parseFloat(browser.ver);\n      }\n    }\n    return browser;\n  }\n}\n","<p class=\"video-list\">\n\t<span *ngFor=\"let video of source;let i=index\" class='label'\n\t\t[ngClass]=\"{'label-default': i != sub,'label-primary': i == sub}\"\n\t\t  (click)=\"selectVideo(video,i)\">视频{{i+1}}\n\t</span>\n</p>\n<div class=\"videoViewerContainer\"\n\t (mouseover)=\"videoMouseover($event)\"\n\t (mouseout)=\"videoMouseout($event)\"\n\t [style.width]=\"width + 'px'\" #videoViewerContainer>\n\t<div class=\"videoViewer\">\n\t\t<video (click)=\"playOrPause()\"\n\t\t\t   [width]=\"videoWidth\"\n\t\t\t   [poster]=\"poster\"\n\t\t\t   (loadedmetadata)=\"onLoadedmetadata($event)\"\n\t\t\t   (ended)=\"OnPlayEnded($event)\"\n\t\t\t   (timeupdate)=\"onTimeupdate($event)\"\n\t\t\t   (progress)=\"onProgress($event)\"\n\t\t\t   (canplaythrough)=\"onCanplaythrough($event)\"\n\t\t\t   (play)=\"onPlay($event)\">\n\t\t\t<source [src]=\"videoUrl\" type=\"video/mp4\"/>\n\t\t</video>\n\t\t<div *ngIf=\"videoElem && videoElem.paused\">\n\t\t\t<span class=\"fa\"\n\t\t\t\t  (click)=\"playOrPause()\"\n\t\t\t\t  [ngClass]=\"{'fa-repeat': videoElem.ended, 'fa-play-circle-o': !videoElem.ended}\"\n\t\t\t\t  [title]=\"videoElem.ended ? '重播' : '播放'\">\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class=\"videoToolbar\" *ngIf=\"videoElem\" #videoToolbar>\n\t\t<div class=\"videoToolbar_progress\"\n\t\t\t [style.height]=\"videoToolbarProgressHeight + 'px'\">\n\t\t\t<span\n\t\t\t\t(mousedown)=\"progressBallDragStart($event)\"\n\t\t\t\t(mousemove)=\"progressBallDrag($event)\"\n\t\t\t\t(mouseup)=\"progressBallDragEnd($event)\"\n\t\t\t\t(mouseleave)=\"progressBallDragEnd($event)\"\n\t\t\t\t[style.left]=\"play_progress + 'px'\"\n\t\t\t\t[style.margin-left]=\"play_progress > 16 ? '-16px' : '0'\"\n\t\t\t\t[style.opacity]=\"showProgressBall ? 1 : 0\"\n\t\t\t\tclass=\"progress_val_ball\">\n\n\t\t\t\t<span>\n\t\t\t\t\t{{getFormatTime(play_progress / videoToolbar.clientWidth * videoElem.duration)}}\n\t\t\t\t</span>\n\n\t\t\t</span>\n\t\t\t<div (mousemove)=\"videoToolbarProgressMove($event)\" (click)=\"videoToolbarProgressClick($event)\"\n\t\t\t\t class=\"videoToolbar_play_progress\" [style.width]=\"play_progress + 'px'\">\n\t\t\t</div>\n\t\t\t<div (mousemove)=\"videoToolbarProgressMove($event)\" (click)=\"videoToolbarProgressClick($event)\"\n\t\t\t\t class=\"videoToolbar_buffer_progress\">\n\t\t\t</div>\n\t\t\t<span class=\"timeTip\" [style.left]=\"(timeTipOffsetX -16) + 'px'\">\n\t\t\t\t{{timeTip}}\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"videoToolbar_play_btn\">\n\t\t\t<span (click)=\"playOrPause()\" *ngIf=\"videoElem.paused\" class=\"playBtn fa fa-play-circle-o\"\n\t\t\t\t  aria-hidden=\"true\" [title]=\"videoElem.ended ? '重播' : '播放'\"></span>\n\t\t\t<span (click)=\"playOrPause()\" *ngIf=\"!videoElem.paused\" class=\"playBtn fa fa-pause-circle-o\"\n\t\t\t\t  aria-hidden=\"true\" title=\"暂停\"></span>\n\t\t\t<span class=\"playTime\">\n\t\t\t\t<span>{{currentTime}}</span>&nbsp;/&nbsp;{{totalTime}}\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"videoToolbar_volume_btn\">\n\t\t\t<span (click)=\"isMuted()\" class=\"mutedBtn fa\"\n\t\t\t\t  [ngClass]=\"{'fa-volume-down': videoElem.volume > 0 && videoElem.volume < 0.5, 'fa-volume-up': videoElem.volume >= 0.5, 'fa-volume-off': videoElem.volume == 0}\"\n\t\t\t\t  aria-hidden=\"true\" title=\"静音设置\"></span>\n\t\t\t<span class=\"volume_val\"\n\t\t\t\t  #volume_val>\n\t\t\t\t<span class=\"volume_val_ball\"\n\t\t\t\t\t  (mousedown)=\"volumeBallDragStart($event)\"\n\t\t\t\t\t  (mousemove)=\"volumeBallDrag($event, volume_val.clientWidth)\"\n\t\t\t\t\t  (mouseup)=\"volumeBallDragEnd($event)\"\n\t\t\t\t\t  (mouseleave)=\"volumeBallDragEnd($event)\"\n\t\t\t\t\t  [style.left]=\"(videoElem.volume * 100 - 8) + 'px'\">\n\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{(videoElem.volume * 100).toFixed(0) + '%'}}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span (click)=\"volumeValClick($event, volume_val.clientWidth)\" class=\"volume_val_active\"\n\t\t\t\t\t  [style.width]=\"(videoElem.volume * 100) + 'px'\"></span>\n\t\t\t\t<span (click)=\"volumeValClick($event, volume_val.clientWidth)\" class=\"volume_val_notActive\"></span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n","import {Component, OnInit, ViewChild, ElementRef} from '@angular/core';\nimport {Input, Output, EventEmitter} from \"@angular/core\";\nimport {DomSanitizer, SafeResourceUrl} from \"@angular/platform-browser\";\nimport { ComponentRegister } from '../../../../decorator/component-register.decorator';\n@ComponentRegister({\n\turi: 'video-viewer',\n  path: \"components/shared/ngxviewer/video-viewer\"\n})\n@Component({\n\tselector: 'video-viewer',\n\ttemplateUrl: './video-viewer.component.html',\n\tstyleUrls: ['./video-viewer.component.scss']\n})\nexport class VideoViewerComponent implements OnInit {\n\n\t@ViewChild('videoToolbar',{static:true}) videoToolbar: ElementRef;\n\t@Input() width: number = 0;\n\t@Input() videoWidth: number = 0;\n\t@Input() height: number = 0;\n\t@Input() source: string[] = [];\n\t@Input() poster: string;\n\t@Output() ready: EventEmitter<any> = new EventEmitter<any>(false);\n\n\tvideoElem: HTMLVideoElement; // video dom对象\n\tsub: number = 0;\n\tvideoUrl: SafeResourceUrl; // 视频路径\n\tcurrentTime: string; // 视频播放的当前时间\n\ttotalTime: string; // 视频总时间\n\tplay_progress: number = 0; // 播放的进度条长度值\n\tvideoToolbarProgressHeight: number = 3; // 进度条高度\n\tpreVolume: number = 1; // 静音设置前的音量值\n\tshowProgressBall: boolean = false; // 是否显示进度条上滑动的球\n\tprogressBallDragStartClientX: number = 0; // 进度条上滑动的球初始x位置\n\tisProgressBallStartMove = false; // 进度条上的球是否开始滑动\n\tvolumeBallDragStartClientX: number = 0; // 音量条上滑动的球初始x位置\n\tisVolumeBallStartMove = false; // 音量条上的球是否开始滑动\n\ttimeTip: string; // 时间提示\n\ttimeTipOffsetX: number = 0;\n\n\tconstructor(public domSanitizer: DomSanitizer) {\n\t}\n\n\tngOnInit() {\n\t\tthis.videoUrl = this.source[0];\n\t\tthis.ready.emit('video viewer initialize!');\n\t}\n\n\t/**\n\t * 视频的元数据已加载事件\n\t * @param e\n\t */\n\tonLoadedmetadata(e: any) {\n\t\tthis.videoElem = e.target as HTMLVideoElement;\n\t\tthis.totalTime = this.getFormatTime(this.videoElem.duration);\n\t\tthis.currentTime = this.getFormatTime(this.videoElem.currentTime);\n\t}\n\n\t/**\n\t * 播放结束事件\n\t * @param e\n\t */\n\tOnPlayEnded(e: any) {\n\t\tconsole.log(`播放结束：${this.videoElem.ended}`);\n\t}\n\n\t/**\n\t * 开始播放事件\n\t * @param e\n\t */\n\tonPlay(e: any) {\n\t\tconsole.log('play');\n\t}\n\n\t/**\n\t * 播放时间改变事件\n\t * @param e\n\t */\n\tonTimeupdate(e: any) {\n\t\tthis.currentTime = this.getFormatTime(this.videoElem.currentTime);\n\t\tthis.play_progress = this.videoElem.currentTime / this.videoElem.duration * this.videoToolbar.nativeElement.clientWidth;\n\t}\n\n\tonProgress(e: any) {\n\t\tconsole.log('progress');\n\t}\n\n\tonCanplaythrough(e: any) {\n\t\tconsole.log('canplaythrough');\n\t}\n\n\tvideoToolbarProgressClick(e: MouseEvent) {\n\t\tthis.play_progress = e.offsetX;\n\t\tlet tempCurrentTime: number = this.play_progress / this.videoToolbar.nativeElement.clientWidth * this.videoElem.duration;\n\t\tthis.videoElem.currentTime = tempCurrentTime;\n\t\tthis.currentTime = this.getFormatTime(tempCurrentTime);\n\t}\n\n\tvideoToolbarProgressMove(e: MouseEvent) {\n\t\tlet tempCurrentTime: number = e.offsetX / this.videoToolbar.nativeElement.clientWidth * this.videoElem.duration;\n\t\tthis.timeTipOffsetX = e.offsetX;\n\t\tthis.timeTip = this.getFormatTime(tempCurrentTime);\n\t}\n\n\tprogressBallDragStart(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.progressBallDragStartClientX = e.clientX;\n\t\tthis.isProgressBallStartMove = true;\n\t}\n\n\tprogressBallDrag(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tif (this.isProgressBallStartMove) {\n\t\t\tlet offsetX: number = e.clientX - this.progressBallDragStartClientX;\n\t\t\tthis.progressBallDragStartClientX = e.clientX;\n\t\t\tthis.play_progress = (this.play_progress + offsetX);\n\t\t\tif (this.play_progress >= this.videoToolbar.nativeElement.clientWidth) {\n\t\t\t\tthis.play_progress = this.videoToolbar.nativeElement.clientWidth;\n\t\t\t} else if (this.play_progress <= 0) {\n\t\t\t\tthis.play_progress = 0;\n\t\t\t}\n\t\t\tlet tempCurrentTime: number = this.play_progress / this.videoToolbar.nativeElement.clientWidth * this.videoElem.duration;\n\t\t\tthis.videoElem.currentTime = tempCurrentTime;\n\t\t\tthis.currentTime = this.getFormatTime(tempCurrentTime);\n\t\t}\n\t}\n\n\tprogressBallDragEnd(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.isProgressBallStartMove = false;\n\t}\n\n\tvolumeValClick(e: MouseEvent, width: number) {\n\t\tconsole.log(e.offsetX);\n\t\tthis.videoElem.volume = e.offsetX / width;\n\t}\n\n\tvolumeBallDragStart(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.volumeBallDragStartClientX = e.clientX;\n\t\tthis.isVolumeBallStartMove = true;\n\t}\n\n\tvolumeBallDrag(e: MouseEvent, width: number) {\n\t\te.stopPropagation();\n\t\tif (this.isVolumeBallStartMove) {\n\t\t\tlet offsetX: number = e.clientX - this.volumeBallDragStartClientX;\n\t\t\tthis.volumeBallDragStartClientX = e.clientX;\n\t\t\tlet volume: number = this.videoElem.volume + offsetX / width;\n\t\t\tif (volume <= 0) {\n\t\t\t\tthis.videoElem.volume = 0;\n\t\t\t} else if (volume >= 1) {\n\t\t\t\tthis.videoElem.volume = 1;\n\t\t\t} else {\n\t\t\t\tthis.videoElem.volume = volume;\n\t\t\t}\n\t\t}\n\t}\n\n\tvolumeBallDragEnd(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.isVolumeBallStartMove = false;\n\t}\n\n\tvideoMouseover(e: any) {\n\t\tthis.videoToolbarProgressHeight = 16;\n\t\tthis.showProgressBall = true;\n\t}\n\n\tvideoMouseout(e: any) {\n\t\tthis.videoToolbarProgressHeight = 3;\n\t\tthis.showProgressBall = false;\n\t}\n\n\t/**\n\t * 播放视频\n\t */\n\tplay() {\n\t\tthis.videoElem.ended && (this.videoElem.currentTime = 0);\n\t\tthis.videoElem.play();\n\t}\n\n\t/**\n\t * 暂停视频\n\t */\n\tpause() {\n\t\tthis.videoElem.pause();\n\t}\n\n\t/**\n\t * 播放/暂停\n\t */\n\tplayOrPause() {\n\t\tthis.videoElem.paused ? this.play() : this.pause();\n\t}\n\t/**\n\t * 选中视频\n\t * */\n\tselectVideo(path, i) {\n\t\tthis.sub = JSON.parse(JSON.stringify(i));\n\t\tthis.videoUrl = path;\n\t\tthis.videoElem.load();\n\t}\n\n\tisMuted() {\n\t\tif (this.videoElem.muted) {\n\t\t\tthis.videoElem.muted = false;\n\t\t\tthis.videoElem.volume = this.preVolume;\n\t\t} else {\n\t\t\tthis.videoElem.muted = true;\n\t\t\tthis.preVolume = this.videoElem.volume;\n\t\t\tthis.videoElem.volume = 0;\n\t\t}\n\t}\n\n\tgetFormatTime(value: number): string {\n\t\tlet h: string = parseInt(value / 3600 + '') < 10 ? '0' + parseInt(value / 3600 + '') : '' + parseInt(value / 3600 + ''),\n\t\t\tm: string = parseInt(value % 3600 / 60 + '') < 10 ? '0' + parseInt(value % 3600 / 60 + '') : '' + parseInt(value % 3600 / 60 + ''),\n\t\t\ts: string;\n\t\tif (value >= 60) {\n\t\t\ts = value % 3600 % 60 < 10 ? '0' + parseInt(value % 3600 % 60 + '') : '' + parseInt(value % 3600 % 60 + '');\n\t\t} else if (value < 60 && value >= 10) {\n\t\t\ts = '' + parseInt(value + '');\n\t\t} else if (value < 10) {\n\t\t\ts = '0' + parseInt(value + '');\n\t\t}\n\t\treturn `${h}:${m}:${s}`;\n\t}\n}\n","<div class=\"epsgis-ngx-viewer\">\n\t<pdf-viewer *ngIf=\"model == 'pdf'\" [width]=\"width\" [height]=\"height\" [source]=\"source\" [viewerUrl]=\"viewerUrl\" (ready)=\"viewerReady($event)\"></pdf-viewer>\n\t<image-viewer *ngIf=\"model == 'image'\" [source]=\"source\" [width]=\"width\" [height]=\"height\" [first]=\"first\" (ready)=\"viewerReady($event)\"></image-viewer>\n\t<video-viewer *ngIf=\"model == 'video'\" [poster]=\"poster\" [source]=\"source\" [width]=\"width\" [videoWidth]='videoWidth' [height]=\"height\" (ready)=\"viewerReady($event)\"></video-viewer>\n</div>\n","import { Component, OnInit, Input, Output, EventEmitter, Injector } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-ngx-viewer',\n  path: \"components/shared/ngxviewer\"\n})\n@Component({\n    selector: 'epsgis-ngx-viewer',\n    templateUrl: './e-ngx-viewer.component.html',\n    styleUrls: ['./e-ngx-viewer.component.scss']\n})\nexport class EpsGISNgxViewerComponent implements OnInit {\n\n    @Input() model: string = 'pdf'; // 视图模式，默认pdf。将实现image与video模式\n    @Input() width: number = 600; // 查看器宽度\n    @Input() videoWidth: number = 400; //视频播放器宽度\n    @Input() height: number = 800; // 查看器高度\n    @Input() source: string | string[]; // pdf路径、图片文件路径数组及视频路径\n    @Input() poster: string = ''; // 视频预览图（海报图片）路径\n    @Input() viewerUrl: string = ''; // pdf查看器路径(pdfjs/web/viewer.html)\n    @Input() first: number = 0; //照片预览首张下标\n    @Output() ready: EventEmitter<any> = new EventEmitter<any>(false); // 查看器初始完成事件\n\n    constructor(private activatedRoute: ActivatedRoute,\n        private injector:Injector) {}\n\n    ngOnInit() {\n        //路由参数\n        this.activatedRoute.params.subscribe((param: any) => {\n          if (param['model']) {\n            this.model = param['model'];\n          }\n          if (param['source']) {\n            this.source = param['source'];\n          }\n          if (param['width']) {\n            this.width = param['width'];\n          }\n          if (param['width']) {\n            this.width = param['width'];\n          }\n          if (param['videoWidth']) {\n            this.videoWidth = param['videoWidth'];\n          }\n          if (param['height']) {\n            this.height = param['height'];\n          }\n          if (param['poster']) {\n            this.poster = param['poster'];\n          }\n          if (param['viewerUrl']) {\n            this.viewerUrl = param['viewerUrl'];\n          }\n          if (param['first']) {\n            this.first = param['first'];\n          }\n        });\n    \n         //获取动态组件参数\n         this.model = this.injector.get(\"model\",this.model);\n         this.source = this.injector.get(\"source\",this.source);\n         this.width = this.injector.get(\"width\",this.width);\n         this.videoWidth = this.injector.get(\"videoWidth\",this.videoWidth);\n         this.height = this.injector.get(\"height\",this.height);\n         this.poster = this.injector.get(\"poster\",this.poster);\n         this.viewerUrl = this.injector.get(\"viewerUrl\",this.viewerUrl);\n         this.first = this.injector.get(\"first\",this.first);\n    }\n\n    viewerReady($event: any) {\n        this.ready.emit($event);\n    }\n}\n","<section class=\"json-viewer\">\n  <section *ngFor=\"let segment of segments\" [ngClass]=\"['segment', 'segment-type-' + segment.type]\">\n    <section (click)=\"toggle(segment)\" [ngClass]=\"{\n        'segment-main': true,\n        'expandable': isExpandable(segment),\n        'expanded': segment.expanded\n      }\">\n      <div *ngIf=\"isExpandable(segment)\" class=\"toggler\"\n        [ngClass]=\"{'collapse': segment.expanded, 'expand': !segment.expanded}\"></div>\n      <span class=\"segment-key\">{{ segment.key }}</span>\n      <span class=\"segment-separator\">: </span>\n      <span *ngIf=\"!segment.expanded || !isExpandable(segment)\" class=\"segment-value\">{{ segment.description }}</span>\n    </section>\n    <section *ngIf=\"segment.expanded && isExpandable(segment)\" class=\"children\">\n      <epsgis-json-viewer [json]=\"segment.value\" [expanded]=\"expanded\"></epsgis-json-viewer>\n    </section>\n  </section>\n</section>","import { Component, OnChanges, Input, OnInit } from '@angular/core';\n\nexport interface Segment {\n  key: string;\n  value: any;\n  type: undefined | string;\n  description: string;\n  expanded: boolean;\n}\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-json-viewer',\n  path: \"components/shared/jsonviewer\"\n})\n@Component({\n  selector: 'epsgis-json-viewer',\n  templateUrl: './json-viewer.component.html',\n  styleUrls: ['./json-viewer.component.scss']\n})\nexport class EpsGISJsonViewerComponent implements OnInit, OnChanges {\n  @Input() json: any;\n  @Input() expanded = true;\n  /**\n   * @deprecated It will be always true and deleted in version 3.0.0\n   */\n  @Input() cleanOnChange = true;\n\n  segments: Segment[] = [];\n\n  ngOnInit(): void {\n    this.initJson();\n  }\n\n  initJson(): void {\n    if(typeof this.json === 'string') {\n      this.json = JSON.parse(this.json);\n    }\n    this.ngOnChanges();\n  }\n\n  ngOnChanges() {\n    if (this.cleanOnChange) {\n      this.segments = [];\n    }\n\n    if (typeof this.json === 'object') {\n      Object.keys(this.json).forEach( key => {\n        this.segments.push(this.parseKeyValue(key, this.json[key]));\n      });\n    } else {\n      this.segments.push(this.parseKeyValue(`(${typeof this.json})`, this.json));\n    }\n  }\n\n  isExpandable(segment: Segment) {\n    return segment.type === 'object' || segment.type === 'array';\n  }\n\n  toggle(segment: Segment) {\n    if (this.isExpandable(segment)) {\n      segment.expanded = !segment.expanded;\n    }\n  }\n\n  private parseKeyValue(key: any, value: any): Segment {\n    const segment: Segment = {\n      key: key,\n      value: value,\n      type: undefined,\n      description: '' + value,\n      expanded: this.expanded\n    };\n\n    switch (typeof segment.value) {\n      case 'number': {\n        segment.type = 'number';\n        break;\n      }\n      case 'boolean': {\n        segment.type = 'boolean';\n        break;\n      }\n      case 'function': {\n        segment.type = 'function';\n        break;\n      }\n      case 'string': {\n        segment.type = 'string';\n        segment.description = '\"' + segment.value + '\"';\n        break;\n      }\n      case 'undefined': {\n        segment.type = 'undefined';\n        segment.description = 'undefined';\n        break;\n      }\n      case 'object': {\n        // yea, null is object\n        if (segment.value === null) {\n          segment.type = 'null';\n          segment.description = 'null';\n        } else if (Array.isArray(segment.value)) {\n          segment.type = 'array';\n          segment.description = 'Array[' + segment.value.length + '] ' + JSON.stringify(segment.value);\n        } else if (segment.value instanceof Date) {\n          segment.type = 'date';\n        } else {\n          segment.type = 'object';\n          segment.description = 'Object ' + JSON.stringify(segment.value);\n        }\n        break;\n      }\n    }\n\n    return segment;\n  }\n}\n","import { ComponentRef, Injector } from '@angular/core';\nimport { ActivatedRoute, ActivatedRouteSnapshot, DetachedRouteHandle, RouteReuseStrategy } from '@angular/router';\nimport { AppGlobalConfig } from '../models/app-config';\n// export const NotReuseRoutesConfigToken = new InjectionToken<Array<string>>('not_reuse_routes_config');\n// @dynamic\n/**\n * 路由复用策略\n */\nexport class SimpleReuseStrategy implements RouteReuseStrategy/*IonicRouteStrategy */ {\n\n  public static snapshots: { [key: string]: DetachedRouteHandle } = {};\n  // public static snapshots: Map<string, DetachedRouteHandle> = new Map();\n  private static waitDelete: string;\n  private appGlobal: AppGlobalConfig;\n  constructor(private injector: Injector) {\n\n  }\n  // constructor(@Inject(NotReuseRoutesConfigToken) private notReuseRoutes: Array<string>) {\n\n  // }\n  /**\n   * 表示对所有路由允许复用， 如果有路由不想复用可以在这加一些业务逻辑判断\n   * @param route \n   */\n  public shouldDetach(route: ActivatedRouteSnapshot): boolean {\n    //Error: Cannot reattach ActivatedRouteSnapshot created from a different route\n    if (!route.routeConfig || route.routeConfig.loadChildren) {\n      return false;\n    }\n    if (route.data.reuse === false) {\n      return false;\n    }\n    const url: string = route['_routerState'].url;\n    if (!this.appGlobal) {\n      this.appGlobal = this.injector.get(AppGlobalConfig);\n    }\n    if (this.appGlobal.menuConfig\n      && this.appGlobal.menuConfig.notReuseRoutes\n      && this.appGlobal.menuConfig.notReuseRoutes.length >= 1\n    ) {\n      return !this.appGlobal.menuConfig.notReuseRoutes.some(n => url.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()) >= 0);\n    }\n\n    // if (this.notReuseRoutes && this.notReuseRoutes.length >= 1) {\n    //   return !this.notReuseRoutes.some(n => n.toLocaleLowerCase() == url.toLocaleLowerCase());\n    // }\n    return true;\n  }\n\n  /**\n   * 当路由离开时会触发，按path作为key存储路由快照&组件当前实例对象\n   * @param route \n   * @param handle \n   */\n  public store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\n    if (!route.routeConfig || route.routeConfig.loadChildren) return;\n    const key = SimpleReuseStrategy.getRouteUrl(route);\n    if (SimpleReuseStrategy.waitDelete && SimpleReuseStrategy.waitDelete === key) {\n      // 如果待删除是当前路由则不存储快照\n      SimpleReuseStrategy.waitDelete = null;\n      return;\n    }\n    SimpleReuseStrategy.snapshots[key] = handle;\n  }\n\n  /**\n   * 如果 path 在缓存中有的都认为允许还原路由\n   * @param route \n   */\n  public shouldAttach(route: ActivatedRouteSnapshot): boolean {\n    if (!route.routeConfig || route.routeConfig.loadChildren) return false;\n    return !!SimpleReuseStrategy.snapshots[SimpleReuseStrategy.getRouteUrl(route)];\n  }\n\n  /**\n   * 从缓存中获取快照，若无则返回nul\n   * @param route \n   */\n  public retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n    if (!route.routeConfig) {\n      return null;\n    }\n    // if (!route.routeConfig || route.routeConfig.loadChildren) {\n    //   return null\n    // }\n    // SimpleReuseStrategy.waitDelete = SimpleReuseStrategy.getRouteUrl(route);\n\n    if (route.routeConfig.loadChildren) {\n      Object.keys(SimpleReuseStrategy.snapshots).forEach(key => delete SimpleReuseStrategy.snapshots[key]);\n      return null as any;\n    }\n    return SimpleReuseStrategy.snapshots[SimpleReuseStrategy.getRouteUrl(route)];\n  }\n\n  /**\n   * 进入路由触发，判断是否同一路由\n   * @param future \n   * @param curr \n   */\n  public shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n    return future.routeConfig === curr.routeConfig && JSON.stringify(future.params) === JSON.stringify(curr.params);\n  }\n  /**\n   * 获取url\n   * @param route \n   */\n  public static getRouteUrl(route: ActivatedRouteSnapshot) {\n    // return route['_routerState'].url.replace(/\\//g, '_');\n    const key = route['_routerState'].url.replace(/\\//g, '_') + '_' + (route.routeConfig.loadChildren || route.routeConfig.component.toString().split('(')[0].split(' ')[1]);\n    return key;\n  }\n  /**\n   * 如果有路由缓存，则删除\n   * @param url \n   */\n  public static deleteRouteSnapshot(key: string): void {\n    if (SimpleReuseStrategy.snapshots[key]) {\n      this.deactivateOutlet(this.snapshots[key])\n      delete SimpleReuseStrategy.snapshots[key];\n    } else {\n      SimpleReuseStrategy.waitDelete = key;\n    }\n  }\n  private static deactivateOutlet(handle: DetachedRouteHandle): void {\n    const componentRef: ComponentRef<any> = handle ? handle['componentRef'] : null;\n    if (componentRef) {\n      componentRef.destroy()\n    }\n  }\n  public static clearRouteSnapshot() {\n    for (const key in this.snapshots) {\n      if (this.snapshots[key]) {\n        this.deactivateOutlet(this.snapshots[key]);\n        // delete this.snapshots[key];\n      }\n    }\n    this.snapshots = {};\n    SimpleReuseStrategy.waitDelete = \"\";\n  }\n}","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class MenuTabService {\n    constructor() {\n\n    }\n\n    index: number=0;\n    name: string=\"\";\n    add() {\n        this.index++;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n    setName(n: string) {\n        this.name = n;\n\n    }\n    getName() {\n        return this.name;\n    }\n}","<nz-tabset [class.hide]=\"!showTab\" style=\"margin-left: -1px;\" [nzAnimated]=\"true\" [nzSelectedIndex]=\"currentIndex\" nzShowPagination=\"true\"\n  (nzSelectChange)=\"nzSelectChange($event)\" [nzType]=\"'line'\">\n  <nz-tab *ngFor=\"let menu of menuList\" [nzTitle]=\"nzTabHeading\">\n    <ng-template #nzTabHeading>\n      <div (contextmenu)=\"contextMenu($event,menu,menuComp)\">\n        {{menu.title}}\n        <!-- <i *ngIf=\"menu.isRemove\" (click)=\"closeUrl(menu.url)\" class=\"anticon anticon-cross close-red\" ></i> -->\n        <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\" *ngIf=\"menu.canClose\" (click)=\"closeTab($event,menu)\"></i>\n      </div>\n    </ng-template>\n    <!-- <ng-template #contextTemplate> -->\n      <nz-dropdown-menu #menuComp=\"nzDropdownMenu\">\n      <ul nz-menu nzInDropDown class=\"dropdown-menu\">\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeTab')\" *ngIf=\"menu.canClose\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span class=\"danger\">关闭</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canSelect\"><li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'selectTab')\" *ngIf=\"menu.canSelect\">\n          <i nz-icon [nzType]=\"'check'\" [nzTheme]=\"'outline'\"></i>\n          <span class=\"danger\">选中</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canCloseLeft\"></li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeLeftTab');\" *ngIf=\"menu.canCloseLeft\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span>关闭左侧页面</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canCloseRight\"></li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeRightTab');\" *ngIf=\"menu.canCloseRight\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span>关闭右侧页面</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canCloseExceptFirst\"></li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeAllTab');\" *ngIf=\"menu.canCloseExceptFirst\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span>保留第一页</span>\n        </li>\n      </ul>\n    </nz-dropdown-menu>\n    <!-- </ng-template> -->\n  </nz-tab>\n</nz-tabset>\n<div class=\"tab-content\">\n  <!--路由的内容会被显示在这里-->\n  <ng-content></ng-content>\n</div>","import { ChangeDetectorRef, Component, OnDestroy, OnInit, TemplateRef } from '@angular/core';\nimport { ActivatedRoute, Data, NavigationEnd, Router } from '@angular/router';\nimport { UtilsService } from '../../services/utils.service';\n// import { NzDropdownContextComponent, NzDropdownService } from 'ng-zorro-antd';\nimport { NzContextMenuService, NzDropdownMenuComponent } from 'ng-zorro-antd/dropdown';\nimport { filter, map } from 'rxjs/operators';\nimport { SimpleReuseStrategy } from '../../strategy/simple-reuse-strategy';\nimport { AppGlobalConfig } from '../../models/app-config';\nimport { MenuTabService } from './menu-tab.service';\n@Component({\n  selector: 'epsgis-menu-tab',\n  templateUrl: './menu-tab.component.html',\n  styleUrls: ['./menu-tab.component.scss']\n  // providers: [MenuTabService]\n})\nexport class MenuTabComponent implements OnInit, OnDestroy {\n\n  /**\n   * 打开的路由列表\n   */\n  menuList: Array<ITabMenuItem> = [];\n  /**\n   * 当前选中tab索引\n   */\n  currentIndex = -1;\n  urlMapTitle = new Map();\n  dropdown: NzDropdownMenuComponent;\n  showTab: boolean = true;\n  constructor(private router: Router,\n    private activatedRoute: ActivatedRoute,\n    // private titleService: Title,\n    private nzDropdownService: NzContextMenuService,\n    private cdr: ChangeDetectorRef,\n    private appGlobal: AppGlobalConfig,\n    private menuTabService: MenuTabService\n  ) {\n    // 路由事件\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd))\n      .pipe(map(() => this.activatedRoute))\n      .pipe(map(route => {\n        while (route.firstChild) { route = route.firstChild; }\n        return route;\n      }))\n      .pipe(filter(route => route.outlet === 'primary'))\n      //.pipe(mergeMap((route)=>route.data))\n      // .subscribe((data) => this.addToTab(data))\n      .subscribe(route => {\n        this.addToTab(route);\n      });\n  }\n  ngOnInit() {\n\n  }\n  ngOnDestroy() {\n    //服用里调用了destory，这里再调用就会造成递归调用\n    // this.clear();\n  }\n  /**\n   * \n   * @param activatedRoute \n   */\n  private addToTab(activatedRoute: ActivatedRoute) {\n    //activatedRoute[\"_routerState\"].snapshot.url;\n    // this.menuTabService.add();\n    // console.log(\"index:s%,naem:s%\", this.menuTabService.getIndex(), this.menuTabService.getName());\n    if (this.router.url.indexOf(\"/login\") >= 0) {\n      this.clear();\n      return;\n    }\n    const routeData = activatedRoute.data[\"value\"];\n    if (routeData.showInTab === false) {\n      this.showTab = false;\n      return;\n    }\n    if (this.appGlobal.menuConfig\n      && this.appGlobal.menuConfig.notShowInTabRoutes\n      && this.appGlobal.menuConfig.notShowInTabRoutes.length >= 1\n    ) {\n      const exists = this.appGlobal.menuConfig.notShowInTabRoutes.some(n => this.router.url.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()) >= 0);\n      if (exists) {\n        this.showTab = false;\n        return;\n      }\n    }\n    this.showTab = true;\n    //先取配置的标题，没有再从菜单里查找\n    let title = routeData.title;\n    if (!title) {\n      //查找菜单\n      const m = this.findMenu(this.router.url);\n      title = m ? m.name : this.router.url;\n    }\n    this.router\n    let menu: ITabMenuItem = {\n      title: title,\n      url: this.router.url,\n      key: SimpleReuseStrategy.getRouteUrl(activatedRoute.snapshot)\n    };\n\n    // this.titleService.setTitle(menu.title); // 设置网页标题\n    const exitMenu = this.menuList.find(info => info.url === menu.url);\n    if (!exitMenu) {// 如果不存在那么不添加，\n      this.menuList.push(menu);\n    }\n    this.currentIndex = this.menuList.findIndex(p => p.url === menu.url);\n    this.refreshMenuList();\n  }\n\n  /**刷新菜单项 */\n  private refreshMenuList() {\n    if(!this.menuList || this.menuList.length < 1) {\n      return;\n    }\n    if(this.menuList.length === 1) {\n      this.menuList[0].canClose = false;\n      this.menuList[0].canSelect = false;\n      this.menuList[0].canCloseLeft = false;\n      this.menuList[0].canCloseRight = false;\n      this.menuList[0].canCloseExceptFirst = false;\n    } else {\n      let index: number = 0;\n      this.menuList.forEach(item => {\n        item.canClose = true;\n        item.canCloseExceptFirst = true;\n        item.canSelect = false;\n        if(index !== this.currentIndex) {\n          item.canSelect = true;\n        }\n        item.canCloseLeft = true;\n        item.canCloseRight = true;\n        if(index === 0) {\n          item.canCloseLeft = false;\n        } else if(index === (this.menuList.length -1)) {\n          item.canCloseRight = false;\n        }\n        index++;\n      });\n    }\n  }\n\n  private clear() {\n    this.urlMapTitle.clear();\n    this.menuList.splice(0);\n    SimpleReuseStrategy.clearRouteSnapshot();\n  }\n  private recurseFindMenu = (url: string, arr: Array<any>) => {\n    let menu = null;\n    if (arr && arr.length >= 1) {\n      for (let index = 0; index < arr.length; index++) {\n        const m = arr[index];\n        if (m.path == url) {\n          menu = m;\n        } else {\n          menu = this.recurseFindMenu(url, m.children);\n        }\n        if (menu) {\n          break;\n        }\n      }\n    }\n    return menu;\n  };\n  private findMenu(url: string) {\n    if (this.urlMapTitle.has(url)) {\n      return this.urlMapTitle.get(url);\n    }\n    if (!this.appGlobal || !this.appGlobal.menuConfig.menuData) {\n      return null;\n    }\n    const m = this.recurseFindMenu(url, this.appGlobal.menuConfig.menuData);\n    if (m) {\n      this.urlMapTitle.set(url, m);\n    }\n    return m;\n  }\n\n  private getIndex(menu: ITabMenuItem) {\n    return this.menuList.findIndex(p => p.url === menu.url);\n  }\n  /**\n   * 关闭选项标签\n   * @param key \n   */\n  private closeByUrl(key: string) {\n    // 如果只有一个不可以关闭\n    if (this.menuList.length === 1) {\n      return;\n    }\n    // 通过url查找tab索引\n    const index = this.menuList.findIndex(p => p.key === key);\n    if (index <= -1) {\n      console.log(\"没有找到tab，无法关闭,key:\" + key);\n      return;\n    }\n    this.menuList.splice(index, 1);\n    // 删除复用\n    SimpleReuseStrategy.deleteRouteSnapshot(key);\n    // 如果当前删除的对象是当前选中的，那么需要跳转\n    if (this.currentIndex === index) {\n      // 显示上一个选中\n      let menu = this.menuList[index - 1];\n      if (!menu) {// 如果上一个没有下一个选中\n        menu = this.menuList[index];\n      }\n      // 跳转路由\n      this.router.navigate([menu.url]);\n    }\n  }\n  /**\n   * tab发生改变\n   */\n  nzSelectChange($event) {\n    this.currentIndex = $event.index;\n    const menu = this.menuList[this.currentIndex];\n    this.router.navigate([menu.url]);\n  }\n\n  private navigateToUrl(index: number) {\n    if (this.menuList.length == 0) {\n      return;\n    }\n    if (index <= -1) {\n      index = 0;\n    }\n    if (index >= this.menuList.length) {\n      index = this.menuList.length - 1;\n    }\n    // const menu = this.menuList[index];\n    // 跳转路由\n    // this.router.navigate([menu.url]);\n    this.currentIndex = index;\n  }\n\n  /**\n   * \n   * @param $event \n   * @param template  template: TemplateRef<void>,\n   * @param menu \n   */\n  contextMenu($event: MouseEvent, menu: ITabMenuItem,menuComp:NzDropdownMenuComponent): void {\n    // this.dropdown = this.nzDropdownService.create($event, template);\n    this.nzDropdownService.create($event, menuComp);\n  }\n  /**\n   * \n   * @param evt \n   * @param node \n   * @param menu \n   */\n  selectDropdown(evt: MouseEvent, menu: ITabMenuItem, func: string): void {\n    //this.dropdown.close();\n    this.nzDropdownService.close();\n    this[func](evt, menu);\n    //通过x关闭的可以自动刷新，右键菜单关闭的不行。。。。艹，哪里问题？？？\n    UtilsService.detectChanges(this.cdr);\n  }\n  /**\n   * \n   * @param predicate \n   * @param thisArg \n   */\n  private removeRoute(predicate: (value: ITabMenuItem, index: number, array: ITabMenuItem[]) => ITabMenuItem, thisArg?: any) {\n    const arr = this.menuList.filter(predicate);\n    if (arr && arr.length >= 1) {\n      arr.forEach(m => {\n        SimpleReuseStrategy.deleteRouteSnapshot(m.key);\n      });\n    }\n  }\n  /**\n   * \n   * @param key \n   */\n  closeTabByRoute(activatedRoute: ActivatedRoute) {\n    const key = SimpleReuseStrategy.getRouteUrl(activatedRoute.snapshot)\n    this.closeTabByKey(key);\n  }\n  /**\n   * \n   * @param key \n   */\n  closeTabByKey(key: string) {\n    this.closeByUrl(key);\n  }\n  /**\n   * 关闭tab\n   * @param menu \n   */\n  closeTab(evt: MouseEvent, menu: ITabMenuItem) {\n    this.closeByUrl(menu.key);\n    this.refreshMenuList();\n  }\n  /**\n   * 选中tab\n   * @param menu \n   */\n  selectTab(evt: MouseEvent, menu: ITabMenuItem) {\n    this.navigateToUrl(this.getIndex(menu));\n    this.refreshMenuList();\n  }\n  /**\n   * 关闭左侧tab\n   * @param menu \n   */\n  closeLeftTab(evt: MouseEvent, menu: ITabMenuItem) {\n    const index = this.getIndex(menu);\n    if (index >= 1) {\n      this.removeRoute((v: ITabMenuItem, i: number, a: Array<ITabMenuItem>) => {\n        if (i < index) {\n          return v;\n        }\n      });\n      this.menuList.splice(0, index);\n      this.navigateToUrl(0);\n    }\n    this.refreshMenuList();\n  }\n  /**\n   * 关闭右侧tab\n   * @param menu \n   */\n  closeRightTab(evt: MouseEvent, menu: ITabMenuItem) {\n    const index = this.getIndex(menu);\n    if (index >= 0) {\n      this.removeRoute((v: ITabMenuItem, i: number, a: Array<ITabMenuItem>) => {\n        if (i > index) {\n          return v;\n        }\n      });\n      this.menuList.splice(index + 1);\n      this.navigateToUrl(index);\n    }\n    this.refreshMenuList();\n  }\n  /**\n   * 关闭所有（改为了保留第一页）\n   * @param menu \n   */\n  closeAllTab(evt: MouseEvent, menu: ITabMenuItem) {\n    this.removeRoute((v: ITabMenuItem, i: number, a: Array<ITabMenuItem>) => { if (i >= 1) { return v; } });\n    //删除所有的话，tab是全部关闭了，但是页面没有关闭完\n    // this.menuList.splice(0);\n    // this.currentIndex = -1;\n    this.menuList.splice(1);\n    this.navigateToUrl(0);\n    this.refreshMenuList();\n  }\n}\n/**菜单项 */\nexport interface ITabMenuItem {\n  title: string;\n  url: string;\n  canClose?: boolean;\n  canSelect?: boolean;\n  canCloseLeft?: boolean;\n  canCloseRight?: boolean;\n  canCloseExceptFirst?: boolean;\n  key: string;\n}","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnDestroy, Output } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { SsModalRef } from './modal-ref';\nimport { SsModalOptions, SsModalTitleBarButtonOptions } from './modal-types';\n\n@Component({\n    selector: 'div[ss-modal-titlebar-button]',\n    template: `\n    <ng-container *ngIf=\"buttons && buttons.length>=1;\">\n          <div class=\"ssmodal_titlebar_button\" *ngFor=\"let button of buttons\"  (click)=\"onButtonClick(button)\">\n            <i\n            nz-icon\n            *ngIf=\"button.isIconfont;else ngzorro\"\n            [nzIconfont]=\"button.icon\"\n            \n            [style]=\"button.style\"\n            >\n            </i>\n\n          <ng-template #ngzorro>\n                <i nz-icon \n                [nzType]=\"button.icon\" \n                [nzTheme]=\"button.theme\"\n                [nzSpin]=\"button.spin\"\n                [nzTwotoneColor]=\"button.twotoneColor\"\n                [nzRotate]=\"button.rotate\"\n                [style]=\"button.style\"\n                ></i>\n          </ng-template>\n          </div>\n      </ng-container>\n      \n  `,\n    host: {\n        class: ''\n    },\n    changeDetection: ChangeDetectionStrategy.Default\n})\nexport class SsModalTitleBarButtonComponent implements OnDestroy {\n    buttons: SsModalTitleBarButtonOptions[] = [];\n    @Input() modalRef!: SsModalRef;\n    private destroy$ = new Subject<void>();\n\n    constructor(public config: SsModalOptions) {\n        if (Array.isArray(config.titleBarButtons)) {\n            this.buttons = (config.titleBarButtons as SsModalTitleBarButtonOptions[]).map(mergeDefaultOption);\n        }\n    }\n    /**\n     * \n     * @param options \n     * @param prop \n     * @returns \n     */\n    getButtonCallableProp(options: SsModalTitleBarButtonOptions, prop: keyof SsModalTitleBarButtonOptions): boolean {\n        const value = options[prop];\n        if (this.modalRef) {\n            const componentInstance = this.modalRef.getContentComponent();\n            return typeof value === 'function' ? value.apply(options, componentInstance && [componentInstance]) : value;\n        }\n        return false;\n    }\n    /**\n     * \n     * @param options \n     */\n    onButtonClick(options: SsModalTitleBarButtonOptions): void {\n        this.getButtonCallableProp(options, 'onClick');\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n}\n\nfunction mergeDefaultOption(options: SsModalTitleBarButtonOptions): SsModalTitleBarButtonOptions {\n    return {\n        icon: null,\n        theme: 'outline',\n        spin: false,\n        twotoneColor: null,\n        isIconfont: false,\n        rotate: null,\n        title: \"\",\n        style: \"\",\n        ...options\n    };\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SSModalComponent } from './modal.component';\nimport { SsModalFooterComponent } from './modal-footer.component';\nimport { ModalContainerComponent } from './modal-container/modal-container.component';\nimport { SsModalFooterDirective } from '../components';\nimport { SsModalTitleBarButtonComponent } from './modal-titlebar-button.component';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n\n\n\n@NgModule({\n  declarations: [ModalContainerComponent, SSModalComponent, SsModalFooterComponent,SsModalFooterDirective,SsModalTitleBarButtonComponent],\n  exports: [SSModalComponent, SsModalFooterComponent,SsModalTitleBarButtonComponent],\n  entryComponents: [ModalContainerComponent, SSModalComponent],\n  imports: [\n    CommonModule,\n    NzIconModule\n  ]\n})   \nexport class EpsGisModalModule { }\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule, Optional, SkipSelf, ModuleWithProviders, APP_INITIALIZER } from '@angular/core';\r\nimport { AppGlobalConfig, AppGlobalConfigToken, AppInitService } from './models/app-config';\r\nimport { EpsGisWidgetBaseModule } from './components/widget-base.module';\r\nimport { EpsGisDirectivesModule } from './directives/directives.module';\r\nimport { EpsGisCompContainerModule } from './components/comp-container/comp-container.module';\r\nimport { EpsGisModalModule } from './components/modal/modal.module';\r\nimport { HttpClient } from '@angular/common/http';\r\n/**\r\n * epsgis入口\r\n */\r\n//@dynamic\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        // HttpClientModule,\r\n        EpsGisWidgetBaseModule,\r\n        EpsGisDirectivesModule,\r\n        EpsGisCompContainerModule,\r\n        EpsGisModalModule\r\n    ],\r\n    declarations: [],\r\n    exports: []\r\n})\r\nexport class EpsGisModule {\r\n    constructor(@Optional() @SkipSelf() parentModule: EpsGisModule) {\r\n        if (parentModule) {\r\n            throw new Error(\r\n                'EpsGisModule is already loaded. Import it in the AppModule only');\r\n        }\r\n    }\r\n    /**\r\n     Error during template compile of 'SSGisModule'\r\n  Function calls are not supported in decorators but 'createGlobalConfig' was called\r\n     */\r\n    /**\r\n     * \r\n     * @param config  \r\n     */\r\n    static forRoot(config?: AppGlobalConfig): ModuleWithProviders<EpsGisModule> {\r\n        return {\r\n            ngModule: EpsGisModule,\r\n            providers: [\r\n                {\r\n                    provide: AppGlobalConfigToken,\r\n                    useValue: config\r\n                },\r\n                {\r\n                    provide: AppGlobalConfig,\r\n                    useFactory: setGlobalConfig,\r\n                    deps: [AppInitService]\r\n                },\r\n                { provide: APP_INITIALIZER, useFactory: loadGlobalConfig, deps: [AppGlobalConfigToken, AppInitService, HttpClient], multi: true }\r\n\r\n            ]\r\n        };\r\n    }\r\n\r\n}\r\n\r\nexport const loadGlobalConfig = (config: AppGlobalConfig, service: AppInitService) => {\r\n    return () => service.init(config).loadGlobalConfig();\r\n};\r\nexport const setGlobalConfig = (service: AppInitService) => {\r\n    return service.getConfig();\r\n};","/**\n * Created by laixiangran on 2016/11/29.\n * homepage：http://www.laixiangran.cn.\n */\n\nimport { CommonModule } from \"@angular/common\";\nimport { NgModule } from '@angular/core';\nimport { EpsGISNgxViewerComponent } from \"./e-ngx-viewer.component\";\nimport { PDFViewerComponent } from \"./pdf-viewer/pdf-viewer.component\";\nimport { ImageViewerComponent } from \"./image-viewer/image-viewer.component\";\nimport { VideoViewerComponent } from './video-viewer/video-viewer.component';\nimport { EpsGISJsonViewerComponent } from '../jsonviewer/json-viewer.component';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    entryComponents:[\n        EpsGISNgxViewerComponent,\n        PDFViewerComponent,\n        ImageViewerComponent,\n        VideoViewerComponent,\n        EpsGISJsonViewerComponent\n    ],\n    declarations: [\n        EpsGISNgxViewerComponent,\n        PDFViewerComponent,\n        ImageViewerComponent,\n        VideoViewerComponent,\n        EpsGISJsonViewerComponent\n    ],\n    exports: [\n        EpsGISNgxViewerComponent,\n        PDFViewerComponent,\n        ImageViewerComponent,\n        VideoViewerComponent,\n        EpsGISJsonViewerComponent\n    ]\n})\nexport class EpsGISNgxViewerModule {\n}","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { MenuTabComponent } from './menu-tab.component';\nimport { MenuTabService } from './menu-tab.service';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        NzTabsModule,\n        NzIconModule,\n        NzDropDownModule\n    ],\n    declarations: [\n        MenuTabComponent\n    ],\n    entryComponents: [\n        MenuTabComponent\n    ],\n    exports: [\n        MenuTabComponent\n    ],\n    providers: [\n        MenuTabService\n    ]\n})\nexport class EpsGisMenuTabModule { }","/**\n * id 生成器 create by ruir\n */\nexport class IdGenerater {\n    /**\n     * \n     */\n    static newGuid(format: string = \"N\") {\n        let d = new Date().getTime();\n        let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n\n            let\n                r = (d + Math.random() * 16) % 16 | 0;\n\n            d = Math.floor(d / 16);\n\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n\n        });\n        if (format === \"N\" || format === \"n\") {\n            uuid = uuid.replace(/-/g, \"\");\n        }\n        if (format === \"B\" || format === \"b\") {\n            uuid = `{${uuid}}`;\n        }\n        if (format === \"P\" || format === \"p\") {\n            uuid = `(${uuid})`;\n        }\n        if (format === \"X\" || format === \"x\") {\n            //\n        }\n        return uuid;\n    };\n}\n","/**\n * LocalStorageHelper\n */\nexport class LocalStorageHelper {\n    /**\n     * \n     * @param key \n     * @param data \n     */\n    static setItem(key: string, data: any) {\n        if (window.localStorage) {\n            if (typeof data === \"object\") {\n                localStorage.setItem(key, JSON.stringify(data));\n            } else {\n                localStorage.setItem(key, data);\n            }\n        } else {\n            console.log(\"浏览器不支持localStorage\");\n        }\n    }\n    /**\n     * \n     * @param key \n     */\n    static getItem(key: string): any {\n        if (window.localStorage) {\n            return localStorage.getItem(key);\n        } else {\n            console.log(\"浏览器不支持localStorage\");\n        }\n    }\n}","export class Md5 {\n\n    // One time hashing functions\n    public static hashStr(str: string, raw: boolean = false) {\n        return Md5.onePassHasher\n            .start()\n            .appendStr(str)\n            .end(raw);\n    }\n\n    public static hashAsciiStr(str: string, raw: boolean = false) {\n        return Md5.onePassHasher\n            .start()\n            .appendAsciiStr(str)\n            .end(raw);\n    }\n    // Private Static Variables\n    private static stateIdentity = new Int32Array([1732584193, -271733879, -1732584194, 271733878]);\n    private static buffer32Identity = new Int32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    private static hexChars = '0123456789abcdef';\n    private static hexOut: string[] = [];\n\n    // Permanent instance is to use for one-call hashing\n    private static onePassHasher = new Md5();\n\n    private static _hex(x: any): string {\n        const hc = Md5.hexChars;\n        const ho = Md5.hexOut;\n        let n;\n        let offset;\n        let j;\n        let i;\n\n        for (i = 0; i < 4; i += 1) {\n            offset = i * 8;\n            n = x[i];\n            for (j = 0; j < 8; j += 2) {\n                ho[offset + 1 + j] = hc.charAt(n & 0x0F);\n                n >>>= 4;\n                ho[offset + 0 + j] = hc.charAt(n & 0x0F);\n                n >>>= 4;\n            }\n        }\n        return ho.join('');\n    }\n\n    private static _md5cycle(x: Int32Array | Uint32Array, k: Int32Array | Uint32Array) {\n        let a = x[0];\n        let b = x[1];\n        let c = x[2];\n        let d = x[3];\n        // ff()\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        // gg()\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        // hh()\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        // ii()\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    private _dataLength: number;\n    private _bufferLength: number;\n\n    private _state: Int32Array = new Int32Array(4);\n    private _buffer: ArrayBuffer = new ArrayBuffer(68);\n    private _buffer8: Uint8Array;\n    private _buffer32: Uint32Array;\n\n    constructor() {\n        this._buffer8 = new Uint8Array(this._buffer, 0, 68);\n        this._buffer32 = new Uint32Array(this._buffer, 0, 17);\n        this.start();\n    }\n\n    public start() {\n        this._dataLength = 0;\n        this._bufferLength = 0;\n        this._state.set(Md5.stateIdentity);\n        return this;\n    }\n\n    // Char to code point to to array conversion:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt\n    // #Example.3A_Fixing_charCodeAt_to_handle_non-Basic-Multilingual-Plane_characters_if_their_presence_earlier_in_the_string_is_unknown\n    public appendStr(str: string) {\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        let bufLen = this._bufferLength;\n        let code;\n        let i;\n\n        for (i = 0; i < str.length; i += 1) {\n            code = str.charCodeAt(i);\n            if (code < 128) {\n                buf8[bufLen++] = code;\n            } else if (code < 0x800) {\n                buf8[bufLen++] = (code >>> 6) + 0xC0;\n                buf8[bufLen++] = code & 0x3F | 0x80;\n            } else if (code < 0xD800 || code > 0xDBFF) {\n                buf8[bufLen++] = (code >>> 12) + 0xE0;\n                buf8[bufLen++] = (code >>> 6 & 0x3F) | 0x80;\n                buf8[bufLen++] = (code & 0x3F) | 0x80;\n            } else {\n                code = ((code - 0xD800) * 0x400) + (str.charCodeAt(++i) - 0xDC00) + 0x10000;\n                if (code > 0x10FFFF) {\n                    throw new Error('Unicode standard supports code points up to U+10FFFF');\n                }\n                buf8[bufLen++] = (code >>> 18) + 0xF0;\n                buf8[bufLen++] = (code >>> 12 & 0x3F) | 0x80;\n                buf8[bufLen++] = (code >>> 6 & 0x3F) | 0x80;\n                buf8[bufLen++] = (code & 0x3F) | 0x80;\n            }\n            if (bufLen >= 64) {\n                this._dataLength += 64;\n                Md5._md5cycle(this._state, buf32);\n                bufLen -= 64;\n                buf32[0] = buf32[16];\n            }\n        }\n        this._bufferLength = bufLen;\n        return this;\n    }\n\n    public appendAsciiStr(str: string) {\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        let bufLen = this._bufferLength;\n        let i;\n        let j = 0;\n\n        for (; ;) {\n            i = Math.min(str.length - j, 64 - bufLen);\n            while (i--) {\n                buf8[bufLen++] = str.charCodeAt(j++);\n            }\n            if (bufLen < 64) {\n                break;\n            }\n            this._dataLength += 64;\n            Md5._md5cycle(this._state, buf32);\n            bufLen = 0;\n        }\n        this._bufferLength = bufLen;\n        return this;\n    }\n\n    public appendByteArray(input: Uint8Array) {\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        let bufLen = this._bufferLength;\n        let i;\n        let j = 0;\n\n        for (; ;) {\n            i = Math.min(input.length - j, 64 - bufLen);\n            while (i--) {\n                buf8[bufLen++] = input[j++];\n            }\n            if (bufLen < 64) {\n                break;\n            }\n            this._dataLength += 64;\n            Md5._md5cycle(this._state, buf32);\n            bufLen = 0;\n        }\n        this._bufferLength = bufLen;\n        return this;\n    }\n\n    public getState() {\n        const self = this;\n        const s = self._state;\n\n        return {\n            buffer: String.fromCharCode.apply(null, self._buffer8),\n            buflen: self._bufferLength,\n            length: self._dataLength,\n            state: [s[0], s[1], s[2], s[3]]\n        };\n    }\n\n    public setState(state: any) {\n        const buf = state.buffer;\n        const x = state.state;\n        const s = this._state;\n        let i;\n\n        this._dataLength = state.length;\n        this._bufferLength = state.buflen;\n        s[0] = x[0];\n        s[1] = x[1];\n        s[2] = x[2];\n        s[3] = x[3];\n\n        for (i = 0; i < buf.length; i += 1) {\n            this._buffer8[i] = buf.charCodeAt(i);\n        }\n    }\n\n    public end(raw: boolean = false) {\n        const bufLen = this._bufferLength;\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        const i = (bufLen >> 2) + 1;\n        let dataBitsLen;\n\n        this._dataLength += bufLen;\n\n        buf8[bufLen] = 0x80;\n        buf8[bufLen + 1] = buf8[bufLen + 2] = buf8[bufLen + 3] = 0;\n        buf32.set(Md5.buffer32Identity.subarray(i), i);\n\n        if (bufLen > 55) {\n            Md5._md5cycle(this._state, buf32);\n            buf32.set(Md5.buffer32Identity);\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        dataBitsLen = this._dataLength * 8;\n        if (dataBitsLen <= 0xFFFFFFFF) {\n            buf32[14] = dataBitsLen;\n        } else {\n            const matches = dataBitsLen.toString(16).match(/(.*?)(.{0,8})$/);\n            if (matches === null) {\n                return;\n            }\n\n            const lo = parseInt(matches[2], 16);\n            const hi = parseInt(matches[1], 16) || 0;\n\n            buf32[14] = lo;\n            buf32[15] = hi;\n        }\n\n        Md5._md5cycle(this._state, buf32);\n\n        return raw ? this._state : Md5._hex(this._state);\n    }\n}\n\nif (Md5.hashStr('hello') !== '5d41402abc4b2a76b9719d911017c592') {\n    console.error('Md5 self test failed.');\n}","/**\n * 对象属性监控 by ruir\n */\nexport class PropWatcher {\n    /**\n     * \n     * @param obj 对象\n     * @param prop 属性\n     * @param after 赋值后处理函数\n     * @param before 赋值前处理函数\n     */\n    static watch(obj, prop, after: ((prop, oldval, newval) => void), before?: ((prop, oldval, newval) => any)) {\n        let oldval = obj[prop], newval = oldval,\n            getter = () => {\n                return newval;\n            },\n            setter = (val) => {\n                oldval = newval;\n                if (before && typeof before === \"function\") {\n                    newval = before.call(obj, prop, oldval, val);\n                } else {\n                    newval = val;\n                }\n                if (oldval != newval) {\n                    Promise.resolve().then(() => { after.call(obj, prop, oldval, newval); });\n                }\n                return newval;\n            };\n        if (delete obj[prop]) { // 不能监控常量\n            if (Object.defineProperty) {// ECMAScript 5\n                Object.defineProperty(obj, prop, {\n                    configurable: true,\n                    get: getter,\n                    set: setter\n                });\n            }\n            else if (Object.prototype[\"__defineGetter__\"] && Object.prototype[\"__defineGetter__\"]) {\n                Object.prototype[\"__defineGetter__\"].call(obj, prop, getter);\n                Object.prototype[\"__defineGetter__\"].call(obj, prop, setter);\n            }\n        }\n        return () => { PropWatcher.unwatch(obj, prop); };\n    }\n    /**\n     * \n     * @param obj 对象\n     * @param prop 属性\n     */\n    static unwatch(obj, prop) {\n        let val = obj[prop];\n        // const xobj = Object.getOwnPropertyDescriptor(obj, prop);\n        // if (xobj && xobj.set) {\n        //     xobj.set = undefined;\n        // }\n        delete obj[prop];\n        obj[prop] = val;\n    }\n}\n"],"names":["_.cloneDeep","_.merge","i0.ɵɵelement","i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelementEnd","i0.ɵɵtext","i0.ɵɵadvance","i0.ɵɵproperty","i0.ɵɵtemplate","i0.ɵɵelementContainer","i0.ɵɵclassProp","i0.ɵɵnamespaceSVG","_.forEach","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵpropertyInterpolate","i0.ɵɵtextInterpolate","i0.ɵɵtextInterpolate1","_.extend","_.clone","EventEmitter","_.some","_.find","_.filter","_.map","_.each","i0.ɵɵprojection","i0.ɵɵclassMap","i0.ɵɵattribute","i0.ɵɵstyleProp","i0.ɵɵnamespaceHTML","filter","map","i0.ɵɵstyleMap","mergeDefaultOption"],"mappings":"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"}