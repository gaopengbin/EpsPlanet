{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","../../../projects/epsgis/utils/console-log.ts","../../../projects/epsgis/models/app-config.ts","../../../projects/epsgis/directives/component-container.directive.ts","../../../projects/epsgis/models/base-widget.ts","../../../projects/epsgis/directives/directives.module.ts","../../../projects/epsgis/components/base-widget.ts","../../../projects/epsgis/models/http/request.result.ts","../../../projects/epsgis/decorator/component-register.decorator.ts","../../../projects/epsgis/components/shared/json-editor/json-editor.component.ts","../../../projects/epsgis/components/setting/base-setting.component.ts","../../../projects/epsgis/components/setting/widget-setting/widget-setting.component.html","../../../projects/epsgis/components/setting/widget-setting/widget-setting.component.ts","../../../projects/epsgis/components/icon/icon-setting.component.ts","../../../projects/epsgis/components/base-widget/base-widget.component.ts","../../../projects/epsgis/models/base-panel.ts","../../../projects/epsgis/components/on-screen-widget-icon/on-screen-widget-icon.component.html","../../../projects/epsgis/components/on-screen-widget-icon/on-screen-widget-icon.component.ts","../../../projects/epsgis/services/aspect.service.ts","../../../projects/epsgis/components/base-panel/base-panel.component.ts","../../../projects/epsgis/components/icon/icon-uncollapsed.component.ts","../../../projects/epsgis/components/icon/icon-collapsed.component.ts","../../../projects/epsgis/components/icon/icon-unmaximize.component.ts","../../../projects/epsgis/components/icon/icon-maximize.component.ts","../../../projects/epsgis/components/icon/icon-close.component.ts","../../../projects/epsgis/components/base-panel/panel-titlebar.component.ts","../../../projects/epsgis/components/on-screen-widget-panel/on-screen-widget-panel.component.ts","../../../projects/epsgis/components/on-screen-widget-panel/on-screen-widget-panel.component.html","../../../projects/epsgis/components/ex-panels/base-dockable-panel.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-bottom/dockable-panel-at-bottom.component.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-bottom/dockable-panel-at-bottom.component.html","../../../projects/epsgis/components/ex-panels/dockable-panel-at-right/dockable-panel-at-right.component.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-right/dockable-panel-at-right.component.html","../../../projects/epsgis/components/ex-panels/dockable-panel-at-left/dockable-panel-at-left.component.ts","../../../projects/epsgis/components/ex-panels/dockable-panel-at-left/dockable-panel-at-left.component.html","../../../projects/epsgis/components/mobile/base-mobile-panel.ts","../../../projects/epsgis/components/mobile/action-panel/action-panel.component.html","../../../projects/epsgis/components/mobile/drawer-panel/drawer-panel.component.html","../../../projects/epsgis/components/mobile/modal-panel/modal-panel.component.html","../../../projects/epsgis/components/mobile/popup-panel/popup-panel.component.html","../../../projects/epsgis/components/mobile/drawer-panel-right/drawer-panel-right.component.html","../../../projects/epsgis/components/mobile/action-panel/action-panel.component.ts","../../../projects/epsgis/components/mobile/drawer-panel/drawer-panel.component.ts","../../../projects/epsgis/components/mobile/modal-panel/modal-panel.component.ts","../../../projects/epsgis/components/mobile/popup-panel/popup-panel.component.ts","../../../projects/epsgis/components/mobile/drawer-panel-right/drawer-panel-right.component.ts","../../../projects/epsgis/pipes/safeurl.pipe.ts","../../../projects/epsgis/components/ex-panels/iframe-panel/iframe-panel.component.html","../../../projects/epsgis/components/ex-panels/iframe-panel/iframe-panel.component.ts","../../../projects/epsgis/pipes/pipes.module.ts","../../../projects/epsgis/components/shared/resultfof/resultfof.component.ts","../../../projects/epsgis/components/shared/resultfof/resultfof.component.html","../../../projects/epsgis/components/shared/resultfoo/resultfoo.component.ts","../../../projects/epsgis/components/shared/resultfoo/resultfoo.component.html","../../../projects/epsgis/components/shared/resultfot/resultfot.component.ts","../../../projects/epsgis/components/shared/resultfot/resultfot.component.html","../../../projects/epsgis/components/shared/shared.module.ts","../../../projects/epsgis/components/icon/icon-arrow-down.component.ts","../../../projects/epsgis/components/icon/icon-arrow-left.component.ts","../../../projects/epsgis/components/icon/icon-arrow-right.component.ts","../../../projects/epsgis/components/icon/icon-module.ts","../../../projects/epsgis/components/widget-base.module.ts","../../../projects/epsgis/services/shared/shared-utils.service.ts","../../../projects/epsgis/utils/platform.ts","../../../projects/epsgis/services/utils.service.ts","../../../projects/epsgis/services/platform.service.ts","../../../projects/epsgis/services/common.service.ts","../../../projects/epsgis/services/component-loader.service.ts","../../../projects/epsgis/models/base-widget-frame.ts","../../../projects/epsgis/models/base-widget-panel.ts","../../../projects/epsgis/models/base-widget-setting.ts","../../../projects/epsgis/models/on-screen-widget-panel.ts","../../../projects/epsgis/models/widget-placeholder.ts","../../../projects/epsgis/services/event-emitter.service.ts","../../../projects/epsgis/services/request.service.ts","../../../projects/epsgis/services/widget-manager.service.ts","../../../projects/epsgis/services/config-loader.service.ts","../../../projects/epsgis/services/config-manager.service.ts","../../../projects/epsgis/services/panel-manager.service.ts","../../../projects/epsgis/services/map-manager.service.ts","../../../projects/epsgis/services/layout-manager.service.ts","../../../projects/epsgis/services/widget-place-holder.service.ts","../../../projects/epsgis/components/modal/modal-ref.ts","../../../projects/epsgis/components/modal/modal-types.ts","../../../projects/epsgis/components/modal/utils.ts","../../../projects/epsgis/components/modal/modal-container/modal-container.component.html","../../../projects/epsgis/components/modal/modal-container/modal-container.component.ts","../../../projects/epsgis/services/modal-manager.service.ts","../../../projects/epsgis/services/setting.service.ts","../../../projects/epsgis/services/service-injector.ts","../../../projects/epsgis/services/simple-loader.service.ts","../../../projects/epsgis/services/auth.service.ts","../../../projects/epsgis/services/gis-auth.service.ts","../../../projects/epsgis/components/comp-container/comp-container.component.ts","../../../projects/epsgis/components/comp-container/comp-container.component.html","../../../projects/epsgis/components/comp-container/comp-container.module.ts","../../../projects/epsgis/components/modal/modal.component.ts","../../../projects/epsgis/components/modal/modal-footer.component.ts","../../../projects/epsgis/components/base-map/base-map.component.ts","../../../projects/epsgis/components/modal/modal-footer.directive.ts","../../../projects/epsgis/components/modal/modal-options.ts","../../../projects/epsgis/components/shared/ngxviewer/pdf-viewer/pdf-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/pdf-viewer/pdf-viewer.component.ts","../../../projects/epsgis/components/shared/ngxviewer/image-viewer/image-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/image-viewer/image-viewer.component.ts","../../../projects/epsgis/components/shared/ngxviewer/video-viewer/video-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/e-ngx-viewer.component.html","../../../projects/epsgis/components/shared/ngxviewer/video-viewer/video-viewer.component.ts","../../../projects/epsgis/components/shared/ngxviewer/e-ngx-viewer.component.ts","../../../projects/epsgis/components/shared/jsonviewer/json-viewer.component.html","../../../projects/epsgis/components/shared/jsonviewer/json-viewer.component.ts","../../../projects/epsgis/strategy/simple-reuse-strategy.ts","../../../projects/epsgis/components/menu-tab/menu-tab.service.ts","../../../projects/epsgis/components/menu-tab/menu-tab.component.html","../../../projects/epsgis/components/menu-tab/menu-tab.component.ts","../../../projects/epsgis/components/modal/modal-titlebar-button.component.ts","../../../projects/epsgis/components/modal/modal.module.ts","../../../projects/epsgis/epsgis.module.ts","../../../projects/epsgis/components/shared/ngxviewer/e-ngx-viewer.module.ts","../../../projects/epsgis/components/menu-tab/menu-tab.module.ts","../../../projects/epsgis/utils/id-generater.ts","../../../projects/epsgis/utils/localstorage-helper.ts","../../../projects/epsgis/utils/md5.ts","../../../projects/epsgis/utils/prop-watcher.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","TypeError","String","__","this","constructor","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","__generator","body","f","y","t","g","_","label","sent","trys","ops","verb","throw","return","Symbol","iterator","n","v","op","pop","push","__values","o","s","m","__read","ar","error","__spread","concat","LogService","overwriteLog","log","forEach","item","oriLogFunc","window","console","AppGlobalConfigToken","InjectionToken","defaultGlobalConfigPath","AppInitService","httpClient","getPath","fullPath","path","location","pathname","substr","split","join","getUrlParams","search","hash","indexOf","substring","strs","decodeURIComponent","init","__config","__mergedConfig","_.cloneDeep","defaultAppGlobalConfig","appInfo","urlParams","_.merge","jimuConfig","isDesignMode","config","configFile","extendInitjs","folderUrlPrefix","_mergedConfig","loadGlobalConfig","_this","globalConfigFilePath","get","toPromise","cfg","assign","title","document","catch","err","getConfig","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn","Injectable","AppGlobalConfig","subtitle","logo","apiRootUrl","widgetRootPath","wabVersion","undefined","mode","zIndex","isSettings","mapId","appPath","isRunInMobile","dojoConfig","locale","epsoConfig","showWorkAreaInAddUser","defaultCityCode","menuConfig","notReuseRoutes","notShowInTabRoutes","menuData","mapConfig","is3D","jsApi","viewContainerRef","ComponentContainerDirective","ɵɵdirectiveInject","ViewContainerRef","selectors","Directive","selector","WidgetType","EpsGisDirectivesModule","imports","CommonModule","declarations","exports","NgModule","WidgetState","WidgetWindowState","top","left","bottom","right","height","width","position","relativeTo","BaseWidget","type","widget","id","icon","uri","originPosition","WidgetPosition","openAtStart","map","view","appConfig","folderUrl","state","closed","windowState","normal","started","name","moveTopOnActive","widgetConfig","configId","style","tooltip","reqPara","gid","inPanel","isOnScreen","minZindex","_compInfo","afterNgOnInit","afterNgAfterViewInit","ngOnInit","ngAfterViewInit","ngOnDestroy","getCompInfo","setServiceInjector","serviceInjector","globalParams","utils","commonService","httpService","configLoader","configManager","mapManager","panelManager","widgetManager","widgetPlaceHolder","layoutManager","eventService","jsEventManager","componentLoader","componentManager","modalManager","modalManaer","settingService","setPosition","positionConfig","getPosition","changePosition","setState","startup","onOpen","opened","resize","onDeActive","onClose","onAction","data","setZIndex","index","onNormalize","onMinimize","onMaximize","changeMap","rss","emit","_mapChanged","onMapChange","changeView","_viewChanged","onViewChange","_a","OrderByType","success","msg","errorCode","errorMsg","ComponentRegistry","Map","ComponentRegister","info","cls","reg","component","set","toLocaleLowerCase","findComponentInfo","JsonEditorComponent","JsonEditorComponent_1","zone","jsonRess","dataChange","EventEmitter","onChange","onError","disabled","_data","val","writeValue","initEditor","editorOptions","destroy","options","defaultOptions","enableSort","colorPicker","escapeUnicode","sortObjectKeys","history","modes","language","onChangeJSON","json","onChangeText","jsonString","observers","newOptions","editor","updateValue","JSONEditor","jsonEditorContianer","nativeElement","_value","_onChange","_onTouched","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","run","getEditor","expandAll","collapseAll","focus","setMode","setModes","setName","setSchema","schema","setText","getMode","getName","getText","NgZone","viewQuery","rf","ctx","provide","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","decls","vars","consts","template","i0.ɵɵelement","Component","providers","styles","ViewChild","static","Input","Output","treeMaxHeight","BaseSettingComponent","_super","configFileName","manifestFileName","validateResult","RequestResultModel","_needLoadManifest","configJsonWebPath","replace","widgetInstance","getValidateResult","setValidateResult","errMsg","saveConfigJson","saveConfig","filePath","configJsonPhysicalPath","content","JSON","stringify","saveManifestJson","manifestJsonPhysicalPath","onSaveError","features","ɵɵInheritDefinitionFeature","i0.ɵɵelementStart","i0.ɵɵlistener","$event","ɵɵrestoreView","_r4_1","ɵɵnextContext","changeMode","i0.ɵɵelementEnd","i0.ɵɵtext","i0.ɵɵadvance","i0.ɵɵproperty","WidgetSettingComponent","currentMode","showSwitchBtn","previousMode","switchChecked","needLoadManifest","getServiceInjector","configPath","manifestJsonWebPath","loadWidgetConfig","loadWidgetManifest","switchToConfigOrManifest","settingComponentInstance","evt","saveAll","editorConfig","res","manifest","editorManifest","getConfigContent","configJson","onConfigJsonLoad","manifestJson","onManifestJsonLoad","succes","hasSetting","settingUri","comp","findComponent","compRef","createComponent","container","instance","clear","insert","hostView","i0.ɵɵtemplate","i0.ɵɵelementContainer","i0.ɵɵclassProp","ɵɵpureFunction0","_c2","_c3","templateUrl","styleUrls","read","IconSettingComponent","i0.ɵɵnamespaceSVG","BaseWidgetComponent","widgetSettingClassName","showSettingWhenInPanel","loadConfig","onMouseEnter","isSettingMode","lastElementChild","className","classList","remove","add","div","createElement","settingIconEleNode","settingIconCompRef","iconDiv","newIconEle","cloneNode","appendChild","onclick","openSetting","onMouseLeave","getPanel","panel","getPanelById","onConfigChanged","onAppConfigChanged","reason","changedData","action","loadArcgisModules","modules","loadScriptOptions","_url","url","css","loadModules","saving","modal","componentParams","titleBarButtons","isIconfont","onClick","okLoading","onOk","close","Error","hostBindings","PanelInMobileShowMode","PanelDockMode","HostListener","OnScreenWidgetIconComponent","cdrf","panelConfig","isShowImg","spacing","iconStyleDisplay","setProps","_position","showIcon","resetPanelPosition","isMobile","_containerBounds","_ele","getComponentRootNode","comRefMap","getElementBounds","querySelector","getBoundingClientRect","eleIcon","element","bounds","inRight","parseFloat","onMouseClick","switchToOpen","switchToClose","_isDockPanel","_uri","_dock","dock","toLowerCase","closeAllPanelsInGroup","loadWidget","showPanel","panelIcon","isDockable","onMapResize","closeWidget","closePanel","moveTo","destroyPanel","destroyWidget","getOffPanelWidgetPosition","_showLoading","_hideLoading","ChangeDetectorRef","hostVars","Optional","HostBinding","DefaultPanelOptions","showTitle","autoOpen","animationTime","customClass","buttonsPosition","buttonClose","buttonCloseText","buttonMaximize","buttonMaximizeText","buttonUnmaximizeText","buttonMinimize","buttonMinimizeText","buttonUnminimizeText","buttonCollapse","buttonCollapseText","buttonUnCollapseText","draggable","dragOpacity","resizable","resizeOpacity","statusBar","maxHeight","maxWidth","minHeight","minWidth","collapsedWidth","keepInViewport","mouseMoveEvents","dockSide","none","innerHtml","AspectService","nextId","after","_aspect","before","around","getInstance","_instance","advise","dispatcher","advice","receiveArguments","signal","previous","advised_1","args","previous_1","methodName","existing","executionId","newResults","results","aspect","TestAspect","testBefore","testAfter","testAround","BasePanelComponent","_render","cdr","currentPosition","savedPosition","currentSize","savedSize","isMouseEvent","originalPosition","dockMode","_isRunInMobile","_mobileShowMode","_eventTempData","isMobileNotTablet","sspanelOverlay","setStyle","drawer","drawerRight","xxxx","_document_MouseMove","bind","yyyy","_document_MouseUp","loadAllWidgetsInOrder","detectChanges","w","getPxNumber","h","_setMobilePosition","_setPCPosition","configs","_.forEach","wConfig","visible","widgetContainer","getAllWidgetConfigs","isArray","widgets","setWidget","setOptions","buttonSetting","setWindowState","hidePanel","active","parentElement","display","event","preventDefault","stopPropagation","sspanel","_convertToStyleVal","onResize","onActive","onCollapse","onExpand","onMove","onPositionChange","_activePanel","_getCurrentPosition","_panelBounds","_setCurrentPosition","_saveCurrentPosition","_restoreSavedPosition","_changePosition","params","defRet","createPromiseDefer","settings","newPosition","parseInt","check","maximized","minimized","size","_getCurrentSize","$window","_getWindowSize","promise","innerHeight","outerWidth","_saveCurrentSize","_setCurrentSize","_restoreSavedSize","_changeSize","checkPosition","checkSize","_w","_ws","isNaN","newSize","collapsed","_getBordersWidth","border","_getBorderWidth","ele","_contentClick","_titlebar_MouseDown","backgroundColor","_addDocumentMouseEventHandlers","opacity","compensationX","pageX","toString","compensationY","pageY","_resizer_MouseDown","resizeParams","dimension","directionX","directionY","startX","startY","eventData","filter","tempSavedData","addEventListener","newWidth","newHeight","_setIframeStyle","removeEventListener","backgoundColor","savedData","_isDockSide","_maximize","querySelectorAll","idx","arr","removeClass","sspanel_titlebar","defPosition","defSize","all","_unmaximize","addClass","_minimize","_unminimize","_collapse","offsetHeight","_uncollapse","_buttonMax_Click","_buttonCollapse_Click","_buttonMin_Click","openWidgetSetting","getWidgetById","Renderer2","IconUnCollapsedComponent","IconCollapsedComponent","IconUnMaximizeComponent","IconMaximizeComponent","IconCloseComponent","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵpropertyInterpolate","_r10","_r19","PanelTitleBarComponent","hasIcon","onMouseDown","onClickSetting","onClickCollapse","onClickMaximize","onClickClose","onmousedown","_titlebarMouseDown","_buttonSettingClick","_buttonCollapseClick","_buttonMaximizeClick","_buttonCloseClick","ElementRef","inputs","outputs","attrs","i0.ɵɵtextInterpolate","OnScreenWidgetPanelComponent","BaseDockablePanelComponent","_isCollapse","rect","_getMapTop","_getMapLeft","mapSettingTop","chv","mapSettingLeft","_resizeMapWhenResize","changeMapPosition","getPx","_resizeMapWhenClose","originMapPosition","__expand","__collapse","runOnClose","_eleSvg","sspanel_center_collapse","_left","_bottom","_right","runOnOpen","collapsePanel","DockablePanelAtBottomComponent","centerCollapse","mapBounds","DockablePanelAtRightComponent","DockablePanelAtLeftComponent","BaseMobilePanelComponent","mobile","getWidthHeight","_h","innerWidth","_r9","i0.ɵɵtextInterpolate1","_r17","MobileActionPanelComponent","obj","_pos","MobileDrawerPanelComponent","_sspanelOverlayClickHandler","_width","MobileModalPanelComponent","MobilePopupPanelComponent","popup","MobileDrawerRightPanelComponent","SafeUrlPipe","sanitizer","transform","tag","bypassSecurityTrustUrl","bypassSecurityTrustResourceUrl","i1$2","DomSanitizer","pure","Pipe","IframePanelComponent","isShowIframe","iframeEl","PipesModule","ResultfofComponent","ResultfooComponent","ResultfotComponent","EpsGisSharedModule","entryComponents","IconArrowDownComponent","IconArrowLeftComponent","IconArrowRightComponent","_components","EpsGisIconModule","EpsGisWidgetBaseModule","FormsModule","NzIconModule","NzResultModule","SharedUtilsService","widgetProperties","isHostedService","processWidgetProperties","properties","isController","isThemeWidget","hasVersionManager","hasLocale","supportMultiInstance","hasSettingLocale","hasSettingPage","hasSettingUIFile","hasSettingStyle","processWidgetUriPara","lastIndexOf","getConfigElementById","visitElement","cb","visitBigSection","section","j","group","tempobject","isHeadMenu","groups","isWidget","groupId","_.extend","visitHeaderMenu_1","children","k","getConfigElementByLabel","getConfigElementsByName","elements","getConfigElementsByUri","getWidgetNameFromUri","segs","getAmdFolderFromUri","getPlatforms","win","setupPlatforms","isPlatform","winOrPlatform","platform","PLATFORMS_MAP","Ionic","platforms","detectPlatforms","documentElement","keys","isIpad","testUserAgent","isAndroid","navigator","userAgent","match","matchMedia","isHybrid","isCordova","isCapacitorNative","capacitor","isNative","expr","test","query","matches","ipad","iphone","ios","android","phablet","smallest","Math","min","largest","max","tablet","isAndroidTablet","cordova","electron","pwa","standalone","mobileweb","desktop","hybrid","UtilsService","getUriInfo","pos","amdFolder","processWidgetSetting","setting","addManifest2WidgetJson","widgetJson","addManifestProperies","category","addThemeManifestProperies","addWidgetManifestProperties","panels","layouts","layout","RTLIcon","support2D","support3D","processManifestLabel","i18nLabels","defaultLabel","_style","replacePlaceHolder","props","str","parse","addI18NLabel","processUrlInAppConfig","startWith","isEqual","o1","o2","leftChain","rightChain","compare2Objects","x","Date","RegExp","Number","deleteMapOptions","mapOptions","extent","lods","center","scale","zoom","maxScale","maxZoom","minScale","minZoom","reCreateObject","copyArray","_array","retArray","a","copyObject","_obj","ret","getPositionStyle","_.clone","ps","PlatformService","doc","backButton","Subject","pause","resume","readyResolve","defaultView","subscribeWithPriority","priority","callback","subscribe","ev","register","proxyEvent","_readyPromise","once","is","platformName","ready","dir","getQueryParam","readQueryParam","href","isLandscape","isPortrait","expression","nav","DOCUMENT","Inject","exec","emitter","el","eventName","detail","CommonService","componentRef","rootNodes","clientTop","clientLeft","px","_temp","setWidgetPosition","widgetPosition","getPlatformName","isIos","isMobileRealMachine","ComponentLoaderService","componentFactoryResolver","viewContainerInHome","viewContainerInMap","factories","factoriesArray","from","inputProviders","inputName","useValue","injector","Injector","parent","parentInjector","resolveComponentFactory","getComponentPath","compInfo","find","setViewContainerInHome","createComponentToHome","showInHome","setViewContainerInMap","createComponentToMap","showInMap","ComponentFactoryResolver","WidgetPlaceholder","class","postCreate","setIndex","EventEmitterService","_mapLoaded","_viewLoaded","_widget_Created","_widgetCreated","_designConfigChanged","_appConfigLoaded","_appConfigChanged","_header_ConfigChanged","_createPanelContainer","_mapPositionChanged","_checkChangeDetector","_imageViewerIndexChanged","removeListener","listener","HttpReqService","ServiceUrl","headers","HttpHeaders","_tokenKey","_tokenValue","getLocalToken","sessionStorage","getItem","getTokenKey","setAccessToken","token","getAccessToken","access_token","getAuthHeaders","getJsonFile","configFilePath","responseType","_toHttpParams","paras","HttpParams","fromObject","_toParaString","para","_toHttpParams2","fromString","_toParaString2","startsWith","getNoAuthGeneric","apiName","serviceUrl","getNoAuth","getGeneric","getPage","pageIndex","pageSize","orderBy","direction","pager","page","orderby","paraString","postNoAuthGeneric","receiveAsObject","post","Content-Type","postNoAuth","postGeneric","Authorization","postPage","deleteGeneric","delete","WidgetManagerService","loaded","missedActions","activeWidget","setMap","setAppConfig","_onMapLoaded","_onMapChanged","def","widgetOnScreen","tryLoadWidgetConfig","setWidgetPorp","aconfig","_upgradeAppConfig","_processAfterTryLoad","loadWidgetsManifest","appconfig","openWidget","_openPanelOrWidget","_config","_options","onlyCreateWidget","showWidget","_appConfig","_widgetConfig","openOptions","findWidget","param","createWidget","rawConfig","_widget","_msg","err_1","stack","getAllWidgets","loadWidgetClass","loadWidgetResources","foldrUrl","_tryLoadWidgetConfig","process","_processManifest","readyState","status","responseText","loadWidgetSettingPage","loadWidgetSettingClass","loadWidgetSettingPageResources","createWidgetSetting","clazz","_.some","getWidgetByLabel","getWidgetsByName","getOpenedWidgetByGroupId","_.find","closeOtherWidgetsInTheSameGroup","closeAllWidgetsInGroup","_removeWidget","_tryLoadResource","flag","_replaceId","loadWidgetStyle","widgetSetting","loadWidgetSettingStyle","loadWidgetI18n","loadWidgetSettingI18n","loadWidgetTemplate","loadWidgetSettingTemplate","getOnScreenOffPanelWidgets","_.filter","_postWidgetStartup","widgetObject","_triggerMissedAction","_remove","splice","_onDestroyWidget","_onDestroyWidgetSetting","settingWidget","removeWidgetSettingStyle","removeWidgetStyle","_onClickWidget","_activeWidget","getOffPanelWidgets","ConfigLoaderService","rawAppConfig","_configLoaded","portalSelf","_removeHash","time","_processResult","globalConfigTemp","_upgradeAllWidgetsConfig","getAppConfig","_tryLoadConfig","_addAuthorizedCrossOriginDomains","configJsonFile","addNeedValues","processProxy","_processWidgetJsons","_processNoUriWidgets","placeholderIndex","_addElementId","maxId","li","httpProxy","useProxy","rules","newConfig","isUpgraded","defs","_path","_addNeedValuesForManifest","_loadMergedWidgetManifests","file","ConfigManagerService","_originConfig","listenBuilderEvents","on","_onDesignConfigChanged","_addDefaultValues","message","_addDefaultPortalUrl","_addDefaultGeometryService","_addDefaultStyle","_addDefaultMap","_addDefaultVisible","widgetPool","portalUrl","theme","_addDefaultPanelAndPosition","processMenuWidgetConfig","menus","visitHeaderMenu","_self","list","version","_onWidgetAdded","any","_getCleanConfig","openType","thumbnail","_ssl","processNoUriWidgets","addElementId","getCleanConfig","agolConfig","_itemData","oldWabVersion","_getAppConfigFromTheme","currentConfig","links","_preProcessConfig4Design","appAttributeChanged","_params","changeData","mapChanged","newJson","itemId","themeChanged","layoutChanged","styleChanged","_genStyles","widgetChanged","widgetPoolChanged","actionTriggered","actionInfo","oldUri","eleid","allStyle","currentStyle","PanelManagerService","appRef","activePanel","panelAddToMap","createPanelContainer","ReflectiveInjector","resolveAndCreate","eleMapContainer","ionApp","panelContainer","show","attachView","_findPanelUri","_uri_default","pid","openPanel","_comp","maximizable","collapsible","showPanelNotWidget","panelOptions","closeOtherPanelsInTheSameGroup","playOpenPanelAnimation","_panel","playClosePanelAnimation","minimizePanel","maximizePanel","normalizePanel","changeWindowStateTo","onWindowResize","_removePanel","destroyAllPanels","allPanelIds","_.map","panelId","getPositionOnMobile","_onPanelClick","aw","_onMoveStart","mover","_onWidgetActived","_loadPanelClass","panelUri","_loadThemeI18N","getAllPanels","ApplicationRef","MapManagerService","mapPosition","mapDivId","previousInfoWindow","mobileInfoWindow","isMobileInfoWindow","tiandituToken","layerInfosObj","restorePosition","triggerEvent","setMapPosition","getMapPosition","centerAtMap","lgtd","lttd","showMap","mapComp","_rpath","_manifest","initMap","destoryMap","LayoutManagerService","widgetPlaceholders","preloadWidgetIcons","preloadGroupPanels","invisibleWidgetIds","onAppConfigLoaded","onMapLoaded","onMapChanged","onViewChanged","_loadTheme","_loadMap","_loadPreloadWidgets","_.each","headerMenu","_loadPreloadWidget","timeEnd","_doPostLoad","_tempUrl","widgetConfigNew","placeholder","_createPreloadWidgetPlaceHolder","closeable","iconDijit","_createPreloadWidgetIcon","inMap","_onDestroyIcon","_onDestroyPlaceholder","ci","_loadPreloadGroup","groupJson","_getThemeCommonStyleId","_getThemeCurrentStyleId","_loadThemeCommonStyle","_removeThemeCommonStyle","_loadThemeCurrentStyle","_removeThemeCurrentStyle","_destroyPreloadWidgetIcons","_destroyOffPanelWidgets","_destroyWidgetPlaceholders","_destroyPreloadPanels","_destroyPreloadGroupPanels","_onThemeChange","_onLayoutChange2","_onLayoutChange","_onStyleChange","_changeMapPosition","_onMapChange","_onWidgetPoolChange","_onActionTriggerd","_onWidgetChange","changedWidgets","widgetList","wc","eleConfig","checked","hasConfig","hasStyle","hasUIFile","keepConfigAfterMapSwithched","widgetId","isIcon","iconNew","isPromise","WidgetPlaceHolderService","SsModalRef","containerRef","componentInstance","afterClose","afterOpen","containerInstance","cancelTriggered","trigger","okTriggered","onCloseTreggered","complete","getContentComponent","getElement","getNativeElement","triggerOk","triggerCancel","open","updateConfig","markForCheck","getState","getBackdropElement","doClose","ok","cancel","onCancel","loadingKey","handleThen","closeWhitResult","noopFun","closable","okDisabled","cancelDisabled","cancelLoading","noAnimation","autofocus","mask","maskClosable","keyboard","closeIcon","okType","modalType","closeOnNavigation","iconType","fullScreen","applyConfigDefaults","setContentInstanceParams","getConfigFromComponent","footer","getContainer","wrapClassName","maskStyle","bodyStyle","okText","cancelText","_r11","_r18","_r28_1","onOkClick","ModalContainerComponent","elementRef","render","animationStateChanged","containerClick","isStringContent","elementFocusedBeforeModalWasOpened","latestMousedownTarget","oldMaskStyle","showStatusBar","defaultZIndex","setContainer","_index","modalRef","onMousedown","onMouseup","onCloseClick","attachComponentPortal","savePreviouslyFocusedElement","setModalTransformOrigin","attachTemplatePortal","animationDisabled","modalElement","modalElementRef","previouslyDOMRect","lastPosition","transformOrigin","offsetLeft","offsetTop","activeElement","trapFocus","restoreFocus","setEnterAnimationClass","setExitAnimationClass","cleanAnimationClass","bindBackdropStyle","resetContainer","onAnimationDone","onAnimationStart","startExitAnimation","SsModalOptions","ModalManagerService","overlay","parentModal","openModalsAtThisLevel","afterAllClosedAtThisLevel","afterAllClose","defer","openModals","_afterAllClosed","pipe","modalContainerClass","createModalContainer","modalContainer","closeAll","closeModals","attachModalContainer2","overlayRef","userInjector","PortalInjector","WeakMap","OverlayRef","ContainerComponent","containerPortal","ComponentPortal","attach","componentOrTemplateRef","configMerged","modalContainerRef","attachModalContainer","attachModalContent","removeOpenModal","dialogs","injectorc","TemplateRef","inputs_1","createInjector","injectionTokens","i1$4","Overlay","SkipSelf","SettingService","req","API_SAVE_SETTING","settingApiUrl","route","queryParams","ServiceInjector","EventManager","i1$5","ActivatedRoute","SimpleLoaderService","clas","slice","getExtension","items","getElementsByTagName","appendTo","elementLoaded","onLoad","elementReadyStateChanged","thisObj","loadCss","rel","onload","ti","setInterval","styleSheets","clearInterval","loadJs","onreadystatechange","src","loadResources","ress","onOneBeginLoad","onOneLoad","_onOneLoad","checkHaveLoaded","loadResource","onBeginLoad","simpleLoader","AuthService","_userKey","_currentUser","saveInfo2Local","setItem","getInfoFromLocal","saveToken","refreshToken","refresh_token","userLogin","username","password","checkLogin","logout","resove","removeToken","removeItem","getRemoteUser","getCurrentUser","_user","GISAuthService","decrypt","pwd","encodeURIComponent","prand","len","charCodeAt","sPos","floor","mult","charAt","incr","round","modu","pow","salt","isIE","encChr","encStr","fromCharCode","validateAuth","encryptCode","setTimeout","doValidateAuth","enCodeStr","hosts","deadline","authtype","hostname","toUpperCase","bHostPass","host","showAuthDlg","oDate1","getServerDate","oDate2","getTime","showAuthInfo","xhr","send","date","getResponseHeader","chObj","getElementById","innerHTML","node","fontSize","color","textnode","createTextNode","oMask","background","html","margin","borderRadius","reload","CompContainerComponent","jsonFileChange","configChange","autoLoad","_configJsonFile","_init","jsonFile","i0.ɵɵprojection","EpsGisCompContainerModule","SSModalComponent","modalService","visibleChange","asObservable","componentConfig","contentTemplateRef","ngOnChanges","changes","Visible","otherChanges","getOwnPropertySymbols","propertyIsEnumerable","__rest","getModalRef","changeDetection","ChangeDetectionStrategy","OnPush","i0.ɵɵclassMap","i0.ɵɵattribute","SsModalFooterComponent","buttonsFooter","buttons","destroy$","mergeDefaultOption","getButtonClass","button","getButtonCallableProp","prop","onButtonClick","autoLoading","loading","hostAttrs","_r1","Default","BaseMapComponent","_is3d","mapJsApi","_c","_b","ssModalRef","templateRef","SsModalFooterDirective","exportAs","i0.ɵɵstyleProp","PDFViewerComponent","domSanitizer","pdfViewHeight","resetViewHeight","pdfUrl","viewerUrl","source","getMainWindowHeight","parentNode","pdfViewerContainer","clientHeight","contentNode","childNodes","e_1","child","nodeName","toLocaleUpperCase","i0.ɵɵnamespaceHTML","ImageViewerComponent","first","imageSources","radian","moreImgInitLeft","currentImageTempTop","currentImageTempLeft","dragStartClientX","dragStartClientY","isStartMove","imageViewHeight","mainWindowHeight","convertUrl","sources","imgUrl","currentImageUrl","changeImageSources","currentImageLoaded","img","viewer","currentImage","initTop","initLeft","clientWidth","offsetWidth","checkBrowser","firefox","currentImageZoomByWheel","preOrNextImg","currentImgReset","changeCurrentImg","matrix","getMatrix","M11","toFixed","M21","M12","M22","Cos","cos","Sin","sin","vertical","PI","horizontal","rotate","rotateLeftBy90","rotateRightBy90","rotateByDegress","degress","getZoom","hZoom","vZoom","zoomin","abs","zoomout","reset","imageZoomin","imageZoomout","rotateLeft","rotateRight","flipVertical","flipHorizontal","previousImg","moreImg","moveVal","nextImg","changeCurrentImageUrl","changeCurrentIndex","wheelDelta","currentImageDragStart","clientX","clientY","transition","setImageHeight","currentImageDrag","offsetX","offsetY","currentImageDragEnd","cancleCurrentImageDrag","imageViewerContainer","browser","ua","ver","opera","misEdge","chrome","safari","ie","konq","_r2","showImg","ctx_r2","videoElem","ended","_r19_1","progressBallDrag","progressBallDragEnd","videoToolbarProgressClick","_r13","ɵɵreference","volumeBallDrag","volumeBallDragEnd","ctx_r3","play_progress","showProgressBall","ctx_r0","ctx_r1","videoWidth","VideoViewerComponent","sub","videoToolbarProgressHeight","preVolume","progressBallDragStartClientX","isProgressBallStartMove","volumeBallDragStartClientX","isVolumeBallStartMove","timeTipOffsetX","videoUrl","onLoadedmetadata","totalTime","getFormatTime","duration","currentTime","OnPlayEnded","onPlay","onTimeupdate","videoToolbar","onProgress","onCanplaythrough","tempCurrentTime","videoToolbarProgressMove","timeTip","progressBallDragStart","volumeValClick","volume","volumeBallDragStart","videoMouseover","videoMouseout","play","playOrPause","paused","selectVideo","load","isMuted","muted","poster","ɵɵsanitizeUrl","EpsGISNgxViewerComponent","activatedRoute","model","viewerReady","ctx_r4","expanded","EpsGISJsonViewerComponent","cleanOnChange","segments","initJson","parseKeyValue","isExpandable","segment","toggle","description","ɵɵNgOnChangesFeature","SimpleReuseStrategy","shouldDetach","routeConfig","loadChildren","reuse","appGlobal","some","store","handle","getRouteUrl","waitDelete","snapshots","shouldAttach","retrieve","shouldReuseRoute","future","curr","deleteRouteSnapshot","deactivateOutlet","clearRouteSnapshot","MenuTabService","getIndex","MenuTabComponent","router","nzDropdownService","menuTabService","menuList","currentIndex","urlMapTitle","showTab","recurseFindMenu","menu","events","NavigationEnd","firstChild","outlet","addToTab","routeData","showInTab","findMenu","snapshot","findIndex","refreshMenuList","canClose","canSelect","canCloseLeft","canCloseRight","canCloseExceptFirst","index_1","has","closeByUrl","navigate","nzSelectChange","navigateToUrl","contextMenu","menuComp","selectDropdown","func","removeRoute","predicate","closeTabByRoute","closeTabByKey","closeTab","selectTab","closeLeftTab","closeRightTab","closeAllTab","Router","i2$1","NzContextMenuService","ngContentSelectors","i0.ɵɵstyleMap","button_r2","spin","twotoneColor","_r4","SsModalTitleBarButtonComponent","EpsGisModalModule","i1$1","NgStyle","NgIf","EpsGisModule","parentModule","forRoot","ngModule","useFactory","setGlobalConfig","deps","APP_INITIALIZER","service","EpsGISNgxViewerModule","EpsGisMenuTabModule","NzTabsModule","NzDropDownModule","IdGenerater","newGuid","format","uuid","random","LocalStorageHelper","localStorage","Md5","_state","Int32Array","_buffer","ArrayBuffer","_buffer8","Uint8Array","_buffer32","Uint32Array","start","hashStr","raw","onePassHasher","appendStr","end","hashAsciiStr","appendAsciiStr","_hex","offset","hc","hexChars","ho","hexOut","_md5cycle","_dataLength","_bufferLength","stateIdentity","code","buf8","buf32","bufLen","appendByteArray","input","self","buffer","buflen","buf","dataBitsLen","buffer32Identity","subarray","lo","hi","PropWatcher","watch","oldval","newval","getter","setter","configurable","unwatch"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * 重写日志函数\n */\nexport class LogService {\n    /**\n     * 依赖全局配置，还是改为静态吧\n     */\n    static overwriteLog(log: boolean) {\n        const CONSOLE_METHODS = ['debug', 'error', 'info', \"log\", 'warn', 'time', 'timeEnd', 'count'];\n        CONSOLE_METHODS.forEach((item) => {\n            window.console[item] = (function (oriLogFunc) {\n                return function () {\n                    if (log) {\n                        try {\n                            oriLogFunc.call(console, ...arguments);\n                            // if (item === \"error\") {\n                            //     console.trace(...arguments);\n                            // }\n                        } catch (e) {\n                            console.error('console.log error', e);\n                        }\n                    }\n                }\n            })(window.console[item]);\n        });\n    }\n}","import * as _ from \"lodash\";\r\nimport { InjectionToken, Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { LogService } from \"../utils/console-log\";\r\nexport const AppGlobalConfigToken = new InjectionToken<AppGlobalConfig>('app_global_config');\r\nconst defaultGlobalConfigPath: string = \"assets/global.json\";\r\nconst defuaultConfigPath: string = \"assets/config.json\";\r\n/**\r\n * \r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class AppInitService {\r\n\r\n    private _mergedConfig: AppGlobalConfig;\r\n    /*\r\n    Error during template compile of 'createGlobalConfig'\r\n Function expressions are not supported in decorators\r\n   Consider changing the function expression into an exported function.\r\n   */\r\n\r\n    /**\r\n     * \r\n     * @param config \r\n     */\r\n    constructor(\r\n        private httpClient: HttpClient\r\n        // 这里不能注入ActivatedRoute？\r\n        //    , private route: ActivatedRoute\r\n    ) {\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private getPath(): string {\r\n        let fullPath, path;\r\n        fullPath = window.location.pathname;\r\n        if (fullPath === '/' || fullPath.substr(fullPath.length - 1) === '/') {\r\n            path = fullPath;\r\n        } else {\r\n            let sections = fullPath.split('/');\r\n            path = sections.join('/') + '/';\r\n        }\r\n        return path;\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    private getUrlParams() {\r\n        let s = window.location.search,\r\n            p;\r\n        if (s === '') {\r\n            s = window.location.hash;\r\n            if (s && s.indexOf('?') > 0) {\r\n                s = s.substring(s.indexOf('?'));\r\n            }\r\n        }\r\n        if (s === '') {\r\n            return {};\r\n        }\r\n\r\n        p = new Object();\r\n        if (s.indexOf(\"?\") != -1) {\r\n            let strs = s.substr(1).split(\"&\");\r\n            for (let i = 0; i < strs.length; i++) {\r\n                p[strs[i].split(\"=\")[0]] = decodeURIComponent((strs[i].split(\"=\")[1]));\r\n            }\r\n        }\r\n\r\n        return p;\r\n    }\r\n    /**\r\n     * \r\n     * @param __config \r\n     */\r\n    init(__config: AppGlobalConfig) {\r\n        let __mergedConfig = _.cloneDeep(defaultAppGlobalConfig)\r\n        if (!__mergedConfig.path) {\r\n            __mergedConfig.path = __mergedConfig.appInfo.path = this.getPath();\r\n        }\r\n        __mergedConfig.urlParams = _.merge(__mergedConfig.urlParams, this.getUrlParams());\r\n\r\n        if (__mergedConfig.jimuConfig.isDesignMode === true\r\n            && typeof __mergedConfig.urlParams.config === \"string\" && __mergedConfig.urlParams.config.length >= 1) {\r\n            __mergedConfig.appInfo.configFile = \"./project/\" + __mergedConfig.urlParams.config + \"/config.json\";\r\n            __mergedConfig.appInfo.extendInitjs = \"./project/\" + __mergedConfig.urlParams.config + \"/thirdpartyLibs/init.js\";\r\n            __mergedConfig.appInfo.folderUrlPrefix = \"./project/\" + __mergedConfig.urlParams.config;\r\n        }\r\n        if (__config) {\r\n            __mergedConfig = _.merge(__mergedConfig, __config);\r\n        }\r\n        this._mergedConfig = __mergedConfig; //_.cloneDeep(__mergedConfig);\r\n        return this;\r\n    }\r\n    loadGlobalConfig(): Promise<boolean> {\r\n        return new Promise((resolve, reject) => {\r\n            this._mergedConfig.globalConfigFilePath = this._mergedConfig.globalConfigFilePath || defaultGlobalConfigPath;\r\n            if (this._mergedConfig.globalConfigFilePath) {\r\n                this.httpClient.get(this._mergedConfig.globalConfigFilePath).toPromise().then((cfg: any) => {\r\n                    //this._mergedConfig.globalConfig = { ...this._mergedConfig.globalConfig, ...cfg };\r\n                    if (cfg) {\r\n                        this._mergedConfig = { ...this._mergedConfig, ...cfg };\r\n                        if (cfg.title) {\r\n                            document.title = cfg.title;\r\n                        }\r\n                    }\r\n                    LogService.overwriteLog(this._mergedConfig.log);\r\n                    resolve(true);\r\n                }).catch(err => {\r\n                    console.log(\"配置文件global.json读取失败\");\r\n                    resolve(true);\r\n                });\r\n            } else {\r\n                console.log(\"没有global.json\");\r\n                resolve(true);\r\n            }\r\n        });\r\n    }\r\n    getConfig() {\r\n        return this._mergedConfig;\r\n    }\r\n\r\n}\r\n/**\r\n * 系统配置\r\n */\r\n@Injectable({ providedIn: 'root' })\r\nexport class AppGlobalConfig {\r\n    title?: string;\r\n    subtitle?: string;\r\n    logo?: string;\r\n    apiRootUrl?: string;\r\n    /**\r\n     * 定时任务服务地址\r\n     */\r\n    jobApiUrl?:string;\r\n    /**\r\n     * setting服务地址\r\n     * 服务越来越多，要整为服务。。。网关了。。。\r\n     */\r\n    settingApiUrl?:string;\r\n    // is3D?: boolean;\r\n    widgetRootPath?: string;\r\n    wabVersion?: string;\r\n    path?: string;\r\n    urlParams?: UrlParams;\r\n    jimuConfig?: JimuConfig;\r\n    appInfo?: AppInfo;\r\n    dojoConfig?: DojoConfig;\r\n    epsoConfig?: EpsoConfig;\r\n    globalConfigFilePath?: string;\r\n    // globalConfig?: any;\r\n    menuConfig?: {\r\n        notReuseRoutes?: Array<String>;\r\n        notShowInTabRoutes?: Array<String>,\r\n        menuData?: Array<MenuItem>\r\n    };\r\n    mapConfig?: {\r\n        is3D?: boolean;\r\n        jsApi?: string;\r\n        [key: string]: any;\r\n    };\r\n    /**\r\n     * 是否输出日志\r\n     */\r\n    log?: boolean;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface JimuConfig {\r\n    mapId?: string;\r\n    zIndex?: string;\r\n    isSettings?: boolean;\r\n    isDesignMode?: boolean;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface AppInfo {\r\n    path?: string;\r\n    configFile?: string;\r\n    extendInitjs?: string;\r\n    folderUrlPrefix?: string;\r\n    appPath?: string;\r\n    isRunInMobile?: boolean;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface DojoConfig {\r\n    locale?: string;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * \r\n */\r\ninterface UrlParams {\r\n    [key: string]: string | number | boolean;\r\n}\r\ninterface EpsoConfig {\r\n    showWorkAreaInAddUser?: boolean;\r\n    WorkAreaMinDepthInAddUser?: number;\r\n    defaultCityCode?: string;\r\n    [key: string]: any;\r\n}\r\n/**\r\n * 临时这么处理下\r\n */\r\ninterface MenuItem {\r\n    name?: string;\r\n    path?: string;\r\n    children?: MenuItem[];\r\n    [key: string]: any\r\n}\r\n/**\r\n * 默认配置\r\n */\r\nexport const defaultAppGlobalConfig: AppGlobalConfig = {\r\n    title: \"EPSGIS\",\r\n    subtitle: \"山维科技\",\r\n    logo: \"\",\r\n    apiRootUrl: \"\",\r\n    // is3D: false,\r\n    widgetRootPath: \"widgets\",\r\n    wabVersion: undefined,\r\n    path: \"\",\r\n    urlParams: {\r\n        mode: \"\"\r\n    },\r\n    jimuConfig: {\r\n        zIndex: \"auto\",\r\n        isDesignMode: false,\r\n        isSettings: false,\r\n        mapId: \"mapContainer\"\r\n    },\r\n    appInfo: {\r\n        path: \"\",\r\n        configFile: defuaultConfigPath,\r\n        extendInitjs: \"\",\r\n        folderUrlPrefix: \"\",\r\n        appPath: \"\",\r\n        isRunInMobile: false\r\n    },\r\n    dojoConfig: {\r\n        locale: \"\"\r\n    },\r\n    epsoConfig: {\r\n        showWorkAreaInAddUser: true,\r\n        defaultCityCode: \"520100\"\r\n    },\r\n    globalConfigFilePath: defaultGlobalConfigPath,\r\n    // globalConfig: {},\r\n    menuConfig: {\r\n        notReuseRoutes: [],\r\n        notShowInTabRoutes: [],\r\n        menuData: []\r\n    },\r\n    mapConfig: {\r\n        is3D: false,\r\n        jsApi: \"\"\r\n    },\r\n    log: true\r\n};","import { Directive, ViewContainerRef } from '@angular/core';\r\n\r\n/**\r\n * 组件容器\r\n */\r\n@Directive({\r\n    selector: '[component-host]'\r\n})\r\nexport class ComponentContainerDirective {\r\n\r\n    constructor(public viewContainerRef: ViewContainerRef) { }\r\n\r\n}\r\n","import { PanelOptions } from './base-panel';\n\n/**\n * create by ruir 191014  baseWidget.js\n */\n// export class BaseWidget {\n\n\n//     constructor() {\n\n//     }\n// }\n/**\n * 组件类型\n */\nexport enum WidgetType {\n    /**\n     * 组件\n     */\n    widget = \"widget\",\n    /**\n     * 弹窗\n     */\n    panel = \"panel\",\n    /**\n     * 图标\n     */\n    icon = \"icon\"\n}\n\n/**\n * 组件位置\n */\nexport class WidgetPosition {\n    [key: string]: any;\n    constructor(public top?: number | string,\n        public left?: number | string,\n        public bottom?: number | string,\n        public right?: number | string,\n\n        public height?: number | string,\n        public width?: number | string,\n        public zIndex?: number | string,\n        public position?: string\n        , public relativeTo: string = \"\") {\n        this.position = \"absolute\";\n    }\n}\n/**\n * 组件状态\n */\nexport enum WidgetState {\n    /**\n     * 关闭\n     */\n    closed = \"closed\",\n    /**\n     * 打开\n     */\n    opened = \"opened\",\n    /**\n     * \n     */\n    active = \"active\"\n}\n/**\n * panel状态\n */\nexport enum WidgetWindowState {\n    /**\n     * 正常\n     */\n    normal = \"normal\",\n    /**\n     * 最小化\n     */\n    minimized = \"minimized\",\n    /**\n     * 最大化\n     */\n    maximized = \"maximized\",\n    /**\n     * \n     */\n    collapsed = \"collapsed\"\n}\n// export interface IGetComponentInfo {\n//     getCompInfo(): ComponentInfo;//不能标记为static\n// }\n\n/**\n * 打开widget时的参数\n */\nexport interface WidgetOpenOptions {\n    /**\n     * 要打开组件的选择器\n     */\n    uri: string;\n    /**\n     * 打开位置，在config.json中没有配置时，需要传position\n     */\n    position?: WidgetPosition;\n    /**\n     * 要显示在panel中时，panel的参数\n     */\n    panel?: PanelOptions;\n    /**\n     * 要传递给panel或widget的数据\n     */\n    param?: any;\n    /**\n     * 仅创建组件 \n     */\n    onlyCreateWidget?: boolean;\n}","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ComponentContainerDirective } from './component-container.directive';\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    declarations: [\r\n        ComponentContainerDirective\r\n    ],\r\n    exports: [ComponentContainerDirective]\r\n})\r\nexport class EpsGisDirectivesModule { }","import { AfterViewInit, Directive, Input, OnDestroy, OnInit } from \"@angular/core\";\nimport { EventManager } from \"@angular/platform-browser\";\nimport * as _ from 'lodash';\nimport { ComponentLoaderService } from \"../services/component-loader.service\";\nimport { EventEmitterService } from \"../services/event-emitter.service\";\nimport { ServiceInjector } from \"../services/service-injector\";\nimport { WidgetPosition, WidgetState, WidgetType, WidgetWindowState } from \"../models/base-widget\";\nimport { AppGlobalConfig } from \"../models/models\";\nimport { CommonService } from \"../services/common.service\";\nimport { ConfigLoaderService } from \"../services/config-loader.service\";\nimport { ConfigManagerService } from \"../services/config-manager.service\";\nimport { MapManagerService } from \"../services/map-manager.service\";\nimport { PanelManagerService } from \"../services/panel-manager.service\";\nimport { HttpReqService } from \"../services/request.service\";\nimport { LayoutManagerService, WidgetManagerService, WidgetPlaceHolderService } from \"../services/services\";\nimport { UtilsService } from \"../services/utils.service\";\nimport { ModalManagerService } from \"../services/modal-manager.service\";\nimport { IComponentInfo } from \"../decorator/component-register.decorator\";\nimport { SettingService } from \"../services/setting.service\";\n@Directive()\nexport class BaseWidget implements OnInit, AfterViewInit, OnDestroy {\n    /**\n     * 类型，widget|panel|icon\n     */\n    type: WidgetType = WidgetType.widget;\n    /**\n     * 唯一标识\n     */\n    id: string = \"\";\n    /**\n     * 标题\n     */\n    label: string = undefined;\n    /**\n     * 图标地址\n     */\n    icon: string = undefined;\n    /**\n     * 组件地址\n     */\n    uri: string = undefined;\n\n    /**\n     * 最初的位置，运行中不会改变\n     */\n    originPosition: WidgetPosition = new WidgetPosition();\n    /**\n     * 位置\n     */\n    position: WidgetPosition = new WidgetPosition();\n    /**\n     * 组件(业务功能)配置信息\n     */\n    config: any = undefined;\n    /**\n     * \n     */\n    openAtStart: boolean = false;\n    /**\n     * 二维地图\n     */\n    map: any = null;\n    /**\n     * 三维场景\n     */\n    view: any = null;\n    /**\n     * 项目配置信息\n     */\n    appConfig: any = null;\n    /**\n     * 目录地址\n     */\n    folderUrl: string = null;\n    /**\n     * 组件状态\n     */\n    state: WidgetState = WidgetState.closed;\n    /**\n     * panel 状态\n     */\n    windowState: WidgetWindowState = WidgetWindowState.normal;\n    /**\n     * 组件是否已启动\n     */\n    started: boolean = false;\n    /**\n     * 组件名称\n     */\n    name: string = '';\n    /**\n     * 鼠标移动到组件时是否激活组件\n     */\n    moveTopOnActive: boolean = true;\n\n    /**\n     * 组件（自身属性）配置信息\n     */\n    widgetConfig: any = null;\n    /**\n     * \n     */\n    configId: string = null;\n\n    /**\n     * \n     */\n    style: string = \"\";\n    /**\n     * 标题\n     */\n    title: string = \"\";\n    /**\n     * 提示\n     */\n    tooltip: string = \"\";\n    /**\n     * 请求参数\n     */\n    reqPara: any = undefined;\n    /**\n     * 分组id\n     */\n    gid: string = \"\";\n    inPanel: boolean = true;\n    isOnScreen: boolean = true;\n\n    globalParams: AppGlobalConfig;\n    utils: UtilsService;\n    commonService: CommonService;\n    httpService: HttpReqService;\n    configLoader: ConfigLoaderService;\n    configManager: ConfigManagerService;\n    mapManager: MapManagerService;\n    panelManager: PanelManagerService;\n    widgetManager: WidgetManagerService;\n    widgetPlaceHolder: WidgetPlaceHolderService;\n    layoutManager: LayoutManagerService;\n    eventService: EventEmitterService;\n    jsEventManager: EventManager;\n    componentLoader: ComponentLoaderService;\n    modalManager: ModalManagerService;\n    settingService: SettingService\n    private minZindex: number = 102;\n    /**\n    * 组件路径，用于获取confing.json、manifest.json以及图片等当前组件的静态资源\n    */\n    // componentPath: string = \"\";\n    /**\n     * 组件信息\n     */\n    private _compInfo: IComponentInfo = { uri: \"\", name: \"BaseWidgetComponent\", path: \"\" };\n    /**\n     * constructor\n     */\n    constructor() { }\n\n    /**\n       * 用于AOP\n       * 之前的aspect.after(this.comRefMap.instance, \"ngOnInit\", this.test);\n       * 无法执行了，但自定义的函数可以，所以通过在钩子函数中调用自定义的函数来实现。\n       * 也就是在ngOnInit中调用afterNgOnInit\n       * 然后aspect.after(this.comRefMap.instance, \"afterNgOnInit\", this.test);\n       */\n    afterNgOnInit() {\n\n    }\n    /**\n   * 用于AOP，类同afterNgOnInit\n   */\n    afterNgAfterViewInit() {\n\n    }\n    /**\n   * 子组件必须要调用该函数\n   */\n    ngOnInit() {\n        //这样导致监听太多\n        // this.eventService.rss.on(this.eventService._viewChanged, (view) => {\n        //   this.view = view;\n        //   this.onViewChange(this.view);\n        // });\n        // this.eventService.rss.on(this.eventService._mapChanged, (map) => {\n        //   this.map = map;\n        //   this.onMapChange(this.map);\n        // });\n        this.afterNgOnInit();\n    }\n\n    /**\n     * 子组件必须要调用该函数\n     */\n    ngAfterViewInit() {\n        this.afterNgAfterViewInit();\n    }\n\n    ngOnDestroy(): void {\n    }\n\n    /**\n     * 返回组件信息\n     */\n    getCompInfo(): IComponentInfo {\n        return this._compInfo;\n    }\n    // constructor(\n    //   serviceInjector: ServiceInjector) {\n    //   this.globalParams = serviceInjector.config;\n    //   this.utils = serviceInjector.utils;\n    //   this.commonService = serviceInjector.commonService;\n    //   this.httpService = serviceInjector.httpService;\n    //   this.configLoader = serviceInjector.configLoader;\n    //   this.configManager = serviceInjector.configManager;\n    //   this.mapManager = serviceInjector.mapManager;\n    //   this.panelManager = serviceInjector.panelManager;\n    //   this.widgetManager = serviceInjector.widgetManager;\n    //   this.widgetPlaceHolder = serviceInjector.widgetPlaceHolder;\n    //   this.layoutManager = serviceInjector.layoutManager;\n    // }\n    /**\n     * 设置服务\n     * @param serviceInjector \n     */\n    setServiceInjector(serviceInjector: ServiceInjector) {\n        if (!serviceInjector) return;\n\n        this.globalParams = serviceInjector.config;\n        this.utils = serviceInjector.utils;\n        this.commonService = serviceInjector.commonService;\n        this.httpService = serviceInjector.httpService;\n        this.configLoader = serviceInjector.configLoader;\n        this.configManager = serviceInjector.configManager;\n        this.mapManager = serviceInjector.mapManager;\n        this.panelManager = serviceInjector.panelManager;\n        this.widgetManager = serviceInjector.widgetManager;\n        this.widgetPlaceHolder = serviceInjector.widgetPlaceHolder;\n        this.layoutManager = serviceInjector.layoutManager;\n        this.eventService = this.layoutManager.eventService;\n        this.jsEventManager = serviceInjector.jsEventManager;\n        this.componentLoader = serviceInjector.componentManager;\n        this.modalManager = serviceInjector.modalManaer;\n        this.settingService = serviceInjector.settingService;\n    }\n    /**\n     * 初始加载时设置元素位置\n     * @param positionConfig \n     */\n    setPosition(positionConfig: any) {\n        this.position = this.commonService.getPosition(positionConfig);\n        this.originPosition = _.cloneDeep(this.position);\n    }\n    /**\n     * 改变元素位置\n     * @param positionConfig \n     */\n    changePosition(positionConfig: any) {\n        this.position = this.commonService.getPosition(positionConfig);\n    }\n    /**\n     * \n     * @param state \n     */\n    setState(state: WidgetState) {\n        this.state = state;\n    }\n    /**\n     * \n     */\n    startup() {\n        this.started = true;\n    }\n    /**\n     * \n     */\n    onOpen() {\n        this.state = WidgetState.opened;\n        // console.log(\"widget onOpen\");\n    }\n    /**\n     * \n     */\n    resize(position?: any) {\n\n    }\n    onDeActive() {\n\n    }\n    onClose() {\n        this.state = WidgetState.closed;\n        // console.log(\"widget onClose\");\n    }\n    onAction(name: string, data?: any) {\n\n    }\n    /**\n     * 改变zindex，可选值：‘active’,'deactive',具体的值\n     */\n    setZIndex(index: string) {\n        switch (index) {\n            case \"active\":\n                this.position.zIndex = this.minZindex;\n                break;\n            case \"deactive\":\n                this.position.zIndex = \"auto\";\n                break;\n            default:\n                this.position.zIndex = index;\n                break;\n        }\n\n    }\n    onNormalize() {\n    }\n    onMinimize() { }\n    onMaximize() {\n\n    }\n    /**\n   * \n   * @param map \n   */\n    changeMap(map: any) {\n        this.map = map;\n        this.eventService.rss.emit(this.eventService._mapChanged, map);\n    }\n    /**\n     * 地图改变\n     * @param map \n     */\n    onMapChange(map: any) {\n    }\n    /**\n     * \n     * @param view \n     */\n    changeView(view: any) {\n        this.view = view;\n        this.eventService.rss.emit(this.eventService._viewChanged, view);\n    }\n    /**\n     * 场景改变\n     * @param view \n     */\n    onViewChange(view: any) {\n    }\n\n    get isSettingMode() {\n        return this.globalParams?.urlParams[\"mode\"] === \"config\";\n    }\n}","/**\n * 请求api后返回的结果实体模型\n */\nexport class RequestResultModel {\n    error?: { errorCode?: string, errorMsg?: string } = { errorCode: \"\", errorMsg: \"\" };\n    /**\n     * \n     * @param success 成功标记\n     * @param msg 描述信息\n     * @param data 数据\n     */\n    constructor(\n        public success: boolean,\n        public msg: string = \"\",\n        public data: any = null) {\n    }\n}\nexport interface TokenModel {\n    access_token?: string;\n    token_type?: string;\n    expires_in?: number;\n    refresh_token?: string;\n    error?: string;\n    error_description?: string;\n    client_id?: string;\n    user_name?: string;\n    userid?: string;\n    issued?: string;//时间\n    expires?: string;//时间\n}\nexport enum OrderByType {\n    asc = 0,\n    desc = 1\n}\n/**\n * \n */\nexport interface CurrentLoginUser {\n    userid?: string;\n    user_name?: string;\n    login_name?: string;\n    org_id?: string;\n    org_name?: string;\n    depart_ids?: string[];\n    depart_names?: string[];\n    role_ids?: string[];\n    role_names?: string[];\n    super_admin?: boolean;\n    org_admin?: boolean;\n    depart_admin?: boolean;\n    real_name?: string;\n    gender?: number;\n    mobile?: string;\n    email?: string;\n    login_date?: string;\n    last_login_date?: string;\n    token?: TokenModel;\n    work_area?: string;\n    leader?: boolean;\n}","export const ComponentRegistry: Map<string, IRegisteredComponentInfo> = new Map();\n// WeakMap\nexport interface IComponentInfo {\n  /**\n   * 选择器或唯一健值\n   */\n  uri: string\n  /**\n   * 组件路径\n   */\n  path?: string;\n  name?: string;\n}\nexport interface IRegisteredComponentInfo extends IComponentInfo {\n  component: any;\n}\n/**\n * 组件注册\n */\nexport const ComponentRegister = (info: IComponentInfo): any => {\n  return (cls: any) => {\n    // if((<BaseWidgetComponent>cls).getCompInfo()){\n\n    // }\n    if (cls.getCompInfo && typeof cls.getCompInfo === \"function\") {\n      // 如果重写了getCompInfo\n      const c = cls.getCompInfo();\n      if (!info.path) {\n        info.path = c.path;\n      }\n      if (!info.name) {\n        info.name = c.name;\n      }\n    }\n    // cls._compInfo = info;//静态属性\n    cls.prototype.getCompInfo = function () {\n      return info;\n    }\n    const reg: IRegisteredComponentInfo = Object.assign({}, info, { component: cls });\n    //切记相同key被覆盖，确保selector唯一\n    ComponentRegistry.set(info.uri.toLocaleLowerCase(), reg);\n  };\n};\n/**\n * \n * @param uri \n */\nexport function findComponentInfo(uri: string) {\n  if (!uri) {\n    return undefined;\n  }\n  //大小写不一致时取不到值...存时统一转为小写？\n  return ComponentRegistry.get(uri.toLocaleLowerCase());\n}","import { Component, ElementRef, EventEmitter, forwardRef, Input, NgZone, OnInit, Output, ViewChild } from '@angular/core';\n// import { simpleLoader } from '../../../services/simple-loader.service';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n// import * as JSONEditor from \"../../../utils/jsoneditor\";\n// import * as JSONEditor from \"jsoneditor\";\nimport { JSONEditorMode, JSONEditorOptions } from \"jsoneditor\";\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\ndeclare var JSONEditor: any;\n/**\n * Json编辑器 ruir\n */\n@ComponentRegister({\n  uri: 'epsgis-json-editor',\n  path: \"components/shared/json-editor\"\n})\n@Component({\n  selector: 'epsgis-json-editor',\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => JsonEditorComponent),\n      multi: true\n    }\n  ],\n  template: `<div #jsoneditor></div>`,\n  styles: [`\n    :host ::ng-deep .jsoneditor-poweredBy{\n      display: none;\n    }\n    :host>div{\n        height: 100%;\n    }\n  `]\n})\nexport class JsonEditorComponent implements OnInit, ControlValueAccessor {\n\n  readonly jsonRess = [\n    \"assets/json-editor/930/jsoneditor.min.css\",\n    \"assets/json-editor/930/jsoneditor.min.js\"\n  ];\n  private _value: any;\n  private editor: any;\n  @ViewChild(\"jsoneditor\", { static: true }) jsonEditorContianer: ElementRef;\n  private _data;\n  //对外属性 开始\n  @Input()\n  get data() {\n    return this._data;\n  }\n  set data(val) {\n    this._data = val;\n    this.writeValue(val);\n    this.dataChange.emit(val);\n  }\n  @Output()\n  dataChange: EventEmitter<any> = new EventEmitter();\n  /**\n   * 选项\n   */\n  @Input(\"options\") editorOptions: JSONEditorOptions;\n  /**\n   * 树最大高度\n   */\n  @Input() treeMaxHeight: number;\n  @Output() onChange: EventEmitter<any> = new EventEmitter();\n  // @Output() onEditable: EventEmitter<EditableNode | object> = new EventEmitter();\n  @Output() onError: EventEmitter<Error> = new EventEmitter();\n  //对外属性 结束\n  private zone: NgZone;\n  constructor(zone: NgZone) {\n    this.zone = zone;\n  }\n\n\n  ngOnInit() {\n    // simpleLoader.loadResources(this.jsonRess,null,null,()=>{\n    //   const xx =window[\"JSONEditor\"];//为啥会为undefined？加载js不对？\n\n    // })\n  }\n  ngAfterViewInit() {\n    this.initEditor(this.editorOptions || {});\n  }\n  ngOnDestroy() {\n    this.destroy();\n  }\n  /**\n   * 初始化编辑器\n   * @param options \n   */\n  private initEditor(options: JSONEditorOptions) {\n    let defaultOptions: JSONEditorOptions = {\n      // name:\"\",//根节点名称\n      enableSort: true,\n      colorPicker: true,\n      escapeUnicode: false,\n      sortObjectKeys: true,\n      history: true,\n      modes: ['tree', 'view', 'form', 'code', 'text', 'preview'],\n      language: \"zh-CN\",\n      search: true,\n      onChangeJSON: (json: any) => {\n        //'tree', 'form', 'view'触发，代码模式不触发\n        // console.log(\"onChangeJSON:\", json);\n      },\n      onChangeText: (jsonString: string) => {\n        //console.log(\"onChangeText:\", jsonString);\n      },\n      onError: (error: Error) => {\n      }\n    }\n    // if (this.onChange.observers.length >= 1) {\n    //   defaultOptions.onChange = () => {\n    //     this.onChange.emit(this.editor.get())\n    //   };\n    // }\n    if (this.onError.observers.length >= 1) {\n      defaultOptions.onError = (v) => {\n        this.onError.emit(v);\n      };\n    }\n    const newOptions = Object.assign(options, defaultOptions);\n    //避免被外部覆盖\n    newOptions.onChange = () => {\n      if (this.editor) {\n        const value = this.editor.get();\n        this.updateValue(value);\n      }\n    },\n      this.editor = new JSONEditor(this.jsonEditorContianer.nativeElement, newOptions, this.data);\n\n  }\n  get value(): any {\n    return this._value;\n  }\n\n  set value(v: any) {\n    if (v !== this._value) {\n      this._value = v;\n      this._onChange(v);\n    }\n  }\n  _onChange(_: any) {\n  }\n\n  _onTouched() {\n  }\n  disabled = false;\n  registerOnChange(fn: any) {\n    this._onChange = fn;\n  }\n\n  registerOnTouched(fn: any) {\n    this._onTouched = fn;\n  }\n  setDisabledState?(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n  /**\n   * \n   * @param value \n   */\n  updateValue(value: any) {\n    this.zone.run(() => {\n      this.value = value;\n      this._onTouched();\n      if (this.editor) {\n        this.onChange.emit(value);\n      }\n    });\n  }\n\n  /**\n   * \n   * @param value \n   */\n  writeValue(value: any) {\n    this._value = value;\n    if (this.editor) {\n      this.editor.set(value);\n    }\n  }\n  /**\n   * 获取编辑器\n   * @returns \n   */\n  getEditor() {\n    return this.editor;\n  }\n  /**\n   * 展开节点\n   */\n  public expandAll() {\n    if (this.editor) {\n      this.editor.expandAll();\n    }\n  }\n  /**\n   * 收缩节点\n   */\n  public collapseAll() {\n    if (this.editor) {\n      this.editor.collapseAll();\n    }\n  }\n  /**\n   * 销毁编辑器\n   */\n  public destroy() {\n    if (this.editor) {\n      this.editor.destroy();\n    }\n  }\n  /**\n   * 设置焦点\n   */\n  public focus() {\n    if (this.editor) {\n      this.editor.focus();\n    }\n  }\n  /**\n   *  设置模式\n   * @param mode\n   */\n  public setMode(mode: JSONEditorMode) {\n    if (this.editor) {\n      this.editor.setMode(mode);\n    }\n  }\n  /**\n   * 设置模式\n   * @param modes \n   */\n  public setModes(modes: JSONEditorMode[]) {\n    if (this.editor) {\n      this.editor.setModes(modes);\n    }\n  }\n  /**\n   * 设置根节点\n   * @param name \n   */\n  public setName(name: string | undefined) {\n    if (this.editor) {\n      this.editor.setName(name);\n    }\n  }\n  /**\n   * 设置架构\n   * @param schema \n   */\n  public setSchema(schema: Object) {\n    if (this.editor) {\n      this.editor.setSchema(schema);\n    }\n  }\n  /**\n   * 设置json内容\n   * @param jsonString \n   */\n  public setText(jsonString: string) {\n    if (this.editor) {\n      this.editor.setText(jsonString);\n    }\n  }\n  /**\n   * 获取模式\n   * @returns \n   */\n  public getMode(): JSONEditorMode {\n    if (this.editor) {\n      return this.editor.getMode();\n    }\n  }\n  /**\n   * 获取名称（根节点） \n   * @returns \n   */\n  public getName(): string {\n    if (this.editor) {\n      return this.editor.getName();\n    }\n  }\n  /**\n   * 获取json内容\n   * @returns \n   */\n  public getText(): string {\n    if (this.editor) {\n      return this.editor.getText();\n    }\n  }\n}\n","import { BaseWidget } from '../base-widget';\nimport { Directive } from '@angular/core';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport { RequestResultModel } from '../../models/http/request.result';\n\n/**\n * 组件setting基类 ruir\n */\n@Directive()\nexport class BaseSettingComponent extends BaseWidget {\n\n    /**\n     * 组件实例\n     */\n    widgetInstance: BaseWidgetComponent;\n    configFileName = \"config.json\";\n    /**\n     * config.json网站路径\n     */\n    configJsonWebPath: string;\n\n    manifestFileName = \"manifest.json\";\n    /**\n     * manifest.json网站路径\n     */\n    manifestJsonWebPath: string;\n    /**\n     * config.json文件json数据\n     */\n    configJson: any;\n    /**\n     * manifest.json文件json数据\n     */\n    manifestJson: any;\n    /**\n    * 验证结果\n    */\n    private validateResult: RequestResultModel = new RequestResultModel(false);\n\n    /**\n     * 是否需要加载manifest.json\n     */\n    private _needLoadManifest = false;\n    public get needLoadManifest() {\n        return this._needLoadManifest;\n    }\n    public set needLoadManifest(value) {\n        this._needLoadManifest = value;\n    }\n    constructor() {\n        super();\n    }\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    ngAfterViewInit(): void {\n        super.ngAfterViewInit();\n    }\n\n    ngOnDestroy(): void {\n        super.ngOnDestroy();\n    }\n    /**\n    * config.json物理文件路径\n    */\n    public get configJsonPhysicalPath() {\n        return this.configJsonWebPath.replace(this.globalParams.widgetRootPath + \"/\", \"\");\n    }\n    /**\n     * manifest.json物理文件路径\n     */\n    public get manifestJsonPhysicalPath() {\n        return this.widgetInstance.getCompInfo().path + \"/\" + this.manifestFileName\n    }\n    getValidateResult() {\n        return this.validateResult;\n    }\n    /**\n     * 设置验证结果\n     * @param success 是否成功\n     * @param errMsg 错误信息\n     * @param data 要保存的数据\n     */\n    setValidateResult(success: boolean, errMsg?: string, data?: any) {\n        this.validateResult.success = success;\n        this.validateResult.msg = errMsg;\n        this.validateResult.data = data;\n    }\n    /**\n     * 保存config.json\n     */\n    saveConfigJson(json: any) {\n        return this.settingService.saveConfig({ filePath: this.configJsonPhysicalPath, content: (typeof json === \"string\" ? json : JSON.stringify(json)) })\n    }\n    /**\n     * 保存manifest.json\n     */\n    saveManifestJson(json: any) {\n        return this.settingService.saveConfig({ filePath: this.manifestJsonPhysicalPath, content: typeof json === \"string\" ? json : JSON.stringify(json) })\n    }\n    /**\n     * 保存失败事件\n     * @param error \n     */\n    onSaveError(error: Error) {\n        console.error(error);\n    }\n}\n// export interface IJsonFileLoad {\n//     onConfigJsonLoad(succes: boolean, err: Error);\n//     onManifestJsonLoad(succes: boolean, err: Error);\n//     saveConfigJson();\n//     saveManifestJson();\n// }\n","<!--\n    1、manifest.json配置默认不显示，用一个按钮来切换（比如图标i），点击时要么显示manifest要么config\n    2、根据hasSetting判断是否有设置组件，有的话，则加载，并可以切换为json编辑模式；如果没有，则只显示json编辑器\n-->\n<div [class.show-config]=\"currentMode==1 || currentMode==3\">\n    <!-- <div class=\"ssradio\">\n        <input class=\"radio_type\" type=\"radio\" name=\"type\" id=\"radio1\" checked=\"checked\"\n            (change)=\"this.currentMode=1\" />\n        <label for=\"radio1\">编辑器</label>\n        <input class=\"radio_type\" type=\"radio\" name=\"type\" id=\"radio2\" (change)=\"this.currentMode=3\" />\n        <label for=\"radio2\">定制UI</label>\n    </div> -->\n    <div class=\"switch\" *ngIf=\"showSwitchBtn\">\n        <span>\n            <input type=\"checkbox\" id=\"custom-ui\" [(ngModel)]=\"switchChecked\" (change)=\"changeMode($event)\" />\n            编辑器\n            <label for=\"custom-ui\"><em></em></label>\n        </span>\n    </div>\n    <div class=\"margin5\"></div>\n    <epsgis-json-editor #config [class.hide]=\"currentMode!=1\" [(data)]=\"configJson\"\n        [options]=\"{name:'组件配置信息'}\">\n    </epsgis-json-editor>\n    <div [class.hide]=\"currentMode!=3\">\n        <ng-container component-host></ng-container>\n    </div>\n</div>\n<div [class.show-manifest]=\"currentMode==2\">\n    <epsgis-json-editor #manifest [class.hide]=\"currentMode!=2\" [(data)]=\"manifestJson\" [options]=\"{name:'组件信息'}\">\n    </epsgis-json-editor>\n</div>\n<!-- <div>\n    <label class=\"ssSwitch\">\n        <input type=\"checkbox\">\n        <i></i>\n    </label> \n    <input class='switch-component' type='checkbox'>\n<label>test</label>\n\n</div> -->","import { Component, ViewChild, ViewContainerRef } from '@angular/core';\nimport { RequestResultModel } from '.././../../models/http/request.result';\nimport { ComponentContainerDirective } from '../../../directives/component-container.directive';\nimport { JsonEditorComponent } from '../../shared/json-editor/json-editor.component';\nimport { BaseSettingComponent } from '../base-setting.component';\n/**\n * 1为config，2为manifest，3为config定制开发\n */\ndeclare type mode = 0 | 1 | 2 | 3;\n/**\n * 组件设置\n */\n@Component({\n  selector: 'epsgis-widget-setting',\n  templateUrl: './widget-setting.component.html',\n  styleUrls: ['./widget-setting.component.scss'],\n})\nexport class WidgetSettingComponent extends BaseSettingComponent {\n  @ViewChild(\"config\", { read: JsonEditorComponent, static: false }) editorConfig: JsonEditorComponent;\n  @ViewChild(\"manifest\", { read: JsonEditorComponent, static: false }) editorManifest: JsonEditorComponent;\n  @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: false }) container: ViewContainerRef;\n  settingComponentInstance: BaseSettingComponent;\n  currentMode: mode = 0;\n  showSwitchBtn: boolean = false;\n  private previousMode: mode = 0;\n  switchChecked: boolean = false;\n  constructor() {\n    super();\n    this.needLoadManifest = true;\n  }\n\n  ngOnInit() {\n    this.setValidateResult(true);//test\n    this.setServiceInjector(this.widgetInstance.componentLoader.getServiceInjector());\n    this.widgetConfig = this.widgetInstance.widgetConfig;\n    this.configJsonWebPath = this.widgetConfig.folderUrl.split('?')[0] + (this.widgetConfig.configPath || this.configFileName);\n    this.manifestJsonWebPath = this.widgetConfig.folderUrl.split('?')[0] + this.manifestFileName;\n    super.ngOnInit();\n  }\n  ngAfterViewInit() {\n    //分开加载两个文件\n    this.loadWidgetConfig();\n    if (this.needLoadManifest) {\n      this.loadWidgetManifest();\n    }\n    super.ngAfterViewInit();\n  }\n\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n  switchToConfigOrManifest() {\n    if (this.currentMode != 2) {\n      this.previousMode = this.currentMode;\n      this.showSwitchBtn = false;\n      this.currentMode = 2;\n    } else {\n      this.currentMode = this.previousMode;\n      if (this.settingComponentInstance) {\n        this.showSwitchBtn = true;\n      }\n    }\n  }\n  /**\n   * \n   * @param evt Event\n   */\n  changeMode(evt: any) {\n    //evt.target.checked\n    if (this.switchChecked) {\n      this.currentMode = 1;\n    } else {\n      this.currentMode = 3;\n    }\n  }\n  /**\n   * 保存失败时\n   * @param error \n   */\n  onSaveError(error: Error) {\n    if (this.settingComponentInstance) {\n      this.settingComponentInstance.onSaveError(error);\n    } else {\n      //暂时这样\n      console.error(error);\n    }\n  }\n  /**\n   * 保存\n   * @returns \n   */\n  saveAll(): Promise<RequestResultModel> {\n    return new Promise<RequestResultModel>((resolve, reject) => {\n      let result: RequestResultModel;\n      switch (this.currentMode) {\n        case 1:\n          //config.json\n          result = this.getValidateResult();\n          if (result.success && this.editorConfig) {\n            this.saveConfigJson(this.editorConfig.getText()).then(res => {\n              if (res.success) {\n                res.data = {\n                  config: this.editorConfig.value,\n                  manifest: this.editorManifest.value\n                }\n              }\n              resolve(res);\n            }).catch(reject);\n          } else {\n            resolve(new RequestResultModel(false, \"验证失败\"));\n          }\n          break;\n        case 2:\n          //manifest.json\n          result = this.getValidateResult();\n          if (result.success && this.editorManifest) {\n            this.saveManifestJson(this.editorManifest.getText()).then(res => {\n              if (res.success) {\n                res.data = {\n                  config: this.editorConfig.value,\n                  manifest: this.editorManifest.value\n                }\n              }\n              resolve(res);\n            }).catch(reject);\n          } else {\n            resolve(new RequestResultModel(false, \"验证失败\"));\n          }\n          break;\n        case 3:\n          //config.json\n          if (this.settingComponentInstance) {\n            result = this.settingComponentInstance.getValidateResult();\n            if (result.success) {\n              this.settingComponentInstance.saveConfigJson(result.data).then(res => {\n                if (res.success) {\n                  res.data = {\n                    config: result.data,\n                    manifest: this.editorManifest.value\n                  }\n                }\n                resolve(res);\n              }).catch(reject);\n            }\n            else {\n              resolve(new RequestResultModel(false, \"验证失败\"));\n            }\n          } else {\n            resolve(new RequestResultModel(false, \"无组件，无法保存\"));\n          }\n          break;\n        default:\n          resolve(new RequestResultModel(false, \"不支持的模式\"));\n          break;\n      }\n    });\n  }\n  /**\n   * 加载config.json\n   * @returns \n   */\n  loadWidgetConfig() {\n    if (!this.configJsonWebPath) {\n      console.log(\"configJsonWebPath is null\");\n      return;\n    }\n    //加载config.json\n    this.settingService.getConfigContent(this.configJsonWebPath).then(result => {\n      this.configJson = result;\n      this.onConfigJsonLoad(true, null);\n    }).catch(err => this.onConfigJsonLoad(false, err));\n  }\n  /**\n  * 加载manifest.json\n  * @returns \n  */\n  loadWidgetManifest() {\n    if (!this.manifestJsonWebPath) {\n      console.log(\"manifestJsonWebPath is null\");\n      return;\n    }\n    //加载manifest.json\n    this.settingService.getConfigContent(this.manifestJsonWebPath).then(result => {\n      this.manifestJson = result;\n      this.onManifestJsonLoad(true, null);\n    }).catch(err => this.onManifestJsonLoad(false, err));\n  }\n  /**\n   * config.json文件加载完成后事件\n   * @param succes config.json文件加载成功时为true\n   * @param err \n   */\n  onConfigJsonLoad(succes: boolean, err: Error) {\n    if (!succes) {\n      console.error(err)\n    }\n    if (this.widgetConfig.hasSetting === true) {\n      //有setting\n      // 查找setting组件\n      const settingUri = this.widgetConfig.uri + \"-setting\";\n      const comp = this.componentLoader.findComponent(settingUri);\n      if (!comp) {\n        console.info(`未找到setting组件[${settingUri}]，请检查组件定义`);\n        //界面设置为json编辑器\n        this.currentMode = 1;\n        return;\n      }\n      //界面设置为定制的开发界面\n      this.showSwitchBtn = true;\n      this.currentMode = 3;\n      this.switchChecked = false;\n      const compRef = this.componentLoader.createComponent(comp, null, this.container);\n      this.settingComponentInstance = compRef.instance;\n      //设置几个关键属性\n      this.settingComponentInstance.widgetInstance = this.widgetInstance;\n      this.settingComponentInstance.configJson = this.configJson;\n      this.settingComponentInstance.configJsonWebPath = this.configJsonWebPath;\n      this.settingComponentInstance.manifestJson = this.manifestJson;\n      this.settingComponentInstance.manifestJsonWebPath = this.manifestJsonWebPath;\n      this.container.clear();\n      this.container.insert(compRef.hostView, 0);\n    } else {\n      //界面设置为json编辑器\n      this.currentMode = 1;\n    }\n\n  }\n  /**\n   * manifest.json文件加载完成后事件\n   * @param succes manifest.json文件加载成功时为true\n   * @param err \n   */\n  onManifestJsonLoad(succes: boolean, err: Error) {\n    if (!succes) {\n      console.error(err)\n    }\n  }\n\n}\n","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-setting\",\n    template: `\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" height=\"100%\" width=\"100%\">\n          <path\n            d=\"M512.6 706.2c-107 0-194.2-87-194.2-193.8 0-106.8 87-193.8 194.2-193.8 51.8 0 100.4 20.2 137.2 56.8 36.8 36.6 57 85.4 57 137 0 106.8-87.2 193.8-194.2 193.8M967.6 426h-0.2L876 405.8l-2.2-7c-6-19-13.8-38-24.2-58.2l-3.2-6.4 49.2-81.8c15-24 21.4-57 1.8-76.6l-46.2-46.2c-11.6-11.6-26.6-14-37-14-14.4 0-29.8 4.8-41.2 12.6l-0.2 0.2-79.8 51-6.6-3.4c-18.8-9.8-38.4-18-57.8-24.2l-7-2.2-20.4-92.2v-0.2c-4.8-26.2-27.6-54.4-56.4-54.4h-65.4c-27.8 0-46.6 27.8-52.8 55.4L404 148.8l-6.8 2.2c-20.8 6.6-41.6 15.4-61.6 25.8l-6.6 3.4L247.2 128l-0.2-0.2c-11.4-8-26.8-12.6-41.2-12.6-10.6 0-25.4 2.4-37 14L122.6 175.6c-19.6 19.6-13.2 52.6 1.8 76.6L175.8 338l-3.2 6.2c-9.6 19.2-16.8 37-22.2 54.4l-2.2 7L57 426h-0.2c-26.2 4.8-54.2 27.6-54.2 56.4v65.4c0 27.8 27.8 46.6 55.4 53l92 23 2.2 6.8c5.4 16.4 12.2 33 20.8 50.4l3 6.2-51.4 85.8c-15 24-21.4 57-1.8 76.6l46.2 46.2c11.6 11.6 26.6 14 37 14 14.4 0 29.8-4.8 41.2-12.6l0.2-0.2 82-52.2 6.6 3.4c20.2 10.6 41 19.4 61.8 26l6.8 2.2 22.6 90.8c6.4 27.6 25.2 55.4 52.8 55.4h65.4c28.8 0 51.6-28.2 56.4-54.4v-0.2l20.4-92.4 7-2.2c19.2-6.2 38.4-14.2 57-24l6.6-3.4 80 51 0.2 0.2c11.4 8 26.8 12.6 41.2 12.6 10.6 0 25.4-2.4 37-14l46.2-46.2c19.6-19.6 13.2-52.6-1.8-76.6l-49.2-82 3.2-6.2c9-18 16.8-36.2 22.6-54.2l2.2-6.6 92-23c27.6-6.4 55.4-25.2 55.4-53v-65.4c0-29-28.2-51.8-54.2-56.6\">\n          </path>\n        </svg>\n    `,\n    styles: []\n})\nexport class IconSettingComponent {\n//     <!-- <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n//     <path\n//       d=\"M512 88.39l-366.86 211.8v423.62L512 935.61l366.86-211.8V300.19z m302.86 598.47L512 861.71 209.14 686.86V337.14L512 162.29l302.86 174.85z\"></path>\n//     <path\n//       d=\"M315.9 512c0 108.3 87.8 196.1 196.1 196.1S708.1 620.3 708.1 512 620.3 315.9 512 315.9 315.9 403.7 315.9 512z m328.2 0a132.1 132.1 0 1 1-38.69-93.41A131.25 131.25 0 0 1 644.1 512z\"></path>\n//   </svg> -->\n//   <!-- <i style=\"color: #fff;\"  nz-icon [nzIconfont]=\"'icon-epsgis-setting'\"></i> -->\n}","// import { OnInit, AfterViewInit, OnDestroy, Directive } from '@angular/core';\nimport { ILoadScriptOptions, loadModules } from 'esri-loader';\n// import { AppGlobalConfig } from '../../models/app-config';\n// import { WidgetType, WidgetPosition, WidgetState, WidgetWindowState, ComponentInfo } from '../../models/base-widget';\n// import { WidgetManagerService } from '../../services/widget-manager.service';\n// import { PanelManagerService } from '../../services/panel-manager.service';\n// import { ConfigLoaderService } from '../../services/config-loader.service';\n// import { ConfigManagerService } from '../../services/config-manager.service';\n// import { MapManagerService } from '../../services/map-manager.service';\n// import { WidgetPlaceHolderService } from '../../services/widget-place-holder.service';\n// import { LayoutManagerService } from '../../services/layout-manager.service';\n// import { ServiceInjector } from '../../services/service-injector';\n// import { EventEmitterService } from '../../services/event-emitter.service';\n// import { EventManager } from '@angular/platform-browser';\n// import { HttpReqService } from '../../services/services';\n// import { ModalManagerService } from '../../services/modal-manager.service';\n// import { UtilsService } from '../../services/utils.service';\n// import { CommonService } from '../../services/common.service';\n// import { ComponentLoaderService } from '../../services/component-loader.service';\n// import { ModalManagerService } from \"../../services/modal-manager.service\";\nimport { BaseWidget } from '../base-widget';\nimport { Directive, HostListener, Input } from '@angular/core';\nimport { WidgetSettingComponent } from '../setting/widget-setting/widget-setting.component';\nimport * as _ from 'lodash';\nimport { IconSettingComponent } from '../icon/icon-setting.component';\n\n// @dynamic\n/**\n * create by ruir 191015  组件基类\n */\n@Directive()\nexport class BaseWidgetComponent extends BaseWidget {\n\n  widgetSettingClassName = \"ss-widget-setting\";\n  /**\n   * inPanel时是否要在组件里显示“设置”按钮，主要用于Panel的showTitle设置为false时使用，\n   * 不显示title就无法在标题栏显示设置图标\n   * 改为Input，可以在模板里使用\n   */\n  @Input() showSettingWhenInPanel = false;\n  ngOnInit() {\n    // this.loadConfig\n    if (!this.appConfig && this.widgetManager) {\n      this.widgetManager.loadConfig(this.getCompInfo(), this).then(() => {\n        this.afterNgOnInit();\n      });\n    } else {\n      this.afterNgOnInit();\n    }\n  }\n  private static settingIconEleNode = null;\n  @HostListener('mouseenter', ['$event.target'])\n  onMouseEnter(target: HTMLElement) {\n    if (this.isSettingMode === false) {\n      //非配置模式\n      return;\n    }\n    if (this.inPanel == true && this.showSettingWhenInPanel == false) {\n      return;\n    }\n    //通过className查找可能存在多个。。。比如map上有widget就有问题\n    // let nodes = target.getElementsByClassName(this.widgetSettingClassName);\n    if (target.lastElementChild.className == this.widgetSettingClassName) {\n      target.lastElementChild.classList.remove(\"hide\");\n      target.lastElementChild.classList.add(\"show\");\n    } else {\n      const div = document.createElement(\"div\");\n      div.className = this.widgetSettingClassName;\n      /*\n      const button = document.createElement(\"input\");\n      button.type = \"button\";\n      button.className = \"button\";\n      button.value = \"设置\";\n      button.onclick = () => {\n        this.openSetting();\n      }\n      div.appendChild(button);\n      */\n      //创建svg\n      //1.const svg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n      //2.动态创建IconSettingComponent，加入\n      if (!BaseWidgetComponent.settingIconEleNode) {\n        const settingIconCompRef = this.componentLoader.createComponent(IconSettingComponent);\n        BaseWidgetComponent.settingIconEleNode = settingIconCompRef.location.nativeElement;\n      }\n      const iconDiv = document.createElement(\"div\");\n      iconDiv.className = \"icon\";\n      const newIconEle = BaseWidgetComponent.settingIconEleNode.cloneNode(true);\n      iconDiv.appendChild(newIconEle);\n      iconDiv.onclick = () => {\n        this.openSetting();\n      }\n      iconDiv.cloneNode()\n      //if (target.hasChildNodes) {\n      //此种方式为把所有元素添加到div中，需修改相关样式\n      //     //target.children 不包括文本节点和属性节点\n      //     target.childNodes.forEach((node) => {\n      //       div.appendChild(node);//会移动\n      //     });\n      //   }\n      div.appendChild(iconDiv);\n      target.appendChild(div);\n    }\n  }\n\n  @HostListener('mouseleave', ['$event.target'])\n  onMouseLeave(target: HTMLElement) {\n    if (this.isSettingMode === false) {\n      //非配置模式\n      return;\n    }\n    if (this.inPanel == true && this.showSettingWhenInPanel == false) {\n      return;\n    }\n    if (target.lastElementChild.className == this.widgetSettingClassName) {\n      target.lastElementChild.classList.remove(\"show\");\n      target.lastElementChild.classList.add(\"hide\");\n    }\n  }\n  /**\n   * 获取组件的Panel\n   * @returns \n   */\n  getPanel() {\n    if (this.inPanel === false) {\n      return null;\n    }\n    let panel = null;\n    if (this.gid === 'widgetOnScreen' || this.gid === 'widgetPool') {\n      panel = this.panelManager.getPanelById(this.id + '_panel');\n    } else {\n      panel = this.panelManager.getPanelById(this.gid + '_panel');\n      if (panel) {\n        return panel;\n      } else {\n        panel = this.panelManager.getPanelById(this.id + '_panel');\n      }\n    }\n    if (!panel) panel = {\n      uri: \"epsgis-on-screen-widget-panel\"\n    };\n    return panel;\n  }\n  /**\n   * 组件配置变更后\n   * @param config \n   */\n  onConfigChanged(config) {\n  }\n  /**\n   * 系统配置变更后\n   * @param appConfig \n   * @param reason \n   * @param changedData \n   */\n  onAppConfigChanged(appConfig, reason, changedData) {\n\n  }\n  /**\n   * 动作，比如高亮icon\n   * @param action \n   * @param data \n   */\n  onAction(action, data) {\n\n  }\n  /**\n   * 加载arcgis js 模块\n   * @param modules \n   * @param loadScriptOptions \n   */\n  loadArcgisModules<T extends any[] = any[]>(modules: string[], loadScriptOptions?: ILoadScriptOptions): Promise<T> {\n    let _url = '';\n    // if (this.config && this.config.arcgisJsApi) {\n    //   _url = this.config.arcgisJsApi;\n    // }\n    if (this.globalParams.mapConfig.jsApi) {\n      _url = this.globalParams.mapConfig.jsApi;\n    }\n    //config.json中配置了jsApi则以它为准\n    if (this.appConfig && this.appConfig.map && this.appConfig.map.jsApi) {\n      _url = this.appConfig.map.jsApi;\n    }\n    if (!_url) {\n      console.error(\"no arcgis js api\");\n      return;\n    }\n    let options: ILoadScriptOptions = {\n      url: _url,\n      css: _url.replace(\"init.js\", \"esri/css/main.css\")\n    }\n    return loadModules(modules, Object.assign(options, loadScriptOptions));\n  }\n\n  /**\n   * 打开组件设置界面\n   * @param options \n   */\n  openSetting(options?: { width: number, height: number }) {\n    let saving = false;\n    const newOptions = Object.assign({ width: 700, height: 400 }, options);\n    const modal = this.modalManager.create({\n      title: this.label + \"-配置\",\n      content: WidgetSettingComponent,\n      componentParams: {\n        widgetInstance: this\n      },\n      top: 60,\n      width: newOptions.width,\n      height: newOptions.height,\n      titleBarButtons: [\n        {\n          icon: \"icon-epsgis-i\",\n          isIconfont: true,\n          onClick: (instance) => {\n            instance.switchToConfigOrManifest();\n          }\n        }\n      ],\n      okLoading: saving,\n      onOk: (instance: WidgetSettingComponent) => {\n        instance.saveAll().then(result => {\n          if (result.success) {\n            instance.widgetInstance.config = result.data.config;\n            instance.widgetInstance.widgetConfig.config = result.data.config;\n            instance.widgetInstance.widgetConfig.manifest = _.merge({}, instance.widgetInstance.widgetConfig.manifest, result.data.manifest);\n            instance.widgetInstance.onConfigChanged(instance.widgetInstance.widgetConfig);\n            modal.close();\n          } else {\n            instance.onSaveError(new Error(result.msg));\n          }\n          saving = false;\n        }).catch(err => {\n          instance.onSaveError(err);\n          saving = false;\n        });\n        return false;\n      }\n    });\n  }\n}\n","/**\n * create by ruir 191014  basePanel.js\n */\n\n/**\n * Panel 移动端显示方式\n */\nexport enum PanelInMobileShowMode {\n    /**\n     * 默认（pc端的方式）\n     */\n    default = \"default\",\n    /**\n     * 抽屉 侧滑\n     */\n    drawer = \"drawer\",\n    /**\n     * 抽屉 侧滑 右出\n     */\n    drawerRight = \"drawerright\",\n    /**\n     * 弹窗\n     */\n    popup = \"popup\",\n    /**\n     * 由底向上弹出层\n     */\n    action = \"action\",\n    /**\n     * 气泡弹窗\n     */\n    popover = \"popover\",\n    /**\n     * 模态 或 跳转到新页\n     */\n    modal = \"modal\"\n\n}\n/**\n * panel停靠方式\n */\nexport enum PanelDockMode {\n    /**\n     * 弹窗，不停靠\n     */\n    none = \"none\",\n    /**\n     * 停靠在左侧\n     */\n    left = \"left\",\n    /**\n     * 停靠在右侧\n     */\n    right = \"right\",\n    /**\n     * 停靠在下方\n     */\n    bottom = \"bottom\"\n}\n/**\n * panel 坐标以及高宽\n */\nexport interface PanelPosition {\n\n    top?: number | string;\n    left?: number | string;\n    width?: number | string;\n    height?: number | string;\n\n}\n/**\n * Panel参数\n */\nexport interface PanelOptions {\n    /**\n        * id\n        */\n    id?: string;\n    /**\n     * 标题\n     */\n    title?: string;\n    /**\n     * 是否显示标题\n     */\n    showTitle?: boolean;\n    /**\n     * 是否为模态窗口\n     */\n    modal?: boolean;\n    /**\n     * 是否自动打开\n     */\n    autoOpen?: boolean;\n    /**\n     * 动画时间\n     */\n    animationTime?: number;\n    /**\n     * 自定义样式\n     */\n    customClass?: string;\n    /**\n     * 按钮位置\n     */\n    buttonsPosition?: string;\n    /**\n     * 是否显示关闭按钮\n     */\n    buttonClose?: boolean;\n    /**\n     * 关闭按钮提示文本\n     */\n    buttonCloseText?: string;\n    /**\n     * 是否显示最大化按钮\n     */\n    buttonMaximize?: boolean;\n    /**\n     * 最大化按钮提示文本\n     */\n    buttonMaximizeText?: string;\n    /**\n     * \n     */\n    buttonUnmaximizeText?: string;\n    /**\n     * 是否显示最小化按钮\n     */\n    buttonMinimize?: boolean;\n    buttonMinimizeText?: string;\n    buttonUnminimizeText?: string;\n    /**\n     * 是否显示收缩按钮\n     */\n    buttonCollapse?: boolean;\n    buttonCollapseText?: string;\n    buttonUnCollapseText?: string;\n    /**\n     * 是否可以拖拽\n     */\n    draggable?: boolean;\n    dragOpacity?: number;\n    /**\n     * 是否可改变大小\n     */\n    resizable?: boolean;\n    resizeOpacity?: number;\n    /**\n     * 是否显示底部状态栏\n     */\n    statusBar?: boolean;\n\n    // top?: string;\n    // left?: string;\n    // right?: string ;\n    // bottom?: string ;\n\n    height?: number;\n    width?: number;\n    maxHeight?: any;\n    maxWidth?: any;\n    minHeight?: number;\n    minWidth?: number;\n    collapsedWidth?: number;\n\n    keepInViewport?: boolean;\n    mouseMoveEvents?: boolean;\n\n    dockSide?: PanelDockMode;\n    relativeTo?: string;\n    /**\n     * 静态html内容\n     */\n    innerHtml?: string; //静态内容\n    /**\n     * 显示url内容\n     */\n    url?: string;\n    /**\n     * 是否显示中间的折叠按钮，替换buttonCollapse属性\n     */\n    centerCollapse?: boolean;\n    /**\n     * 是否显示设置按钮\n     */\n    buttonSetting?: boolean;\n    /**\n     * 设置按钮提示文本\n     */\n    buttonSettingText?: string;\n\n}\n/**\n * Panel参数默认值\n */\nexport const DefaultPanelOptions: PanelOptions = {\n    /**\n     * id\n     */\n    id: \"ss_panel\",\n    /**\n     * 标题\n     */\n    title: \"SS Panel\",\n    /**\n     * 是否显示标题\n     */\n    showTitle: true,\n    /**\n     * 是否为模态窗口\n     */\n    modal: false,\n    /**\n     * 是否自动打开\n     */\n    autoOpen: false,\n    /**\n     * 动画时间\n     */\n    animationTime: 300,\n    /**\n     * 自定义样式\n     */\n    customClass: \"\",\n    /**\n     * 按钮位置\n     */\n    buttonsPosition: \"right\",\n    /**\n     * 是否显示关闭按钮\n     */\n    buttonClose: true,\n    /**\n     * 关闭按钮提示文本\n     */\n    buttonCloseText: \"关闭\",\n    /**\n     * 是否显示最大化按钮\n     */\n    buttonMaximize: true,\n    /**\n     * 最大化按钮提示文本\n     */\n    buttonMaximizeText: \"最大化\",\n    /**\n     * \n     */\n    buttonUnmaximizeText: \"还原\",\n    /**\n     * 是否显示最小化按钮\n     */\n    buttonMinimize: false,\n    buttonMinimizeText: \"最小化\",\n    buttonUnminimizeText: \"打开\",\n    /**\n     * 是否显示收缩按钮\n     */\n    buttonCollapse: true,\n    buttonCollapseText: \"收缩\",\n    buttonUnCollapseText: \"展开\",\n    /**\n     * 是否可以拖拽\n     */\n    draggable: true,\n    dragOpacity: 0.6,\n    /**\n     * 是否可改变大小\n     */\n    resizable: true,\n    resizeOpacity: 0.6,\n    /**\n     * 是否显示底部状态栏\n     */\n    statusBar: false,\n\n    // top: \"auto\";\n    // left: \"auto\";\n    // right: \"auto\";\n    // bottom: \"auto\";\n\n    height: 200,\n    width: 400,\n    maxHeight: undefined,\n    maxWidth: undefined,\n    minHeight: 100,\n    minWidth: 200,\n    collapsedWidth: undefined,\n\n    keepInViewport: true,\n    mouseMoveEvents: true,\n\n    dockSide: PanelDockMode.none,\n    relativeTo: \"map\",\n    /**\n     * 静态html内容\n     */\n    innerHtml: \"\",\n    /**\n     * 显示url内容\n     */\n    url: \"\"\n}","<img *ngIf=\"isShowImg\" [src]=\"icon\">\n<i *ngIf=\"!isShowImg\" nz-icon [nzIconfont]=\"icon\"> </i>","import { Component, OnInit, Optional, ViewContainerRef, ComponentRef, OnDestroy, AfterViewInit, HostListener, HostBinding, ChangeDetectorRef } from '@angular/core';\nimport { WidgetType, WidgetState } from '../../models/base-widget';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport * as _ from \"lodash\";\nimport { OnScreenWidgetPanelComponent } from '../on-screen-widget-panel/on-screen-widget-panel.component';\nimport { ComponentRegister } from '../../decorator/decorators';\n\n/**\n * create by ruir 191014  OnScreenWidgetIcon.js\n */\n@ComponentRegister({\n  uri: \"epsgis-on-screen-widget-icon\",\n  path: \"components/on-screen-widget-icon\"\n})\n@Component({\n  selector: 'epsgis-on-screen-widget-icon',\n  templateUrl: './on-screen-widget-icon.component.html',\n  styleUrls: ['./on-screen-widget-icon.component.scss'],\n})\nexport class OnScreenWidgetIconComponent extends BaseWidgetComponent implements OnInit, OnDestroy, AfterViewInit {\n  widget: any = null;\n  panel: ComponentRef<OnScreenWidgetPanelComponent> = null;\n  panelConfig: any = null;\n  isShowImg: Boolean = true;\n  spacing: number = 2;\n  // @HostBinding('class.hide') isHideIcon: boolean = false;// 未起作用\n  @HostBinding(\"style.display\") iconStyleDisplay: string = \"\";\n  constructor(@Optional() public viewContainerRef: ViewContainerRef, public cdrf: ChangeDetectorRef) {\n    super();\n    this.type = WidgetType.icon;\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.startup();\n  }\n  /**\n   * 设置参数\n   * @param options \n   */\n  setProps(options: { compRef: any, appConfig: any, map: any, widgetConfig: any }) {\n    if (options.compRef) {\n      this.widget = options.compRef;\n      this.appConfig = this.widget.instance.appConfig;\n      if (this.globalParams.mapConfig.is3D) {\n        this.view = this.widget.instance.view;\n      } else {\n        this.map = this.widget.instance.map;\n      }\n      this.widgetConfig = this.widget.instance.widgetConfig;\n      this.config = this.widget.instance.config;\n\n    } else {\n      this.appConfig = options.appConfig;\n      if (this.globalParams.mapConfig.is3D) {\n        this.view = options.map;\n      } else {\n        this.map = options.map;\n      }\n      this.widgetConfig = options.widgetConfig;\n      //this.config = this.widgetConfig.config;//这时还没有\n    }\n    this.id = this.configId = this.widgetConfig.id;\n    this.label = this.tooltip = this.title = this.widgetConfig.label;\n    this.folderUrl = this.widgetConfig.folderUrl;\n    if (typeof (this.widgetConfig.icon) != \"undefined\" && this.widgetConfig.icon != \"\")\n      this.icon = this.widgetConfig.icon;\n    else if (typeof (this.widgetConfig.manifest.icon) != \"undefined\" && this.widgetConfig.manifest.icon != \"\") {\n      this.icon = this.widgetConfig.manifest.icon;\n      this.isShowImg = false;\n    }\n    else\n      this.icon = this.folderUrl + \"images/icon.png\";//folderUrl后面有带/\n    this.uri = this.widgetConfig.uri;\n    this.gid = this.widgetConfig.gid;\n\n    // let _position: WidgetPosition = {\n    //   width: \"32px\",\n    //   height: \"32px\",\n    //   zIndex: this.globalParams.jimuConfig.zIndex\n    // }\n    let _position = _.cloneDeep(this.widgetConfig.position);\n    _position.width = \"32px\";\n    _position.height = \"32px\";\n    super.setPosition(_position);\n    this.panelConfig = _.cloneDeep(this.widgetConfig);\n    if (this.widgetConfig.showIcon === false) {\n      // this.isHideIcon = true;\n      this.iconStyleDisplay = \"none\";\n    }\n  }\n  ngOnDestroy(): void {\n    this.destroy();\n  }\n  ngAfterViewInit(): void {\n    //this.resetPanelPosition();\n  }\n  resetPanelPosition() {\n    if (this.commonService.isMobile()) {\n      return this.panelConfig.position;\n    }\n    const _isInMap: boolean = this.widgetConfig.position.relativeTo !== \"browser\";\n    let _containerBounds: ClientRect | DOMRect;\n    if (_isInMap) {\n      const _ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n      if (_ele) {\n        _containerBounds = this.commonService.getElementBounds(_ele);\n      }\n    } else {\n      //应获取外层容器（epsgis-comp-container）的高宽\n      _containerBounds = document.querySelector(\"epsgis-comp-container\").getBoundingClientRect();\n    }\n    //.firstChild\n    let eleIcon = this.viewContainerRef.element.nativeElement,\n      bounds = this.commonService.getElementBounds(eleIcon),\n      inRight: boolean = false;\n    if (_containerBounds.width - bounds.right < _containerBounds.width / 2) {\n      inRight = true;\n    }\n    if (inRight) {\n      //this.panelConfig.position.left = \"auto\";\n      this.panelConfig.position.left = bounds.left - parseFloat(this.widgetConfig.position.width) - this.spacing - _containerBounds.left;\n      this.panelConfig.position.right = _containerBounds.right - bounds.left - this.spacing; //this.widgetConfig.position.right;\n    } else {\n      //如果图标的left+图标的宽度+panel的宽度小于等于可视区域的宽度则正常，反之panel的left=图标的left-panel的宽度\n      if (bounds.left + bounds.width + parseFloat(this.widgetConfig.position.width) + this.spacing > _containerBounds.width) {\n        this.panelConfig.position.left = bounds.left - parseFloat(this.widgetConfig.position.width) - this.spacing - _containerBounds.left;\n      } else {\n        this.panelConfig.position.left = bounds.left + bounds.width + this.spacing - _containerBounds.left;\n      }\n    }\n\n    //left小于0了 panel宽度太宽 重新定位\n    if (parseFloat(this.panelConfig.position.left) <= -1) {\n      if (inRight) {\n        this.panelConfig.position.left = this.spacing;\n        this.panelConfig.position.width = bounds.left - parseFloat(this.panelConfig.position.left) - this.spacing * 2 - _containerBounds.left;\n      } else {\n        this.panelConfig.position.left = bounds.left + bounds.width + this.spacing - _containerBounds.left;\n        this.panelConfig.position.width = _containerBounds.width - bounds.right - this.spacing * 2;\n      }\n    }\n    //如果图标的top+panel的高度小于等于可视区域的高度则正常，反之panel的top=图标的top-panel的高度\n    if (bounds.top + parseFloat(this.widgetConfig.position.height) + this.spacing > _containerBounds.height) {\n      this.panelConfig.position.top = bounds.top - parseFloat(this.widgetConfig.position.height) + this.spacing - _containerBounds.top;\n    } else {\n      this.panelConfig.position.top = bounds.top - _containerBounds.top;\n    }\n    //top小于0了  panel高度太高 重新定位\n    if (parseFloat(this.panelConfig.position.top) <= -1) {\n      this.panelConfig.position.top = bounds.top - _containerBounds.top;\n      this.panelConfig.position.height = _containerBounds.height - bounds.top - this.spacing * 2;\n    }\n    return this.panelConfig.position;\n  }\n  /**\n   * \n   * @param evt \n   */\n  @HostListener('click', ['$event'])\n  onMouseClick(evt) {\n    this.onClick(evt);\n  }\n\n  startup() {\n    this.started = true;\n  }\n  /**\n   * 单击图标时\n   * @param evt \n   */\n  onClick(evt) {\n    if (this.state === WidgetState.closed || (this.panel && this.panel.instance.state === WidgetState.closed)) {\n      this.switchToOpen();\n    } else {\n      this.switchToClose();\n    }\n  }\n  private _isDockPanel() {\n    let _uri = \"\", _dock = \"\";\n    if (this.widgetConfig.panel && this.widgetConfig.panel.dock) {\n      _dock = this.widgetConfig.panel.dock.toLowerCase();\n      return _dock === \"left\" || _dock === \"right\" || _dock === \"bottom\";\n    }\n    if (this.widgetConfig.panel && this.widgetConfig.panel.uri) {\n      _uri = this.widgetConfig.panel.uri;\n    }\n    if (!_uri) return false;\n    _uri = _uri.toLowerCase();\n    return _uri === \"epsgis-dockable-panel-at-left\" ||\n      _uri === \"epsgis-dockable-panel-at-bottom\" ||\n      _uri === \"epsgis-dockable-panel-at-right\";\n  }\n  /**\n   * \n   */\n  switchToOpen() {\n    if (!this._isDockPanel()) {\n      //同组互斥\n      this.panelManager.closeAllPanelsInGroup(this.widgetConfig.gid);\n    }\n    this.resetPanelPosition();\n    if (this.widgetConfig.inPanel === false) {\n      this.widgetManager.loadWidget(this.widgetConfig);\n    } else {\n      this.panelManager.showPanel(this.panelConfig, this.widget).then((panel: ComponentRef<OnScreenWidgetPanelComponent>) => {\n        this.panel = panel;\n        this.state = WidgetState.opened;\n        this.panel.instance.panelIcon = this;\n        if (this.panel.instance.isDockable()) {\n          this.panelManager.onMapResize();\n        }\n      });\n    }\n\n  }\n  /**\n   * \n   */\n  switchToClose() {\n    if (this.widgetConfig.inPanel === false) {\n      this.widgetManager.closeWidget(this.widget);\n    } else {\n      this.panelManager.closePanel(this.panel).then(panel => {\n        this.state = WidgetState.closed;\n      });\n    }\n  }\n  /**\n   * 移动\n   * @param position \n   */\n  moveTo(position) {\n  }\n  destroy() {\n    if (this.panel && this.panelManager) {\n      this.panelManager.destroyPanel(this.panel);\n    } else if (this.widget) {\n      this.widgetManager.destroyWidget(this.widget);\n    }\n  }\n  getOffPanelWidgetPosition() {\n\n  }\n  private _showLoading() {\n\n  }\n  private _hideLoading() {\n\n  }\n  onMapChange(map) {\n    this.map = map;\n  }\n  onViewChange(view) {\n    this.view = view;\n  }\n}\n","\r\n/**\r\n * create by ruir 191105 源自dojo/aspect.js\r\n * 提供面向切面的编程功能，允许在目标对象的方法前、后、及周围插入要执行的函数\r\n */\r\nclass AspectService {\r\n\r\n    nextId: number = 0;\r\n    /**\r\n    * 单例\r\n    */\r\n    private static _instance: AspectService = null;\r\n    private constructor() {\r\n\r\n    }\r\n    static getInstance() {\r\n        if (!this._instance) {\r\n            this._instance = new AspectService();\r\n        }\r\n        return this._instance;\r\n    }\r\n    /**\r\n     * 添加切面函数\r\n     * @param dispatcher 目标\r\n     * @param type 类型，after,before,around\r\n     * @param advice 要切入的函数\r\n     * @param receiveArguments 是否返回函数\r\n     */\r\n    private advise(dispatcher: any, type: string, advice: Function, receiveArguments?: boolean) {\r\n        let previous = dispatcher[type];\r\n        let around = type == \"around\";\r\n        let signal;\r\n        if (around) {\r\n            let advised = advice(()=> {\r\n                return previous.advice(this, arguments);\r\n            });\r\n            signal = {\r\n                remove: () => {\r\n                    if (advised) {\r\n                        advised = dispatcher = advice = null;\r\n                    }\r\n                },\r\n                advice: (target, args) => {\r\n                    //一旦调用remove，adviced变为空，便会跳过本次环绕通知，进入上一层的advice方法。\r\n                    return advised ?\r\n                        advised.apply(target, args) :  // 调用切入的函数\r\n                        previous.advice(target, args); // 已取消，跳至下一个\r\n                }\r\n            };\r\n        } else {\r\n            // 创建移除事件\r\n            signal = {\r\n                remove: () => {\r\n                    if (signal.advice) {\r\n                        let previous = signal.previous;\r\n                        let next = signal.next;\r\n                        if (!next && !previous) {\r\n                            delete dispatcher[type];\r\n                        } else {\r\n                            if (previous) {\r\n                                previous.next = next;\r\n                            } else {\r\n                                dispatcher[type] = next;\r\n                            }\r\n                            if (next) {\r\n                                next.previous = previous;\r\n                            }\r\n                        }\r\n\r\n                        // 移除后 置为空\r\n                        dispatcher = advice = signal.advice = null;\r\n                    }\r\n                },\r\n                id: dispatcher.nextId++,\r\n                advice: advice,\r\n                receiveArguments: receiveArguments\r\n            };\r\n        }\r\n        if (previous && !around) {\r\n            if (type == \"after\") {\r\n                //将侦听器添加到列表的末尾\r\n                //注意，我们必须对此循环进行一些更改，以解决一个奇怪的IE10 JIT错误 while (previous.next && (previous = previous.next)) { }\r\n                previous.next = signal;\r\n                signal.previous = previous;\r\n            } else if (type == \"before\") {\r\n                // 添加到开头\r\n                dispatcher[type] = signal;\r\n                signal.next = previous;\r\n                previous.previous = signal;\r\n            }\r\n        } else {\r\n            //替换前后或第一个\r\n            dispatcher[type] = signal;\r\n        }\r\n        return signal;\r\n    }\r\n    /**\r\n     * 切面\r\n     * @param type 类型 after,before,around\r\n     */\r\n    private _aspect(type: string) {\r\n        /**\r\n         * @target 目标对象\r\n         * @methodName 函数名\r\n         * @advice 要切入得函数\r\n         * @receiveArguments 是否传入原始参数\r\n         */\r\n        return (target: any, methodName: string, advice: Function, receiveArguments?: boolean) => {\r\n            let existing = target[methodName], dispatcher;\r\n            if (!existing || existing.target != target) {\r\n                // 还没有调度\r\n                target[methodName] = dispatcher = ()=>{\r\n                    let executionId = dispatcher.nextId;\r\n                    // before advice\r\n                    let args = arguments;\r\n                    let before = dispatcher.before;\r\n                    while (before) {\r\n                        if (before.advice) {\r\n                            args = before.advice.apply(this, args) || args;\r\n                        }\r\n                        before = before.next;\r\n                    }\r\n                    // around advice\r\n                    if (dispatcher.around) {\r\n                        let results = dispatcher.around.advice(this, args);\r\n                    }\r\n                    // after advice\r\n                    let after = dispatcher.after;\r\n                    while (after && after.id < executionId) {\r\n                        if (after.advice) {\r\n                            if (after.receiveArguments) {\r\n                                let newResults = after.advice.apply(this, args);\r\n                                // 仅当返回新值时才更改返回值\r\n                                results = newResults === undefined ? results : newResults;\r\n                            } else {\r\n                                results = after.advice.call(this, results, args);\r\n                            }\r\n                        }\r\n                        after = after.next;\r\n                    }\r\n                    return results;\r\n                };\r\n                if (existing) {\r\n                    dispatcher.around = {\r\n                        advice: (target, args) => {\r\n                            return existing.apply(target, args);\r\n                        }\r\n                    };\r\n                }\r\n                dispatcher.target = target;\r\n                dispatcher.nextId = dispatcher.nextId || 0;\r\n            }\r\n            let results = this.advise((dispatcher || existing), type, advice, receiveArguments);\r\n            advice = null;\r\n            return results;\r\n        };\r\n    }\r\n    after = this._aspect(\"after\");\r\n\r\n    before = this._aspect(\"after\");\r\n\r\n    around = this._aspect(\"around\");\r\n\r\n}\r\n// 示例:\r\n// 第一步导入库\r\n// import { aspect } from '../../../services/aspect.service';\r\n\r\n//after \r\n// let signal = aspect.after(targetObject, \"methodName\", (someArgument)=>{\r\n//     //将在调用targetObject.methodName()后执行\r\n// });\r\n//\r\n\r\n//\t返回的对象可用于移除绑定。\r\n//  signal.remove(); //移除\r\n//\t\r\n//before\r\n// aspect.before(targetObject, \"methodName\", (someArgument)=>{\r\n// \t\t//将在调用targetObject.methodName()前执行\r\n// });\r\n\r\n//around\r\n// aspect.around(targetObject, \"methodName\",  (originalFoo)()=> {\r\n//     return  ()=> {\r\n//         let start = new Date().getTime();//调用targetObject.methodName()前执行\r\n//         let results = originalFoo.apply(this, arguments); //调用原始方法targetObject.methodName()\r\n//         let end = new Date().getTime();//调用targetObject.methodName()后执行\r\n//         console.log(\"methodName execution took \" + (end - start) + \" ms\");\r\n//         return results;\r\n//     };\r\n// });\r\nexport let aspect = AspectService.getInstance();\r\n\r\nexport class TestAspect{\r\n    constructor(){\r\n        console.log(\"TestAspect constructor\")\r\n    }\r\n    testBefore(){\r\n        console.log(\"TestAspect testBefore\")\r\n    }\r\n    testAfter(){\r\n        console.log(\"TestAspect testAfter\")\r\n    }\r\n    testAround(){\r\n        console.log(\"TestAspect testAround\")\r\n    }\r\n}","import { OnInit, ComponentRef, ViewChild, ViewContainerRef, Optional, ElementRef, Renderer2, HostListener, AfterViewInit, ApplicationRef, Directive } from '@angular/core';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport { WidgetWindowState, WidgetState, WidgetPosition } from '../../models/base-widget';\nimport { PanelOptions, PanelPosition, PanelInMobileShowMode, PanelDockMode, DefaultPanelOptions } from '../../models/base-panel';\nimport * as _ from 'lodash';\nimport { aspect } from '../../services/aspect.service';\nimport { OnScreenWidgetIconComponent } from '../on-screen-widget-icon/on-screen-widget-icon.component';\nimport { ChangeDetectorRef } from \"@angular/core\";\nimport { BaseWidget } from '../base-widget';\n/**\n * \n */\n@Directive()\nexport class BasePanelComponent extends BaseWidget implements OnInit, AfterViewInit {\n  public options: PanelOptions = DefaultPanelOptions;\n  widget: ComponentRef<BaseWidgetComponent>;\n  @ViewChild(\"widget_content\", { read: ViewContainerRef, static: true }) widgetContainer: ViewContainerRef;\n  // @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: true }) widgetContainer: ViewContainerRef;\n\n  @ViewChild(\"sspanel_overlay\", { static: true }) sspanelOverlay: ElementRef;\n  @ViewChild(\"sspanel_titlebar\", { static: true }) sspanel_titlebar: ElementRef;\n  @ViewChild(\"sspanel\", { static: true }) sspanel: ElementRef;\n\n  /**\n   * \n   */\n  panelContainer: Element;\n  /**\n   * 当前位置\n   */\n  protected currentPosition: PanelPosition = undefined;\n  protected savedPosition: PanelPosition = undefined;\n  protected currentSize: { width: any, height: any } = undefined;\n  protected savedSize: { width: any, height: any } = undefined;\n  protected tempSavedData: any;\n  // private maximized: boolean = false;\n  // private collapsed: boolean = false;\n  // private minimized: boolean = false;\n  protected isMouseEvent: boolean = false;\n  /**\n   * 原始位置大小\n   */\n  protected originalPosition: PanelPosition = undefined;\n  /**\n   * 拉动大小时的参数\n   */\n  //private resizeParams:{dimension?:string,directionX?:string,directionY?:string}=undefined;\n  /**\n   * 停靠方式\n   */\n  dockMode: PanelDockMode = PanelDockMode.none;\n  //////////////移动端\n  /**\n   * 当前是否运行在移动端\n   */\n  _isRunInMobile: boolean = false;\n  /**\n   * 移动端展示方式 默认action\n   */\n  _mobileShowMode: PanelInMobileShowMode = PanelInMobileShowMode.action;\n\n  /////////////\n  panelIcon: OnScreenWidgetIconComponent;\n  /**\n   * \n   * @param _render \n   */\n  constructor(@Optional() public _render: Renderer2\n    , @Optional() public cdr: ChangeDetectorRef\n    /*public appRef: ApplicationRef*/) {\n    super();\n  }\n  /**\n   * \n   */\n  ngOnInit() {\n    this._isRunInMobile = this.commonService.isMobileNotTablet();\n    if (this.options.modal === true) {\n      if (this.sspanelOverlay) {\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"pointer-events\", \"auto\");\n      }\n    } else {\n      if (this.sspanelOverlay) {\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"transparent\");\n      }\n    }\n\n    if (this._isRunInMobile) {\n      if (this._mobileShowMode === PanelInMobileShowMode.drawer\n        || this._mobileShowMode === PanelInMobileShowMode.drawerRight) {\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"pointer-events\", \"auto\");\n        this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"#00000080\");\n      }\n\n    } else {\n      try {\n        //ElementRef ok 这种方式不能自动调用钩子函数（如ngOnIit）\n        // const ele = (this.widget.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n        // this.widgetContainer[\"elementRef\"].nativeElement.parentElement.appendChild(ele);\n        //ElementRef insert is not a function\n        // this.widgetContainer.insert(this.widget.hostView);\n\n        // if (this.options.modal !== true) {\n        //   this._render.setStyle(this.sspanelOverlay.nativeElement, \"width\", 0);\n        //   this._render.setStyle(this.sspanelOverlay.nativeElement, \"height\", 0);\n        // }\n        this.xxxx = this._document_MouseMove.bind(this);\n        this.yyyy = this._document_MouseUp.bind(this);\n        this.started = true;\n      } catch (error) {\n        console.log(`open panel[${this.widget.instance.uri}] error`);\n        console.error(error);\n      }\n    }\n    super.ngOnInit();\n  }\n  /**\n   * \n   */\n  ngOnDestroy(): void {\n    super.ngOnDestroy();\n    if (this.widget) {\n      this.widgetManager.destroyWidget(this.widget);\n    }\n  }\n  /**\n   * \n   */\n  ngAfterViewInit(): void {\n    //需异步执行，否则检测会报错Error: ExpressionChangedAfterItHasBeenCheckedError: Expression has changed after it was checked...\n    Promise.resolve(null).then(() => {\n      this.startup();\n      this.state = WidgetState.opened;\n      this.loadAllWidgetsInOrder();\n      this.onOpen();\n      if (this.cdr && this.cdr[\"destroyed\"] === false) {\n        this.cdr.detectChanges();\n      }\n      super.afterNgAfterViewInit();\n    });\n  }\n  /**\n   * \n   * @param positionConfig \n   */\n  setPosition(positionConfig: any) {\n    if (!this.widgetConfig.position.width) {\n      this.widgetConfig.position.width = this.options.width;\n    }\n    if (!this.widgetConfig.position.height) {\n      this.widgetConfig.position.height = this.options.height;\n    }\n    //判断下高宽是否小于了最小的高宽，解决变成一条线问题\n    let w = this.commonService.getPxNumber(this.widgetConfig.position.width);\n    let h = this.commonService.getPxNumber(this.widgetConfig.position.height);\n    if (typeof w === \"number\" && w < this.options.minWidth) {\n      this.widgetConfig.position.width = this.options.minWidth;\n    }\n    if (typeof h === \"number\" && h < this.options.minWidth) {\n      this.widgetConfig.position.height = this.options.minHeight;\n    }\n\n    if (this.commonService.isMobileNotTablet()) {\n      this._setMobilePosition();\n    } else {\n      this._setPCPosition();\n    }\n    super.setPosition(this.widgetConfig.position);\n  }\n  /**\n   * \n   */\n  protected _setPCPosition() {\n    this.currentSize = { width: this.widgetConfig.position.width, height: this.widgetConfig.position.height };\n    this.currentPosition = { left: undefined, top: undefined, width: undefined, height: undefined };\n    this.currentPosition.left = this.commonService.getPxNumber(this.widgetConfig.position.left);\n    this.currentPosition.top = this.commonService.getPxNumber(this.widgetConfig.position.top);\n    this.currentPosition.width = this.commonService.getPxNumber(this.widgetConfig.position.width);\n    this.currentPosition.height = this.commonService.getPxNumber(this.widgetConfig.position.height);\n    this.savedPosition = _.cloneDeep(this.currentPosition);\n    this.originalPosition = _.cloneDeep(this.currentPosition);\n  }\n  /**\n  * 子类继承实现\n  */\n  protected _setMobilePosition() {\n\n  }\n  private loadAllWidgetsInOrder() {\n    //多个\n    // const configs = this.getAllWidgetConfigs();\n    // if (_.isArray(this.config.widgets)) {\n    //   configs = this.config.widgets;\n    // } else {\n    //   configs = [this.widgetConfig];\n    // }\n    const configs = [this.widgetConfig];\n    _.forEach(configs, (wConfig) => {\n      if (wConfig.visible === false) {\n        return;\n      }\n      //动画\n      //加载组件\n      this.widgetManager.loadWidget(wConfig).then((widget) => {\n        this.widget = widget;\n        if (this.options.showTitle === false) {\n          this.widget.instance.showSettingWhenInPanel = true;\n        }\n        this.widget.instance.reqPara = this.reqPara;\n        //ViewContainerRef insert  这种方式可自动调用钩子函数\n        this.widgetContainer.insert(this.widget.hostView);\n        // this.appRef.attachView(this.widget.hostView);//已经加入了\n        //ngAfterViewInit\n        aspect.after(this.widget.instance, \"afterNgAfterViewInit\", () => {\n          this.widget.instance.started = true;\n          this.widget.instance.state = WidgetState.opened;\n          this.widget.instance.windowState = WidgetWindowState.normal;\n          this.widget.instance.startup();\n        });\n      });\n    });\n  }\n\n  private getAllWidgetConfigs() {\n    let configs = [];\n    if (Array.isArray(this.config.widgets)) {\n      configs = this.config.widgets;\n    } else {\n      configs = [this.widgetConfig];\n    }\n    return configs;\n  }\n  /**\n   * 是否停靠的panel\n   */\n  isDockable(): boolean {\n    return this.dockMode === PanelDockMode.left ||\n      this.dockMode === PanelDockMode.bottom ||\n      this.dockMode === PanelDockMode.right;\n  }\n\n  startup() {\n    // this.panelContainer.appendChild(this.sspanelOverlay.nativeElement); //这种方式有问题\n    this.started = true;\n  }\n  /**\n   * \n   * @param widget \n   */\n  setWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    this.widget = widget;\n    if (this.options.showTitle === false) {\n      this.widget.instance.showSettingWhenInPanel = true;\n    }\n  }\n  /**\n   * 设置panel参数\n   * @param options \n   */\n  setOptions(options: PanelOptions) {\n    if (this.widgetConfig && this.widgetConfig.panel) {\n      _.merge(options, this.widgetConfig.panel);\n    }\n    this.options = _.merge(_.cloneDeep(DefaultPanelOptions), options);\n    this.options.buttonSetting = this.isSettingMode;\n  }\n  /**\n   * \n   * @param state \n   */\n  setWindowState(state: WidgetWindowState) {\n    this.windowState = state;\n  }\n  setState(state: WidgetState) {\n    switch (state) {\n      case WidgetState.opened:\n        this.showPanel();\n        break;\n      case WidgetState.closed:\n        this.hidePanel();\n        break;\n      case WidgetState.active:\n        break;\n      default:\n        break;\n    }\n    this.state = state;\n    if (this.widget) {\n      this.widget.instance.setState(state);\n    }\n  }\n  protected showPanel() {\n    this.sspanelOverlay.nativeElement.parentElement.style.display = '';\n    if (this.widget) {\n      //undefined?\n      this.commonService.getComponentRootNode(this.widget).style.display = '';\n    }\n    this.onOpen();\n    this.state = WidgetState.opened;\n  }\n  protected hidePanel() {\n    //this.widget.hostView.rootNodes[0].parentElement.parentNode.parentElement.parentElement.style.display='none'\n    this.sspanelOverlay.nativeElement.parentElement.style.display = 'none';\n    if (this.widget) {\n      //undefined?\n      this.commonService.getComponentRootNode(this.widget).style.display = 'none';\n    }\n    this.onClose();\n    //设置状态\n    this.state = WidgetState.closed;\n  }\n  /**\n   * 关闭panel\n   * @param event \n   */\n  closePanel(event) {\n    this.panelManager.closePanel(this.id);\n    // this.setState(WidgetState.closed);\n    if (event) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  onNormalize() {\n    if (this.widget) {\n      this.widget.instance.onNormalize();\n    }\n  }\n\n  onMinimize() {\n    if (this.widget) {\n      this.widget.instance.onMinimize();\n    }\n  }\n  onMaximize() {\n    if (this.widget) {\n      this.widget.instance.onMaximize();\n    }\n  }\n  /**\n   * \n   * @param position \n   */\n  resize(position?: any) {\n    if (position) {\n      if (position.left < 0) {\n        position.left = 0;\n      }\n      if (position.top < 0) {\n        position.top = 0;\n      }\n      if (position.width < this.options.minWidth) {\n        position.width = this.options.minWidth;\n      }\n      if (position.height < this.options.minHeight) {\n        position.height = this.options.minHeight;\n      }\n      this._render.setStyle(this.sspanel.nativeElement, \"left\", this._convertToStyleVal(position.left));\n      this._render.setStyle(this.sspanel.nativeElement, \"top\", this._convertToStyleVal(position.top));\n      this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(position.width));\n      this._render.setStyle(this.sspanel.nativeElement, \"height\", this._convertToStyleVal(position.height));\n      this.widgetConfig.position = _.merge(this.widgetConfig.position, position);\n      this.setPosition(position);\n    }\n  }\n  onResize() {\n    if (this.widget) {\n      this.widget.instance.resize();\n    }\n  }\n  onActive() {\n  }\n\n  onDeActive() {\n  }\n  onCollapse() {\n  }\n  onExpand() {\n  }\n  onMove() {\n  }\n  onPositionChange(position) {\n    this.setPosition(position);\n  }\n  onOpen() {\n    if (this.widget && this.widget.instance.started) {\n      this.widget.instance.onOpen();\n    }\n  }\n  onClose() {\n    //关闭widget\n    if (this.widget) {\n      this.widgetManager.closeWidget(this.widget);\n    }\n    // if (this.widget) {\n    //   this.widget.instance.onClose();\n    // }\n  }\n  @HostListener('mouseenter', ['$event.target'])\n  onMouseEnter(target) {\n    if (this.moveTopOnActive) {\n      this.panelManager._activePanel(this.id);\n    }\n  }\n\n  @HostListener('mouseleave')\n  onMouseLeave() {\n\n  }\n  /**\n   * \n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   */\n  /**\n   * 获取当前位置\n   */\n  private _getCurrentPosition() {\n\n    let _position = this.currentPosition;\n    if (_position.top === \"auto\") {\n      _position.top = this.position.top;\n    }\n    if (_position.left === \"auto\" || _position.left === 0) {\n      //解决在没有left属性时，第一次拖动会跑到左边的问题\n      const _panelBounds = this.commonService.getElementBounds(this.sspanel.nativeElement);\n      const _isInMap: boolean = this.widgetConfig.position.relativeTo !== \"browser\";\n      let _containerBounds: ClientRect | DOMRect;\n      if (_isInMap) {\n        const _ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n        if (_ele) {\n          _containerBounds = this.commonService.getElementBounds(_ele);\n        }\n      } else {\n        //应获取外层容器（epsgis-comp-container）的高宽\n        _containerBounds = document.querySelector(\"epsgis-comp-container\").getBoundingClientRect();\n      }\n      if (_containerBounds) {\n        //减去容器的left\n        _position.left = _panelBounds.left - _containerBounds.left;\n      }\n    }\n    return _.merge({}, _position);\n  }\n  /**\n   * 设置位置\n   * @param position \n   */\n  private _setCurrentPosition(position: PanelPosition) {\n    // console.log(\"Object.assign:\")\n    // console.log(Object.assign({ a: 1, b: 2 }, { a: 2, b: undefined }));\n    // console.log(\"_.extend:\")\n    // console.log(_.extend({ a: 1, b: 2 }, { a: 2, b: undefined }));\n    // console.log(\"_.merge:\")\n    // console.log(_.merge({ a: 1, b: 2 }, { a: 2, b: undefined }));\n    this.currentPosition = _.merge(this.currentPosition, position);\n  }\n  private _saveCurrentPosition() {\n    this.savedPosition = this._getCurrentPosition();\n  }\n  private _restoreSavedPosition() {\n    return this._changePosition(this.savedPosition);\n  }\n  /**\n   * \n   * @param params \n   */\n  private _changePosition(params: WidgetPosition | any) {\n    let defRet = this.commonService.createPromiseDefer();\n    let settings = this.options;\n    let animationTime = (params.animationTime !== undefined) ? parseInt(params.animationTime) : settings.animationTime;\n    let newPosition = {\n      top: params.top,\n      left: params.left,\n      bottom: params.bottom,\n      right: params.right\n    };\n    if (params.check) {\n      if (!(this.state === WidgetState.opened) ||\n        this.windowState === WidgetWindowState.maximized ||\n        this.windowState === WidgetWindowState.minimized) return;\n      if (settings.keepInViewport) {\n        let size = this._getCurrentSize();\n        let $window = this._getWindowSize();\n        if (newPosition.top > $window.height() - size.height) newPosition.top = $window.height() - size.height;\n        if (newPosition.left > $window.width() - size.width) newPosition.left = $window.width() - size.width;\n        if (newPosition.top < 0) newPosition.top = 0;\n        if (newPosition.left < 0) newPosition.left = 0;\n      }\n    }\n    let currentPosition = this._getCurrentPosition();\n    if (currentPosition.top != newPosition.top || currentPosition.left != newPosition.left) {\n      //动画 待实现\n      this.position = _.merge(this.position, {\n        left: newPosition.left + \"px\",\n        top: newPosition.top + \"px\"\n      });\n      this.sspanel.nativeElement.style.left = newPosition.left + \"px\";\n      this.sspanel.nativeElement.style.top = newPosition.top + \"px\";\n      this._setCurrentPosition(newPosition);\n      defRet.resolve();\n    } else {\n      defRet.resolve();\n    }\n    return defRet.promise();\n  }\n  private _getWindowSize() {\n    return {\n      height: () => {\n        return window.innerHeight;\n      },\n      width: () => {\n        return window.outerWidth;\n      }\n    }\n  }\n  /**\n   * 获取panel大小\n   */\n  private _getCurrentSize() {\n    return _.merge({}, this.currentSize);\n  }\n  /**\n   * \n   */\n  private _saveCurrentSize() {\n    //this._ssPanel.data(\"savedSize\", this._getCurrentSize());\n    this.savedSize = this._getCurrentSize();\n  }\n  private _setCurrentSize(size) {\n    this.currentSize = _.merge(this.currentSize, size);\n  }\n  private _restoreSavedSize() {\n    return this._changeSize(_.merge({\n      checkPosition: true,\n      checkSize: false,\n      event: false\n    }, this.savedSize));\n  }\n  /**\n   * 转换为style里的样式值，数字值转为带px的，非数字的直接返回\n   * @param val \n   */\n  protected _convertToStyleVal(val: any): string {\n    if (val == \"0\") return \"0px\";\n    if (!val) return \"\";\n    if (val === \"auto\" || val == \"100%\") return val;\n    let _w = parseFloat(val), _ws = \"\";\n    if (isNaN(_w)) {\n      _ws = val;\n    } else {\n      if (_w < 0) {\n        _w = 0;\n      }\n      _ws = _w + \"px\";\n    }\n    return _ws;\n  }\n  /**\n   * \n   * @param params \n   */\n  private _changeSize(params) {\n\n    let defRet = this.commonService.createPromiseDefer();\n    let settings = this.options;\n    let animationTime = (params.animationTime !== undefined) ? parseInt(params.animationTime) : settings.animationTime;\n    let newSize = {\n      width: params.width,\n      height: params.height\n    };\n    if (params.checkSize) {\n      if (this.state === WidgetState.closed\n        || this.windowState === WidgetWindowState.minimized ||\n        this.windowState === WidgetWindowState.maximized) return;\n\n      if (settings.maxWidth && newSize.width > settings.maxWidth) newSize.width = settings.maxWidth;\n      if (settings.minWidth && newSize.width < settings.minWidth) newSize.width = settings.minWidth;\n      if (settings.maxHeight && newSize.height > settings.maxHeight) newSize.height = settings.maxHeight;\n      if (settings.minHeight && newSize.height < settings.minHeight) newSize.height = settings.minHeight;\n      if (this.windowState === WidgetWindowState.collapsed) {\n        this.currentSize = _.merge({}, newSize)\n        delete newSize.height;\n      }\n    }\n    let currentSize = this._getCurrentSize();\n    if (currentSize.width != newSize.width || currentSize.height != newSize.height) {\n\n      if (newSize.height) {\n        // newSize.height=parseFloat(newSize.height); //NaN or number \n        this._render.setStyle(this.sspanel.nativeElement, \"height\", this._convertToStyleVal(newSize.height));\n      }\n      if (newSize.width) {\n        // newSize.width = parseFloat(newSize.width);//NaN or number \n\n        this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(newSize.width));\n      }\n\n      this._setCurrentSize(newSize);\n      defRet.resolve();\n    } else {\n      defRet.resolve();\n    }\n    return defRet.promise();\n  }\n\n  private _getBordersWidth(border: string): number | any {\n    if (border !== undefined) {\n      return this._getBorderWidth(this.sspanel.nativeElement, border);\n    }\n    return {\n      top: this._getBorderWidth(this.sspanel.nativeElement, \"top\"),\n      bottom: this._getBorderWidth(this.sspanel.nativeElement, \"top\"),\n      left: this._getBorderWidth(this.sspanel.nativeElement, \"top\"),\n      right: this._getBorderWidth(this.sspanel.nativeElement, \"top\")\n    };\n  }\n  private _getBorderWidth(ele: HTMLElement, border: string) {\n    if (border.toLowerCase() === \"top\") border = \"Top\";\n    if (border.toLowerCase() === \"left\") border = \"Left\";\n    if (border.toLowerCase() === \"right\") border = \"Right\";\n    if (border.toLowerCase() === \"bottom\") border = \"Bottom\";\n    let w = ele.style[`border${border}Width`];\n    if (!w) w = 0;\n    return parseInt(w, 10);\n  }\n  /**\n   * \n   * @param evt \n   */\n  public _contentClick(evt: MouseEvent) {\n    this.panelManager._activePanel(this.id);\n  }\n  /**\n   * 单击标题\n   */\n  public _titlebar_MouseDown(event: MouseEvent) {\n    if (this.commonService.isMobile()) return;\n    if (this.isDockable()) return;\n    if (this.options.draggable !== true) return;\n    this.isMouseEvent = false;\n    // if (event.currentTarget[\"className\"].indexOf(\"sspanel_titlebar_draggable\") <= -1) {\n    //   return;\n    // }\n    this.panelManager._activePanel(this.id);\n    let currentPosition = this._getCurrentPosition();\n    let settings = this.options;\n    if (!settings.modal) {\n      this.sspanelOverlay.nativeElement.style.backgroundColor = \"transparent\";\n      this.sspanelOverlay.nativeElement.style.width = \"100%\";\n      this.sspanelOverlay.nativeElement.style.height = \"100%\";\n\n    }\n    this._addDocumentMouseEventHandlers({\n      action: \"drag\",\n      opacity: settings.dragOpacity,\n      compensationX: event.pageX - parseFloat(currentPosition.left.toString()),\n      compensationY: event.pageY - parseFloat(currentPosition.top.toString())\n    });\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  /**\n   * \n   * @param event \n   * @param resizeParams \n   */\n  public _resizer_MouseDown(event: MouseEvent, resizeParams: { dimension?: string, directionX?: string, directionY?: string }) {\n    if (this.commonService.isMobile()) return;\n    let currentPosition = this._getCurrentPosition();\n    let currentSize = this._getCurrentSize();\n    let _data = {\n      action: \"resize\",\n      dimension: resizeParams.dimension,\n      directionX: resizeParams.directionX,\n      directionY: resizeParams.directionY,\n      opacity: this.options.resizeOpacity,\n      startX: event.pageX + ((resizeParams.directionX == \"left\") ? parseFloat(currentSize.width) : -parseFloat(currentSize.width)),\n      startY: event.pageY + ((resizeParams.directionY == \"top\") ? parseFloat(currentSize.height) : -parseFloat(currentSize.height)),\n      compensationX: event.pageX - parseInt(currentPosition.left.toString(), 10),\n      compensationY: event.pageY - parseInt(currentPosition.top.toString(), 10)\n    };\n    // if (isNaN(parseInt(currentPosition.left.toString(), 10))) {\n    //   _data.compensationX = event.pageX;\n    // }\n    // if (isNaN(parseInt(currentPosition.top.toString(), 10))) {\n    //   _data.compensationX = event.pageY;\n    // }\n    this._addDocumentMouseEventHandlers(_data);\n    event.preventDefault();\n  }\n  /**\n   * \n   * @param eventData \n   */\n  private _addDocumentMouseEventHandlers(eventData) {\n    this.sspanel.nativeElement.style.opacity = eventData.opacity;\n    this.sspanel.nativeElement.style.filter = \"alpha(opacity=\" + eventData.opacity * 100 + \")\"; // IE5-8\n    if (!this.options.mouseMoveEvents) {\n      this.tempSavedData = {\n        position: this._getCurrentPosition(),\n        size: this._getCurrentSize()\n      }\n    }\n    /*\n    document.addEventListener(\"mousemove\",(evt: MouseEvent) => {\n      evt[\"data\"] = eventData;\n      this._document_MouseMove(evt);\n    });\n    document.addEventListener(\"mouseup\", (evt: MouseEvent) => {\n      evt[\"data\"] = eventData;\n      this._document_MouseUp(evt);\n    });*/\n    this._eventTempData = eventData;\n    document.addEventListener(\"mousemove\", this.xxxx, false);\n    document.addEventListener(\"mouseup\", this.yyyy, false);\n  }\n  private _eventTempData: any = undefined;\n  private xxxx;\n  private yyyy;\n  /**\n   * \n   */\n  private _document_MouseMove(event) {\n    let settings = this.options;\n    let currentPosition = this._getCurrentPosition();\n    let currentSize = this._getCurrentSize();\n    let newPosition: any = {};\n    let newSize: any = {};\n    event.data = this._eventTempData;\n    switch (event.data.action) {\n      case \"drag\":\n        newPosition.top = event.pageY - event.data.compensationY;\n        newPosition.left = event.pageX - event.data.compensationX;\n        if (settings.keepInViewport) {\n          let size = this._getCurrentSize();\n          let $window = this._getWindowSize();\n          if (newPosition.top < 0) newPosition.top = 0;\n          if (newPosition.left < 0) newPosition.left = 0;\n          if (newPosition.top > $window.height() - size.height) newPosition.top = $window.height() - size.height;\n          if (newPosition.left > $window.width() - size.width) newPosition.left = $window.width() - size.width;\n        }\n        this.isMouseEvent = true;\n        break;\n      case \"resize\":\n        if (event.data.dimension != \"height\" && event.pageX > 0) {\n          let newWidth = (event.data.directionX == \"left\") ? event.data.startX - event.pageX : event.pageX - event.data.startX;\n          if (newWidth >= settings.minWidth && (!settings.maxWidth || newWidth <= settings.maxWidth)) {\n            newSize.width = newWidth;\n            if (event.data.directionX == \"left\") newPosition.left = event.pageX - event.data.compensationX;\n          }\n        }\n        if (event.data.dimension != \"width\" && event.pageY > 0) {\n          let newHeight = (event.data.directionY == \"top\") ? event.data.startY - event.pageY : event.pageY - event.data.startY;\n          if (newHeight >= settings.minHeight && (!settings.maxHeight || newHeight <= settings.maxHeight)) {\n            newSize.height = newHeight;\n            if (event.data.directionY == \"top\") newPosition.top = event.pageY - event.data.compensationY;\n          }\n        }\n        break;\n    }\n\n    if ((newPosition.top !== undefined && newPosition.top != currentPosition.top) || (newPosition.left !== undefined && newPosition.left != currentPosition.left)) {\n      if (newPosition.top < 0) {\n        newPosition.top = 0;\n      }\n      if (newPosition.left < 0) {\n        newPosition.left = 0;\n      }\n      this._changePosition(newPosition);\n      this._setCurrentPosition(newPosition);\n      if (settings.mouseMoveEvents) {\n        this.onMove();\n      }\n    }\n    if ((newSize.width !== undefined && newSize.width != currentSize.width) || (newSize.height !== undefined && newSize.height != currentSize.height)) {\n      if (newSize.height) {\n        if (newSize.height <= this.options.minHeight) {\n          newSize.height = this.options.minHeight;\n        }\n        this._render.setStyle(this.sspanel.nativeElement, \"height\", this._convertToStyleVal(newSize.height));\n      }\n      if (newSize.width) {\n        if (newSize.width <= this.options.minWidth) {\n          newSize.width = this.options.minWidth;\n        }\n        this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(newSize.width));\n      }\n      this._setCurrentSize(newSize);\n      if (settings.mouseMoveEvents) {\n        this._setIframeStyle();\n        this.onResize();\n      }\n    }\n  }\n  /**\n   * \n   */\n  private _document_MouseUp(event) {\n    let settings = this.options;\n    // this._ssPanel.fadeTo(0, 1);\n    this.sspanel.nativeElement.style.opacity = 1;\n    this.sspanel.nativeElement.style.filter = \"alpha(opacity=\" + 1 * 100 + \")\"; // IE5-8\n    // ruir:20200511 去掉setTimeout（设置管理员modal拖动问题）\n    //setTimeout(() => {\n    document.removeEventListener(\"mousemove\", this.xxxx);\n    document.removeEventListener(\"mouseup\", this.yyyy);\n    //}, 10);\n    if (this.isMouseEvent !== true) return;\n\n    if (!settings.modal) {\n      this.sspanelOverlay.nativeElement.style.width = \"0px\";\n      this.sspanelOverlay.nativeElement.style.height = \"0px\";\n      this.sspanelOverlay.nativeElement.style.backgoundColor = \"\";\n    }\n    if (!settings.mouseMoveEvents) {\n      let currentPosition = this._getCurrentPosition();\n      let currentSize = this._getCurrentSize();\n      let savedData = this.tempSavedData;\n      if (savedData.position.top != currentPosition.top || savedData.position.left != currentPosition.left) {\n        // this._triggerEvent(\"move\");\n        this.onMove();\n      }\n      if (savedData.size.width != currentSize.width || savedData.size.height != currentSize.height) {\n        // this._triggerEvent(\"resize\");\n        this._setIframeStyle();\n        this.onResize();\n      }\n      this.tempSavedData = undefined;\n      this._eventTempData = undefined;\n    }\n  }\n  private _setIframeStyle() {\n\n  }\n  private _isDockSide() {\n    return false;\n  }\n  /**\n   * 最大化\n   */\n  protected _maximize() {\n    if (this.state === WidgetState.closed ||\n      this.windowState === WidgetWindowState.maximized ||\n      this.windowState === WidgetWindowState.minimized ||\n      this.windowState === WidgetWindowState.collapsed\n    ) {\n      return;\n    }\n    let settings = this.options;\n    //隐藏最大化按钮，显示还原按钮\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_statusbar_handle *, .sspanel_resizer, .sspanel_titlebar_button_collapse\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"none\");\n    });\n    //隐藏状态栏\n    if (settings.draggable) {\n      //这时  禁止拖拽\n      this._render.removeClass(this.sspanel_titlebar.nativeElement, \"sspanel_titlebar_draggable\");\n    }\n    if (!settings.modal) {\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"transparent\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"width\", \"100%\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"height\", \"100%\");\n    }\n\n    this._saveCurrentPosition();\n    this._saveCurrentSize();\n    let nposition = {\n      top: 0,\n      left: 0\n    };\n    if (this._isDockSide()) {\n\n    }\n    let defPosition = this._changePosition(nposition);\n    let defSize = this._changeSize({\n      width: \"100%\",\n      height: \"100%\"\n      // width:this._ssPanelOptions.maxWidth,\n      // height:this._ssPanelOptions.maxHeight\n    });\n\n    return Promise.all([defPosition, defSize]).then(() => {\n      this.windowState = WidgetWindowState.maximized;\n      this._setIframeStyle();\n      this.onMaximize();\n    });\n  }\n  /**\n   * 最大化 还原\n   */\n  protected _unmaximize() {\n    if (this.state === WidgetState.closed\n      || this.windowState !== WidgetWindowState.maximized)\n      return;\n    let settings = this.options;\n    let defPosition = this._restoreSavedPosition();\n    let defSize = this._restoreSavedSize();\n    //隐藏还原按钮 显示最大化按钮\n    //显示状态栏等\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_statusbar_handle *, .sspanel_resizer, .sspanel_titlebar_button_collapse\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"\");\n    });\n    if (settings.draggable) {\n      this._render.addClass(this.sspanel_titlebar.nativeElement, \"sspanel_titlebar_draggable\")\n    }\n    if (!settings.modal) {\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"background-color\", \"\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"width\", \"0\");\n      this._render.setStyle(this.sspanelOverlay.nativeElement, \"height\", \"0\");\n    }\n\n    return Promise.all([defPosition, defSize]).then(() => {\n      this.windowState = WidgetWindowState.normal;\n      this._setIframeStyle();\n      this.onNormalize();\n    });\n  }\n  /**\n   * 最小化\n   */\n  private _minimize() {\n    //暂略\n  }\n  /**\n   * 最小化 还原\n   */\n  private _unminimize() {\n    //暂略\n  }\n  /**\n   * 收缩\n   */\n  protected _collapse() {\n    if (this.started !== true ||\n      this.state === WidgetState.closed ||\n      this.windowState === WidgetWindowState.maximized ||\n      this.windowState === WidgetWindowState.collapsed ||\n      this.windowState === WidgetWindowState.minimized) return;\n\n    let settings = this.options;\n    //隐藏收缩按钮 显示展开按钮\n    //隐藏这一堆。。。\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_content, .sspanel_statusbar, .sspanel_resizer, .sspanel_titlebar_button_maximize, .sspanel_titlebar_button_minimize\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"none\");\n    });\n    this._saveCurrentSize();\n    let defSize = this._changeSize({\n      width: settings.collapsedWidth,\n      height: this._getBordersWidth(\"top\") + this._getBordersWidth(\"bottom\") + this.sspanel_titlebar.nativeElement.offsetHeight\n    });\n\n    return Promise.all([defSize]).then(() => {\n      this.windowState = WidgetWindowState.collapsed;\n      this.onCollapse();\n    });\n  }\n  /**\n   * 展开\n   */\n  protected _uncollapse() {\n    if (this.started != true || this.state === WidgetState.closed || this.windowState !== WidgetWindowState.collapsed) return;\n    let settings = this.options;\n    let defSize = this._restoreSavedSize();\n    //  隐藏展开按钮，显示手术按钮\n    //显示这些div\n    let eles: Array<HTMLElement> = this.sspanel.nativeElement.querySelectorAll(\".sspanel_content, .sspanel_statusbar, .sspanel_resizer, .sspanel_titlebar_button_maximize, .sspanel_titlebar_button_minimize\");\n    eles.forEach((h, idx, arr) => {\n      this._render.setStyle(h, \"display\", \"\");\n    });\n\n    return defSize.then(() => {\n      this.windowState = WidgetWindowState.normal;\n      this.onNormalize();\n    });\n  }\n  /**\n   * 最大化\n   */\n  public _buttonMax_Click(event) {\n    if (this.windowState !== WidgetWindowState.maximized) {\n      this._maximize();\n    } else {\n      this._unmaximize();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  public _buttonCollapse_Click(event) {\n    if (this.windowState !== WidgetWindowState.collapsed) {\n      this._collapse();\n    } else {\n      this._uncollapse();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  public _buttonMin_Click(event) {\n    if (this.windowState !== WidgetWindowState.minimized) {\n      this._minimize();\n    } else {\n      this._unminimize();\n    }\n    event.preventDefault();\n    event.stopPropagation();\n  }\n  /**\n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   * **************************************************************************************************************************\n   */\n  /**setting*/\n\n  /**\n   * 打开组件设置窗口\n   * @returns \n   */\n  openWidgetSetting() {\n    if (!this.widget) {\n      this.widget = this.widgetManager.getWidgetById(this.widgetConfig.id).instance;\n    }\n    if (!this.widget) {\n      return;\n    }\n    this.widget.instance.openSetting();\n  }\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-uncollapsed\",\n    template: `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n                viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n                <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n                </g>\n            </svg>`,\n    styles: []\n})\nexport class IconUnCollapsedComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-collapsed\",\n    template: `<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g fill=\"none\">\n            <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n            </g>\n            </svg>`,\n    styles: []\n})\nexport class IconCollapsedComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-unmaximize\",\n    template: `\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n    </svg>\n    `,\n    styles: []\n})\nexport class IconUnMaximizeComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-maximize\",\n    template: `\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n    </svg>\n    `,\n    styles: []\n})\nexport class IconMaximizeComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-close\",\n    template: `\n    <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n    </svg>\n    `,\n    styles: []\n})\nexport class IconCloseComponent {\n\n}","import { Component, ElementRef, EventEmitter, Input, Output } from \"@angular/core\";\nimport { DefaultPanelOptions, PanelOptions } from \"../../models/base-panel\";\nimport { WidgetWindowState } from \"../../models/base-widget\";\n\n@Component({\n  selector: \"div[sspanel-titlebar]\",\n  template: `\n    <!-- 这影响样式 -->\n    <!-- <div class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebarMouseDown($event);\"> -->\n      <ng-container *ngIf=\"hasIcon\">\n        <div class=\"icon\">\n          <img *ngIf=\"isShowImg\" [src]=\"icon\">\n          <i *ngIf=\"!isShowImg\" nz-icon [nzIconfont]=\"icon\"></i>\n        </div>\n      </ng-container>\n      <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n      <div *ngIf=\"options.buttonSetting\" class=\"sspanel_titlebar_button sspanel_titlebar_button_setting\" title=\"{{options.buttonSettingText}}\" (click)=\"_buttonSettingClick($event);\">\n        <epsgis-icon-setting></epsgis-icon-setting>\n      </div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div *ngIf=\"options.buttonCollapse\"  class=\"sspanel_titlebar_button sspanel_titlebar_button_uncollapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapseClick($event);\">\n            <epsgis-icon-uncollapsed></epsgis-icon-uncollapsed>\n          </div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div *ngIf=\"options.buttonCollapse\" class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapseClick($event);\">\n            <epsgis-icon-collapsed></epsgis-icon-collapsed>\n          </div>\n        </ng-template>\n      </ng-container>\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n          <div *ngIf=\"options.buttonMaximize\" class=\"sspanel_titlebar_button sspanel_titlebar_button_unmaximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMaximizeClick($event);\">\n            <epsgis-icon-unmaximize></epsgis-icon-unmaximize>\n          </div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n          <div *ngIf=\"options.buttonMaximize\" class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMaximizeClick($event);\">\n            <epsgis-icon-maximize></epsgis-icon-maximize>\n            \n          </div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div  *ngIf=\"options.buttonClose\" class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"_buttonCloseClick($event);\">\n          <epsgis-icon-close></epsgis-icon-close>\n        </div>\n      </ng-container>\n    <!-- </div> -->\n    `,\n  styles: []\n})\nexport class PanelTitleBarComponent {\n  @Input() options: PanelOptions = DefaultPanelOptions;\n  @Input() hasIcon: boolean = false;\n  @Input() isShowImg: boolean;\n  @Input() icon: string;\n  @Input() windowState: WidgetWindowState;\n  @Output() onMouseDown = new EventEmitter();\n  @Output() onClickSetting = new EventEmitter();\n  @Output() onClickCollapse = new EventEmitter();\n  @Output() onClickMaximize = new EventEmitter();\n  @Output() onClickClose = new EventEmitter();\n\n  // @ViewChild(\"sspanel_titlebar\", { static: true }) _sspanelTitlebar: ElementRef;\n  constructor(private ele: ElementRef) {\n    this.ele.nativeElement.onmousedown = (evt) => {\n      this._titlebarMouseDown(evt)\n    }\n  }\n  get nativeElement() {\n    return this.ele.nativeElement;\n    // if (this._sspanelTitlebar) {\n    //   return this._sspanelTitlebar.nativeElement;\n    // }\n    // return null;\n  }\n  _titlebarMouseDown(evt) {\n    if (this.onMouseDown.observers.length >= 1) {\n      this.onMouseDown.emit(evt);\n    }\n  }\n  _buttonSettingClick(evt) {\n    if (this.onClickSetting.observers.length >= 1) {\n      this.onClickSetting.emit(evt);\n    }\n  }\n  _buttonCollapseClick(evt) {\n    if (this.onClickCollapse.observers.length >= 1) {\n      this.onClickCollapse.emit(evt);\n    }\n  }\n  _buttonMaximizeClick(evt) {\n    if (this.onClickMaximize.observers.length >= 1) {\n      this.onClickMaximize.emit(evt);\n    }\n  }\n  _buttonCloseClick(evt) {\n    if (this.onClickClose.observers.length >= 1) {\n      this.onClickClose.emit(evt);\n    }\n  }\n}\n/*\n<div class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <ng-container *ngIf=\"panelIcon\">\n        <div class=\"icon\">\n          <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n          <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n        </div>\n      </ng-container>\n      <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_setting\" title=\"设置\" (click)=\"openWidgetSetting();\">\n        <epsgis-icon-setting></epsgis-icon-setting>\n      </div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_uncollapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <epsgis-icon-uncollapsed></epsgis-icon-uncollapsed>\n          </div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <epsgis-icon-collapsed></epsgis-icon-collapsed>\n          </div>\n        </ng-template>\n      </ng-container>\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_unmaximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\">\n            <epsgis-icon-unmaximize></epsgis-icon-unmaximize>\n          </div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\">\n            <epsgis-icon-maximize></epsgis-icon-maximize>\n\n          </div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <epsgis-icon-close></epsgis-icon-close>\n        </div>\n      </ng-container>\n    </div>\n    */","import { BasePanelComponent } from '../base-panel/base-panel.component';\nimport { Component, OnInit, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { ComponentRegister } from '../../decorator/component-register.decorator';\n// import {trigger, state, style, animate, transition} from '@angular/animations';\n/**\n * create by ruir 191014  OnScreenWidgetPanel.js\n */\n@ComponentRegister({\n  uri: \"epsgis-on-screen-widget-panel\",\n  path: \"components/on-screen-widget-panel\"\n})\n@Component({\n  selector: 'epsgis-on-screen-widget-panel',\n  templateUrl: './on-screen-widget-panel.component.html',\n  styleUrls: ['./on-screen-widget-panel.component.scss']\n  // ,animations:[\n  //   trigger(\"panelresize\",[\n  //     transition(\"* => *\",animate(500))\n  //   ])\n  // ]\n})\nexport class OnScreenWidgetPanelComponent extends BasePanelComponent implements OnInit {\n\n  constructor(@Optional() _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n  }\n  ngOnInit() { super.ngOnInit(); }\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n  }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <!-- <epsgis-panel-titlebar #sspanel_titlebar [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n      (onMouseDown)=\"_titlebar_MouseDown($event)\" (onClickSetting)=\"openWidgetSetting()\"\n      (onClickCollapse)=\"_buttonCollapse_Click($event)\" (onClickMaximize)=\"_buttonMax_Click($event)\"\n      (onClickClose)=\"closePanel($event)\">\n    </epsgis-panel-titlebar> -->\n    <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n      (onMouseDown)=\"_titlebar_MouseDown($event)\" (onClickSetting)=\"openWidgetSetting()\"\n      (onClickCollapse)=\"_buttonCollapse_Click($event)\" (onClickMaximize)=\"_buttonMax_Click($event)\"\n      (onClickClose)=\"closePanel($event)\"></div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n    <div class=\"sspanel_resizer sspanel_resizer_top\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_bottom\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'bottom'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_left\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_right\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_topleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'top'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_topright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'top'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_bottomleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'bottom'});\"></div>\n    <div class=\"sspanel_resizer sspanel_resizer_bottomright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'bottom'});\"></div>\n  </div>\n</div>\n<div class=\"sspanel_minplaceholder\"></div>","import { Optional, Renderer2, ElementRef, ViewChild, ChangeDetectorRef, Directive } from '@angular/core';\nimport { BasePanelComponent } from '../base-panel/base-panel.component';\nimport { PanelDockMode } from '../../models/base-panel';\n\n/**\n * \n */\n@Directive()\nexport class BaseDockablePanelComponent extends BasePanelComponent {\n\n    //20200604 ruir 改为了100，“这里9999导致modal那边要设置大于9999，然后导致ngzorro的控件被挡住”，具体值需要后面再斟酌\n    zIndex: number = 100;// 9999;\n    /**\n     * panel是否收缩\n     */\n    _isCollapse: boolean = false;\n    @ViewChild(\"center_collapse\", { static: true }) sspanel_center_collapse: ElementRef;\n    constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n        super(_render, cdr);\n        this.moveTopOnActive = false;\n    }\n\n    get mapBounds() {\n\n        var rect = this.commonService.getElementBounds(this.commonService.getComponentRootNode(this.mapManager.comRefMap));\n        //获取map实际top、left：减去外包与maptop设置的值\n        rect.top = rect.top - this._getMapTop();\n        rect.left = rect.left - this._getMapLeft();\n        //rect.width=rect.width+this._getMapLeft();\n        return rect;\n    }\n    /////获取map实际top值\n    _getMapTop() {\n        var ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n        const rect = ele.getBoundingClientRect();\n        let mapSettingTop: string = \"0\";\n        if (this.widgetManager.appConfig.map.position && this.widgetManager.appConfig.map.position.top)\n            mapSettingTop = this.widgetManager.appConfig.map.position.top;\n        let chv: number = parseFloat(this.commonService.getPxNumber(mapSettingTop).toString());\n        const mapTop = rect.top - chv;//获取实际top值\n        return mapTop;\n    }\n    /////获取map实际left值\n    _getMapLeft() {\n        var ele = this.commonService.getComponentRootNode(this.mapManager.comRefMap);\n        const rect = ele.getBoundingClientRect();\n        var mapSettingLeft = 0;\n        if (this.widgetManager.appConfig.map.position && this.widgetManager.appConfig.map.position.left)\n            mapSettingLeft = this.widgetManager.appConfig.map.position.left;\n        var chv: number = parseFloat(this.commonService.getPxNumber(mapSettingLeft).toString());\n        const mapLeft = rect.left - chv;//获取实际left值\n        return mapLeft;\n    }\n    /**\n     * \n     */\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    /**\n     * \n     */\n    ngAfterViewInit(): void {\n        super.ngAfterViewInit();\n    }\n    /**\n     * \n     */\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n    protected _setPCPosition() {\n        this.widgetConfig.position.zIndex = this.zIndex;\n        super._setPCPosition();\n    }\n    onMove() {\n        //移动时 同时修正其他组件位置，比如已经打开了的panel\n        super.onMove();\n    }\n    onClose() {\n        //关闭时 还原其他组件位置\n        super.onClose();\n    }\n    /**\n     * 当panel大小改变时，改变map的位置\n     */\n    _resizeMapWhenResize() {\n        switch (this.dockMode) {\n            case PanelDockMode.left:\n                this.mapManager.changeMapPosition({ left: this.commonService.getPx(this.currentSize.width) });\n                break;\n            case PanelDockMode.bottom:\n                this.mapManager.changeMapPosition({ bottom: this.commonService.getPx(this.currentSize.height) });\n                break;\n            case PanelDockMode.right:\n                this.mapManager.changeMapPosition({ right: this.commonService.getPx(this.currentSize.width) });\n                break;\n\n            default:\n                break;\n        }\n    }\n    /**\n     * 当panel关闭或隐藏时，改变map的位置\n     */\n    _resizeMapWhenClose() {\n        switch (this.dockMode) {\n            case PanelDockMode.left:\n                // this.mapManager.restorePosition();\n                //只需改变left？\n                this.mapManager.changeMapPosition({ left: this.commonService.getPx(this.mapManager.originMapPosition.left) });\n                break;\n            case PanelDockMode.bottom:\n                // this.mapManager.restorePosition();\n                //只需改bottom\n                this.mapManager.changeMapPosition({ bottom: this.commonService.getPx(this.mapManager.originMapPosition.bottom) });\n                break;\n            case PanelDockMode.right:\n                // this.mapManager.restorePosition();\n                this.mapManager.changeMapPosition({ right: this.commonService.getPx(this.mapManager.originMapPosition.right) });\n                break;\n            default:\n                break;\n        }\n    }\n    showPanel() {\n        this.__expand(false);\n        super.showPanel();\n    }\n    hidePanel() {\n        this.__collapse(false);\n        super.hidePanel();\n    }\n    private __collapse(runOnClose: boolean) {\n        const _eleSvg = this.sspanel_center_collapse.nativeElement.querySelector(\"svg\");\n        if (this.dockMode === PanelDockMode.left) {\n            //super._convertToStyleVal(this.currentSize.width)\n            const _left = - this.commonService.getElementBounds(this.sspanel.nativeElement).width;\n            this._render.setStyle(this.sspanel.nativeElement, \"left\", _left + \"px\");\n            //this._render.setStyle(this.sspanel.nativeElement, \"display\", \"none\");\n            // this._render.setStyle(this.sspanel.nativeElement, \"z-index\", -this.zIndex);\n        } else if (this.dockMode === PanelDockMode.bottom) {\n            const _bottom = - this.commonService.getElementBounds(this.sspanel.nativeElement).height;\n            this._render.setStyle(this.sspanel.nativeElement, \"bottom\", _bottom + \"px\");\n        } else if (this.dockMode === PanelDockMode.right) {\n            const _right = - this.commonService.getElementBounds(this.sspanel.nativeElement).width;\n            this._render.setStyle(this.sspanel.nativeElement, \"right\", _right + \"px\");\n        }\n        this._render.addClass(_eleSvg, \"expand\");\n        //原生 this.sspanel.nativeElement.querySelector(\"svg\").classList.add(\"expand\")\n        // if (runOnClose) {\n        //     this.onClose();\n        // }\n        this._resizeMapWhenClose();\n        this._isCollapse = true;\n    }\n    private __expand(runOnOpen: boolean) {\n        const _eleSvg = this.sspanel_center_collapse.nativeElement.querySelector(\"svg\");\n        if (this.dockMode === PanelDockMode.left) {\n            this._render.setStyle(this.sspanel.nativeElement, \"left\", \"0px\");//super._convertToStyleVal(this.currentPosition.left)\n            //this._render.setStyle(this.sspanel.nativeElement, \"display\", \"\");\n            // this._render.setStyle(this.sspanel.nativeElement, \"z-index\", this.zIndex);\n        } else if (this.dockMode === PanelDockMode.bottom) {\n            this._render.setStyle(this.sspanel.nativeElement, \"bottom\", \"0px\");\n        } else if (this.dockMode === PanelDockMode.right) {\n            this._render.setStyle(this.sspanel.nativeElement, \"right\", \"0px\");\n        }\n        this._render.removeClass(_eleSvg, \"expand\");\n        //原生 this.sspanel.nativeElement.querySelector(\"svg\").classList.remove(\"expand\")\n        // if (runOnOpen) {\n        //     this.onOpen();\n        // }\n        this._resizeMapWhenResize();\n        this._isCollapse = false;\n    }\n    /**\n     * 折叠panel\n     */\n    collapsePanel(evt) {\n        //记录当前的left\n        //隐藏panel\n        //改变地图位置\n        //转换图标\n        //改变style时，是否要改变position值？\n        if (this._isCollapse) {\n            this.__expand(false);//true\n        } else {\n            this.__collapse(false);//true\n        }\n\n    }\n}","import { Component, OnInit, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { PanelDockMode, PanelOptions } from '../../../models/base-panel';\nimport * as _ from 'lodash';\nimport { BaseDockablePanelComponent } from '../base-dockable-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-dockable-panel-at-bottom',\n  path: \"components/ex-panels/dockable-panel-at-bottom\"\n})\n@Component({\n  selector: 'epsgis-dockable-panel-at-bottom',\n  templateUrl: './dockable-panel-at-bottom.component.html',\n  styleUrls: ['./dockable-panel-at-bottom.component.scss'],\n})\nexport class DockablePanelAtBottomComponent extends BaseDockablePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this.dockMode = PanelDockMode.bottom;\n  }\n \n  ngOnInit() {\n\n    // this.eventService.rss.on(this.eventService._mapPositionChanged, (pos) => {\n    //   //主要是left和width变化\n    //   this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n    //     left: this.mapBounds.left,\n    //     width: this.mapBounds.width\n    //   });\n    //   this._render.setStyle(this.sspanel.nativeElement, \"left\", this._convertToStyleVal(this.mapBounds.left));\n    //   this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(this.mapBounds.width));\n    // });\n    super.ngOnInit();\n  }\n  /**\n   * 设置panel参数\n   * @param options \n   */\n  setOptions(options: PanelOptions) {\n    options.modal = false;\n    options.draggable = false;\n    options.buttonClose = true;\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.buttonMinimize = false;\n    options.centerCollapse=true;\n    options.dockSide = PanelDockMode.bottom;\n    super.setOptions(options);\n  }\n  protected _setPCPosition() {\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      // left: 0,\n      left: this.mapBounds.left,\n      top: \"auto\",\n      bottom: 0,\n      right: 0,\n      // width: \"100%\"\n      width: this.mapBounds.width\n    });\n    super._setPCPosition();\n\n  }\n  onResize() {\n    super._resizeMapWhenResize();\n    super.onResize();\n  }\n  onOpen() {\n    super._resizeMapWhenResize();\n    super.onOpen();\n  }\n  onClose() {\n    super._resizeMapWhenClose();\n    super.onClose();\n  }\n  resize() {\n    //主要是left和width变化\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      left: this.mapBounds.left,\n      width: this.mapBounds.width\n    });\n    this._render.setStyle(this.sspanel.nativeElement, \"left\", this._convertToStyleVal(this.mapBounds.left));\n    this._render.setStyle(this.sspanel.nativeElement, \"width\", this._convertToStyleVal(this.mapBounds.width));\n  }\n}","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  \n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n      (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  <!--\n  <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg>\n      </div>\n    </ng-container>\n  </div>\n-->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <ng-template #widget_content></ng-template>\n  </div>\n  <div class=\"sspanel_resizer sspanel_resizer_top\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n  <div #center_collapse class=\"collapse\" [ngStyle]=\"{'display':options.centerCollapse ? 'block' : 'none' }\"\n    (click)=\"collapsePanel($event);\">\n    <!-- <epsgis-icon-arrow-down></epsgis-icon-arrow-down> -->\n    <svg t=\"1575033841131\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"16367\" width=\"16\" height=\"16\">\n      <path\n        d=\"M128.759037 245.033739l383.064442 383.064442 388.096039-388.097062 0.033769 0.070608c13.138228-12.709463 31.024597-20.528546 50.730405-20.528546 40.377616 0 73.114205 32.736589 73.114205 73.115228 0 19.705807-7.820106 37.591153-20.530592 50.730405l0.035816 0.034792-438.681134 438.685227-0.035816-0.035816c-13.280468 13.780865-31.915897 22.3838-52.585659 22.3838-0.071631 0-0.107447 0-0.178055 0-0.072655 0-0.10847 0-0.146333 0-20.669762 0-39.341007-8.601912-52.621475-22.3838l-0.035816 0.035816L20.336676 343.425653l0.179079-0.179079c-12.565177-13.139252-20.313651-30.951943-20.313651-50.587142 0-40.378639 32.736589-73.115228 73.114205-73.115228C95.485213 219.544205 115.334283 229.432413 128.759037 245.033739z\"\n        p-id=\"16368\" fill=\"#bababa\"></path>\n    </svg>\n  </div>\n</div>","import { Component, OnInit, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { PanelDockMode, PanelOptions } from '../../../models/base-panel';\nimport * as _ from 'lodash';\nimport { BaseDockablePanelComponent } from '../base-dockable-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-dockable-panel-at-right',\n  path: \"components/ex-panels/dockable-panel-at-right\"\n})\n@Component({\n  selector: 'epsgis-dockable-panel-at-right',\n  templateUrl: './dockable-panel-at-right.component.html',\n  styleUrls: ['./dockable-panel-at-right.component.scss'],\n})\nexport class DockablePanelAtRightComponent extends BaseDockablePanelComponent implements OnInit {\n\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this.dockMode = PanelDockMode.right;\n  }\n\n  /**\n   * 设置panel参数\n   * @param options \n   */\n  setOptions(options: PanelOptions) {\n    options.modal = false;\n    options.draggable = false;\n    options.buttonClose = false;\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.buttonMinimize = false;\n    options.centerCollapse=true;\n    options.dockSide = PanelDockMode.right;\n    super.setOptions(options);\n  }\n  protected _setPCPosition() {\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      left: \"auto\",\n      // top: 0,\n      top: this.mapBounds.top,\n      bottom: 0,\n      right: 0,\n      //height: \"100%\"\n      height: \"auto\"\n    });\n    super._setPCPosition();\n  }\n  onResize() {\n    super._resizeMapWhenResize();\n    super.onResize();\n  }\n  onOpen() {\n    super._resizeMapWhenResize();\n    super.onOpen();\n  }\n  onClose() {\n    super._resizeMapWhenClose();\n    super.onClose();\n  }\n  resize() {\n\n  }\n}","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n  (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  <!-- <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg></div>\n    </ng-container>\n  </div> -->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <ng-template #widget_content></ng-template>\n  </div>\n  <div class=\"sspanel_resizer sspanel_resizer_left\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n  <div #center_collapse class=\"collapse\" [ngStyle]=\"{'display':options.centerCollapse ? 'block' : 'none' }\"\n    (click)=\"collapsePanel($event);\">\n    <!-- <epsgis-icon-arrow-right></epsgis-icon-arrow-right> -->\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M245.034251 895.239428l383.063419-383.063419L240.001631 124.07997l0.070608-0.033769c-12.709463-13.137205-20.530592-31.024597-20.530592-50.731428 0-40.376593 32.736589-73.111135 73.115228-73.111135 19.705807 0 37.591153 7.819083 50.730405 20.528546l0.034792-0.035816 438.686251 438.681134-0.035816 0.034792c13.779841 13.281491 22.3838 31.915897 22.3838 52.586682 0 0.071631 0 0.106424 0 0.178055 0 0.072655 0 0.10847 0 0.144286 0 20.669762-8.603959 39.341007-22.3838 52.623521l0.035816 0.033769L343.426165 1003.661789l-0.180102-0.179079c-13.140275 12.565177-30.950919 20.313651-50.588165 20.313651-40.378639 0-73.115228-32.736589-73.115228-73.114205C219.544717 928.512229 229.432924 908.664182 245.034251 895.239428z\"\n        fill=\"#bababa\"></path>\n    </svg>\n  </div>\n</div>","import { Component, OnInit, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\nimport { PanelDockMode, PanelOptions } from '../../../models/base-panel';\nimport { BaseDockablePanelComponent } from '../base-dockable-panel';\n\n@ComponentRegister({\n  uri: 'epsgis-dockable-panel-at-left',\n  path: \"components/ex-panels/dockable-panel-at-left\"\n})\n@Component({\n  selector: 'epsgis-dockable-panel-at-left',\n  templateUrl: './dockable-panel-at-left.component.html',\n  styleUrls: ['./dockable-panel-at-left.component.scss'],\n})\nexport class DockablePanelAtLeftComponent extends BaseDockablePanelComponent {\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this.dockMode = PanelDockMode.left;\n  }\n\n  /**\n   * \n   */\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  /**\n   * \n   */\n  ngAfterViewInit(): void {\n    super.ngAfterViewInit();\n  }\n  /**\n   * \n   */\n  ngOnDestroy() {\n    super.ngOnDestroy();\n  }\n  /**\n * 设置panel参数\n * @param options \n */\n  setOptions(options: PanelOptions) {\n    options.modal = false;\n    options.draggable = false;\n    options.buttonClose = false;\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.buttonMinimize = false;\n    options.centerCollapse=true;\n    options.dockSide = PanelDockMode.left;\n    super.setOptions(options);\n  }\n  protected _setPCPosition() {\n    this.widgetConfig.position = _.merge(this.widgetConfig.position, {\n      left: 0,\n      top: this.mapBounds.top,\n      bottom: 0,\n      right: 0,\n      // height: \"100%\"\n      height: \"auto\"\n    });\n    super._setPCPosition();\n  }\n  onResize() {\n    super._resizeMapWhenResize();\n    super.onResize();\n  }\n  onOpen() {\n    super._resizeMapWhenResize();\n    super.onOpen();\n  }\n  onClose() {\n    super._resizeMapWhenClose();\n    super.onClose();\n  }\n  resize() {\n\n  }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  <!-- <epsgis-panel-titlebar #sspanel_titlebar [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n    (onMouseDown)=\"_titlebar_MouseDown($event)\" (onClickSetting)=\"openWidgetSetting()\"\n    (onClickClose)=\"closePanel($event)\">\n  </epsgis-panel-titlebar> -->\n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n     (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  <!-- <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg></div>\n    </ng-container>\n  </div> -->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <ng-template #widget_content></ng-template>\n  </div>\n  <div class=\"sspanel_resizer sspanel_resizer_right\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n  <div #center_collapse [ngStyle]=\"{'display':options.centerCollapse ? 'block' : 'none' }\" class=\"collapse\"\n    (click)=\"collapsePanel($event);\">\n    <!-- <epsgis-icon-arrow-left></epsgis-icon-arrow-left> -->\n    <!--hover样式有问题，后面再调-->\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z\"\n        fill=\"#bababa\"></path>\n    </svg>\n  </div>\n</div>","import { Optional, Renderer2, ChangeDetectorRef, Directive } from '@angular/core';\nimport { BasePanelComponent } from '../base-panel/base-panel.component';\nimport * as _ from 'lodash';\n\n/**\n * \n */\n@Directive()\nexport class BaseMobilePanelComponent extends BasePanelComponent {\n\n    zIndex: number = 9999;\n\n    constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n        super(_render,cdr);\n        this.moveTopOnActive = false;\n    }\n    /**\n     * \n     */\n    ngOnInit() {\n        super.ngOnInit();\n    }\n    /**\n     * \n     */\n    ngAfterViewInit(): void {\n        super.ngAfterViewInit();\n    }\n    /**\n     * \n     */\n    ngOnDestroy() {\n        super.ngOnDestroy();\n    }\n    setOptions(options) {\n        if (this.widgetConfig && this.widgetConfig.mobile) {\n            _.merge(options, this.widgetConfig.mobile);\n        }\n        super.setOptions(options);\n    }\n    protected getWidthHeight() {\n        let { width, height } = this.widgetConfig.position;\n        if (this.widgetConfig.mobile\n            && this.widgetConfig.mobile.position) {\n            //暂支持高宽可设置\n            width = this.widgetConfig.mobile.position.width;\n            height = this.widgetConfig.mobile.position.height;\n        }\n        let _w = this.commonService.getPxNumber(width),\n            _h = this.commonService.getPxNumber(height);\n        if (typeof _w === \"number\") {\n            if (_w <= 0 || _w > innerWidth) {\n                _w = \"100%\"\n            }\n        }\n        if (typeof _h === \"number\") {\n            if (_h <= 0 || _w > innerHeight) {\n                _h = \"100%\"\n            }\n        }\n        return { width: _w, height: _h };\n    }\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n    <div class=\"sspanel_resizer sspanel_resizer_top\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n  </div>\n</div>","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>\n<div class=\"sspanel_minplaceholder\"></div>\n","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>\n<div class=\"sspanel_minplaceholder\"></div>","<div class=\"sspanel_overlay\" #sspanel_overlay>\n  <div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div *ngIf=\"options.showTitle\" class=\"sspanel_titlebar sspanel_titlebar_draggable\" #sspanel_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"sspanel_titlebar_text\">\n        {{options.title}}</div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"sspanel_titlebar_button sspanel_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n  </div>\n</div>","import { Component, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-mobile-action-panel',\n  path: \"components/mobile/action-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-action-panel',\n  templateUrl: './action-panel.component.html',\n  styleUrls: ['./action-panel.component.scss']\n})\nexport class MobileActionPanelComponent extends BaseMobilePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.action;\n  }\n  setOptions(options) {\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    //action  由底向上弹出\n    const obj = this.getWidthHeight();\n    let _pos = new WidgetPosition(\"auto\", 0, 0, 0, obj.height, \"100%\");\n    this.widgetConfig.position = _pos;\n    //去掉边框\n    //最大高度\n    this._render.setStyle(this.sspanel.nativeElement, \"max-height\", obj.height);\n    //去掉阴影\n  }\n}\n","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: \"epsgis-mobile-drawer-panel\",\n  path: \"components/mobile/drawer-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-drawer-panel',\n  templateUrl: './drawer-panel.component.html',\n  styleUrls: ['./drawer-panel.component.scss']\n})\nexport class MobileDrawerPanelComponent extends BaseMobilePanelComponent {\n\n  _sspanelOverlayClickHandler: Function;\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.drawer;\n  }\n  ngOnDestroy() {\n    this._sspanelOverlayClickHandler();\n    super.ngOnDestroy();\n  }\n  setOptions(options) {\n    //去掉收缩按钮\n    options.buttonCollapse = false;\n    //去掉最大化按钮\n    options.buttonMaximize = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    let _width: any = \"80%\";\n    //没有mobile节点，或者mobile节点下没有position时，设置为80%\n    if (this.widgetConfig.mobile && this.widgetConfig.mobile.position) {\n      const obj = this.getWidthHeight();\n      if (obj.width) {\n        _width = obj.width;\n      }\n    }\n    let _pos = new WidgetPosition(0, 0, 0, 20, \"100%\", _width);\n    this.widgetConfig.position = _pos;\n    //去掉边框\n    //点击阴影时 关闭panel\n    this._sspanelOverlayClickHandler = this.jsEventManager.addEventListener(\n      this.sspanelOverlay.nativeElement, \"click\", (evt: any) => {\n        if (evt.target === this.sspanelOverlay.nativeElement) {\n          this.closePanel(evt);\n        }\n      });\n  }\n\n}\n","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { PanelInMobileShowMode, PanelOptions } from '../../../models/base-panel';\nimport { WidgetPosition } from '../../../models/base-widget';\n\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-mobile-modal-panel',\n  path: \"components/mobile/modal-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-modal-panel',\n  templateUrl: './modal-panel.component.html',\n  styleUrls: ['./modal-panel.component.scss']\n})\nexport class MobileModalPanelComponent extends BaseMobilePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2,@Optional() public cdr:ChangeDetectorRef) {\n    super(_render,cdr);\n    this._mobileShowMode = PanelInMobileShowMode.modal;\n  }\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  setOptions(options: PanelOptions) {\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.modal = true;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    //modal\n    let _pos = new WidgetPosition(0, 0, 0, 0, \"100%\", \"100%\", \"\", \"unset\");\n    this.widgetConfig.position = _pos;\n  }\n\n}\n","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelOptions, PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-mobile-popup-panel',\n  path: \"components/mobile/popup-panel\"\n})\n@Component({\n  selector: 'epsgis-mobile-popup-panel',\n  templateUrl: './popup-panel.component.html',\n  styleUrls: ['./popup-panel.component.scss']\n})\nexport class MobilePopupPanelComponent extends BaseMobilePanelComponent {\n\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.popup;\n  }\n  ngOnInit() {\n    super.ngOnInit();\n  }\n  setOptions(options: PanelOptions) {\n    options.buttonCollapse = false;\n    options.buttonMaximize = false;\n    options.modal = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    //居中弹窗\n    const obj = super.getWidthHeight();\n    let _pos = new WidgetPosition(0, 0, 0, 0, obj.height, obj.width, \"\", \"unset\");\n    this.widgetConfig.position = _pos;\n    // this.currentPosition = _.cloneDeep(_pos);\n    // this.savedPosition = _.cloneDeep(_pos);\n    // this.originalPosition = _.cloneDeep(_pos);\n  }\n}\n","import { Component, Optional, Renderer2, ChangeDetectorRef } from '@angular/core';\nimport { BaseMobilePanelComponent } from '../base-mobile-panel';\nimport { WidgetPosition } from \"../../../models/base-widget\";\nimport * as _ from 'lodash';\nimport { PanelInMobileShowMode } from '../../../models/base-panel';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-mobile-drawer-right-panel',\n  path: \"components/mobile/drawer-panel-right\"\n})\n@Component({\n  selector: 'epsgis-mobile-drawer-right-panel',\n  templateUrl: './drawer-panel-right.component.html',\n  styleUrls: ['./drawer-panel-right.component.scss']\n})\nexport class MobileDrawerRightPanelComponent extends BaseMobilePanelComponent {\n  // useIonicCss:boolean=true;\n  _sspanelOverlayClickHandler: Function;\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n    this._mobileShowMode = PanelInMobileShowMode.drawerRight;\n  }\n  ngOnDestroy() {\n    this._sspanelOverlayClickHandler();\n    super.ngOnDestroy();\n  }\n  setOptions(options) {\n    //去掉收缩按钮\n    options.buttonCollapse = false;\n    //去掉最大化按钮\n    options.buttonMaximize = false;\n    super.setOptions(options);\n  }\n  _setMobilePosition() {\n    let _width: any = \"80%\";\n    //没有mobile节点，或者mobile节点下没有position时，设置为80%\n    if (this.widgetConfig.mobile && this.widgetConfig.mobile.position) {\n      const obj = this.getWidthHeight();\n      if (obj.width) {\n        _width = obj.width;\n      }\n    }\n    let _pos = new WidgetPosition(0, \"auto\", 0, 0, \"100%\", _width);\n    this.widgetConfig.position = _pos;\n    //去掉边框\n    //点击阴影时 关闭panel\n    this._sspanelOverlayClickHandler = this.jsEventManager.addEventListener(\n      this.sspanelOverlay.nativeElement, \"click\", (evt: any) => {\n        if (evt.target === this.sspanelOverlay.nativeElement) {\n          this.closePanel(evt);\n        }\n      });\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n  name: 'safeurl'\n})\nexport class SafeUrlPipe implements PipeTransform {\n  /**\n   * \n   * @param sanitizer \n   */\n  constructor(private sanitizer: DomSanitizer) { }\n  /**\n   * \n   * @param url \n   * @param tag \n   */\n  transform(url: any, tag: string = \"img\"): any {\n    if (tag == \"img\") {\n      return this.sanitizer.bypassSecurityTrustUrl(url);\n    }\n    return this.sanitizer.bypassSecurityTrustResourceUrl(url);\n  }\n\n}\n","<div class=\"sspanel_overlay\" #sspanel_overlay style=\"display: none;\">\n\n</div>\n<div class=\"sspanel\" #sspanel id=\"{{options.id}}\" [ngClass]=\"{'notitle':options.showTitle===false}\"\n  [ngStyle]=\"position\">\n  <div sspanel-titlebar  #sspanel_titlebar  class=\"sspanel_titlebar sspanel_titlebar_draggable\" [hasIcon]=\"false\" [options]=\"options\" [windowState]=\"windowState\"\n (onClickSetting)=\"openWidgetSetting()\" (onClickClose)=\"closePanel($event)\"></div>\n  \n  <!-- <div class=\"sspanel_titlebar\" #sspanel_titlebar (mousedown)=\"_titlebar_MouseDown($event);\">\n    <ng-container *ngIf=\"panelIcon\">\n      <div class=\"icon\">\n        <img *ngIf=\"panelIcon.isShowImg\" [src]=\"panelIcon.icon\">\n        <i *ngIf=\"!panelIcon.isShowImg\" nz-icon [nzIconfont]=\"panelIcon.icon\"></i>\n      </div>\n    </ng-container>\n    <div class=\"sspanel_titlebar_text\"><span class=\"sspanel_titlebar_text_span\">{{options.title}}</span></div>\n\n    <ng-container *ngIf=\"options.buttonClose\">\n      <div class=\"sspanel_titlebar_button sspanel_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n        (click)=\"closePanel($event);\">\n        <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n          viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n          <g>\n            <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n            <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n          </g>\n        </svg></div>\n    </ng-container>\n  </div> -->\n  <div class=\"sspanel_content\" (click)=\"_contentClick($event);\">\n    <iframe *ngIf=\"isShowIframe\" #iframeContent [src]=\"url | safeurl :'iframe'\" class=\"iframe_content\"></iframe>\n    <ng-container #content *ngIf=\"!isShowIframe\">\n      {{url}}\n    </ng-container>\n  </div>\n\n  <div class=\"sspanel_resizer sspanel_resizer_top\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_bottom\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'bottom'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_left\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_right\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_topleft\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'top'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_topright\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'top'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_bottomleft\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'bottom'});\"></div>\n  <div class=\"sspanel_resizer sspanel_resizer_bottomright\"\n    (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'bottom'});\"></div>\n</div>","import { Component, OnInit, Renderer2, Optional, ViewChild, ElementRef, ChangeDetectorRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { BasePanelComponent } from '../../base-panel/base-panel.component';\nimport { WidgetState } from '../../../models/base-widget';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n\n@ComponentRegister({\n  uri: 'epsgis-iframe-panel',\n  path: \"components/ex-panels/iframe-panel\"\n})\n@Component({\n  selector: 'epsgis-iframe-panel',\n  templateUrl: './iframe-panel.component.html',\n  styleUrls: ['./iframe-panel.component.scss'],\n})\nexport class IframePanelComponent extends BasePanelComponent {\n  @ViewChild(\"iframeContent\", { static: true }) iframeEl: ElementRef;\n\n  constructor(@Optional() public _render: Renderer2, @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr);\n  }\n  url: string = \"\";\n  isShowIframe: boolean = false;\n  \n  ngOnInit() {\n\n    super.ngOnInit();\n    this.url = this.options.url;\n    if (this.options.url) {\n      this.isShowIframe = true;\n    }\n  }\n  ngAfterViewInit() {\n    this.startup();\n    this.state = WidgetState.opened;\n  }\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SafeUrlPipe } from './safeurl.pipe';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        SafeUrlPipe\n    ],\n    exports:[\n        SafeUrlPipe\n    ]\n})\nexport class PipesModule { }\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'epsgis-result-fof',\n  templateUrl: './resultfof.component.html',\n  styleUrls: ['./resultfof.component.scss']\n})\nexport class ResultfofComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","<nz-result nzStatus=\"404\" nzTitle=\"404\" nzSubTitle=\"抱歉，您访问的页面不存在。\">\n  <div nz-result-extra>\n    <!-- <button nz-button nzType=\"primary\">Back Home</button> -->\n  </div>\n</nz-result>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'epsgis-result-foo',\n  templateUrl: './resultfoo.component.html',\n  styleUrls: ['./resultfoo.component.scss']\n})\nexport class ResultfooComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","<nz-result nzStatus=\"500\" nzTitle=\"500\" nzSubTitle=\"抱歉，服务器上有错误.\">\n  <div nz-result-extra>\n    <!-- <button nz-button nzType=\"primary\">Back Home</button> -->\n  </div>\n</nz-result>","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'epsgis-result-fot',\n  templateUrl: './resultfot.component.html',\n  styleUrls: ['./resultfot.component.scss']\n})\nexport class ResultfotComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {}\n\n}\n","<nz-result nzStatus=\"403\" nzTitle=\"403\" nzSubTitle=\"抱歉，您无权访问此页面。\">\n  <div nz-result-extra>\n    <!-- <button nz-button nzType=\"primary\">Back Home</button> -->\n  </div>\n</nz-result>","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { JsonEditorComponent } from \"./json-editor/json-editor.component\";\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    declarations: [\n        JsonEditorComponent\n    ],\n    entryComponents: [],\n    exports: [JsonEditorComponent]\n\n})\nexport class EpsGisSharedModule {\n    \n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-arrow-down\",\n    template: `\n    <svg t=\"1575033841131\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      p-id=\"16367\" width=\"16\" height=\"16\">\n      <path\n        d=\"M128.759037 245.033739l383.064442 383.064442 388.096039-388.097062 0.033769 0.070608c13.138228-12.709463 31.024597-20.528546 50.730405-20.528546 40.377616 0 73.114205 32.736589 73.114205 73.115228 0 19.705807-7.820106 37.591153-20.530592 50.730405l0.035816 0.034792-438.681134 438.685227-0.035816-0.035816c-13.280468 13.780865-31.915897 22.3838-52.585659 22.3838-0.071631 0-0.107447 0-0.178055 0-0.072655 0-0.10847 0-0.146333 0-20.669762 0-39.341007-8.601912-52.621475-22.3838l-0.035816 0.035816L20.336676 343.425653l0.179079-0.179079c-12.565177-13.139252-20.313651-30.951943-20.313651-50.587142 0-40.378639 32.736589-73.115228 73.114205-73.115228C95.485213 219.544205 115.334283 229.432413 128.759037 245.033739z\"\n        p-id=\"16368\" fill=\"#bababa\"></path>\n    </svg>\n    `,\n    styles: [\n      `\n      .expand {\n          -webkit-transform: rotate(180deg);\n          -moz-transform: rotate(180deg);\n          -o-transform: rotate(180deg);\n          -ms-transform: rotate(180deg);\n          transform: rotate(180deg);\n      }\n      `\n    ]\n})\nexport class IconArrowDownComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-arrow-left\",\n    template: `\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z\"\n        ></path>\n    </svg>\n    `,\n    styles: [\n        `\n\n        .expand{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }\n        `\n    ]\n})\nexport class IconArrowLeftComponent {\n\n}","import { Component } from \"@angular/core\";\n\n@Component({\n    selector: \"epsgis-icon-arrow-right\",\n    template: `\n    <svg viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\" height=\"16\">\n      <path\n        d=\"M245.034251 895.239428l383.063419-383.063419L240.001631 124.07997l0.070608-0.033769c-12.709463-13.137205-20.530592-31.024597-20.530592-50.731428 0-40.376593 32.736589-73.111135 73.115228-73.111135 19.705807 0 37.591153 7.819083 50.730405 20.528546l0.034792-0.035816 438.686251 438.681134-0.035816 0.034792c13.779841 13.281491 22.3838 31.915897 22.3838 52.586682 0 0.071631 0 0.106424 0 0.178055 0 0.072655 0 0.10847 0 0.144286 0 20.669762-8.603959 39.341007-22.3838 52.623521l0.035816 0.033769L343.426165 1003.661789l-0.180102-0.179079c-13.140275 12.565177-30.950919 20.313651-50.588165 20.313651-40.378639 0-73.115228-32.736589-73.115228-73.114205C219.544717 928.512229 229.432924 908.664182 245.034251 895.239428z\"\n        fill=\"#bababa\"></path>\n    </svg>\n    `,\n    styles: [\n        `\n        .expand{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }\n        `\n    ]\n})\nexport class IconArrowRightComponent {\n\n}","import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { IconArrowDownComponent } from \"./icon-arrow-down.component\";\nimport { IconArrowLeftComponent } from \"./icon-arrow-left.component\";\nimport { IconArrowRightComponent } from \"./icon-arrow-right.component\";\nimport { IconCloseComponent } from \"./icon-close.component\";\nimport { IconCollapsedComponent } from \"./icon-collapsed.component\";\nimport { IconMaximizeComponent } from \"./icon-maximize.component\";\nimport { IconSettingComponent } from \"./icon-setting.component\";\nimport { IconUnCollapsedComponent } from \"./icon-uncollapsed.component\";\nimport { IconUnMaximizeComponent } from \"./icon-unmaximize.component\";\nconst _components = [\n    IconCloseComponent,\n    IconCollapsedComponent,\n    IconUnCollapsedComponent,\n    IconMaximizeComponent,\n    IconUnMaximizeComponent,\n    IconSettingComponent,\n    IconArrowLeftComponent,\n    IconArrowRightComponent,\n    IconArrowDownComponent\n];\n@NgModule({\n    imports: [CommonModule],\n    declarations: _components,\n    exports: _components\n})\nexport class EpsGisIconModule {\n\n}","import { EpsGisDirectivesModule } from '../directives/directives.module';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { NzResultModule } from 'ng-zorro-antd/result';\r\nimport { OnScreenWidgetIconComponent } from './on-screen-widget-icon/on-screen-widget-icon.component';\r\nimport { OnScreenWidgetPanelComponent } from './on-screen-widget-panel/on-screen-widget-panel.component';\r\nimport { DockablePanelAtBottomComponent } from './ex-panels/dockable-panel-at-bottom/dockable-panel-at-bottom.component';\r\nimport { DockablePanelAtRightComponent } from './ex-panels/dockable-panel-at-right/dockable-panel-at-right.component';\r\nimport { DockablePanelAtLeftComponent } from \"./ex-panels/dockable-panel-at-left/dockable-panel-at-left.component\";\r\nimport { MobileActionPanelComponent } from './mobile/action-panel/action-panel.component';\r\nimport { MobileDrawerPanelComponent } from './mobile/drawer-panel/drawer-panel.component';\r\nimport { MobileModalPanelComponent } from './mobile/modal-panel/modal-panel.component';\r\nimport { MobilePopupPanelComponent } from './mobile/popup-panel/popup-panel.component';\r\nimport { MobileDrawerRightPanelComponent } from './mobile/drawer-panel-right/drawer-panel-right.component';\r\nimport { IframePanelComponent } from './ex-panels/iframe-panel/iframe-panel.component';\r\nimport { PipesModule } from '../pipes/pipes.module';\r\nimport { ResultfofComponent } from './shared/resultfof/resultfof.component';\r\nimport { ResultfooComponent } from './shared/resultfoo/resultfoo.component';\r\nimport { ResultfotComponent } from './shared/resultfot/resultfot.component';\r\nimport { NzIconModule } from 'ng-zorro-antd/icon';\r\nimport { WidgetSettingComponent } from './setting/widget-setting/widget-setting.component';\r\nimport { EpsGisSharedModule } from './shared/shared.module';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { EpsGisIconModule } from './icon/icon-module';\r\nimport { PanelTitleBarComponent } from './base-panel/panel-titlebar.component';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        // PortalModule,\r\n        // OverlayModule,\r\n        // BrowserAnimationsModule,\r\n        FormsModule,\r\n        NzIconModule,\r\n        NzResultModule,\r\n        EpsGisDirectivesModule,\r\n        PipesModule,\r\n        EpsGisSharedModule,\r\n        EpsGisIconModule\r\n    ],\r\n    declarations: [\r\n        OnScreenWidgetIconComponent,\r\n        OnScreenWidgetPanelComponent,\r\n        DockablePanelAtLeftComponent,\r\n        DockablePanelAtBottomComponent,\r\n        DockablePanelAtRightComponent,\r\n        IframePanelComponent,\r\n        MobileActionPanelComponent,\r\n        MobileDrawerPanelComponent,\r\n        MobileModalPanelComponent,\r\n        MobilePopupPanelComponent,\r\n        MobileDrawerRightPanelComponent,\r\n        ResultfofComponent,\r\n        ResultfooComponent,\r\n        ResultfotComponent,\r\n        WidgetSettingComponent,\r\n        PanelTitleBarComponent\r\n    ],\r\n    entryComponents: [\r\n        OnScreenWidgetIconComponent,\r\n        OnScreenWidgetPanelComponent,\r\n        DockablePanelAtLeftComponent,\r\n        DockablePanelAtBottomComponent,\r\n        DockablePanelAtRightComponent,\r\n        IframePanelComponent,\r\n        MobileActionPanelComponent,\r\n        MobileDrawerPanelComponent,\r\n        MobileModalPanelComponent,\r\n        MobilePopupPanelComponent,\r\n        MobileDrawerRightPanelComponent,\r\n        WidgetSettingComponent\r\n    ],\r\n    exports: [\r\n        PanelTitleBarComponent,\r\n        ResultfofComponent,\r\n        ResultfooComponent,\r\n        ResultfotComponent\r\n    ],\r\n    providers: [\r\n        //{ provide: OverlayContainer, useClass: FullscreenOverlayContainer }\r\n    ]\r\n})\r\nexport class EpsGisWidgetBaseModule { }","import { Injectable } from '@angular/core';\nimport * as _ from \"lodash\";\n\n/**\n * create by ruir 191014  shared/utils.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class SharedUtilsService {\n\n  widgetProperties: Array<string> = ['inPanel', 'hasLocale', 'hasStyle', 'hasConfig', 'hasUIFile',\n    'hasSettingPage', 'hasSettingUIFile', 'hasSettingLocale', 'hasSettingStyle',\n    'keepConfigAfterMapSwithched', 'isController', 'hasVersionManager', 'isThemeWidget',\n    'supportMultiInstance'\n  ];\n  constructor() {\n\n  }\n  /**\n   * \n   */\n  isHostedService() {\n    return false;\n  }\n  /**\n   * 给widget添加默认属性\n   * @param manifest \n   */\n  processWidgetProperties(manifest: any) {\n    if (typeof manifest.properties === \"undefined\") {\n      manifest.properties = {};\n    }\n    if (typeof manifest.properties.isController === 'undefined') {\n      manifest.properties.isController = false;\n    }\n    if (typeof manifest.properties.isThemeWidget === 'undefined') {\n      manifest.properties.isThemeWidget = false;\n    }\n    if (typeof manifest.properties.hasVersionManager === 'undefined') {\n      manifest.properties.hasVersionManager = false;\n    }\n\n    this.widgetProperties.forEach(function (p) {\n      if (typeof manifest.properties[p] === 'undefined') {\n        manifest.properties[p] = true;\n      }\n    });\n    manifest.properties.hasLocale = false;\n    manifest.properties.supportMultiInstance = false;\n    manifest.properties.hasVersionManager = false;\n    manifest.properties.hasSettingLocale = false;\n\n    if (manifest.properties.hasSetting !== true) {\n      manifest.properties.hasSettingPage = false;\n      manifest.properties.hasSettingUIFile = false;\n      manifest.properties.hasSettingStyle = false;\n    }\n  }\n  /**\n   * 如果组件的uri中有参数，则解析到组件的reqPara属性\n   * @param widget \n   */\n  processWidgetUriPara(widget: any) {\n    if (typeof (widget.uri) === \"string\" && widget.uri.length >= 1) {\n      var url = widget.uri,\n        paraString, p = new Object();\n      var index = url.lastIndexOf(\"?\");\n      if (index >= 0) {\n        widget.uri = url.substring(0, index);\n        paraString = url.substring(index + 1);\n        var strs = paraString.split(\"&\");\n        for (var i = 0; i < strs.length; i++) {\n          p[strs[i].split(\"=\")[0]] = decodeURIComponent((strs[i].split(\"=\")[1]));\n        }\n        widget.reqPara = p;\n      }\n    } else {\n      widget.uri = \"\";\n    }\n  }\n  /**\n   * \n   * @param appConfig 配置对象\n   * @param id \n   */\n  getConfigElementById(appConfig, id) {\n    var c;\n    if (id === 'map') {\n      return appConfig.map;\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.id === id) {\n        c = e;\n        return true;\n      }\n    });\n    return c;\n  }\n  /**\n   * \n   * @param appConfig \n   * @param cb \n   */\n  visitElement(appConfig: any, cb: Function) {\n    this.visitBigSection(appConfig, 'widgetOnScreen', cb);\n    this.visitBigSection(appConfig, 'widgetPool', cb);\n  }\n  /**\n   * \n   * @param appConfig \n   * @param section \n   * @param cb \n   */\n  private visitBigSection(appConfig: any, section: string, cb: Function) {\n    var i, j, group, widget, isOnScreen = (section === 'widgetOnScreen'),\n      tempobject, isHeadMenu = (section === \"widgetPool\");\n\n\n    if (appConfig[section]) {\n      if (appConfig[section].groups) {\n        for (i = 0; i < appConfig[section].groups.length; i++) {\n          group = appConfig[section].groups[i];\n          tempobject = {\n            index: i,\n            isWidget: false,\n            groupId: group.id,\n            gid: group.id,\n            isThemeWidget: false,\n            isOnScreen: isOnScreen\n          };\n          group = _.extend(group, tempobject);//Object.assign();\n          cb(group, tempobject);\n          if (!group.widgets) {\n            continue;\n          }\n          for (j = 0; j < group.widgets.length; j++) {\n            widget = group.widgets[j];\n            tempobject = {\n              index: j,\n              isWidget: true,\n              groupId: group.id,\n              gid: group.id,\n              //isThemeWidget: widget.uri && widget.uri.indexOf('themes/' + appConfig.theme.name) > -1,\n              isThemeWidget:false,\n              isOnScreen: isOnScreen\n            };\n            widget = _.extend(widget, tempobject);\n            Object.assign\n            this.processWidgetUriPara(widget);\n            cb(widget, tempobject);\n          }\n        }\n      }\n\n      if (appConfig[section].widgets) {\n        let visitHeaderMenu = (widget, cb) => { //支持子组件\n          if (widget.children && widget.children.length >= 1) {\n            for (var k = 0; k < widget.children.length; k++) {\n              var item = widget.children[k];\n              tempobject = {\n                index: i,\n                isWidget: true,\n                groupId: section,\n                gid: section, //有的地方用的gid\n                //isThemeWidget: item.uri && item.uri.indexOf('themes/' + appConfig.theme.name) > -1,\n                isThemeWidget:false,\n                isOnScreen: isOnScreen,\n                isHeadMenu: isHeadMenu\n              };\n              if (item.groupId || item.gid) {\n                tempobject.groupId = item.groupId || item.gid;\n                tempobject.gid = tempobject.groupId;\n              }\n              item = _.extend(item, tempobject)\n              this.processWidgetUriPara(item);\n              cb(item, tempobject);\n              visitHeaderMenu(item, cb);\n            }\n          }\n        }\n        for (i = 0; i < appConfig[section].widgets.length; i++) {\n          widget = appConfig[section].widgets[i];\n          tempobject = {\n            index: i,\n            isWidget: true,\n            groupId: section,\n            gid: section, //有的地方用的gid\n            //isThemeWidget: widget.uri && widget.uri.indexOf('themes/' + appConfig.theme.name) > -1,\n            isThemeWidget:false,\n            isOnScreen: isOnScreen,\n            isHeadMenu: isHeadMenu\n          };\n          if (widget.groupId || widget.gid) {\n            tempobject.groupId = widget.groupId || widget.gid;\n            tempobject.gid = tempobject.groupId;\n          }\n          widget = _.extend(widget, tempobject)\n          this.processWidgetUriPara(widget);\n          cb(widget, tempobject);\n          visitHeaderMenu(widget, cb);\n        }\n      }\n    }\n  }\n  /**\n   * 根据label或name属性取得配置\n   * @param appConfig \n   * @param label \n   */\n  getConfigElementByLabel(appConfig: any, label: string) {\n    var c;\n    if (label === 'map') {\n      return appConfig.map;\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.label || e.name === label) {\n        c = e;\n        return true;\n      }\n    });\n    return c;\n\n  }\n  /**\n   * 根据name属性取得配置\n   * @param appConfig \n   * @param name \n   */\n  getConfigElementsByName(appConfig: any, name: string) {\n    var elements = [];\n    if (name === 'map') {\n      return [appConfig.map];\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.name === name) {\n        elements.push(e);\n      }\n    });\n    return elements;\n  }\n  /**\n   * 根据uri取得配置\n   * @param appConfig \n   * @param uri \n   */\n  getConfigElementsByUri(appConfig: any, uri: string) {\n    var elements = [];\n    if (uri === 'map') {\n      return [appConfig.map];\n    }\n    this.visitElement(appConfig, function (e) {\n      if (e.uri && e.uri.toLowerCase() === uri.toLowerCase()) {\n        elements.push(e);\n      }\n    });\n    return elements;\n  }\n  /**\n   * 根据uri取得组件名\n   * @param uri \n   */\n  getWidgetNameFromUri(uri: string) {\n    var segs = uri.split('/');\n    segs.pop();\n    return segs.pop();\n  }\n  /**\n   * \n   * @param uri \n   */\n  getAmdFolderFromUri(uri: string) {\n    var segs = uri.split('/');\n    segs.pop();\n    return segs.join('/') + '/';\n  }\n}\n","export type Platforms = keyof typeof PLATFORMS_MAP;\n\ninterface IsPlatformSignature {\n    (plt: Platforms): boolean;\n    (win: Window, plt: Platforms): boolean;\n}\n\nexport const getPlatforms = (win: any) => setupPlatforms(win);\n\nexport const isPlatform: IsPlatformSignature = (winOrPlatform: Window | Platforms | undefined, platform?: Platforms) => {\n    if (typeof winOrPlatform === 'string') {\n        platform = winOrPlatform;\n        winOrPlatform = undefined;\n    }\n    // return getPlatforms(winOrPlatform).includes(platform!);\n    if (!winOrPlatform) {\n        winOrPlatform = window;\n    }\n    if(!platform){\n        platform=\"desktop\";\n    }\n    return PLATFORMS_MAP[platform](winOrPlatform as Window);\n};\n\nexport const setupPlatforms = (win: any = window) => {\n    win.Ionic = win.Ionic || {};\n\n    let platforms: Platforms[] | undefined | null = win.Ionic.platforms;\n    if (platforms == null) {\n        platforms = win.Ionic.platforms = detectPlatforms(win);\n        platforms.forEach(p => win.document.documentElement.classList.add(`plt-${p}`));\n    }\n    return platforms;\n};\n\nconst detectPlatforms = (win: Window) =>\n    (Object.keys(PLATFORMS_MAP) as Platforms[]).filter(p => PLATFORMS_MAP[p](win));\n\nconst isMobileWeb = (win: Window): boolean =>\n    isMobile(win) && !isHybrid(win);\n\nconst isIpad = (win: Window) => {\n    // iOS 12 and below\n    if (testUserAgent(win, /iPad/i)) {\n        return true;\n    }\n\n    // iOS 13+\n    if (testUserAgent(win, /Macintosh/i) && isMobile(win)) {\n        return true;\n    }\n\n    return false;\n};\n\nconst isIphone = (win: Window) =>\n    testUserAgent(win, /iPhone/i);\n\nconst isIOS = (win: Window) =>\n    testUserAgent(win, /iPhone|iPod/i) || isIpad(win);\n\nconst isAndroid = (win: Window) =>\n    testUserAgent(win, /android|sink/i);\n\nconst isAndroidTablet = (win: Window) => {\n    return isAndroid(win) && !testUserAgent(win, /mobile/i);\n};\n\nconst isPhablet = (win: Window) => {\n    const width = win.innerWidth;\n    const height = win.innerHeight;\n    const smallest = Math.min(width, height);\n    const largest = Math.max(width, height);\n\n    return (smallest > 390 && smallest < 520) &&\n        (largest > 620 && largest < 800);\n};\n\nconst isTablet = (win: Window) => {\n    const width = win.innerWidth;\n    const height = win.innerHeight;\n    const smallest = Math.min(width, height);\n    const largest = Math.max(width, height);\n\n    return (\n        isIpad(win) ||\n        isAndroidTablet(win) ||\n        (\n            (smallest > 460 && smallest < 820) &&\n            (largest > 780 && largest < 1400)\n        )\n    );\n};\n\nconst isMobile = (win: Window) => {\n    // return matchMedia(win, '(any-pointer:coarse)');\n    // modify by sy 2020/8/5\n    // var isTouchScreen = !!navigator.userAgent.match(/AppleWebkit.*Mobile.*/) || \"ontouchstart\" in win ||\n    // (win.matchMedia ? win.matchMedia(\"(pointer:coarse)\").matches || !!win.matchMedia(\"-moz-touch-enabled\").matches : false);\n\n    let isTouchScreen = !!navigator.userAgent.match(/AppleWebkit.*Mobile.*/) || \"ontouchstart\" in win ||\n        (matchMedia(win, '(pointer:coarse)') || !!matchMedia(win, \"-moz-touch-enabled\"));\n    return isTouchScreen;\n};\n\n\nconst isDesktop = (win: Window) =>\n    !isMobile(win);\n\nconst isHybrid = (win: Window) =>\n    isCordova(win) || isCapacitorNative(win);\n\nconst isCordova = (win: any): boolean =>\n    !!(win['cordova'] || win['phonegap'] || win['PhoneGap']);\n\nconst isCapacitorNative = (win: any): boolean => {\n    const capacitor = win['Capacitor'];\n    return !!(capacitor && capacitor.isNative);\n};\n\nconst isElectron = (win: Window): boolean =>\n    testUserAgent(win, /electron/i);\n\nconst isPWA = (win: Window): boolean =>\n    !!(win.matchMedia('(display-mode: standalone)').matches || (win.navigator as any).standalone);\n\nexport const testUserAgent = (win: Window, expr: RegExp) =>\n    expr.test(win.navigator.userAgent);\n\nconst matchMedia = (win: Window, query: string): boolean =>\n    win.matchMedia(query).matches;\n\nconst PLATFORMS_MAP = {\n    'ipad': isIpad,\n    'iphone': isIphone,\n    'ios': isIOS,\n    'android': isAndroid,\n    'phablet': isPhablet,\n    'tablet': isTablet,\n    'cordova': isCordova,\n    'capacitor': isCapacitorNative,\n    'electron': isElectron,\n    'pwa': isPWA,\n    'mobile': isMobile,\n    'mobileweb': isMobileWeb,\n    'desktop': isDesktop,\n    'hybrid': isHybrid\n};","import { Injectable, ChangeDetectorRef } from '@angular/core';\nimport { SharedUtilsService } from './shared/shared-utils.service';\nimport * as _ from \"lodash\";\nimport { AppGlobalConfig } from '../models/app-config';\n/**\n * create by ruir 191014  utils.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class UtilsService extends SharedUtilsService {\n\n  constructor(private globalParams: AppGlobalConfig) {\n    super();\n  }\n  /**\n   * \n   * @param uri \n   */\n  getUriInfo(uri: string) {\n    //菜单的可能循环调用了 已处理过 直接返回{} ruir 190412\n    if (!uri || uri.indexOf(this.globalParams.appInfo.folderUrlPrefix) >= 0) return {};\n    let pos,\n      firstSeg,\n      info: any = {},\n      amdFolder;\n    pos = uri.indexOf('/');\n    firstSeg = uri.substring(0, pos);\n    //config using package\n    amdFolder = uri.substring(0, uri.lastIndexOf('/') + 1);\n    if (this.globalParams.jimuConfig.isDesignMode === true && this.globalParams.appInfo.folderUrlPrefix) {\n      info.folderUrl = this.globalParams.appInfo.folderUrlPrefix + \"/\" + amdFolder;\n    } else {\n      info.folderUrl = amdFolder;//require(mo.getRequireConfig()).toUrl(amdFolder);\n    }\n\n    info.amdFolder = amdFolder;\n    return info;\n  }\n  /**\n   * \n   * @param setting \n   */\n  processWidgetSetting(setting: any) {\n    if (!setting.uri) {\n      return setting;\n    }\n    _.extend(setting, this.getUriInfo(setting.uri));\n    /*\n    *191108 icon不管有无配置都不敢，没配就是undefined\n    if (this.globalParams.jimuConfig.isDesignMode === true && this.globalParams.appInfo.folderUrlPrefix) {\n      if (setting.icon) {\n        if (setting.icon.indexOf(this.globalParams.appInfo.folderUrlPrefix) <= -1)\n          setting.icon = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.icon;\n      } else {\n        setting.icon = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.amdFolder + 'images/icon.png';\n      }\n      if (setting.thumbnail) {\n        if (setting.thumbnail.indexOf(this.globalParams.appInfo.folderUrlPrefix) <= -1)\n          setting.thumbnail = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.icon;\n      } else {\n        setting.thumbnail = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.amdFolder + 'images/thumbnail.png';\n      }\n      if (setting.uri.indexOf(this.globalParams.appInfo.folderUrlPrefix) <= -1)\n        setting.uri = this.globalParams.appInfo.folderUrlPrefix + '/' + setting.uri;\n    } else {\n      if (!setting.icon && setting.isHeadMenu !== true) {\n        setting.icon = setting.amdFolder + 'images/icon.png';\n      }\n      if (!setting.thumbnail && setting.isHeadMenu !== true) {\n        setting.thumbnail = setting.amdFolder + 'images/thumbnail.png';\n      }\n    }*/\n\n    if (!setting.position) {\n      setting.position = {\n        \"left\": 100,\n        \"top\": 100,\n        \"width\": 300,\n        \"height\": 400,\n        \"relativeTo\": \"map\"\n      };\n    }\n\n    //setting.label has been processed when loading config.\n    return setting;\n  }\n  /**\n   * \n   * @param widgetJson \n   * @param manifest \n   */\n  addManifest2WidgetJson(widgetJson: any, manifest: any) {\n    _.extend(widgetJson, manifest.properties);\n    widgetJson.name = manifest.name;\n    if (!widgetJson.label) {\n      widgetJson.label = manifest.label;\n    }\n    widgetJson.manifest = manifest;\n  }\n  addManifestProperies(manifest: any) {\n    if (manifest.url) {\n      manifest.icon = manifest.url + 'images/icon.png';\n    }\n\n    if (manifest.category === \"theme\") {\n      this.addThemeManifestProperies(manifest);\n    } else {\n      this.addWidgetManifestProperties(manifest);\n    }\n  }\n  addThemeManifestProperies(manifest: any) {\n    manifest.panels.forEach(function (panel) {\n      panel.uri = 'panels/' + panel.name + '/Panel.js';\n    });\n\n    manifest.styles.forEach(function (style) {\n      style.uri = 'styles/' + style.name + '/style.css';\n    });\n\n    manifest.layouts.forEach(function (layout) {\n      layout.uri = 'layouts/' + layout.name + '/config.json';\n      layout.icon = 'layouts/' + layout.name + '/icon.png';\n      layout.RTLIcon = 'layouts/' + layout.name + '/icon_rtl.png';\n    });\n  }\n  /**\n   * \n   * @param manifest \n   */\n  addWidgetManifestProperties(manifest: any) {\n    //because tingo db engine doesn't support 2D, 3D property, so, change here\n    if (typeof manifest['2D'] !== 'undefined') {\n      manifest.support2D = manifest['2D'];\n    }\n    if (typeof manifest['3D'] !== 'undefined') {\n      manifest.support3D = manifest['3D'];\n    }\n\n    if (typeof manifest['2D'] === 'undefined' && typeof manifest['3D'] === 'undefined') {\n      manifest.support2D = true;\n    }\n\n    delete manifest['2D'];\n    delete manifest['3D'];\n\n    if (typeof manifest.properties === 'undefined') {\n      manifest.properties = {};\n    }\n\n    super.processWidgetProperties(manifest);\n  }\n\n  /**\n   * \n   * @param manifest \n   * @param locale \n   */\n  processManifestLabel(manifest, locale) {\n    manifest.label = manifest.i18nLabels && (manifest.i18nLabels[locale] ||\n      manifest.i18nLabels.defaultLabel) ||\n      manifest.label ||\n      manifest.name;\n    if (manifest.layouts) {\n      _.forEach(manifest.layouts, (layout) => {\n        let key = 'i18nLabels_layout_' + layout.name;\n        layout.label = manifest[key] && (manifest[key][locale] ||\n          manifest[key].defaultLabel) ||\n          layout.label ||\n          layout.name;\n      });\n    }\n    if (manifest.styles) {\n      _.forEach(manifest.styles, (_style) => {\n        let key = 'i18nLabels_style_' + _style.name;\n        _style.label = manifest[key] && (manifest[key][locale] ||\n          manifest[key].defaultLabel) ||\n          _style.label ||\n          _style.name;\n      });\n    }\n  }\n  /**\n   * \n   * @param obj \n   * @param props \n   */\n  replacePlaceHolder(obj, props) {\n    let str = JSON.stringify(obj),\n      m = str.match(/\\$\\{(\\w)+\\}/g),\n      i;\n\n    if (m === null) {\n      return obj;\n    }\n    for (i = 0; i < m.length; i++) {\n      let p = m[i].match(/(\\w)+/g)[0];\n      if (props[p]) {\n        str = str.replace(m[i], props[p]);\n      }\n    }\n    return JSON.parse(str);\n  }\n  /**\n   * \n   * @param manifest \n   */\n  addI18NLabel(manifest: any): Promise<any> {\n    return new Promise((resolve, reject) => {\n      if (manifest.i18nLabels) {\n        resolve(manifest);\n        return;\n      }\n      manifest.i18nLabels = {};\n      if (manifest.properties && manifest.properties.hasLocale === false) {\n        resolve(manifest);\n      }\n      resolve(manifest);\n    });\n\n  }\n  /**\n   * \n   * @param url \n   */\n  processUrlInAppConfig(url) {\n    if (!url) {\n      return;\n    }\n    if (url.startWith('data:') || url.startWith('http') || url.startWith('/')) {\n      return url;\n    } else {\n      return this.globalParams.appInfo.appPath + url;\n    }\n  }\n  /**\n   * \n   * @param o1 \n   * @param o2 \n   */\n  isEqual(o1, o2) {\n    let leftChain, rightChain;\n\n    function compare2Objects(x, y) {\n      let p;\n      if (x === null && y === null || typeof x === 'undefined' && typeof y === 'undefined') {\n        return true;\n      }\n\n      if (x === null && y !== null || y === null && x !== null ||\n        typeof x === 'undefined' && typeof y !== 'undefined' ||\n        typeof y === 'undefined' && typeof x !== 'undefined') {\n        return false;\n      }\n\n      // remember that NaN === NaN returns false\n      // and isNaN(undefined) returns true\n      if (isNaN(x) && isNaN(y) && typeof x === 'number' && typeof y === 'number') {\n        return true;\n      }\n      // Compare primitives and functions.\n      // Check if both arguments link to the same object.\n      // Especially useful on step when comparing prototypes\n      if (x === y) {\n        return true;\n      }\n      // Works in case when functions are created in constructor.\n      // Comparing dates is a common scenario. Another built-ins?\n      // We can even handle functions passed across iframes\n      if ((typeof x === 'function' && typeof y === 'function') ||\n        (x instanceof Date && y instanceof Date) ||\n        (x instanceof RegExp && y instanceof RegExp) ||\n        (x instanceof String && y instanceof String) ||\n        (x instanceof Number && y instanceof Number)) {\n        return x.toString() === y.toString();\n      }\n      // check for infinitive linking loops\n      if (leftChain.indexOf(x) > -1 || rightChain.indexOf(y) > -1) {\n        return false;\n      }\n      // Quick checking of one object beeing a subset of another.\n      // todo: cache the structure of arguments[0] for performance\n      if (y !== null) {\n        for (p in y) {\n          if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n            return false;\n          } else if (typeof y[p] !== typeof x[p]) {\n            return false;\n          }\n        }\n        for (p in x) {\n          if (y.hasOwnProperty(p) !== x.hasOwnProperty(p)) {\n            return false;\n          } else if (typeof y[p] !== typeof x[p]) {\n            return false;\n          }\n          switch (typeof (x[p])) {\n            case 'object':\n            case 'function':\n              leftChain.push(x);\n              rightChain.push(y);\n              if (!compare2Objects(x[p], y[p])) {\n                return false;\n              }\n              leftChain.pop();\n              rightChain.pop();\n              break;\n            default:\n              if (x[p] !== y[p]) {\n                return false;\n              }\n              break;\n          }\n        }\n      }\n\n      return true;\n    }\n\n    leftChain = []; //todo: this can be cached\n    rightChain = [];\n    if (!compare2Objects(o1, o2)) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * \n   * @param mapOptions \n   */\n  deleteMapOptions(mapOptions: any) {\n    if (!mapOptions) {\n      return;\n    }\n    delete mapOptions.extent;\n    delete mapOptions.lods;\n    delete mapOptions.center;\n    delete mapOptions.scale;\n    delete mapOptions.zoom;\n    delete mapOptions.maxScale;\n    delete mapOptions.maxZoom;\n    delete mapOptions.minScale;\n    delete mapOptions.minZoom;\n  }\n  /**\n   * \n   * @param obj \n   */\n  reCreateObject(obj: any) {\n    let ret;\n\n    function copyArray(_array) {\n      let retArray = [];\n      _array.forEach(function (a) {\n        if (Array.isArray(a)) {\n          retArray.push(copyArray(a));\n        } else if (typeof a === 'object') {\n          retArray.push(copyObject(a));\n        } else {\n          retArray.push(a);\n        }\n      });\n      return retArray;\n    }\n\n    function copyObject(_obj) {\n      let ret = {};\n      for (let p in _obj) {\n        if (!_obj.hasOwnProperty(p)) {\n          continue;\n        }\n        if (_obj[p] === null) {\n          ret[p] = null;\n        } else if (Array.isArray(_obj[p])) {\n          ret[p] = copyArray(_obj[p]);\n        } else if (typeof _obj[p] === 'object') {\n          ret[p] = copyObject(_obj[p]);\n        } else {\n          ret[p] = _obj[p];\n        }\n      }\n      return ret;\n    }\n\n    if (Array.isArray(obj)) {\n      ret = copyArray(obj);\n    } else {\n      ret = copyObject(obj);\n    }\n    return ret;\n  }\n  /**\n   * \n   * @param _position \n   */\n  getPositionStyle(_position: any) {\n    let style: any = {};\n    if (!_position) {\n      return style;\n    }\n    let position = _.clone(_position);\n    // if (window.isRTL) {\n    if (false) {\n      let temp;\n      if (typeof position.left !== 'undefined' && typeof position.right !== 'undefined') {\n        temp = position.left;\n        position.left = position.right;\n        position.right = temp;\n      } else if (typeof position.left !== 'undefined') {\n        position.right = position.left;\n        delete position.left;\n      } else if (typeof position.right !== 'undefined') {\n        position.left = position.right;\n        delete position.right;\n      }\n\n      if (typeof position.paddingLeft !== 'undefined' &&\n        typeof position.paddingRight !== 'undefined') {\n        temp = position.paddingLeft;\n        position.paddingLeft = position.paddingRight;\n        position.paddingRight = temp;\n      } else if (typeof position.paddingLeft !== 'undefined') {\n        position.paddingRight = position.paddingLeft;\n        delete position.paddingLeft;\n      } else if (typeof position.paddingRight !== 'undefined') {\n        position.paddingLeft = position.paddingRight;\n        delete position.paddingRight;\n      }\n    }\n\n    let ps = ['left', 'top', 'right', 'bottom', 'width', 'height',\n      'padding', 'paddingLeft', 'paddingRight', 'paddingTop', 'paddingBottom'\n    ];\n    for (let i = 0; i < ps.length; i++) {\n      let p = ps[i];\n      if (typeof position[p] === 'number') {\n        style[p] = position[p] + 'px';\n      } else if (typeof position[p] !== 'undefined') {\n        style[p] = position[p];\n      } else {\n        if (p.substr(0, 7) === 'padding') {\n          style[p] = 0;\n        } else {\n          style[p] = 'auto';\n        }\n      }\n    }\n\n    if (typeof position.zIndex === 'undefined') {\n      //set zindex=auto instead of 0, because inner dom of widget may need to overlay other widget\n      //that has the same zindex.\n      style.zIndex = this.globalParams.jimuConfig.zIndex;//'auto';\n    } else {\n      style.zIndex = position.zIndex;\n    }\n    return style;\n  }\n\n  /**\n   * 变更检测\n   * @param cdr ChangeDetectorRef\n   */\n  static detectChanges(cdr: ChangeDetectorRef): void {\n    if (cdr && cdr[\"destroyed\"] === false) {\n      cdr.detectChanges();\n    }\n  }\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable, NgZone } from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport { isPlatform, Platforms, getPlatforms } from \"../utils/platform\";\n\nexport interface BackButtonEventDetail {\n  register(priority: number, handler: () => Promise<any> | void): void;\n}\nexport interface BackButtonEmitter extends Subject<BackButtonEventDetail> {\n  subscribeWithPriority(priority: number, callback: () => Promise<any> | void): Subscription;\n}\n@Injectable({\n  providedIn: 'root'\n})\nexport class PlatformService {\n\n  private _readyPromise: Promise<string>;\n  private win: any;\n\n  /**\n   * @hidden\n   */\n  backButton: BackButtonEmitter = new Subject<BackButtonEventDetail>() as any;\n\n  /**\n   * The pause event emits when the native platform puts the application\n   * into the background, typically when the user switches to a different\n   * application. This event would emit when a Cordova app is put into\n   * the background, however, it would not fire on a standard web browser.\n   */\n  pause = new Subject<void>();\n\n  /**\n   * The resume event emits when the native platform pulls the application\n   * out from the background. This event would emit when a Cordova app comes\n   * out from the background, however, it would not fire on a standard web browser.\n   */\n  resume = new Subject<void>();\n\n  /**\n   * The resize event emits when the browser window has changed dimensions. This\n   * could be from a browser window being physically resized, or from a device\n   * changing orientation.\n   */\n  resize = new Subject<void>();\n\n  constructor(@Inject(DOCUMENT) private doc: any, zone: NgZone) {\n    zone.run(() => {\n      this.win = doc.defaultView;\n      this.backButton.subscribeWithPriority = function (priority, callback) {\n        return this.subscribe(ev => (\n          ev.register(priority, () => zone.run(callback))\n        ));\n      };\n\n      proxyEvent(this.pause, doc, 'pause');\n      proxyEvent(this.resume, doc, 'resume');\n      proxyEvent(this.backButton, doc, 'ionBackButton');\n      proxyEvent(this.resize, this.win, 'resize');\n\n      let readyResolve: (value: string) => void;\n      this._readyPromise = new Promise(res => { readyResolve = res; });\n      if (this.win && this.win['cordova']) {\n        doc.addEventListener('deviceready', () => {\n          readyResolve('cordova');\n        }, { once: true });\n      } else {\n        readyResolve!('dom');\n      }\n    });\n  }\n  /*\n   *\n   * | Platform Name   | Description                        |\n   * |-----------------|------------------------------------|\n   * | android         | on a device running Android.       |\n   * | cordova         | on a device running Cordova.       |\n   * | ios             | on a device running iOS.           |\n   * | ipad            | on an iPad device.                 |\n   * | iphone          | on an iPhone device.               |\n   * | phablet         | on a phablet device.               |\n   * | tablet          | on a tablet device.                |\n   * | electron        | in Electron on a desktop device.   |\n   * | pwa             | as a PWA app.                      |\n   * | mobile          | on a mobile device.                |\n   * | mobileweb       | on a mobile device in a browser.   |\n   * | desktop         | on a desktop device.               |\n   * | hybrid          | is a cordova or capacitor app.     |\n   *\n   */\n  is(platformName: Platforms): boolean {\n    return isPlatform(this.win, platformName);\n  }\n\n  /**\n   * @returns the array of platforms\n   * @description\n   * Depending on what device you are on, `platforms` can return multiple values.\n   * Each possible value is a hierarchy of platforms. For example, on an iPhone,\n   * it would return `mobile`, `ios`, and `iphone`.\n   */\n  platforms(): string[] {\n    return getPlatforms(this.win);\n  }\n\n  /**\n   * Returns a promise when the platform is ready and native functionality\n   * can be called. If the app is running from within a web browser, then\n   * the promise will resolve when the DOM is ready. When the app is running\n   * from an application engine such as Cordova, then the promise will\n   * resolve when Cordova triggers the `deviceready` event.\n   *\n   * The resolved value is the `readySource`, which states which platform\n   * ready was used. For example, when Cordova is ready, the resolved ready\n   * source is `cordova`. The default ready source value will be `dom`. The\n   * `readySource` is useful if different logic should run depending on the\n   * platform the app is running from. For example, only Cordova can execute\n   * the status bar plugin, so the web should not run status bar plugin logic.\n   *\n   * ```\n   */\n  ready(): Promise<string> {\n    return this._readyPromise;\n  }\n\n  /**\n   * Returns if this app is using right-to-left language direction or not.\n   * We recommend the app's `index.html` file already has the correct `dir`\n   * attribute value set, such as `<html dir=\"ltr\">` or `<html dir=\"rtl\">`.\n   * [W3C: Structural markup and right-to-left text in HTML](http://www.w3.org/International/questions/qa-html-dir)\n   */\n  get isRTL(): boolean {\n    return this.doc.dir === 'rtl';\n  }\n\n  /**\n   * Get the query string parameter\n   */\n  getQueryParam(key: string): string | null {\n    return readQueryParam(this.win.location.href, key);\n  }\n\n  /**\n   * Returns `true` if the app is in landscape mode.\n   */\n  isLandscape(): boolean {\n    return !this.isPortrait();\n  }\n\n  /**\n   * Returns `true` if the app is in portait mode.\n   */\n  isPortrait(): boolean {\n    return this.win.matchMedia && this.win.matchMedia('(orientation: portrait)').matches;\n  }\n\n  testUserAgent(expression: string): boolean {\n    const nav = this.win.navigator;\n    return !!(nav && nav.userAgent && nav.userAgent.indexOf(expression) >= 0);\n  }\n\n  /**\n   * Get the current url.\n   */\n  url() {\n    return this.win.location.href;\n  }\n\n  /**\n   * Gets the width of the platform's viewport using `window.innerWidth`.\n   */\n  width() {\n    return this.win.innerWidth;\n  }\n\n  /**\n   * Gets the height of the platform's viewport using `window.innerHeight`.\n   */\n  height(): number {\n    return this.win.innerHeight;\n  }\n}\n\nconst readQueryParam = (url: string, key: string) => {\n  key = key.replace(/[\\[]/, '\\\\[').replace(/[\\]]/, '\\\\]');\n  const regex = new RegExp('[\\\\?&]' + key + '=([^&#]*)');\n  const results = regex.exec(url);\n  return results ? decodeURIComponent(results[1].replace(/\\+/g, ' ')) : null;\n};\n\nconst proxyEvent = <T>(emitter: Subject<T>, el: EventTarget, eventName: string) => {\n  if ((el as any)) {\n    el.addEventListener(eventName, (ev: Event | undefined | null) => {\n      // ?? cordova might emit \"null\" events\n      emitter.next(ev != null ? (ev as any).detail as T : undefined);\n    });\n  }\n};","import { UtilsService } from './utils.service';\nimport { Injectable, ComponentRef, EmbeddedViewRef } from '@angular/core';\nimport { WidgetPosition } from '../models/base-widget';\nimport { isPlatform, Platforms } from '../utils/platform'\nimport { PlatformService } from \"./platform.service\";\n/**\n * create by ruir 191015  通用功能函数\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class CommonService {\n\n  constructor(\n    private utils: UtilsService,\n    private platform: PlatformService\n  ) {\n\n  }\n  /**\n   * \n   */\n  createPromiseDefer() {\n    let resolve, reject;\n    const promise = new Promise<any>(function () {\n      resolve = arguments[0];\n      reject = arguments[1];\n    });\n    return {\n      resolve: resolve,\n      reject: reject,\n      promise: () => promise\n    };\n  }\n\n  /**\n   * 获取组件根级元素\n   * @param componentRef \n   */\n  getComponentRootNode(componentRef: ComponentRef<any>): HTMLElement {\n    if (!componentRef) {\n      console.log('componentRef undefined');\n      return null;\n    }\n    return (componentRef.hostView as EmbeddedViewRef<any>).rootNodes[0] as HTMLElement;\n  }\n  /**\n   * 获取元素范围边界\n   * @param ele \n   */\n  getElementBounds(ele: HTMLElement) {\n    if (!ele) return null;\n    const rect = ele.getBoundingClientRect();\n\n    const top = document.documentElement.clientTop;\n\n    const left = document.documentElement.clientLeft;\n\n    return {\n\n      top: rect.top - top,\n      left: rect.left - left,\n      bottom: rect.bottom - top,\n      right: rect.right - left,\n      width: rect.width,\n      height: rect.height\n    }\n  }\n\n  /**\n   * \n   * @param px \n   */\n  getPx(px) {\n    // let xxxxx = _.isNumber(\"300\");//居然是false\n    if (!px) return \"0px\";\n    if (typeof px === \"string\" && px.indexOf(\"px\") >= 0) {\n      return px;\n    }\n    if (px.toString().indexOf(\"%\") >= 0 || px === \"auto\") return px;\n    if (typeof px === \"number\")\n      return px + \"px\";\n    let _temp = parseFloat(px);\n    if (isNaN(_temp)) {\n      return \"0px\";\n    }\n    return _temp + \"px\";\n\n  }\n  /**\n   * \n   * @param px \n   */\n  getPxNumber(px: number | string): number | string {\n    if (!px) return 0;\n\n    if (typeof px === \"string\" && px.indexOf(\"px\") >= 0) {\n      return parseInt(px, 10);\n    }\n    if (px.toString().indexOf(\"%\") >= 0 || px === \"auto\") return px;\n\n    if (typeof px === \"number\")\n      return px;\n\n    let _temp = parseFloat(px.toString());\n    if (isNaN(_temp)) {\n      return 0;\n    }\n    return _temp;\n  }\n  /**\n   * \n   * @param positionConfig \n   */\n  getPosition(positionConfig: any): WidgetPosition {\n    let _position: WidgetPosition = new WidgetPosition();\n    if (positionConfig.top || positionConfig.top == 0) {\n      _position.top = this.getPx(positionConfig.top);\n    }\n    if (positionConfig.left || positionConfig.left == 0) {\n      _position.left = this.getPx(positionConfig.left);\n    }\n    if (positionConfig.right || positionConfig.right == 0) {\n      _position.right = this.getPx(positionConfig.right);\n    }\n    if (positionConfig.bottom || positionConfig.bottom == 0) {\n      _position.bottom = this.getPx(positionConfig.bottom);\n    }\n    if (positionConfig.width || positionConfig.width == 0) {\n      _position.width = this.getPx(positionConfig.width);\n    } else {\n      _position.width = \"100%\";\n    }\n    if (positionConfig.height || positionConfig.height == 0) {\n      _position.height = this.getPx(positionConfig.height);\n    } else {\n      _position.height = \"100%\";\n    }\n    if (positionConfig.zIndex || positionConfig.zIndex == 0) {\n      _position.zIndex = positionConfig.zIndex;\n    }\n    return _position;\n  }\n  /**\n   * 设置组件位置\n   * @param compRef \n   * @param widgetPosition \n   */\n  setWidgetPosition(compRef: ComponentRef<any>, widgetPosition: any) {\n    let ele: HTMLElement = this.getComponentRootNode(compRef);\n    let css = this.utils.getPositionStyle(widgetPosition);\n    ele.style.position = \"absolute\";\n    if (css.top || css.top == 0) {\n      ele.style.top = css.top;\n    }\n    if (css.right || css.right == 0) {\n      ele.style.right = css.right;\n    }\n    if (css.bottom || css.bottom == 0) {\n      ele.style.bottom = css.bottom;\n    }\n    if (css.left || css.left == 0) {\n      ele.style.left = css.left;\n    }\n    if (css.width || css.width == 0) {\n      ele.style.width = css.width;\n    }\n    if (css.height || css.height == 0) {\n      ele.style.height = css.height;\n    }\n    if (css.zIndex || css.zIndex == 0) {\n      ele.style.zIndex = css.zIndex;\n    }\n  }\n  private win: any;\n  is(platformName: Platforms): boolean {\n    return isPlatform(this.win, platformName);\n  }\n\n  /**\n   * 返回当前平台名称\n   */\n  getPlatformName(): string {\n\n    if (this.isAndroid())\n      return 'android';\n\n    if (this.isIos())\n      return 'ios';\n\n    if (!this.isMobile())\n      return 'browser'\n\n    return 'unknown';\n  }\n  /**\n   * 是否移动端环境\n   */\n  isMobileNotTablet(): boolean {\n    return this.isMobile()\n      && this.platform.is(\"ipad\") == false\n      && this.platform.is(\"phablet\") == false\n      && this.platform.is(\"tablet\") == false;\n  }\n  /**\n   * 是否移动端环境\n   */\n  isMobile(): boolean {\n    return this.platform.is(\"mobile\") || this.platform.is(\"mobileweb\");\n  }\n  /**\n   * 是否真机环境\n   */\n  isMobileRealMachine(): boolean {\n    return this.platform.is('mobile') && !this.platform.is('mobileweb');\n  }\n  /**\n   * 是否android真机环境\n   */\n  isAndroid(): boolean {\n    return this.isMobileRealMachine() && this.platform.is('android');\n  }\n  /**\n   * 是否ios真机环境\n   */\n  isIos(): boolean {\n    return this.isMobileRealMachine() && (this.platform.is('ios') || this.platform.is('ipad') || this.platform.is('iphone'));\n  }\n}\n","import { Injectable, ComponentFactoryResolver, Type, ViewContainerRef, OnDestroy, ComponentRef, Injector, forwardRef, Inject, EmbeddedViewRef, ApplicationRef } from '@angular/core';\r\nimport { ComponentRegistry, findComponentInfo } from '../decorator/component-register.decorator';\r\nimport { ServiceInjector } from './service-injector';\r\n/**\r\n * create by ruir 191018  组件加载器\r\n */\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ComponentLoaderService implements OnDestroy {\r\n    /**\r\n     * 最外层容器\r\n     */\r\n    viewContainerInHome: ViewContainerRef = null;\r\n    /**\r\n     * 地图组件中的容器\r\n     */\r\n    viewContainerInMap: ViewContainerRef = null;\r\n    private serviceInjector: ServiceInjector = null;\r\n    factories = null;\r\n    factoriesArray: Array<any> = null;\r\n    constructor(\r\n        private componentFactoryResolver: ComponentFactoryResolver\r\n        // ,private applicationRef: ApplicationRef,\r\n        //, @Inject(forwardRef(() => ServiceInjector))\r\n        //  private serviceInjector: ServiceInjector\r\n    ) {\r\n        // setTimeout(() => {\r\n        //     let injector = ReflectiveInjector.resolveAndCreate([ServiceInjector]);\r\n        //     let dependence1 = injector.get(ServiceInjector, null);\r\n        // }, 500);\r\n        this.factories = this.componentFactoryResolver[\"_factories\"];\r\n        if (this.factories) {\r\n            this.factoriesArray = Array.from(this.factories);\r\n        }\r\n    }\r\n    /**\r\n     * 创建组件\r\n     * @param component 组件\r\n     * @param params 参数\r\n     * @param container 容器\r\n     */\r\n    public createComponent(component: Type<any>, params?: any, container?: ViewContainerRef) {\r\n\r\n        let inputs = {};\r\n        if (params) {\r\n            inputs = params;\r\n        }\r\n        let inputProviders = Object.keys(inputs).map((inputName) => {\r\n            return { provide: inputName, useValue: inputs[inputName] };\r\n        });\r\n        //过时\r\n        //Injector.create(inputProviders)\r\n        //过时\r\n        // const resolvedInputs = ReflectiveInjector.resolve(inputProviders);\r\n        // const resolvedInputs= Injector.create({\r\n        //     providers:inputProviders\r\n        // })\r\n        // let parent = null;\r\n        // if (container) {\r\n        //     parent = container.parentInjector;\r\n        // }\r\n        // const injector = ReflectiveInjector.fromResolvedProviders(resolvedInputs, parent);\r\n        const injector = Injector.create({ providers: inputProviders, parent: container?.parentInjector });\r\n        const factory = this.componentFactoryResolver.resolveComponentFactory(component);\r\n        // container?.createComponent(factory,0,injector);\r\n        const compRef = factory.create(injector);\r\n        if (typeof compRef.instance.setServiceInjector === \"function\") {\r\n            compRef.instance.setServiceInjector(this.serviceInjector);\r\n        }\r\n        // this.applicationRef.attachView(compRef.hostView);\r\n        return compRef;\r\n    }\r\n    /**\r\n     * 获取组件的路径\r\n     * @param name 组件的selector\r\n     */\r\n    getComponentPath(name: string) {\r\n        const compInfo = findComponentInfo(name);\r\n        if (compInfo) {\r\n            return compInfo.path || compInfo.uri;\r\n        }\r\n        const comp = this.findComponent(name);\r\n        if (comp) {\r\n            return (typeof comp.getCompInfo === \"function\") ? comp.getCompInfo().path : \"\";\r\n        }\r\n        return \"\";\r\n    }\r\n    /**\r\n     * 查找组件\r\n     * @param name 组件的selector\r\n     */\r\n    findComponent(name: string) {\r\n        let comp = null;\r\n        if (this.factories) {\r\n            //ng8\r\n            //let factories: Array<any> =Array.from( this.componentFactoryResolver[\"_factories\"].values());\r\n            if (!this.factories || this.factories.size <= 0) return null;\r\n            //Array.from(factories)[0]  0:class 1:ComponentFactory_\r\n            //[...factories.values()] ComponentFactory_\r\n            /*\r\n            factories.forEach((value: any, key: any) => {\r\n                //value.componentType.name \"OnScreenWidgetIconComponent\"\r\n                //value.selector \"epsgis-on-screen-widget-icon\"\r\n                let _cname: string = key.name;\r\n                //key :NzDropdownContextComponent\r\n                if (_cname.toLowerCase() !== name.toLowerCase() && typeof key.getCompInfo === \"function\") {\r\n                    _cname = key.getCompInfo().name;\r\n                }\r\n                console.log(_cname);\r\n                if (_cname.toLowerCase() === name.toLowerCase()) {\r\n                    comp = key;\r\n                    return true;\r\n                }\r\n            });\r\n            */\r\n\r\n            let item = this.factoriesArray.find((value, index: number, arr) => {\r\n                //console.log(`value[0].name:${value[0].name}`); //变了\r\n                //console.log(`value[1].componentType.name:${value[1].componentType.name}`); //变了\r\n                //console.log(`value[1].selector:${value[1].selector}`); //\r\n                return value[1].selector.toLowerCase() === name.toLowerCase();\r\n            });\r\n            if (item) {\r\n                comp = item[0];\r\n                //console.log(JSON.stringify(comp.getCompInfo()));\r\n            }\r\n        } else {\r\n            //ng9及以上\r\n            const compInfo = findComponentInfo(name);\r\n            if (compInfo) {\r\n                return compInfo.component;\r\n            }\r\n        }\r\n        return comp;\r\n\r\n    }\r\n    getServiceInjector() {\r\n        return this.serviceInjector;\r\n    }\r\n    /**\r\n     * \r\n     * @param serviceInjector \r\n     */\r\n    setServiceInjector(serviceInjector: ServiceInjector) {\r\n        this.serviceInjector = serviceInjector;\r\n    }\r\n    ///////////////////////////\r\n    /**\r\n     * 设置组件容器\r\n     * @param container \r\n     */\r\n    setViewContainerInHome(container: ViewContainerRef) {\r\n        this.viewContainerInHome = container;\r\n    }\r\n    /**\r\n     * 创建组件\r\n     * @param component 组件\r\n     * @param params 参数\r\n     */\r\n    createComponentToHome(component: Type<any>, params?: any) {\r\n        return this.createComponent(component, params, this.viewContainerInHome);\r\n    }\r\n    /**\r\n     * 显示组件\r\n     */\r\n    showInHome(compRef: ComponentRef<any>) {\r\n        if (!compRef) {\r\n            return;\r\n        }\r\n        if (!this.viewContainerInHome) {\r\n            console.error(\"未设置容器，无法显示组件\");\r\n            return;\r\n        }\r\n        this.viewContainerInHome.insert(compRef.hostView);\r\n    }\r\n    /////////////////////////\r\n\r\n    /**\r\n     * 设置组件容器\r\n     * @param container \r\n     */\r\n    setViewContainerInMap(container: ViewContainerRef) {\r\n        this.viewContainerInMap = container;\r\n    }\r\n    /**\r\n     * 创建组件到地图组件中\r\n     * @param component 组件\r\n     * @param params 参数\r\n     */\r\n    createComponentToMap(component: Type<any>, params?: any) {\r\n        return this.createComponent(component, params, this.viewContainerInMap);\r\n    }\r\n    /**\r\n     * 显示组件（相对于地图组件）\r\n     */\r\n    showInMap(compRef: ComponentRef<any>) {\r\n        if (!compRef) {\r\n            return;\r\n        }\r\n        if (!this.viewContainerInMap) {\r\n            console.error(\"未设置容器，无法显示组件\");\r\n            return;\r\n        }\r\n        this.viewContainerInMap.insert(compRef.hostView);\r\n    }\r\n    /**\r\n     * \r\n     */\r\n    ngOnDestroy() {\r\n        if (this.viewContainerInHome) {\r\n            this.viewContainerInHome.clear();\r\n        }\r\n        if (this.viewContainerInMap) {\r\n            this.viewContainerInMap.clear();\r\n        }\r\n    }\r\n}\r\n","/**\n * create by ruir 191014  baseWidgetFrame.js\n */\nexport class BaseWidgetFrame {\n}\n","/**\n * create by ruir 191014  baseWidgetPanel.js\n */\nexport class BaseWidgetPanel {\n}\n","/**\n * create by ruir 191014  baseWidgetSetting.js\n */\nexport class BaseWidgetSetting {\n}\n","/**\n * create by ruir 191014  OnScreenWidgetPanel.js\n */\nexport class OnScreenWidgetPanel {\n}\n","/**\n * \n */\nexport class WidgetPlaceholder {\n\n    index: number = 0;\n    configId: string = \"\";\n    id = \"dijit__WidgetBase_\" + this.index;\n    class = 'jimu-widget-placeholder';\n    params: any = null;\n    constructor(options: any) {\n        this.params = options;\n    }\n    /**\n     * \n     */\n    postCreate() {\n\n\n    }\n    /**\n     * \n     * @param position \n     */\n    moveTo(position) {\n\n    }\n    /**\n     * \n     * @param index \n     */\n    setIndex(index: number) {\n\n    }\n}\n","import { Injectable } from '@angular/core';\nimport { EventEmitter } from 'events';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class EventEmitterService {\n\n  rss: EventEmitter = new EventEmitter();\n  /**\n   * 地图加载完成\n   */\n  readonly _mapLoaded: string = \"manLoaded\";\n  /**\n   * 地图改变\n   */\n  readonly _mapChanged: string = \"mapChanged\";\n  /**\n   * \n   */\n  readonly _viewLoaded: string = \"viewLoaded\";\n  /**\n   * \n   */\n  readonly _viewChanged: string = \"viewChanged\";\n  /**\n   * 组件创建成功\n   */\n  readonly _widget_Created: string = \"widget-created\";\n  /**\n   * 组件创建成功\n   */\n  readonly _widgetCreated: string = \"widgetCreated\";\n  /**\n   * \n   */\n  readonly _designConfigChanged: string = \"DesignConfigChanged\";\n  /**\n   * \n   */\n  readonly _appConfigLoaded: string = \"appConfigLoaded\";\n\n  readonly _appConfigChanged: string = \"appConfigChanged\";\n  readonly _header_ConfigChanged = \"header-configChanged\";\n  /**\n   * \n   */\n  readonly _createPanelContainer: string = \"createPanelContainer\";\n  /**\n   * \n   */\n  readonly _mapPositionChanged: string = \"mapPositionChanged\";\n\n  /**\n   * 变更检测 add yly 20200327\n   */\n  readonly _checkChangeDetector: string = \"detectChanges\";\n  /**\n   * 图片查看器，索引改变\n   */\n  readonly _imageViewerIndexChanged: string = \"imageViewerIndexChanged\";\n  constructor() {\n    //Possible EventEmitter memory leak detected. 11 mapChanged listeners added. Use emitter.setMaxListeners() to increase limit\n    //this.rss.setMaxListeners(50);\n  }\n  /**\n   * 移除监听\n   */\n  removeListener(event: string | any, listener: (...args: any[]) => void) {\n    if (typeof listener === \"function\") {\n      return this.rss.removeListener(event, listener);\n    }\n    return this.rss;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpParams, HttpHeaders } from '@angular/common/http';\nimport { RequestResultModel, TokenModel, OrderByType } from '../models/http/request.result';\nimport { AppGlobalConfig } from '../models/models';\n// export const ApiRootUrl = new InjectionToken<string>('ApiRootUrl');\n@Injectable({\n    providedIn: 'root'\n})\nexport class HttpReqService {\n    private ServiceUrl: string = '';\n    headers = new HttpHeaders().set(\n        \"Content-type\",\n        \"application/json; charset=UTF-8\"\n    );\n    private _tokenKey = \"__token\";\n    private _tokenValue = \"\";\n    constructor(\n        public httpClient: HttpClient,\n        // @Optional() @Inject(ApiRootUrl) private ApiRootUrl: string\n        public config: AppGlobalConfig\n    ) {\n        this.ServiceUrl = config.apiRootUrl;\n    }\n    /**\n     * 获取本地保存的token\n     */\n    getLocalToken(): TokenModel {\n        if (window.sessionStorage) {\n            let str = sessionStorage.getItem(this._tokenKey);\n            if (str != \"\") {\n                return JSON.parse(str);\n            }\n        } else {\n            console.log(\"浏览器不支持sessionStorage\");\n        }\n        return null;\n    }\n    /**\n     * sessionStorage中的key\n     */\n    getTokenKey() {\n        return this._tokenKey;\n    }\n    /**\n     * token更新后需要调用此函数更新本实例中的值\n     * @param token \n     */\n    setAccessToken(token: string) {\n        this._tokenValue = token;\n    }\n    /**\n     * \n     */\n    getAccessToken() {\n        let token: string = \"\";\n        if (this._tokenValue) {\n            token = this._tokenValue;\n        } else {\n            let m: TokenModel = this.getLocalToken();\n            if (m) {\n                this.setAccessToken(m.access_token);\n                token = m.access_token;\n            }\n        }\n        return token;\n    }\n    /**\n     * 获取带有token的headers\n     */\n    getAuthHeaders() {\n        return this.headers.set(\"Authorization\", `Bearer ${this.getAccessToken()}`);\n    }\n    /**\n     * 请求json文件\n     * @param configFilePath \n     */\n    getJsonFile(configFilePath: string) {\n        return this.httpClient.get(configFilePath, { responseType: 'json' }).toPromise();\n    }\n\n    private _toHttpParams(paras: Array<HttpPara>): HttpParams {\n        if (!paras) return null;\n        let obj = {};\n        paras.forEach(x => {\n            obj[x.name] = x.value;\n        })\n        return new HttpParams({ fromObject: obj });\n    }\n    /**\n     * \n     * @param para \n     */\n    private _toParaString(para: Array<HttpPara>): string {\n        if (!para || para.length <= 0) return '';\n        let str = '';\n        para.forEach(s => {\n            str += `&${s.name}=${s.value}`;\n        });\n        return str.substring(1);\n    }\n    /**\n     * \n     * @param para \n     */\n    private _toHttpParams2(para: ObjectPara | string) {\n        let _httpParams = null;\n        if (typeof para === \"string\") {\n            _httpParams = new HttpParams({ fromString: para });\n        } else {\n            _httpParams = new HttpParams({ fromObject: para as ObjectPara });\n        }\n        return _httpParams;\n    }\n    /**\n     * \n     * @param para \n     */\n    private _toParaString2(para: ObjectPara | string): string {\n        if (!para) return '';\n        if (typeof para === \"string\") {\n            if (para.startsWith(\"&\") || para.startsWith(\"?\")) {\n                return para.substring(1);\n            }\n            return para;\n        } else {\n            let str = '';\n            for (const key in para) {\n                if (para.hasOwnProperty(key)) {\n                    str += `&${key}=${para[key]}`;\n                }\n            }\n            return str.substring(1);\n        }\n    }\n    /**\n     * get请求\n     * @param apiName api\n     * @param para 参数\n     * @param serviceUrl 服务地址\n     */\n    getNoAuthGeneric<T>(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        let url = this.ServiceUrl;\n        if (serviceUrl) url = serviceUrl;\n        return this.httpClient.get<T>(`${url}/${apiName}`, {\n            headers: this.headers,\n            //params: new HttpParams({ fromString: paraString })\n            params: this._toHttpParams2(para)\n        }).toPromise<T>();\n    }\n    /**\n     * \n     * @param apiName api\n     * @param para 参数字符串\n     * @param serviceUrl 服务地址\n     */\n    getNoAuth(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        return this.getNoAuthGeneric<RequestResultModel>(apiName, para, serviceUrl);\n    }\n    /**\n    * get请求-带验证\n    * @param apiName api\n    * @param para 参数字符串\n    * @param serviceUrl 服务地址\n    */\n    getGeneric<T>(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        let url = this.ServiceUrl;\n        if (serviceUrl) url = serviceUrl;\n        return this.httpClient.get<T>(`${url}/${apiName}`, {\n            headers: this.getAuthHeaders(),\n            // params: new HttpParams({ fromString: paraString })\n            params: this._toHttpParams2(para)\n        }).toPromise<T>();\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n     */\n    get(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        return this.getGeneric<RequestResultModel>(apiName, para, serviceUrl);\n    }\n    /**\n     * 获取分页数据\n     * @param apiName \n     * @param pageIndex 页码\n     * @param pageSize 每页大小\n     * @param orderBy 排序\n     * @param direction 排序方向\n     * @param para 参数\n     * @param serviceUrl 自定义url\n     */\n    getPage(apiName: string, pageIndex: number, pageSize: number, orderBy?: string, direction?: OrderByType, para?: ObjectPara | string, serviceUrl?: string) {\n        if (pageIndex <= 0) {\n            pageIndex = 1;\n        }\n        if (pageSize <= 0) {\n            pageSize = 20;\n        }\n        let pager: ObjectPara = {\n            page: pageIndex.toString(),\n            size: pageSize.toString(),\n            orderby: orderBy ? orderBy : \"\",\n            direction: direction === OrderByType.desc ? \"1\" : \"0\"\n        };\n        let paraString = this._toParaString2(pager);\n        if (para) {\n            paraString = paraString + \"&\" + this._toParaString2(para);\n        }\n        return this.getGeneric<RequestResultModel>(apiName, paraString, serviceUrl);\n    }\n    /**\n    * post请求\n    * @param apiName 方法名\n    * @param para 参数\n    * @param serviceUrl 服务地址\n    * @param receiveAsObject api是否以对象接收参数\n    */\n    postNoAuthGeneric<T>(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean): Promise<T> {\n        let url = this.ServiceUrl;\n        if (typeof serviceUrl === 'string' && serviceUrl) url = serviceUrl;\n        if (receiveAsObject === true || (typeof serviceUrl === 'boolean' && serviceUrl === true)) {\n            return this.httpClient.post<T>(`${url}/${apiName}`, para, { headers: this.headers }).toPromise<T>();\n        } else {\n            return this.httpClient.post<T>(\n                `${url}/${apiName}`,\n                this._toParaString2(para),//要字符串\n                {\n                    headers: {\n                        'Content-Type': \"application/x-www-form-urlencoded;charset=UTF-8\"//也必须要设置。。。坑。。。                \n                    }\n                    //,params: this._toHttpParams(para)//这里是get参数\n                }).toPromise<T>();\n        }\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n    * @param receiveAsObject api是否以对象接收参数\n     */\n    postNoAuth(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean): Promise<RequestResultModel> {\n        return this.postNoAuthGeneric<RequestResultModel>(apiName, para, serviceUrl, receiveAsObject);\n    }\n\n\n    /**\n      * post请求-带验证\n      * @param apiName 方法名\n      * @param para 参数\n     * @param serviceUrl 服务地址\n    * @param receiveAsObject api是否以对象接收参数\n      */\n    postGeneric<T>(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean) {\n        let url = this.ServiceUrl;\n        if (typeof serviceUrl === 'string' && serviceUrl) url = serviceUrl;\n        if (receiveAsObject === true || (typeof serviceUrl === 'boolean' && serviceUrl === true)) {\n            return this.httpClient.post<T>(`${url}/${apiName}`, para, { headers: this.getAuthHeaders() }).toPromise<T>();\n        } else {\n            return this.httpClient.post<T>(\n                `${url}/${apiName}`,\n                this._toParaString2(para),//要字符串\n                {\n                    headers: {\n                        'Content-Type': \"application/x-www-form-urlencoded;charset=UTF-8\"//也必须要设置。。。坑。。。\n                        , \"Authorization\": `Bearer ${this.getAccessToken()}`\n                    }\n                    //,params: this._toHttpParams(para)//这里是get参数\n                }).toPromise<T>();\n        }\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n    * @param receiveAsObject api是否以对象接收参数\n     */\n    post(apiName: string, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean) {\n        return this.postGeneric<RequestResultModel>(apiName, para, serviceUrl, receiveAsObject);\n    }\n\n    /**\n     * 获取分页数据\n     * @param apiName \n     * @param pageIndex 页码\n     * @param pageSize 每页大小\n     * @param orderBy 排序\n     * @param direction 排序方向\n     * @param para 参数\n     * @param serviceUrl 自定义url\n    * @param receiveAsObject api是否以对象接收参数\n     */\n    postPage(apiName: string, pageIndex: number, pageSize: number, orderBy?: string, direction?: OrderByType, para?: ObjectPara | string | any, serviceUrl?: string | boolean, receiveAsObject?: boolean) {\n        if (pageIndex <= 0) {\n            pageIndex = 1;\n        }\n        if (pageSize <= 0) {\n            pageSize = 20;\n        }\n        let pager: ObjectPara = {\n            page: pageIndex.toString(),\n            size: pageSize.toString(),\n            orderby: orderBy ? orderBy : \"\",\n            direction: direction === OrderByType.desc ? \"1\" : \"0\"\n        };\n        let paraString = this._toParaString2(pager);\n        if (para) {\n            paraString = paraString + \"&\" + this._toParaString2(para);\n        }\n        return this.postGeneric<RequestResultModel>(apiName, paraString, serviceUrl, receiveAsObject);\n    }\n    /**\n     * delete请求\n     * @param apiName \n     * @param para \n     * @param serviceUrl \n     */\n    deleteGeneric<T>(apiName: string, para: ObjectPara | string, serviceUrl?: string) {\n        let url = this.ServiceUrl;\n        if (serviceUrl) url = serviceUrl;\n\n        return this.httpClient.delete<T>(`${url}/${apiName}`,\n            {\n                params: this._toHttpParams2(para),\n                headers: {\n                    \"Authorization\": `Bearer ${this.getAccessToken()}`\n                }\n            }\n        ).toPromise<T>();\n    }\n    /**\n     * \n     * @param apiName \n     * @param para \n     * @param serviceUrl \n     */\n    delete(apiName: string, para?: ObjectPara | string, serviceUrl?: string) {\n        return this.deleteGeneric<RequestResultModel>(apiName, para, serviceUrl);\n    }\n}\ninterface HttpPara {\n    name: string;\n    value: any;\n}\n\nexport interface ObjectPara {\n    [param: string]: string | ReadonlyArray<string>;\n}","import { CommonService } from './common.service';\nimport { HttpReqService } from './request.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport { Injectable, ComponentRef } from '@angular/core';\nimport { UtilsService } from './utils.service';\nimport * as _ from \"lodash\";\nimport { ComponentLoaderService } from './component-loader.service';\nimport { WidgetState, WidgetOpenOptions } from '../models/base-widget';\nimport { ConfigLoaderService } from './config-loader.service';\nimport { PanelDockMode } from '../models/base-panel';\nimport { PanelManagerService } from './panel-manager.service';\nimport { BaseWidgetComponent } from '../components/base-widget/base-widget.component';\nimport { AppGlobalConfig } from '../models/models';\nimport { IComponentInfo } from '../decorator/component-register.decorator';\nimport { BaseWidget } from '../components/base-widget';\n/**\n * create by ruir 191014  widgetManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetManagerService {\n  loaded: Array<ComponentRef<BaseWidgetComponent>> = null;\n  missedActions: Array<any> = null;\n  activeWidget: ComponentRef<BaseWidgetComponent> = null;\n  map: any = null;\n  view: any = null;\n  appConfig: any = null;\n  configLoader: ConfigLoaderService;\n  panelManager: PanelManagerService;\n  constructor(\n    private globalParams: AppGlobalConfig,\n    private eventService: EventEmitterService,\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private commonService: CommonService,\n    private componentLoader: ComponentLoaderService) {\n    this.loaded = [];\n    this.missedActions = [];\n    this.activeWidget = null;\n    // this.eventService.rss.on(this.eventService._mapLoaded, this._onMapLoaded);\n    // this.eventService.rss.on(this.eventService._mapChanged, this._onMapChanged);\n  }\n  /**\n    * \n    * @param map 二维地图或三维场景\n    */\n  setMap(map) {\n    if (this.globalParams.mapConfig.is3D === true) {\n      this.view = map;\n    } else {\n      this.map = map;\n    }\n  }\n  setAppConfig(appConfig) {\n\n    this.appConfig = appConfig;//appConfig有些问题\n    //this.appConfig = _layoutManager.appConfig;\n\n  }\n  _onMapLoaded(map) {\n\n  }\n\n  _onMapChanged(map) {\n\n  }\n  /**\n   * \n   * @param compInfo\n   * @param widget \n   */\n  loadConfig(compInfo: IComponentInfo, widget: BaseWidget): Promise<boolean> {\n    //view/map 赋值，其实setWidgetPorp也会赋值\n    widget.appConfig = this.appConfig;\n    widget.view = this.view;\n    widget.map = this.map;\n    let def = this.commonService.createPromiseDefer();\n    //从appConfig中查找组件的配置，查找到后直接赋值\n    let item = this.appConfig.widgetOnScreen.widgets.find(f => f.uri.toLowerCase() === compInfo.uri.toLowerCase());\n    if (item) {\n      if (!item.config) {\n        this.tryLoadWidgetConfig(item).then(widgetJson => {\n          this.setWidgetPorp(widget, widgetJson);\n          widget.started = true;\n          widget.state = WidgetState.opened;\n          return def.resolve(true);\n        }).catch(err => {\n          return def.resolve(true);\n        });\n      }\n\n    } else {\n      //如果没有查找到，则请求配置文件，再赋值\n      const aconfig = {\n        \"widgetOnScreen\":\n        {\n          \"widgets\": [{\n            \"uri\": compInfo.uri,\n            \"label\": compInfo.name\n          }]\n        }\n      };\n      this.configLoader._upgradeAppConfig(aconfig);\n      this.configLoader._processAfterTryLoad(aconfig);\n      this.configLoader.loadWidgetsManifest(aconfig).then(appconfig => {\n        const wConfig = appconfig.widgetOnScreen.widgets[0];\n        this.tryLoadWidgetConfig(wConfig).then(widgetJson => {\n          this.setWidgetPorp(widget, widgetJson);\n          widget.started = true;\n          widget.state = WidgetState.opened;\n          return def.resolve(true);\n        }).catch(err => {\n          return def.resolve(true);\n        });\n      });\n    }\n    return def.promise();\n  }\n  /**\n   * 打开组件\n   * @param options \n   */\n  openWidget(options: WidgetOpenOptions): Promise<BaseWidgetComponent> {\n    let _openPanelOrWidget = (_config) => {\n      const _options = _.cloneDeep(options);\n      let inPanel = _config.inPanel;\n      //仅创建组件时，panel不显示\n      if (options.onlyCreateWidget === true) { inPanel = false; }\n\n      if (inPanel !== false) {\n        //打开panel\n        this.panelManager.showPanel(_config, null, options.panel, _options).then((panel) => {\n          if (panel.instance.isDockable()) {\n            this.panelManager.onMapResize();\n          }\n          def.resolve(panel);\n        });\n      } else {\n        //打开组件\n        this.loadWidget(_config, _options).then((compRef) => {\n          if (options.onlyCreateWidget === true) {\n            def.resolve(compRef);\n          }\n          else {\n            this.showWidget(compRef);\n            compRef.instance.setPosition(_config.position);\n            this.commonService.setWidgetPosition(compRef, _config.position);\n            _config.loaded = true;\n            compRef.instance.configId = _config.id;\n            def.resolve(compRef.instance);\n          }\n        }).catch((err) => def.reject(err));\n      }\n    }\n    let def = this.commonService.createPromiseDefer();\n    if (!options.uri) {\n      console.error(\"no uri\");\n      def.reject(new Error(\"no uri\"));\n      return def.promise();\n    }\n    //查找appConfig，是否有配置\n    let item = this.appConfig.widgetOnScreen.widgets.find(f => f.uri.toLowerCase() === options.uri.toLowerCase());\n    if (item) {\n      //有配置\n      _openPanelOrWidget(item);\n    } else {\n      //没有配置\n      if (!options.position) {\n        console.error(\"no position\");\n        def.reject(new Error(\"no position\"));\n        return def.promise();\n      }\n      //有position 完善属性\n      let _config = {\n        \"label\": \"\",\n        \"uri\": options.uri,\n        \"position\": {\n        }\n      };\n      _config.position = _.merge(_config.position, options.position);\n      if (options.panel) {\n        _config.label = options.panel.title;\n        if (options.panel.dockSide) {\n          switch (options.panel.dockSide) {\n            case PanelDockMode.left:\n              _config[\"panel\"] = {\n                uri: \"epsgis-dockable-panel-at-left\"\n              };\n              break;\n            case PanelDockMode.bottom:\n              _config[\"panel\"] = {\n                uri: \"epsgis-dockable-panel-at-bottom\"\n              };\n              break;\n            case PanelDockMode.right:\n              _config[\"panel\"] = {\n                uri: \"epsgis-dockable-panel-at-right\"\n              };\n              break;\n            default:\n              break;\n          }\n        }\n      }\n      if (!_config.label) {\n        _config.label = _config.uri;\n      }\n      let _appConfig = {\n        \"widgetOnScreen\": {\n          \"widgets\": [\n            _config\n          ]\n        }\n      };\n      this.configLoader._processAfterTryLoad(_appConfig);\n      this.configLoader.loadWidgetsManifest(_appConfig).then((cfg) => {\n        const _widgetConfig = cfg.widgetOnScreen.widgets[0];\n        this.appConfig.widgetOnScreen.widgets.push(_widgetConfig);\n        //加载组件\n        _openPanelOrWidget(_widgetConfig);\n      }).catch(err => def.reject(err));\n\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param setting \n   */\n  loadWidget(setting, openOptions?: WidgetOpenOptions): Promise<any> {\n    //setting 至少要包含id和uri（组件地址）\n    let def = this.commonService.createPromiseDefer();\n\n    let findWidget;\n    setting = _.clone(setting);\n    if (!setting.folderUrl) {\n      this.utils.processWidgetSetting(setting);\n    }\n    findWidget = this.getWidgetById(setting.id);\n    if (findWidget) {\n      if (openOptions) {\n        findWidget.instance.reqPara = openOptions.param;\n      }\n      def.resolve(findWidget);\n    } else {\n      def.resolve(this.createWidget(setting, openOptions));\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param widget \n   * @param setting \n   */\n  private setWidgetPorp(widget: BaseWidget, setting) {\n    setting.rawConfig = _.cloneDeep(setting);\n    setting['class'] = 'jimu-widget';\n    if (!setting.label) {\n      setting.label = setting.name;\n    }\n    if (this.globalParams.mapConfig.is3D) {\n      if (this.view) {\n        setting.view = this.view;\n        widget.view = this.view;\n      }\n    } else {\n      if (this.map) {\n        setting.map = this.map;\n        widget.map = this.map;\n      }\n    }\n\n    widget.appConfig = this.appConfig;\n    widget.widgetConfig = setting;\n    widget.config = setting.config;\n    widget.configId = widget.id = setting.id;\n    widget.folderUrl = setting.folderUrl;\n    widget.icon = setting.icon;\n    widget.label = widget.title = widget.tooltip = setting.label;\n    widget[\"baseClass\"] = setting.class;\n    widget.gid = setting.gid;\n    widget.uri = setting.uri;\n    widget.openAtStart = setting.openAtStart === true;\n    if (setting.manifest\n      && setting.manifest.properties\n      && setting.manifest.properties.inPanel === false) {\n      widget.inPanel = setting.inPanel = setting.manifest.properties.inPanel;\n    } else {\n      widget.inPanel = setting.inPanel = true;\n    }\n  }\n  /**\n   * 创建组件\n   * @param setting \n   * @param clazz \n   * @param resouces \n   */\n  private async createWidget(setting: any, openOptions?: WidgetOpenOptions): Promise<any> {\n    const def = this.commonService.createPromiseDefer();\n    let widget;\n    let _widget = this.getWidgetById(setting.id);\n    if (_widget) {\n      def.resolve(_widget);\n      return def.promise();\n    }\n    try {\n      let comp = this.componentLoader.findComponent(setting.uri), compRef = null, inMap = false;\n      if (!comp) {\n        const _msg = 'widget [' + setting.uri + '] not find';\n        console.log(_msg);\n        def.reject(new Error(_msg));\n        return def.promise();\n      }\n      if (setting.position.relativeTo !== \"map\") {\n        compRef = this.componentLoader.createComponentToHome(comp);\n      } else {\n        compRef = this.componentLoader.createComponentToMap(comp);\n        inMap = true;\n      }\n      if (!compRef) {\n        const _msg = `widget [${setting.label}] create fail`;\n        console.log(_msg);\n        def.reject(new Error(_msg));\n        return def.promise();\n      }\n      widget = compRef.instance;\n      //compRef.componentType.getCompInfo() 获取组件信息\n\n      if (openOptions) {\n        widget.reqPara = openOptions.param;\n      }\n      //获取组件的config.json 或 manifest.json\n      if (!setting.config) {\n        await this.tryLoadWidgetConfig(setting);\n      }\n      if (!setting.manifest) {\n        await this.loadWidgetManifest(setting);\n      }\n      this.setWidgetPorp(widget, setting);\n      this.loaded.push(compRef);\n      console.log('widget [' + setting.uri + '] created.');\n      this.eventService.rss.emit(this.eventService._widgetCreated, widget);\n      def.resolve(compRef);\n    } catch (err) {\n      console.log('create [' + setting.uri + '] error:' + err.stack);\n      def.reject(err);\n    }\n    return def.promise();\n  }\n  /**\n   * 获取所有已经加载的组件\n   */\n  getAllWidgets() {\n    return this.loaded;\n  }\n  /**\n   * \n   * @param setting \n   */\n  loadWidgetClass(setting: any) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   * @param setting \n   */\n  loadWidgetResources(setting) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   * @param widgetJson \n   */\n  tryLoadWidgetConfig(widgetJson) {\n    var def = this.commonService.createPromiseDefer();\n    // modify by sy 2020/6/22 增加对configPath的支持\n    let configPath = widgetJson.configPath || 'config.json';\n    var url = widgetJson.folderUrl + configPath;\n    var foldrUrl = widgetJson.folderUrl.split('?');\n    if (foldrUrl.length > 0) {\n      url = foldrUrl[0] + configPath + '?' + (foldrUrl[1] ? foldrUrl[1] : '');\n    }\n\n    if (widgetJson.config) {\n      def.resolve(widgetJson);\n      return def.promise();\n    }\n    try {\n      this.httpService.getJsonFile(url).then((config) => {\n        widgetJson.config = config;\n        def.resolve(widgetJson);\n      }).catch(err => {\n        console.error(`load [${widgetJson.uri}] config.json error`);\n        console.error(err);\n        def.resolve(widgetJson);\n      });\n    } catch (error) {\n      console.error(error);\n      def.resolve(widgetJson);\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param setting \n   */\n  _tryLoadWidgetConfig(setting) {\n\n  }\n  /**\n   * \n   * @param widgetJson \n   */\n  loadWidgetManifest(widgetJson: any): Promise<any> {\n    let def = this.commonService.createPromiseDefer();\n    var url = widgetJson.folderUrl + 'manifest.json';\n    var foldrUrl = widgetJson.folderUrl.split('?');\n    if (foldrUrl.length > 0) {\n      url = foldrUrl[0] + 'manifest.json?' + (foldrUrl[1] ? foldrUrl[1] : '');\n    }\n\n    if (widgetJson.manifest) {\n      def.resolve(widgetJson);\n      return def.promise();\n    }\n    // if (jimuConfig.isDesignMode === true) {\n    //     url=appInfo.path+url;\n    // }\n    let process = (manifest) => {\n      manifest.amdFolder = widgetJson.amdFolder;\n      manifest.category = 'widget';\n      let _w = \"auto\", _h = \"auto\";\n      if (manifest.properties.inPanel !== false) {\n        //widget\n        _w = \"300\";\n        _h = \"400\";\n      }\n      if (typeof widgetJson.position.width === \"undefined\") {\n        widgetJson.position.width = _w;\n      }\n      if (typeof widgetJson.position.height === \"undefined\") {\n        widgetJson.position.height = _h;\n      }\n      if (!widgetJson.label) {\n        this.utils.addI18NLabel(manifest).then(() => {\n          this._processManifest(manifest);\n          this.utils.addManifest2WidgetJson(widgetJson, manifest);\n          def.resolve(widgetJson);\n        });\n      } else {\n        this._processManifest(manifest);\n        this.utils.addManifest2WidgetJson(widgetJson, manifest);\n        def.resolve(widgetJson);\n      }\n    }\n\n    this.httpService.getJsonFile(url).then(process).catch((err) => {\n      if (err.readyState === 4 && err.status === 200 && err.responseText === \"\") {\n        //有文件，内容为空\n        var manifest: any = {};\n        manifest.amdFolder = widgetJson.amdFolder;\n        manifest.category = 'widget';\n        process(manifest);\n      } else {\n        console.error(`load [${widgetJson.uri}] config.json error`);\n        console.error(err);\n        def.resolve(widgetJson);\n      }\n    });\n    return def.promise();\n  }\n  /**\n   * 加载widget的配置页面\n   * @param  setting \n   */\n  loadWidgetSettingPage(setting): Promise<any> {\n    const def = this.commonService.createPromiseDefer();\n    //待开发\n    return def.promise();\n  }\n  /**\n   * 加载setting类\n   * @param  setting \n   */\n  loadWidgetSettingClass(setting) {\n    var def = this.commonService.createPromiseDefer();\n    return def.promise();\n  }\n  /**\n   * 加载setting需要的资源\n   * @param  setting \n   */\n  loadWidgetSettingPageResources(setting) {\n    var def = this.commonService.createPromiseDefer();\n    //待开发\n    return def.promise();\n\n  }\n  /**\n   * 创建setting\n   * @param  setting \n   * @param  clazz \n   */\n  createWidgetSetting(setting, clazz) {\n    //待开发\n    return null;\n  }\n  _hideLoading() {\n\n  }\n  /**\n   * \n   * @param id \n   */\n  getWidgetById(id) {\n    var ret;\n    _.some(this.loaded, (w) => {\n      if (w.instance.id === id) {\n        ret = w;\n        return true;\n      }\n    });\n    return ret;\n  }\n  /**\n   * \n   * @param label \n   */\n  getWidgetByLabel(label) {\n    var ret;\n    _.some(this.loaded, (w) => {\n      if (w.instance.label === label) {\n        ret = w;\n        return true;\n      }\n    });\n    return ret;\n  }\n  /**\n   * \n   * @param name \n   */\n  getWidgetsByName(name) {\n    var ret = [];\n    _.some(this.loaded, (w) => {\n      if (w.instance.name === name) {\n        ret.push(w);\n      }\n    });\n    return ret;\n  }\n  /**\n   * \n   * @param groupId \n   */\n  getOpenedWidgetByGroupId(groupId) {\n    return _.find(this.loaded, (w) => {\n      return w.instance.gid === groupId && (w.instance.state === WidgetState.opened || w.instance.state === WidgetState.active);\n    });\n  }\n  /**\n   * \n   * @param compRef  ng 组件\n   */\n  showWidget(compRef: ComponentRef<BaseWidgetComponent>) {\n    if (!compRef) return;\n    let widget = compRef.instance;\n    if (typeof widget === 'string') {\n      widget = this.getWidgetById(widget);\n      if (!widget) {\n        return;\n      }\n    }\n    if (!widget.started) {\n      try {\n        widget.started = true;\n        if (widget.widgetConfig.position.relativeTo === \"browser\") {\n          this.componentLoader.showInHome(compRef);\n        } else {\n          this.componentLoader.showInMap(compRef);\n        }\n        widget.startup();\n      } catch (err) {\n        console.error('fail to startup widget ' + widget.name + '. ' + err.stack);\n      }\n    }\n    if (widget.state === WidgetState.closed) {\n      widget.setState(WidgetState.opened);\n      try {\n        widget.onOpen();\n      } catch (err) {\n        console.error('fail to open widget ' + widget.name + '. ' + err.stack);\n      }\n    }\n  }\n  /**\n   * \n   * @param widget \n   */\n  closeOtherWidgetsInTheSameGroup(widget: ComponentRef<BaseWidgetComponent>) {\n    if (typeof widget === 'string') {\n      widget = this.getWidgetById(widget);\n      if (!widget) {\n        return;\n      }\n    }\n    var widgets = this.getAllWidgets();\n    for (var i = 0; i < widgets.length; i++) {\n      if (widgets[i].instance.gid === widget.instance.gid && widgets[i].instance.id !== widget.instance.id) {\n        this.closeWidget(widgets[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param groupId \n   */\n  closeAllWidgetsInGroup(groupId) {\n    var widgets = this.getAllWidgets();\n    for (var i = 0; i < widgets.length; i++) {\n      if (widgets[i].instance.gid === groupId) {\n        this.closeWidget(widgets[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param widget \n   */\n  closeWidget(widget: ComponentRef<BaseWidgetComponent> | string) {\n    let def = this.commonService.createPromiseDefer();\n    let _widget: ComponentRef<BaseWidgetComponent>;\n    if (typeof widget === 'string') {\n      _widget = this.getWidgetById(widget);\n    } else {\n      _widget = widget;\n    }\n    if (!_widget) {\n      def.reject(new Error(\"widget is null\"));\n      return def.promise();\n    }\n    if (_widget.instance.state !== WidgetState.closed) {\n      try {\n        if (this.activeWidget && this.activeWidget.instance.id === _widget.instance.id) {\n          this.activeWidget.instance.onDeActive();\n          this.activeWidget = null;\n        }\n        this.commonService.getComponentRootNode(_widget).style.display = 'none';\n        _widget.instance.setState(WidgetState.closed);\n\n        _widget.instance.onClose();\n        def.resolve(_widget);\n      } catch (err) {\n        console.log(console.error('fail to close widget ' + _widget.instance.name + '. ' + err.stack));\n        def.reject(err);\n      }\n\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param widget \n   */\n  destroyWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    var m;\n    if (typeof widget === 'string') {\n      m = this.getWidgetById(widget);\n      if (!m) {\n        //maybe, the widget is loading\n        return;\n      } else {\n        widget = m;\n      }\n    }\n    this._removeWidget(widget);\n    try {\n      widget.destroy();\n      console.log('destroy widget [' + widget.instance.id + '].');\n    } catch (err) {\n      console.log(console.error('fail to destroy widget ' + widget.instance.name + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param manifest \n   */\n  _processManifest(manifest) {\n    this.utils.addManifestProperies(manifest);\n    this.utils.processManifestLabel(manifest, 'zh-cn');\n  }\n\n  /**\n   * \n   * @param setting \n   * @param flag \n   */\n  _tryLoadResource(setting, flag) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   * @param id \n   */\n  _replaceId(id) {\n    return id.replace(/\\//g, '_').replace(/\\./g, '_');\n  }\n  /**\n   * \n   * @param widgetSetting \n   */\n  loadWidgetStyle(widgetSetting) {\n    //待开发\n  }\n  /**\n   * \n   * @param widgetSetting \n   */\n  loadWidgetSettingStyle(widgetSetting) {\n    //待开发\n  }\n\n  loadWidgetConfig(widgetSetting) {\n    //待开发\n  }\n\n  loadWidgetI18n(widgetSetting) {\n\n  }\n\n  loadWidgetSettingI18n(widgetSetting) {\n\n  }\n\n  loadWidgetTemplate(widgetSetting) {\n    //待开发\n    return this.commonService.createPromiseDefer().promise();\n  }\n\n  loadWidgetSettingTemplate(widgetSetting) {\n\n    return this.commonService.createPromiseDefer().promise();\n  }\n  /**\n   * \n   */\n  getOnScreenOffPanelWidgets() {\n    return _.filter(this.loaded, function (widget) {\n      return (widget.instance.isOnScreen && !widget.instance.inPanel) || (widget.instance.widgetConfig.isOnScreen && !widget.instance.widgetConfig.inPanel);\n    });\n  }\n\n  _postWidgetStartup(widgetObject) {\n    //待开发\n  }\n  /**\n   * \n   * @param widget \n   */\n  _triggerMissedAction(widget: ComponentRef<BaseWidgetComponent>) {\n    this.missedActions.forEach(function (info) {\n      if (info.id === widget.instance.id) {\n        widget.instance.onAction(info.action.name, info.action.data);\n      }\n    });\n  }\n  /**\n   * \n   * @param id \n   */\n  _remove(id) {\n    return _.some(this.loaded, (w, i) => {\n      if (w.instance.id === id) {\n        this.loaded.splice(i, 1);\n        return true;\n      }\n    });\n  }\n  /**\n   * \n   * @param widget \n   */\n  _onDestroyWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    if (widget.instance.state !== WidgetState.closed) {\n      this.closeWidget(widget);\n    }\n    this._removeWidget(widget);\n    console.log('destroy widget [' + widget.instance.uri + '].');\n  }\n  _onDestroyWidgetSetting(settingWidget) {\n    this.removeWidgetSettingStyle(settingWidget);\n  }\n  /**\n   * \n   * @param widget \n   */\n  _removeWidget(widget: ComponentRef<BaseWidgetComponent>) {\n    var m;\n    if (typeof widget === 'string') {\n      m = this.getWidgetById(widget);\n      if (!m) {\n        return;\n      } else {\n        widget = m;\n      }\n    }\n\n    if (this.activeWidget && this.activeWidget.instance.id === widget.instance.id) {\n      this.activeWidget = null;\n    }\n    this._remove(widget.instance.id);\n    if (this.getWidgetsByName(widget.instance.name).length === 0) {\n      this.removeWidgetStyle(widget);\n    }\n  }\n  removeWidgetStyle(widget) {\n    //待开发\n  }\n  removeWidgetSettingStyle(widget) {\n    //待开发\n  }\n  _onClickWidget(widget, evt) {\n\n    this._activeWidget(widget);\n  }\n  _activeWidget(widget) {\n\n    //待开发\n  }\n  getOffPanelWidgets() {\n    return _.filter(this.loaded, function (widget) {\n      return !widget.instance.inPanel;\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport * as _ from \"lodash\";\nimport { WidgetManagerService } from './widget-manager.service';\nimport { UtilsService } from './utils.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport { CommonService } from './common.service';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { HttpReqService } from './request.service';\n\n/**\n * create by ruir 191014  configLoader.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigLoaderService {\n  urlParams: any = null;\n  appConfig: any = null;\n  rawAppConfig: any = null;\n  configFile: string = null;\n  _configLoaded: boolean = false;\n  portalSelf: any = null;\n  options: any = null;\n  constructor(\n    private widgetManager: WidgetManagerService,\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private globalParams: AppGlobalConfig,\n    private commonService: CommonService,\n    private componentLoader: ComponentLoaderService) {\n    this.urlParams = globalParams.urlParams;\n    this._removeHash(this.urlParams);\n  }\n  /**\n   * \n   * @param urlParams \n   */\n  private _removeHash(urlParams: any) {\n    for (var p in urlParams) {\n      if (urlParams[p]) {\n        urlParams[p] = urlParams[p].replace('#', '');\n      }\n    }\n  }\n  /**\n   * 加载总的配置文件（config.json）\n   */\n  loadConfig(config?: any): Promise<any> {\n    console.time('Load Config');\n    const def = this.commonService.createPromiseDefer();\n\n    const _processResult = (appConfig) => {\n      //原始配置\n      this.rawAppConfig = _.cloneDeep(appConfig);\n      let globalConfigTemp = _.cloneDeep(this.globalParams.mapConfig) ;\n      //0924改为合并全局配置\n      appConfig =_.merge(globalConfigTemp,appConfig);\n      appConfig = this._upgradeAppConfig(appConfig);\n      this._processAfterTryLoad(appConfig);\n      //config.json中有定义title时，以它为准\n      if (appConfig.title) {\n        document.title = appConfig.title;\n      }\n      this.loadWidgetsManifest(appConfig).then((appConfig) => {\n        return this._upgradeAllWidgetsConfig(appConfig);\n      }).then((appConfig) => {\n        this._configLoaded = true;\n        this.appConfig = appConfig;\n        def.resolve(this.getAppConfig());\n      });\n    }\n    if (typeof config === \"string\") {\n      this._tryLoadConfig(config).then(_processResult).catch((error) => {\n        if (error.readyState === 4 && error.status === 200 && error.responseText !== \"\") {\n          //当json文件mime类型配置为\"application/x-javascript\" 时，会将json当做字符串返回到这里\n          //这种情况其他有请求json的地方都需要修改\n          try {\n            var _obj = JSON.parse(error.responseText);\n          } catch (error) {\n            console.log(\"将json串转为对象出错\");\n            def.reject(error);\n            return;\n          }\n          _processResult(_obj);\n\n        } else {\n          console.log(\"Load Config error\");\n          def.reject(error);\n        }\n      });\n    } else {\n      _processResult(config);\n    }\n    return def.promise();\n  }\n  /**\n   * \n   */\n  getAppConfig() {\n    var c = _.clone(this.appConfig);\n    c.getConfigElementById = (id) => {\n      return this.utils.getConfigElementById(this, id);\n    };\n\n    c.getConfigElementsByName = (name) => {\n      return this.utils.getConfigElementsByName(this, name);\n    };\n\n    c.visitElement = (cb) => {\n      this.utils.visitElement(this, cb);\n    };\n\n    this._addAuthorizedCrossOriginDomains(this.portalSelf, c);\n\n    return c;\n  }\n  /**\n   * \n   * @param portalSelf \n   * @param appConfig \n   */\n  _addAuthorizedCrossOriginDomains(portalSelf, appConfig) {\n\n  }\n  /**\n   * \n   */\n  _tryLoadConfig(configJsonFile?: string) {\n    if (configJsonFile) {\n      this.configFile = configJsonFile;\n    } else {\n      this.configFile = this.globalParams.appInfo.configFile;\n    }\n    return this.httpService.getJsonFile(this.configFile);\n  }\n  _processAfterTryLoad(appConfig) {\n\n    //this._processUrlParams(appConfig);\n\n    this.addNeedValues(appConfig);\n    this.processProxy(appConfig);\n\n    return appConfig;\n  }\n  getUriInfo(uri) {\n    //已移植到utils\n  }\n  /**\n   * \n   * @param setting \n   */\n  processWidgetSetting(setting) {\n    this.utils.processWidgetSetting(setting);\n  }\n  /**\n   * \n   * @param appConfig \n   */\n  _processWidgetJsons(appConfig) {\n    this.utils.visitElement(appConfig, (e, info) => {\n      if (info.isWidget && e.uri) {\n        this.processWidgetSetting(e);\n      }\n    });\n  }\n\n  _processNoUriWidgets(appConfig) {\n    var i = 0;\n    this.utils.visitElement(appConfig, (e, info) => {\n      if (info.isWidget) {/* && !e.uri */\n        i++;\n        e.placeholderIndex = i;\n      }\n    });\n  }\n\n  _addElementId(appConfig) {\n    var maxId = 0,\n      i;\n\n    this.utils.visitElement(appConfig, (e) => {\n      if (!e.id) {\n        return;\n      }\n      //fix element id\n      e.id = e.id.replace(/\\//g, '_');\n\n      var li = e.id.lastIndexOf('_');\n      if (li > -1) {\n        i = e.id.substr(li + 1);\n        maxId = Math.max(maxId, i);\n      }\n    });\n\n    this.utils.visitElement(appConfig, (e) => {\n      if (!e.id) {\n        maxId++;\n        e.id = e.uri ? (e.uri.replace(/\\//g, '_') + '_' + maxId) : ('' + '_' + maxId);\n      }\n    });\n  }\n  addNeedValues(appConfig) {\n    this._processNoUriWidgets(appConfig);\n    this._addElementId(appConfig);\n    this._processWidgetJsons(appConfig);\n  }\n  processProxy(appConfig) {\n\n    if (appConfig.httpProxy && appConfig.httpProxy.useProxy && appConfig.httpProxy.url) { }\n    if (appConfig.httpProxy && appConfig.httpProxy.useProxy && appConfig.httpProxy.rules) {\n\n    }\n  }\n  _upgradeAppConfig(appConfig) {\n    var appVersion = this.globalParams.wabVersion;\n    var configVersion = appConfig.wabVersion;\n    var newConfig: any = {};\n\n    if (appVersion === configVersion) {\n      return appConfig;\n    } {\n\n      newConfig.isUpgraded = true;\n      return newConfig;\n    }\n  }\n  /**\n   * \n   * @param appConfig \n   */\n  _upgradeAllWidgetsConfig(appConfig): Promise<any> {\n    /*\n    var defs = [];\n    if (appConfig.isUpgraded !== undefined && !appConfig.isUpgraded) {\n      return Promise.resolve(appConfig);\n    }\n    delete appConfig.isUpgraded;\n    this.utils.visitElement(appConfig, (e) => {\n      if (!e.uri) {\n        return;\n      }\n      if (e.config) {\n        //更新\n        defs.push(this.widgetManager.tryLoadWidgetConfig(e));\n      } else {\n        e.version = e.manifest ? e.manifest.version : \"\";\n      }\n    });\n\n    Promise.all(defs).then(() => {\n      Promise.resolve(appConfig);\n    });*/\n    return Promise.resolve(appConfig);\n  }\n  /**\n   * \n   * @param config \n   */\n  loadWidgetsManifest(config: any) {\n    let defs = [], def = this.commonService.createPromiseDefer();\n\n    if (this.globalParams.jimuConfig.isSettings === true) {\n\n    } else {\n      this.utils.visitElement(config, (e) => {\n        if (!e.widgets && e.uri) {\n          const _path = this.componentLoader.getComponentPath(e.uri);\n          if (_path) {\n            e.folderUrl = e.amdFolder = this.globalParams.widgetRootPath + \"/\" + _path + \"/\";\n            if (e.icon) {\n              e.icon = this.globalParams.widgetRootPath + \"/\" + _path + \"/\" + e.icon;\n            }\n            defs.push(this.widgetManager.loadWidgetManifest(e));\n          } else {\n            console.log(`widget [${e.uri}] not config componentPath`);\n            defs.push(Promise.resolve(e));\n          }\n\n        }\n      });\n    }\n    Promise.all(defs).then(() => {\n      def.resolve(config);\n    });\n    return def.promise();\n  }\n  /**\n   * \n   * @param manifest \n   */\n  _addNeedValuesForManifest(manifest: Object) {\n    this.utils.addManifestProperies(manifest);\n    this.utils.processManifestLabel(manifest, this.globalParams.dojoConfig.locale);\n  }\n  /**\n   * \n   */\n  _loadMergedWidgetManifests() {\n    var file = this.globalParams.appInfo.appPath + 'widgets/widgets-manifest.json';\n    return this.httpService.getJsonFile(file);\n  }\n}\n","import { CommonService } from './common.service';\nimport { ConfigLoaderService } from './config-loader.service';\nimport { WidgetManagerService } from './widget-manager.service';\nimport { Injectable } from '@angular/core';\nimport { UtilsService } from './utils.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport * as _ from \"lodash\";\nimport { AppGlobalConfig } from '../models/app-config';\n/**\n * create by ruir 191014  configManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigManagerService {\n  urlParams: any = null;\n  appConfig: any = null;\n  configFile: any = null;\n  _configLoaded: any = false;\n  portalSelf: any = null;\n  _originConfig: any = null;\n\n  constructor(private utils: UtilsService,\n    private globalParams: AppGlobalConfig,\n    private eventService: EventEmitterService,\n    private widgetManager: WidgetManagerService,\n    private configLoader: ConfigLoaderService,\n    private commonService: CommonService) {\n    this.urlParams = globalParams.urlParams;\n    this.listenBuilderEvents();\n  }\n  listenBuilderEvents() {\n    this.eventService.rss.on(this.eventService._designConfigChanged, this._onDesignConfigChanged);\n  }\n  loadConfig(config?: any) {\n    //这if判断暂时注释，不知道当时的逻辑\n    // if (this.urlParams.mode === 'preview' ||\n    //   this.urlParams.mode === 'config') {\n    //   return;\n    // }\n    this.widgetManager.configLoader = this.configLoader;\n    return this.configLoader.loadConfig(config).then((appConfig) => {\n      this.portalSelf = this.configLoader.portalSelf;\n      this.appConfig = this._addDefaultValues(appConfig);\n\n      this.globalParams.appInfo.isRunInMobile = this._isRunInMobile();\n\n      if (this.appConfig.logo && this.globalParams.appInfo.folderUrlPrefix) {\n        this.appConfig.logo = this.globalParams.appInfo.folderUrlPrefix + \"/\" + this.appConfig.logo;\n      }\n      this.eventService.rss.emit(this.eventService._appConfigLoaded, this.appConfig);\n      //Rss.done(\"appConfigLoaded\", _self.appConfig);\n    }, function (err) {\n      console.error(err);\n      if (err && err.message && typeof err.message === 'string') {\n\n      }\n    });\n  }\n  _isRunInMobile() {\n    return false;\n  }\n  /**********************************************\n   * Add default values\n   ************************************************/\n  _addDefaultValues(config) {\n    this._addDefaultPortalUrl(config);\n    this._addDefaultGeometryService(config);\n    this._addDefaultStyle(config);\n    this._addDefaultMap(config);\n    this._addDefaultVisible(config);\n\n    //preload widgets\n    if (typeof config.widgetOnScreen === 'undefined') {\n      config.widgetOnScreen = {};\n    }\n\n    if (typeof config.widgetPool === 'undefined') {\n      config.widgetPool = {};\n    }\n    return config;\n  }\n\n  _addDefaultPortalUrl(config) {\n    config.portalUrl = 'https://www.supermap.com/cn';\n  }\n\n  _addDefaultGeometryService(appConfig) {\n\n\n  }\n\n  _addDefaultStyle(config) {\n    if (config.theme) {\n      if (!config.theme.styles || config.theme.styles.length === 0) {\n        config.theme.styles = ['default'];\n      }\n    }\n  }\n\n  _addDefaultMap(config) {\n    config.map.id = 'mapCantainer';\n\n    if (typeof config.map['3D'] === 'undefined' && typeof config.map['2D'] === 'undefined') {\n      config.map['2D'] = true;\n    }\n\n    if (typeof config.map.position === 'undefined') {\n      config.map.position = {\n        left: 0,\n        right: 0,\n        top: 0,\n        bottom: 0\n      };\n    }\n\n    if (typeof config.map.portalUrl === 'undefined') {\n      config.map.portalUrl = config.portalUrl;\n    }\n  }\n\n  _addDefaultVisible(config) {\n    if (config.visible === undefined) {\n      config.visible = true;\n    }\n  }\n\n  _addDefaultPanelAndPosition(config) {\n\n  }\n  processMenuWidgetConfig(menus) {\n\n    function visitHeaderMenu(widget: any, cb?: Function) { //支持子组件\n      if (widget.children && widget.children.length >= 1) {\n        for (var k = 0; k < widget.children.length; k++) {\n          var item = widget.children[k];\n          var tempobject: any = {\n            index: widget.index + \"\" + k,\n            isWidget: true,\n            groupId: section,\n            gid: section, //有的地方用的gid\n            isThemeWidget: false,\n            isOnScreen: isOnScreen,\n            isHeadMenu: isHeadMenu\n          };\n          tempobject.id = item.uri ? (item.uri.replace(/\\//g, '_') + '_' + (parseInt(tempobject.index) + 1)) : ('' + '_' + (parseInt(tempobject.index) + 1))\n          if (item.groupId || item.gid) {\n            tempobject.groupId = item.groupId || item.gid;\n            tempobject.gid = tempobject.groupId;\n          }\n          item = _.extend(item, tempobject)\n          this.utils.processWidgetUriPara(item);\n          if (item.isWidget && item.uri) {\n            _self.configLoader.processWidgetSetting(item);\n            //加载manifest\n            defs.push(_self.widgetManager.loadWidgetManifest(item));\n          }\n          visitHeaderMenu(item, cb);\n        }\n      }\n    }\n    var isHeadMenu = true, isOnScreen = false, i, section = \"widgetPool\";//headerMenu\n    var defs = [],\n      def = this.commonService.createPromiseDefer();\n    var maxId = this.appConfig.widgetOnScreen.widgets.length + 2;\n    i = maxId - 1; var _self = this;\n    _.forEach(menus, (widget, index, list) => {\n      widget.id = widget.uri ? (widget.uri.replace(/\\//g, '_') + '_' + maxId) : ('' + '_' + maxId);\n      widget.index = i;\n      //设置属性\n      widget.isWidget = true;\n      widget.groupId = section;\n      widget.gid = section;//有的地方用的gid\n      widget.isThemeWidget = widget.uri && widget.uri.indexOf('themes/' + _self.appConfig.theme.name) > -1;\n      widget.isOnScreen = isOnScreen;\n      widget.isHeadMenu = isHeadMenu;\n      widget.reqPara = {};\n      widget.version = undefined;\n      this.utils.processWidgetUriPara(widget);\n      visitHeaderMenu(widget);\n      if (widget.isWidget && widget.uri) {\n        _self.configLoader.processWidgetSetting(widget);\n        //加载manifest\n        defs.push(_self.widgetManager.loadWidgetManifest(widget));\n      }\n      i++;\n    });\n    Promise.all(defs).then(() => {\n      def.resolve(menus);\n    });\n    return def.promise();\n  }\n  _onWidgetAdded(obj, any) {\n    var widget = _.extend({}, obj);\n    //这里将原始的json对象，经过处理后传递给layoutmanager\n    //添加id\n    var maxId = this.appConfig.widgetOnScreen.widgets.length;\n    widget.id = widget.uri ? (widget.uri.replace(/\\//g, '_') + '_' + maxId) : ('' + '_' + maxId);\n    widget.index = maxId - 1;\n    //设置属性\n    widget.isWidget = true;\n    widget.groupId = \"widgetOnScreen\";\n    widget.gid = \"widgetOnScreen\";//有的地方用的gid\n    widget.isThemeWidget = widget.uri && widget.uri.indexOf('themes/' + this.appConfig.theme.name) > -1;\n    widget.isOnScreen = true;\n    widget.isHeadMenu = false;\n    widget.reqPara = {};\n    widget.version = undefined;\n    this.utils.processWidgetUriPara(widget);\n    if (widget.isWidget && widget.uri) {\n      this.configLoader.processWidgetSetting(widget);\n      //加载manifest\n      this.widgetManager.loadWidgetManifest(widget).then((config) => {\n        this.appConfig.widgetOnScreen.widgets.push(config);\n        // Rss.done(\"appConfigChanged\", { type: \"widgetAdded\", appConfig: _self.appConfig, data: config });\n        this.eventService.rss.emit(this.eventService._appConfigChanged, { type: \"widgetAdded\", appConfig: this.appConfig, data: config });\n      }).catch(function (err) {\n        console.log(\"loadWidgetManifest err\", err);\n      });\n    }\n\n  }\n  _getCleanConfig(config) {\n\n    var newConfig = _.clone(config);\n    var properties = this.utils.widgetProperties;\n\n    delete newConfig.mode;\n    this.utils.visitElement(newConfig, (e, info) => {\n      if (e.widgets) {\n        delete e.isOnScreen;\n        delete e.gid;\n        delete e.openType;\n        if (info.isOnScreen) {\n          if (e.panel && this.utils.isEqual(e.panel, newConfig.widgetOnScreen.panel)) {\n            delete e.panel;\n          }\n        }\n        return;\n      }\n\n      if (e.icon && e.icon === e.amdFolder + 'images/icon.png') {\n        delete e.icon;\n      }\n\n      delete e.panel;\n      delete e.folderUrl;\n      delete e.amdFolder;\n      delete e.thumbnail;\n      delete e.configFile;\n      delete e.gid;\n      delete e.isOnScreen;\n\n      properties.forEach(function (p) {\n        delete e[p];\n      });\n\n\n      if (e.visible) {\n        delete e.visible;\n      }\n      delete e.manifest;\n    });\n    delete newConfig.rawAppConfig;\n\n    delete newConfig._ssl;\n\n    delete newConfig.getConfigElementById;\n    delete newConfig.getConfigElementsByName;\n    delete newConfig.getConfigElementByLabel;\n\n    delete newConfig.getConfigElementsByUri;\n\n    delete newConfig.processNoUriWidgets;\n    delete newConfig.addElementId;\n    delete newConfig.getCleanConfig;\n    delete newConfig.visitElement;\n\n    delete newConfig.agolConfig;\n    delete newConfig._itemData;\n    delete newConfig.oldWabVersion;\n\n    return newConfig;\n  }\n  getAppConfig() {\n    var c;\n    if (this.globalParams.appInfo.isRunInMobile) {\n\n    } else {\n      c = _.clone(this.appConfig);\n    }\n\n    c.getConfigElementById = (id) => {\n      return this.utils.getConfigElementById(this, id);\n    };\n\n    c.getConfigElementByLabel = (label) => {\n      return this.utils.getConfigElementByLabel(this, label);\n    };\n\n    c.getConfigElementsByName = (name) => {\n      return this.utils.getConfigElementsByName(this, name);\n    };\n\n    c.getConfigElementsByUri = (uri) => {\n      return this.utils.getConfigElementsByUri(this, uri);\n    };\n\n    c.getCleanConfig = () => {\n      if (this._originConfig) {\n        return this._getCleanConfig(this._originConfig);\n      } else {\n        return this._getCleanConfig(this.appConfig);\n      }\n    };\n\n    c.visitElement = function (cb) {\n      this.utils.visitElement(this, cb);\n    };\n    return c;\n  }\n  _getAppConfigFromTheme(theme) {\n    var def = this.commonService.createPromiseDefer();\n    var config, styles = [];\n    var currentConfig = this.getAppConfig().getCleanConfig();\n\n    currentConfig.mode = this.urlParams.mode;\n\n    _.forEach(currentConfig.widgetPool.groups, (group) => {\n      delete group.panel;\n    });\n\n    if (theme.appConfig) {\n      config = _.clone(theme.appConfig);\n      config.map = currentConfig.map;\n      config.map.position = theme.appConfig.map.position;\n      // this._copyPoolToThemePool(currentConfig, config);\n\n      config.links = currentConfig.links;\n      config.title = currentConfig.title;\n      config.subtitle = currentConfig.subtitle;\n      config.logo = currentConfig.logo;\n    } else {\n\n    }\n\n    this.configLoader.addNeedValues(config);\n    this.configLoader.loadWidgetsManifest(config).then(() => {\n      this._addDefaultValues(config);\n      def.resolve(config);\n    });\n    return def.promise();\n  }\n  _onDesignConfigChanged(params) {\n\n    //根据不同事件处理相应的配置\n    var _preProcessConfig4Design = {\n      // type:'appAttributeChanged',\n      //     data:{\n      //     'appConfig':appConfig,\n      //     'changeData':{'title':'标题','subtitle':'副标题','logo':'1.jpg','links':'www.baidu.com'}\n      //     }\n      /**\n       * 基本信息改变 ，如logo，主、副标题\n       * @param  _params \n       * \n       */\n      appAttributeChanged: (_params) => {\n        _params.data.appConfig.logo = this.globalParams.appInfo.folderUrlPrefix + \"/\" + _params.data.appConfig.logo;\n        _params.data.changeData.logo = _params.data.appConfig.logo;\n        //Rss.done(\"appConfigChanged\", _params);\n\n      },\n      // type:'mapChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * 地图相关\n       * @param  _params \n       */\n      mapChanged: (_params) => {\n        var newJson = this.utils.reCreateObject(_params.data.appConfig.map);\n\n        if (newJson.itemId && newJson.itemId !== this.appConfig.map.itemId) {\n          if (this.appConfig.map.mapOptions) {\n            this.utils.deleteMapOptions(this.appConfig.map.mapOptions);\n          }\n        }\n        _.extend(this.appConfig.map, newJson);\n        // this.configLoader.addNeedValues(this.appConfig);\n        // this._addDefaultValues(this.appConfig);\n        _params.data.appConfig = this.getAppConfig();\n        // Rss.done(\"appConfigChanged\", _params);\n        this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n      },\n      // type:'themeChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * 主题\n       * @param  _params \n       */\n      themeChanged: (_params) => {\n        this._getAppConfigFromTheme(_params.data).then((config) => {\n          this.appConfig = config;\n          _params.data.appConfig = this.getAppConfig();\n          // Rss.done(\"appConfigChanged\", _params);\n          this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n        });\n      },\n      // type:'layoutChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * 布局\n       * @param  _params \n       */\n      layoutChanged: (_params) => {\n        this._getAppConfigFromTheme(_params.data).then((config) => {\n          this.appConfig = config;\n          _params.data.appConfig = this.getAppConfig();\n          // Rss.done(\"appConfigChanged\", _params);\n          this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n        });\n      },\n      // type:'styleChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{'name':'blue'}\n      // }\n      /**\n       * 样式\n       * @param  _params \n       */\n      styleChanged: (_params) => {\n        this.appConfig.theme.styles = this._genStyles(this.appConfig.theme.styles, _params.data.appConfig.theme.styles[0]);\n        _params.data.appConfig = this.getAppConfig();\n        // Rss.done(\"appConfigChanged\", _params);\n        this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n      },\n      // type:'widgetChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{\n      //     widgetList:[]//变更得widget数组，如果action为add，那这就是添加的widget，其他同理\n      // }\n      // \"action\":\"add\"//delete,modify\n      // }\n      /**\n       * widget\n       * @param  _params \n       */\n      widgetChanged: (_params) => {\n        _params.data.appConfig = this.getAppConfig();\n        // Rss.done(\"appConfigChanged\", _params);\n        this.eventService.rss.emit(this.eventService._appConfigChanged, _params);\n      },\n      // type:'widgetPoolChanged',\n      // data:{\n      // 'appConfig':appConfig,\n      // 'changeData':{}\n      // }\n      /**\n       * \n       * @param  _params \n       */\n      widgetPoolChanged: (_params: any) => {\n        _params.data.appConfig = this.getAppConfig();\n      }\n      // {\n      //     \"type\": \"actionTriggered\",\n      //     \"data\": {\n      //         \"actionInfo\": {\n      //             \"widget\": {\n\n      //             }\n      //             \"isOnScreen\": true,\n      //             \"action\": \"highLight\"\n      //         }\n      //         \"changeData\": {}\n      //     }\n      // }\n      , actionTriggered: (_params) => {\n        var id = \"\",\n          actionInfo = _params.data.actionInfo,\n          widget = actionInfo.widget,\n          cwidget = undefined\n          ;\n        if (widget.id) {\n          //cwidget = this.widgetManager.getWidgetById(widget.id);\n          id = widget.id;\n        }\n        else if (widget.uri || widget.oldUri) {\n          var uri = widget.uri ? widget.uri : widget.oldUri;\n          if (this.globalParams.appInfo.folderUrlPrefix) {\n            uri = this.globalParams.appInfo.folderUrlPrefix + \"/\" + uri;\n          }\n          var arr = this.utils.getConfigElementsByUri(this.appConfig, uri);\n          var _widget = _.find(arr, (w, index) => {\n            return w.isOnScreen === actionInfo.isOnScreen\n          });\n          if (_widget) {\n            // cwidget = this.widgetManager.getWidgetById(_widget.id);\n            id = _widget.id;\n          }\n        }\n        // if (cwidget) {//这只是widget\n        //     cwidget.onAction(actionInfo.action, _params);\n        // }\n        _params.data.eleid = id;\n        //Rss.done(\"appConfigChanged\", _params);\n\n      }\n    }\n    var _params = _.extend({}, params);\n    _preProcessConfig4Design[_params.type].call(this, _params);\n\n  }\n  _genStyles(allStyle, currentStyle) {\n    var styles = [];\n    styles.push(currentStyle);\n    _.forEach(allStyle, function (_style) {\n      if (styles.indexOf(_style) < 0) {\n        styles.push(_style);\n      }\n    });\n    return styles;\n  }\n\n}\n","import { WidgetState, WidgetWindowState, WidgetOpenOptions } from '../models/base-widget';\nimport { Injectable, ComponentFactoryResolver, ComponentRef, EmbeddedViewRef, ApplicationRef, ReflectiveInjector, ChangeDetectorRef } from '@angular/core';\n// import { Overlay, OverlayConfig, OverlayRef } from '@angular/cdk/overlay';\n// import { ComponentPortal } from '@angular/cdk/portal';\n// import { ComponentLoaderService } from './component-loader.service';\nimport { CommonService } from './common.service';\nimport { WidgetManagerService } from './widget-manager.service';\nimport * as _ from \"lodash\";\nimport { PanelOptions } from '../models/base-panel';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport { EventEmitterService } from './event-emitter.service';\nimport { OnScreenWidgetPanelComponent } from '../components/on-screen-widget-panel/on-screen-widget-panel.component';\nimport { BaseWidgetComponent } from '../components/base-widget/base-widget.component';\n\n/**\n * create by ruir 191014  panelManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class PanelManagerService {\n\n  // private _overlayConnectRef: OverlayRef;\n  // constructor(public overlay: Overlay, public ccc: ComponentLoaderService) {\n\n  // }\n  // globalOverlayPosition = 0;\n  // openPanel(viewContainer: ViewContainerRef) {\n  //   const strategy = this.overlay.position().connectedTo(\n  //     viewContainer.element.nativeElement, {\n  //     originX: 'end',\n  //     originY: 'top',\n  //   } {\n  //     overlayX: 'start',\n  //     overlayY: 'top'\n  //   }\n\n  //   );\n  //   strategy.withLockedPosition(true);\n  //   const config = new OverlayConfig({ positionStrategy: strategy });\n  //   config.scrollStrategy = this.overlay.scrollStrategies.reposition();\n  //   this._overlayConnectRef = this.overlay.create(config);\n  //   this._overlayConnectRef.attach(new ComponentPortal(OnScreenWidgetPanelComponent, viewContainer));\n  // }\n  // closePanel() {\n  //   if (this._overlayConnectRef && this._overlayConnectRef.hasAttached()) {\n  //     this._overlayConnectRef.dispose();\n  //   }\n  // }\n  /**\n   * 所有打开的panel\n   */\n  panels: Array<ComponentRef<OnScreenWidgetPanelComponent>> = [];\n  /**\n   * 当前激活的panel\n   */\n  activePanel: ComponentRef<OnScreenWidgetPanelComponent> = null;\n  map: any = null;\n  view: any = null;\n  /**\n   * \n   */\n  panelContainer: Element;\n  /**\n   * panel容器加载到map容器中\n   */\n  panelAddToMap: boolean = true;\n  /**\n   * \n   * @param commonService \n   * @param widgetManager \n   */\n  constructor(\n    private globalParams: AppGlobalConfig,\n    public commonService: CommonService,\n    public widgetManager: WidgetManagerService,\n    private appRef: ApplicationRef,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private componentLoader: ComponentLoaderService,\n    public eventService: EventEmitterService\n  ) {\n    this.eventService.rss.on(this.eventService._createPanelContainer, (ele) => {\n      this.createPanelContainer(ele); //直接写居然不执行？？？\n    });\n    this.eventService.rss.on(this.eventService._mapPositionChanged, (pos) => {\n      this.onMapResize();\n    });\n  }\n  /**\n   * \n   * @param component \n   * @param params \n   */\n  private create<T>(component: ComponentType<T>, params: any) {\n    let inputs = {};\n    if (params) {\n      inputs = params;\n    }\n    let inputProviders = Object.keys(inputs).map((inputName) => {\n      return { provide: inputName, useValue: inputs[inputName] };\n    });\n\n    const factory = this.componentFactoryResolver.resolveComponentFactory(component);\n    const compRef = factory.create(ReflectiveInjector.resolveAndCreate(inputProviders));\n    return compRef;\n  }\n\n  /**\n   * \n   */\n  private createPanelContainer(eleMapContainer: HTMLElement) {\n    // 容器\n    let container = document.querySelector(\".sspanel_container\");\n    if (container == null) {\n      container = window.document.createElement(\"div\");\n      container.className = \"sspanel_container\";\n      if (this.commonService.isMobileNotTablet()) {\n        //this.componentLoader.viewContainerInHome.element.nativeElement.parentElement.parentElement.parentElement\n        const ionApp = document.querySelector(\"ion-app\");\n        if (ionApp) {\n          ionApp.appendChild(container);\n        } else {\n          window.document.body.appendChild(container);\n        }\n\n      } else {\n        if (this.panelAddToMap) {\n          if (eleMapContainer) {\n            eleMapContainer.appendChild(container);\n          } else {\n            window.document.body.appendChild(container);\n          }\n        } else {\n          window.document.body.appendChild(container);\n        }\n      }\n    }\n    this.panelContainer = container;\n  }\n  /**\n   * \n   * @param panel \n   */\n  private show(panel: ComponentRef<OnScreenWidgetPanelComponent>) {\n    if (!panel.instance.started) {\n      if (panel.instance.isDockable()) {\n        this.componentLoader.showInHome(panel);\n      } else {\n        this.panelContainer.appendChild(this.commonService.getComponentRootNode(panel));\n        // 加入angular脏检查\n        this.appRef.attachView(panel.hostView);\n      }\n    }\n  }\n\n  /**\n   * \n   * @param map 二维地图或三维场景\n   */\n  setMap(map) {\n    if (this.globalParams.mapConfig.is3D === true) {\n      this.view = map;\n    } else {\n      this.map = map;\n    }\n  }\n  /**\n   * 获取panel组件uri\n   * @param widgetConfig \n   */\n  private _findPanelUri(widgetConfig: any) {\n    const _uri_default: string = \"epsgis-on-screen-widget-panel\";\n    if (this.commonService.isMobileNotTablet()) {\n      //检查是否有停靠[左停靠=》drawer，右停靠=》drawerRight，底部停靠=》action] \n      if (widgetConfig.panel) {\n        switch (widgetConfig.panel.dock) {\n          case \"left\": return \"epsgis-mobile-drawer-panel\";\n          case \"right\": return \"epsgis-mobile-drawer-right-panel\";\n          case \"bottom\": return \"epsgis-mobile-action-panel\";\n        }\n        //uri 之前的配置方式，倒是也可以不要\n        switch (widgetConfig.panel.uri) {\n          case \"epsgis-dockable-panel-at-left\":\n            return \"epsgis-mobile-drawer-panel\"\n          case \"epsgis-dockable-panel-at-bottom\":\n            return \"epsgis-mobile-action-panel\";\n          case \"epsgis-dockable-panel-at-right\":\n            return \"epsgis-mobile-drawer-right-panel\";\n        }\n      }\n      if (widgetConfig.mobile && widgetConfig.mobile.mode) {\n        switch (widgetConfig.mobile.mode.toLowerCase()) {\n          case \"drawer\":\n            return \"epsgis-mobile-drawer-panel\";\n          case \"drawerright\":\n            return \"epsgis-mobile-drawer-right-panel\";\n          case \"modal\":\n            return \"epsgis-mobile-modal-panel\";\n          case \"popup\":\n            return \"epsgis-mobile-popup-panel\";\n          case \"popover\":\n            return _uri_default;\n        }\n      }\n      return \"epsgis-mobile-action-panel\";\n    } else {\n      if (widgetConfig.panel) {\n        switch (widgetConfig.panel.dock) {\n          case \"left\": return \"epsgis-dockable-panel-at-left\";\n          case \"right\": return \"epsgis-dockable-panel-at-right\";\n          case \"bottom\": return \"epsgis-dockable-panel-at-bottom\";\n        }\n        if (widgetConfig.panel.uri) {\n          return widgetConfig.panel.uri;\n        }\n      }\n      return _uri_default;\n    }\n  }\n  /**\n   * \n   * @param config \n   * @param widget\n   * @param options \n   */\n  showPanel(config: any, widget?: ComponentRef<BaseWidgetComponent>, options?: PanelOptions, openOptions?: WidgetOpenOptions): Promise<ComponentRef<OnScreenWidgetPanelComponent>> {\n    let def = this.commonService.createPromiseDefer();\n    let pid = config.id + '_panel',\n      panel = this.getPanelById(pid);\n    if (panel) {\n      if (panel.instance.state === WidgetState.closed) {\n        if (openOptions) {\n          panel.instance.reqPara = openOptions.param;\n          if (panel.instance.widget) {\n            panel.instance.widget.instance.reqPara = openOptions.param; //config.reqPara;\n          }\n        }\n        this.openPanel(panel);\n      }\n      def.resolve(panel);\n    } else {\n      try {\n        const _comp = this.componentLoader.findComponent(this._findPanelUri(config));\n        if (!_comp) {\n          const _msg = `not find panel [${config.panel.uri}]`;\n          console.error(_msg);\n          return def.reject(new Error(_msg));\n        }\n        panel = this.componentLoader.createComponent(_comp);\n        if (!options) {\n          options = {};\n          options.id = pid;\n          options.title = config.label;\n        }\n        options.buttonMaximize = !(config.maximizable === false);\n        options.buttonCollapse = !(config.collapsible === false);\n        options.modal = config.modal === true;\n        if (openOptions && openOptions.panel) {\n          options = _.merge(options, openOptions.panel);\n        }\n        panel.instance.label = panel.instance.title = panel.instance.tooltip = config.label;\n        panel.instance.widgetConfig = config;\n        if (this.globalParams.mapConfig.is3D) {\n          panel.instance.view = this.view;\n        } else {\n          panel.instance.map = this.map;\n        }\n        panel.instance.id = pid;\n        panel.instance.gid = config.gid;\n        if (openOptions) {\n          panel.instance.reqPara = openOptions.param;\n        }\n        panel.instance.setOptions(options);\n        panel.instance.setPosition(config.position);\n        if (widget) {\n          panel.instance.setWidget(widget);\n          panel.instance.widget.instance.reqPara = openOptions.param;\n        }\n        console.log('panel [' + pid + '] created.');\n        this.openPanel(panel);\n        this.panels.push(panel);\n        def.resolve(panel);\n      } catch (error) {\n        console.log('create panel error: ' + error + ', panelId: ' + pid);\n        def.reject(error);\n        return;\n      }\n    }\n    return def.promise();\n  }\n  /**\n   * 打开panel（静态内容或网页地址）\n   * @param  panelOptions panel的参数配置\n   *  {\n          id: \"ss_panel\",\n          title: \"SS Panel\",\n          modal: false\n          buttonsPosition: \"right\"\n          draggable: true\n          resizable: true\n          statusBar: false,\n          top: \"auto\",\n          left: \"auto\",\n          right: \"auto\",\n          bottom: \"auto\",\n          height: 200,\n          width: 400,\n          maxHeight: undefined,\n          maxWidth: undefined,\n          minHeight: 100,\n          minWidth: 200,\n          dockSide: \"\", //bottom\n          innerHtml:\"\",//静态内容\n          url:\"\"//设置URL时，嵌套iframe\n      }\n   */\n  /**\n   * \n   * @param panelOptions \n   */\n  showPanelNotWidget(panelOptions: PanelOptions) {\n    let position = {\n      width: panelOptions.width + 'px',\n      height: panelOptions.height + 'px',\n      relativeTo: panelOptions.relativeTo,\n    };\n    let config = {\n      id: panelOptions.id ? panelOptions.id : \"ss_panel\",\n      label: panelOptions.title ? panelOptions.title : \"SS Panel\",\n      position: position,\n      dockSide:panelOptions.dockSide,\n      panel: {\n        uri: 'epsgis-iframe-panel'    \n      },\n      resizable:panelOptions.resizable,\n      draggable:panelOptions.draggable,\n      gid: \"panelOfNotWidget\"\n    };\n    this.closeAllPanelsInGroup(config.gid);\n    let def = this.commonService.createPromiseDefer();\n    let pid = config.id,\n      panel = this.getPanelById(pid);\n    if (panel) {\n      if (panel.instance.state === WidgetState.closed) {\n        this.openPanel(panel);\n      }\n      def.resolve(panel);\n    } else {\n\n      this.showPanel(config, null, panelOptions);\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param panel \n   */\n  closeOtherPanelsInTheSameGroup(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.isDockable()) continue;\n      if (this.panels[i].instance.gid === panel.instance.gid\n        && this.panels[i].instance.id !== panel.instance.id) {\n        this.closePanel(this.panels[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param groupId \n   */\n  closeAllPanelsInGroup(groupId: string) {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.isDockable()) continue;\n      if (this.panels[i].instance.gid === groupId) {\n\n        this.closePanel(this.panels[i]);\n      }\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  openPanel(panel: ComponentRef<OnScreenWidgetPanelComponent>) {// | string\n    let def = this.commonService.createPromiseDefer();\n    if (!panel.instance.started) {\n      try {\n        this.show(panel);\n      } catch (err) {\n        console.error('fail to startup panel ' + panel.instance.id + '. ' + err.stack);\n      }\n    }\n\n    if (panel.instance.state === WidgetState.opened) {\n      def.resolve(panel);\n      return def.promise();\n    }\n    if (panel.instance.started) {\n      panel.instance.setState(WidgetState.opened);\n      this.playOpenPanelAnimation(panel).then(() => {\n        this._activePanel(panel);\n        def.resolve(panel);\n      });\n    }\n    return def.promise();\n  }\n  /**\n   * \n   * @param panel \n   */\n  closePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    let def = this.commonService.createPromiseDefer();\n    let _panel: ComponentRef<OnScreenWidgetPanelComponent>;\n    if (typeof panel === 'string') {\n      _panel = this.getPanelById(panel);\n    } else {\n      _panel = <ComponentRef<OnScreenWidgetPanelComponent>>panel;\n    }\n    if (!_panel) {\n      def.reject(new Error(\"panel is null\"));\n      return def.promise();\n    }\n    if (_panel.instance.state === WidgetState.closed) {\n      def.resolve(_panel);\n      return def.promise();\n    }\n    this.playClosePanelAnimation(_panel).then(() => {\n      if (this.activePanel && this.activePanel.instance.id === _panel.instance.id) {\n        this.activePanel.instance.onDeActive();\n        this.activePanel = null;\n      }\n      _panel.instance.setState(WidgetState.closed);\n      def.resolve(_panel);\n    });\n    return def.promise();\n  }\n  /**\n   * \n   * @param panel \n   */\n  minimizePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state === WidgetState.closed) {\n      this.openPanel(panel);\n    }\n\n    panel.instance.setWindowState(WidgetWindowState.minimized);\n\n    try {\n      panel.instance.onMinimize();\n    } catch (err) {\n      console.log(console.error('fail to minimize panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  maximizePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state === WidgetState.closed) {\n      this.openPanel(panel);\n    }\n\n    panel.instance.setWindowState(WidgetWindowState.maximized);\n    try {\n      panel.instance.onMaximize();\n    } catch (err) {\n      console.log(console.error('fail to maximize panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  normalizePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state === WidgetState.closed) {\n      this.openPanel(panel);\n    }\n\n    panel.instance.setWindowState(WidgetWindowState.normal);\n    try {\n      panel.instance.onNormalize();\n    } catch (err) {\n      console.log(console.error('fail to noralize panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   * @param panel \n   * @param state \n   */\n  changeWindowStateTo(panel: ComponentRef<OnScreenWidgetPanelComponent> | string, state: WidgetWindowState) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (state === WidgetWindowState.normal) {\n      this.normalizePanel(panel);\n    } else if (state === WidgetWindowState.minimized) {\n      this.minimizePanel(panel);\n    } else if (state === WidgetWindowState.maximized) {\n      this.maximizePanel(panel);\n    } else {\n      console.log('error state: ' + state);\n    }\n  }\n  /**\n   * \n   * @param pid \n   */\n  getPanelById(pid: string) {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.id === pid) {\n        return this.panels[i];\n      }\n    }\n  }\n  /**\n   * \n   */\n  onWindowResize() {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.state !== WidgetState.closed &&\n        this.panels[i].instance.position.relativeTo !== 'map') {\n        this.panels[i].instance.resize();\n      }\n    }\n  }\n  /**\n   * \n   */\n  onMapResize() {\n    for (let i = 0; i < this.panels.length; i++) {\n      if (this.panels[i].instance.isDockable()) {\n        this.panels[i].instance.resize();\n      } else {\n        // if (this.panels[i].instance.state !== WidgetState.closed &&\n        //   this.panels[i].instance.position.relativeTo === 'browser') {\n        //   if (this.panels[i].instance.panelIcon) {\n        //     this.panels[i].instance.resize(this.panels[i].instance.panelIcon.resetPanelPosition());\n        //   } else {\n        //     //咋玩?\n        //   }\n        // }\n      }\n    }\n  }\n  /**\n   * \n   * @param panel \n   */\n  destroyPanel(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return;\n      }\n    }\n\n    if (panel.instance.state !== WidgetState.closed) {\n      this.closePanel(panel);\n    }\n    this._removePanel(panel);\n    try {\n      panel.destroy();\n      console.log('destroy panel [' + panel.instance.id + '].');\n    } catch (err) {\n      console.log(console.error('fail to destroy panel ' + panel.instance.id + '. ' + err.stack));\n    }\n  }\n  /**\n   * \n   */\n  destroyAllPanels() {\n    let allPanelIds = _.map(this.panels, function (panel) {\n      return panel.instance.id;\n    });\n    _.forEach(allPanelIds, (panelId) => {\n      this.destroyPanel(panelId);\n    });\n    this.panels = [];\n  }\n  /**\n   * \n   * @param panel \n   */\n  playOpenPanelAnimation(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    return Promise.resolve(true);\n  }\n  /**\n   * \n   * @param panel \n   */\n  playClosePanelAnimation(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n    return Promise.resolve(true);\n  }\n  /**\n   * \n   * @param panel \n   */\n  getPositionOnMobile(panel: string | ComponentRef<OnScreenWidgetPanelComponent>) {\n\n    if (typeof panel === 'string') {\n      panel = this.getPanelById(panel);\n      if (!panel) {\n        return {};\n      }\n    }\n    //待开发\n  }\n  /**\n   * \n   * @param panel \n   */\n  _onPanelClick(panel) {\n    this._activePanel(panel);\n  }\n  /**\n   * \n   * @param panel \n   */\n  _activePanel(panel: ComponentRef<OnScreenWidgetPanelComponent> | string) {\n    if (typeof panel === \"string\") {\n      panel = this.getPanelById(panel);\n    }\n    if (!panel) return;\n    if (panel.instance.isDockable()) return;\n    if (this.activePanel) {\n      if (this.activePanel.instance.id === panel[\"instance\"].id) {\n        if (this.activePanel.instance.moveTopOnActive) {\n          this.activePanel.instance.setZIndex(\"active\");\n        }\n        return;\n      }\n      if (this.activePanel.instance.state === WidgetState.active) {\n        this.activePanel.instance.setState(WidgetState.opened);\n        if (this.activePanel.instance.position.zIndex !== 'undefined') {\n          // this.activePanel.instance.setZIndex(this.activePanel.instance.position.zIndex);\n          this.activePanel.instance.setZIndex(\"deactive\");\n        } else {\n          this.activePanel.instance.setZIndex(\"deactive\");\n        }\n        this.activePanel.instance.onDeActive();\n      }\n    }\n\n    let aw = this.widgetManager.activeWidget;\n    if (aw && aw.instance.state === WidgetState.active && aw.instance.getPanel() !== panel) {\n      aw.instance.setState(WidgetState.opened);\n      if (aw.instance.inPanel === false) {\n        if (aw.instance.position.zIndex !== 'undefined') {\n          // aw.instance.setZIndex(aw.instance.position.zIndex);\n          aw.instance.setZIndex(\"deactive\");\n        } else {\n          aw.instance.setZIndex(\"deactive\");\n        }\n      }\n      aw.instance.onDeActive();\n      this.widgetManager.activeWidget = null;\n    }\n\n    this.activePanel = panel;\n    if (this.activePanel.instance.state === WidgetState.active) {\n      return;\n    }\n    this.activePanel.instance.setState(WidgetState.active);\n    if (this.activePanel.instance.moveTopOnActive) {\n      this.activePanel.instance.setZIndex(\"active\");\n    }\n    _.forEach(this.panels, (p, index, arr) => {\n      if (p.instance.isDockable() == false && p.instance.id != this.activePanel.instance.id) {\n        p.instance.setZIndex(\"deactive\");\n      }\n    });\n    this.activePanel.instance.onActive();\n\n  }\n  /**\n   * \n   * @param panel \n   */\n  _removePanel(panel: ComponentRef<OnScreenWidgetPanelComponent>) {\n    let index = this.panels.indexOf(panel);\n    if (index > -1) {\n      this.panels.splice(index, 1);\n    }\n\n    if (this.activePanel && this.activePanel.instance.id === panel.instance.id) {\n      this.activePanel = null;\n    }\n  }\n\n  _onMoveStart(mover) {\n    //\n  }\n  /**\n   * \n   * @param widget \n   */\n  _onWidgetActived(widget) {\n    if (this.activePanel &&\n      this.activePanel.instance.state === WidgetState.active &&\n      widget.getPanel() !== this.activePanel) {\n      this.activePanel.instance.setState(WidgetState.opened);\n\n      if (this.activePanel.instance.position.zIndex !== 'undefined') {\n        //待开发 设置index\n      } else {\n        //待开发 设置index\n      }\n      this.activePanel.instance.onDeActive();\n      this.activePanel = null;\n    }\n  }\n\n  _loadPanelClass(panelUri) {\n\n  }\n\n  _loadThemeI18N(panelUri) {\n\n  }\n  getAllPanels() {\n    return this.panels;\n  }\n}\nexport interface ComponentType<T> {\n  new(...args: any[]): T;\n}\n","import { aspect, TestAspect } from './aspect.service';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { Injectable, Injector, ComponentRef } from '@angular/core';\nimport { UtilsService } from './utils.service';\nimport { HttpReqService } from './request.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport { CommonService } from './common.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport * as _ from 'lodash';\n/**\n * create by ruir 191014  mapManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class MapManagerService {\n  originMapPosition: any = null;\n  mapPosition: any = null;\n  appConfig: any = null;\n  id: string = \"\";\n  mapDivId: string = '';\n  map: any = null;\n  view: any = null;\n  previousInfoWindow: any = null;\n  mobileInfoWindow: any = null;\n  isMobileInfoWindow: boolean = false;\n  tiandituToken: string = \"95c02448602e3ee0683e07de5e772e96\";//后面放config\n  layerInfosObj: any = null;\n  options: any = null;\n  urlParams: any = null;\n  comRefMap: ComponentRef<any> = null;\n  //componentLoader:ComponentLoaderService;\n  constructor(\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private globalParams: AppGlobalConfig,\n    private eventService: EventEmitterService,\n    private commonService: CommonService,\n    private componentLoader: ComponentLoaderService\n    //private injector: Injector\n  ) {\n    // setTimeout(() => {\n\n    // Promise.resolve().then(() => {\n    //   this.componentLoader = injector.get(ComponentLoaderService);\n    // });\n    // }, 600);\n    this.mapDivId = this.id = this.globalParams.jimuConfig.mapId;\n    this.urlParams = this.globalParams.urlParams;\n  }\n  setAppConfig(config) {\n    this.appConfig = config;\n  }\n  restorePosition() {\n    this.changeMapPosition(this.originMapPosition);\n  }\n  changeMapPosition(position, triggerEvent: boolean = true) {\n    this.mapPosition = _.merge(this.mapPosition, position);\n    this.commonService.setWidgetPosition(this.comRefMap, this.mapPosition);\n    if (this.comRefMap.instance.resize) {\n      this.comRefMap.instance.resize();\n    }\n    if (triggerEvent) {\n      this.eventService.rss.emit(this.eventService._mapPositionChanged, this.mapPosition);\n    }\n  }\n  setMapPosition(position) {\n    this.mapPosition = position;\n    this.originMapPosition = _.cloneDeep(position);\n    //待开发\n  }\n\n  getMapPosition() {\n    return this.mapPosition;\n  }\n  centerAtMap(lgtd, lttd, s) {\n\n  }\n  async showMap() {\n    let mapComp = this.componentLoader.findComponent(this.appConfig.map.uri);\n    if (!mapComp) {\n      console.log(\"没有找到map组件，请检查config.json文件map[uri]配置\");\n      return;\n    }\n    const _path = (typeof mapComp.prototype.getCompInfo === \"function\") ? mapComp.prototype.getCompInfo().path : \"\";\n    let _config, _manifest;\n    if (_path) {\n      try {\n        const _rpath = this.globalParams.widgetRootPath + \"/\" + _path;\n        _manifest = await this.httpService.getJsonFile(_rpath + \"/manifest.json\");\n        // modify by sy 2020/6/22 增加对configPath和config的支持\n        _config = this.appConfig.map.config;\n        if (!_config) {\n          let configPath = this.appConfig.map.configPath || 'config.json';\n          _config = await this.httpService.getJsonFile(_rpath + \"/\" + configPath);\n        }\n        // this.appConfig.map.config = _config;\n        // this.appConfig.map.manifest = _manifest;\n      } catch (err) {\n        console.log(err);\n      }\n    }\n    this.comRefMap = this.componentLoader.createComponentToHome(mapComp);\n    // this.comRefMap.instance.showSettingWhenInPanel=true;\n    this.comRefMap.instance.setProps({\n      appConfig: this.appConfig,\n      config: _config,\n      manifest: _manifest\n    });\n    let _position = _.cloneDeep(this.appConfig.map.position);\n    // if (_position.top) {\n    //   if (_position.height === \"100%\") {\n    //     const _top: number = parseInt(this.commonService.getPxNumber(_position.top.toString()).toString(), 10);\n    //     const h = document.body.clientHeight - _top;\n    //     _position.height = this.commonService.getPx(h);\n    //   }\n    // }\n    this.commonService.setWidgetPosition(this.comRefMap, _position);\n    //aspect.after(this.comRefMap.instance, \"ngOnInit\", this.test);\n    aspect.after(this.comRefMap.instance, \"afterNgOnInit\", ()=>{\n      this.initMap();\n    });\n    this.componentLoader.showInHome(this.comRefMap);\n    //this.comRefMap.instance[\"ngOnInit\"]();\n    // const test = new TestAspect();\n    // aspect.before(test, \"testBefore\", () => {\n    //   console.log(\"testBefore complate\");\n    // });\n    // aspect.after(test, \"testAfter\", () => {\n    //   console.log(\"testAfter complate\");\n    // });\n    // aspect.around(test, \"testAround\", () => {\n    //   console.log(\"testAround complate\");\n    // });\n    // test.testBefore();\n    // test.testAfter();\n    // test.testAround();\n\n  }\n  /**\n   * 销毁地图组件\n   */\n  destoryMap() {\n    if (this.comRefMap) {\n      this.comRefMap.destroy();\n      console.log('destroy map.');\n    }\n  }\n  initMap() {\n    this.comRefMap.instance.initMap().then((map) => {\n      console.log('map loaded.');\n      if (this.globalParams.mapConfig.is3D === true) {\n        this.view = map;\n        this.comRefMap.instance.view = map;\n      } else {\n        this.comRefMap.instance.map = map;\n        this.map = map;\n      }\n      //因有openAtStart的panel，所以先创建panel容器\n      this.eventService.rss.emit(this.eventService._createPanelContainer, this.commonService.getComponentRootNode(this.comRefMap));\n      //再加载地图及组件\n      this.eventService.rss.emit(this.eventService._mapLoaded, map);\n    }, (msg) => {\n      console.log(msg);\n    });\n  }\n}\n","import { MapManagerService } from './map-manager.service';\nimport { WidgetManagerService } from './widget-manager.service';\nimport { PanelManagerService } from './panel-manager.service';\nimport { Injectable, ComponentRef, ChangeDetectorRef } from '@angular/core';\nimport * as _ from 'lodash';\nimport { UtilsService } from './utils.service';\nimport { HttpReqService } from './request.service';\nimport { EventEmitterService } from './event-emitter.service';\nimport { CommonService } from './common.service';\nimport { AppGlobalConfig } from '../models/app-config';\nimport { ComponentLoaderService } from './component-loader.service';\nimport { OnScreenWidgetIconComponent } from '../components/on-screen-widget-icon/on-screen-widget-icon.component';\nimport { aspect } from './aspect.service';\n/**\n * create by ruir 191014  layoutManager.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class LayoutManagerService {\n\n  map: any = null\n  view: any = null;\n  mapId: string = 'mapContainer';\n  widgetPlaceholders: Array<any> = [];\n  preloadWidgetIcons: Array<ComponentRef<OnScreenWidgetIconComponent>> = [];\n  preloadGroupPanels: Array<any> = [];\n  invisibleWidgetIds: Array<any> = [];\n  id: string = \"\";\n  urlParams: any = \"\";\n  appConfig: any = null;\n  constructor(\n    private panelManager: PanelManagerService,\n    private widgetManager: WidgetManagerService,\n    private utils: UtilsService,\n    private httpService: HttpReqService,\n    private globalParams: AppGlobalConfig,\n    public eventService: EventEmitterService,\n    private commonService: CommonService,\n    private mapManager: MapManagerService,\n    private componentLoader: ComponentLoaderService\n    // @Inject(forwardRef(() => MapManagerService))\n    // @Optional() private mapManager: MapManagerService\n  ) {\n    this.widgetPlaceholders = [];\n    this.preloadWidgetIcons = [];\n    this.preloadGroupPanels = [];\n    this.invisibleWidgetIds = [];\n\n    this.eventService.rss.on(this.eventService._appConfigLoaded, (config) => this.onAppConfigLoaded(config));\n    this.eventService.rss.on(this.eventService._appConfigChanged, (config) => this.onAppConfigChanged(config));\n    this.eventService.rss.on(this.eventService._mapLoaded, (map) => this.onMapLoaded(map));\n    this.eventService.rss.on(this.eventService._mapChanged, (map) => this.onMapChanged(map));\n    this.eventService.rss.on(this.eventService._viewChanged, (view) => this.onViewChanged(view));\n    //待开发\n  }\n  startup() {\n    console.log(\"layout startup\");\n    this.widgetManager.panelManager = this.panelManager;\n  }\n  resize() {\n    _.forEach(this.widgetManager.getAllWidgets(), (w) => {\n      if (w.instance.inPanel === false) {\n        w.instance.resize();\n      }\n    });\n  }\n  onAppConfigLoaded(config) {\n    this.appConfig = config;\n    if (this.appConfig.theme) {\n      this._loadTheme(this.appConfig.theme);\n    }\n    this._loadMap();\n  }\n  onAppConfigChanged(params) {\n  }\n  _loadMap() {\n    //待开发\n    this.mapManager.setAppConfig(this.appConfig);\n    this.mapManager.setMapPosition(this.appConfig.map.position);\n    this.mapManager.showMap();/*.then(map=>{\n      this.onMapLoaded(map);\n    });*/\n  }\n  onMapLoaded(map) {\n    if (this.globalParams.mapConfig.is3D === true) {\n      this.view = map;\n    } else {\n      this.map = map;\n    }\n    this.panelManager.setMap(map);\n    this.widgetManager.setMap(map);\n    this.widgetManager.setAppConfig(this.appConfig);\n    this._loadPreloadWidgets(this.appConfig);\n  }\n  /**\n   * \n   * @param map \n   */\n  onMapChanged(map) {\n    this.map = map;\n    this.panelManager.map = map;//.setMap(map);\n    this.widgetManager.map = map;//.setMap(map);\n    this.mapManager.map = map;\n    this.preloadWidgetIcons.forEach(icon => {\n      icon.instance.map = this.map;\n      icon.instance.onMapChange(this.map);\n    });\n    this.panelManager.getAllPanels().forEach(panel => {\n      panel.instance.map = this.map;\n      panel.instance.onMapChange(this.map);\n    })\n    this.widgetManager.getAllWidgets().forEach(widget => {\n      widget.instance.map = this.map;\n      widget.instance.onMapChange(this.map);\n    });\n  }\n  /**\n   * \n   * @param view \n   */\n  onViewChanged(view) {\n    this.view = view;\n    this.panelManager.view = view;\n    this.widgetManager.view = view;\n    this.mapManager.view = view;\n    this.preloadWidgetIcons.forEach(icon => {\n      icon.instance.view = this.view;\n      icon.instance.onViewChange(this.view);\n    });\n    this.panelManager.getAllPanels().forEach(panel => {\n      panel.instance.view = this.view;\n      panel.instance.onViewChange(this.view);\n    })\n    this.widgetManager.getAllWidgets().forEach(widget => {\n      widget.instance.view = this.view;\n      widget.instance.onViewChange(this.view);\n    });\n  }\n  _loadPreloadWidgets(appConfig) {\n    console.time('Load widgetOnScreen');\n    let defs = [],\n      def = this.commonService.createPromiseDefer();\n    //加载组件\n    _.each(appConfig.widgetOnScreen.widgets, (widgetConfig, index, list) => {\n      if (widgetConfig.headerMenu === true) {\n        return true;\n      }\n      if (widgetConfig.visible === false || (this.commonService.isMobile() && typeof widgetConfig.mobile !== \"undefined\" && widgetConfig.mobile.visible === false)) {\n        this.invisibleWidgetIds.push(widgetConfig.id);\n      } else {\n        defs.push(this._loadPreloadWidget(widgetConfig, appConfig));\n      }\n    });\n    //加载分组中的部件 未实现\n    // _.forEach(appConfig.widgetOnScreen.groups, function(groupConfig) {\n    //     defs.push(this._loadPreloadGroup(groupConfig, appConfig));\n    //   }, this);\n\n    Promise.all(defs).then(() => {\n      console.timeEnd('Load widgetOnScreen');\n      //Rss.one(\"preloadWidgetsLoaded\")\n      //closeProgressBar();\n      //组件加载完成发送事件，脏检测 add yly 20200327\n      this.eventService.rss.emit(this.eventService._checkChangeDetector, defs);\n      this._hideLoading();\n    }).catch(() => {\n      // closeProgressBar();\n      this._hideLoading();\n    });\n\n    return def.promise();\n  }\n  _hideLoading() {\n    //待开发\n  }\n  _doPostLoad() {\n\n  }\n  /**\n   * \n   * @param widgetConfig \n   * @param appConfig \n   */\n  async _loadPreloadWidget(widgetConfig, appConfig) {\n    let def = this.commonService.createPromiseDefer();\n    //创建组件\n    if (!widgetConfig || !widgetConfig.uri) {\n      console.error(`widget [${widgetConfig.label}] no uri`);\n      return def.resolve(null);\n    }\n    //let compRef = await this.widgetManager.createWidget(widgetConfig);\n\n    if (((this.globalParams.jimuConfig.isDesignMode === true && this.urlParams.config && this.globalParams.appInfo.folderUrlPrefix) || appConfig.mode === 'config') && !widgetConfig.uri) {\n      //ruir 190718 解决占位符得高宽变成了panel得高宽问题 （获取下manifest信息）\n      if (widgetConfig.oldUri) {\n        let _tempUrl = widgetConfig.oldUri;\n        if (_tempUrl.startsWith(\"/\")) {\n          _tempUrl = _tempUrl.substring(1);\n        }\n        widgetConfig.amdFolder = _tempUrl.substring(0, _tempUrl.toLowerCase().lastIndexOf(\"/widget\")) + \"/\";\n        widgetConfig.folderUrl = this.globalParams.appInfo.folderUrlPrefix + \"/\" + widgetConfig.amdFolder;\n        this.widgetManager.loadWidgetManifest(widgetConfig).then((widgetConfigNew) => {\n          let placeholder = this._createPreloadWidgetPlaceHolder(widgetConfigNew);\n          def.resolve(placeholder);\n        });\n      } else {\n        let placeholder = this._createPreloadWidgetPlaceHolder(widgetConfig);\n        def.resolve(placeholder);\n      }\n      return def.promise();\n    }\n    let iconDijit;\n    if (widgetConfig.inPanel || widgetConfig.closeable) {\n      //创建图标\n      iconDijit = this._createPreloadWidgetIcon(widgetConfig);\n      def.resolve(iconDijit);\n    } else {\n      /*\n      this.widgetManager.openWidget(compRef);\n      compRef.instance.setPosition(widgetConfig.position);\n      this.commonService.setWidgetPosition(compRef, widgetConfig.position);\n      widgetConfig.loaded = true;\n      def.resolve(compRef);\n      */\n      //加载组件\n      this.widgetManager.loadWidget(widgetConfig).then((compRef) => {\n        this.widgetManager.showWidget(compRef);\n        compRef.instance.setPosition(widgetConfig.position);\n        this.commonService.setWidgetPosition(compRef, widgetConfig.position);\n        widgetConfig.loaded = true;\n        compRef.instance.configId = widgetConfig.id;\n        def.resolve(compRef);\n      }).catch((err) => {\n        console.error(err);\n      });\n\n\n    }\n\n    return def.promise();\n  }\n  _createPreloadWidgetPlaceHolder(widgetConfig) {\n\n  }\n  /**\n   * 创建图标\n   * @param widgetConfig 组件配置\n   * @param component 组件\n   */\n  _createPreloadWidgetIcon(widgetConfig, component?: any) {\n    let iconDijit = null;\n    let inMap: boolean = false;\n    if (widgetConfig.position.relativeTo === \"browser\") {\n      iconDijit = this.componentLoader.createComponentToHome(OnScreenWidgetIconComponent);\n    } else {\n      inMap = true;\n      iconDijit = this.componentLoader.createComponentToMap(OnScreenWidgetIconComponent);\n    }\n\n    iconDijit.instance.setProps({\n      compRef: component,\n      appConfig: this.appConfig,\n      map: this.globalParams.mapConfig.is3D ? this.view : this.map,\n      widgetConfig: widgetConfig\n    });\n    aspect.before(iconDijit.instance, 'destroy', () => {\n      this._onDestroyIcon(iconDijit);\n    });\n\n    this.preloadWidgetIcons.push(iconDijit);\n    if (inMap) {\n      this.componentLoader.showInMap(iconDijit);\n    } else {\n      this.componentLoader.showInHome(iconDijit);\n    }\n    let _ele = this.commonService.getComponentRootNode(iconDijit);\n    if (_ele) {\n      _ele.classList.add(\"jimu-widget-onscreen-icon\");\n      _ele.title = widgetConfig.label;\n    }\n    let _position = _.cloneDeep(widgetConfig.position);\n    // _position.height = 32;\n    // _position.width = 32;\n    //ruir 20210315 删除高宽属性，要不然样式里修改后会因这里设置里高宽导致无效\n    delete _position.height;\n    delete _position.width;\n    this.commonService.setWidgetPosition(iconDijit, _position);\n\n    // iconDijit.startup();\n    //图标位置显示后自动打开\n    if (widgetConfig.openAtStart === true) {\n      iconDijit.instance.switchToOpen();\n    }\n\n    return iconDijit;\n  }\n  /**\n   * \n   * @param placeholder \n   */\n  _onDestroyPlaceholder(placeholder) {\n    let index = 0, idx = -1;\n    for (; index < this.widgetPlaceholders.length; index++) {\n      let ci = this.widgetPlaceholders[index];\n      if (placeholder.id === ci.id || placeholder.configId === ci.configId) {\n        idx = index;\n        break;\n      }\n    }\n    if (idx >= 0) {\n      this.widgetPlaceholders.splice(idx, 1);\n    }\n    console.log('destroy placeholder [' + placeholder.id + '].');\n  }\n  /**\n   * 销毁图标之前\n   * @param  icon \n   */\n  _onDestroyIcon(icon) {\n    //_版本低了，没有findIndex函数\n    // let idx = _.findIndex(this.preloadWidgetIcons, function (ci) { return icon.id === ci.id; }, this);\n    let index = 0, idx = -1;\n    for (; index < this.preloadWidgetIcons.length; index++) {\n      let ci = this.preloadWidgetIcons[index];\n      if (icon.instance.id === ci.instance.id) {\n        idx = index;\n        break;\n      }\n    }\n    if (idx >= 0) {\n      this.preloadWidgetIcons.splice(idx, 1);\n    }\n    console.log('destroy icon [' + icon.instance.id + '].');\n  }\n  _loadPreloadGroup(groupJson, appConfig) {\n    let def = this.commonService.createPromiseDefer();\n    if (!appConfig.mode && (!groupJson.widgets || groupJson.widgets.length === 0)) {\n      def.resolve(null);\n      return def;\n    }\n    //待开发\n    return def.promise();\n  }\n  _getThemeCommonStyleId(theme) {\n    return 'theme_' + theme.name + '_style_common';\n  }\n  _getThemeCurrentStyleId(theme) {\n    return 'theme_' + theme.name + '_style_' + theme.styles[0];\n  }\n  _loadTheme(theme) {\n    //待开发\n  }\n  _loadThemeCommonStyle(theme) {\n    //待开发\n  }\n  _removeThemeCommonStyle(theme) {\n    //待开发\n  }\n  _loadThemeCurrentStyle(theme) {\n    //待开发\n  }\n  _removeThemeCurrentStyle(theme) {\n    //待开发\n  }\n\n  _destroyPreloadWidgetIcons() {\n    // _.each(this.preloadWidgetIcons, function (icon) {\n    //     icon.destroy();\n    // }, this);\n    //ruir 190719:这里需要从后往前循环，因icon.destroy();中会删除元素\n    for (let index = this.preloadWidgetIcons.length - 1; index >= 0; index--) {\n      const icon = this.preloadWidgetIcons[index];\n      icon.destroy();\n    }\n    this.preloadWidgetIcons = [];\n  }\n\n  _destroyOffPanelWidgets() {\n    _.forEach(this.widgetManager.getOffPanelWidgets(), (widget) => {\n      this.widgetManager.destroyWidget(widget);\n    });\n  }\n  _destroyWidgetPlaceholders() {\n    // _.forEach(this.widgetPlaceholders, function (placeholder) {\n    //     placeholder.destroy();\n    // }, this);\n    //ruir 190719:这里需要从后往前循环，因placeholder.destroy();中会删除元素\n    for (let index = this.widgetPlaceholders.length - 1; index >= 0; index--) {\n      const placeholder = this.widgetPlaceholders[index];\n      placeholder.destroy();\n    }\n    this.widgetPlaceholders = [];\n  }\n  _destroyPreloadPanels() {\n    this.panelManager.destroyAllPanels();\n  }\n  _destroyPreloadGroupPanels() {\n    // _.forEach(this.preloadGroupPanels, function (panel) {\n    //   this.panelManager.destroyPanel(panel);\n    // }, this);\n    this.preloadGroupPanels = [];\n  }\n  /**\n   * 主题改变\n   * @param  appConfig \n   */\n  _onThemeChange(appConfig) {\n    //待开发\n  }\n  /**\n  * 布局改变\n  * @param  appConfig \n  */\n  _onLayoutChange2(appConfig) {\n    //待开发\n  }\n  /**\n   * 布局改变\n   * @param  appConfig \n   */\n  _onLayoutChange(appConfig) {\n    this._onLayoutChange2(appConfig);\n\n  }\n  /**\n   * 样式改变\n   * @param  appConfig \n   */\n  _onStyleChange(appConfig) {\n    // 待开发\n\n  }\n  _changeMapPosition(appConfig) {\n\n    //待开发\n  }\n  /**\n   * 图层、map位置等改变\n   * @param  appConfig \n   */\n  _onMapChange(appConfig) {\n\n    //待开发\n  }\n  /**\n   * 菜单改变\n   * @param  appConfig \n   */\n  _onWidgetPoolChange(appConfig: any, changeData?: any) {\n\n  }\n  /**\n   * \n   * @param  appConfig \n   * @param  action\n   * @param  eleid 元素id\n   */\n  _onActionTriggerd(appConfig, action, eleid) {\n    let panelIcon = _.find(this.preloadWidgetIcons, (w, index) => {\n      return w.instance.configId === eleid;\n    });\n    if (panelIcon) {\n      panelIcon.instance.onAction(action,\"TODO\");\n    }\n    // let widget = this.widgetManager.getWidgetById(eleid);//从panel打开的widget也会被高亮\n    let widget = _.find(this.widgetManager.getOnScreenOffPanelWidgets(), (w) => {\n      return (w.instance.id === eleid);\n    });\n    if (widget) {\n      widget.instance.onAction(action,\"TODO\");\n    }\n    let placeholder = _.find(this.widgetPlaceholders, (w, index) => {\n      return w.configId === eleid;\n    });\n    if (placeholder) {\n      placeholder.onAction(action,\"TODO\");\n    }\n  }\n  /**\n   * 组件改变\n   * @param  appConfig \n   * @param  changeData  \n   * @param  action add、delete、edit \n   */\n  _onWidgetChange(appConfig, changeData, action) {\n    let changedWidgets = changeData.widgetList;\n    if (!changedWidgets || changedWidgets.length <= 0) {\n      return;\n    }\n    let _self = this;\n    function loadWidget(widgetConfig, appConfig, isIcon, state) {\n      if (widgetConfig.headerMenu === true) {\n        return true;\n      }\n      if (widgetConfig.visible === false) {\n        _self.invisibleWidgetIds.push(widgetConfig.id);\n        return true;\n      }\n      _self._loadPreloadWidget(widgetConfig, appConfig).then(function (iconNew) {\n        if (isIcon) {\n          if (widgetConfig.uri && state === 'opened') {\n            iconNew.onClick();\n          }\n        }\n      });\n    }\n    function process(wc) {\n      let uri = this.globalParams.appInfo.folderUrlPrefix + \"/\" + (wc.oldUri ? wc.oldUri : wc.uri);\n      let icon = _.find(_self.preloadWidgetIcons, function (w) { return wc.id === w.instance.configId || uri === w.instance.uri });\n      let state = undefined, widgetConfig = undefined;\n      if (icon) {\n        state = icon.instance.state, widgetConfig = icon.instance.widgetConfig;\n        if (icon.instance.widget) {\n          icon.instance.widget.destroy();\n        }\n        icon.destroy();\n        if (action === \"delete\") {//删除\n          _self._createPreloadWidgetPlaceHolder(widgetConfig);\n        }\n        else if (action === \"modify\") {//编辑配置\n          loadWidget(widgetConfig, appConfig, true, state);\n        }\n      } else {\n        let widget = _.find(_self.widgetManager.getOnScreenOffPanelWidgets(), function (w) {\n          return (wc.id === w.instance.configId) || uri === w.instance.uri;\n        }, this);\n        if (widget) {\n          widgetConfig = widget.instance.widgetConfig;\n          widget.destroy();\n          if (action === \"delete\") {//删除\n            _self._createPreloadWidgetPlaceHolder(widgetConfig);\n          }\n          else if (action === \"modify\") {//编辑配置\n            loadWidget(widgetConfig, appConfig, false, '');\n          }\n        } else {\n          //删除组件后添加或占位符添加\n          let eleConfig = this.utils.getConfigElementById(appConfig, wc.id);\n          if (eleConfig) {\n            let placeholder = _.find(_self.widgetPlaceholders, function (w) {\n              return (wc.id === w.configId || wc.id === w.id);\n            }, this);\n            if (placeholder) {\n              placeholder.destroy();\n            }\n            if (eleConfig.loaded === true) {\n              delete eleConfig.amdFolder;\n              delete eleConfig.checked;\n              delete eleConfig.folderUrl;\n              delete eleConfig.hasConfig;\n              delete eleConfig.hasLocale;\n              delete eleConfig.hasSetting;\n              delete eleConfig.hasSettingLocale;\n              delete eleConfig.hasSettingPage;\n              delete eleConfig.hasSettingStyle;\n              delete eleConfig.hasSettingUIFile;\n              delete eleConfig.hasStyle;\n              delete eleConfig.hasUIFile;\n              delete eleConfig.hasVersionManager;\n              delete eleConfig.icon;\n              delete eleConfig.inPanel;\n              delete eleConfig.isController;\n              delete eleConfig.isHeadMenu;\n              //delete eleConfig.isWidget;\n              delete eleConfig.keepConfigAfterMapSwithched;\n              delete eleConfig.loaded;\n              delete eleConfig.manifest;\n              delete eleConfig.supportMultiInstance;\n              delete eleConfig.thumbnail;\n              delete eleConfig.uri;\n              delete eleConfig.version;\n            }\n\n            {\n              widgetConfig = _.extend(eleConfig, wc);\n              this.configManager.configLoader._processAfterTryLoad(appConfig);\n              _self.widgetManager.loadWidgetManifest(widgetConfig).then((config) => {\n                loadWidget(widgetConfig, appConfig, false, '');\n              }).catch(function (err) {\n                console.log(\"loadWidgetManifest err\", err);\n              });\n\n            }\n          } else {\n            _.forEach(_self.invisibleWidgetIds, (widgetId) => {\n              if (widgetId === wc.id && wc.visible !== false) {\n                widgetConfig = this.utils.getConfigElementById(appConfig, wc.id);\n                _self._loadPreloadWidget(widgetConfig, appConfig);\n                let i = _self.invisibleWidgetIds.indexOf(widgetConfig.id);\n                _self.invisibleWidgetIds.splice(i, 1);\n              }\n            });\n          }\n        }\n      }\n\n    }\n    _.forEach(changedWidgets, process);\n  }\n\n}","import { Injectable } from '@angular/core';\n/**\n * create by ruir 191014  widgetPlaceHolder.js\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class WidgetPlaceHolderService {\n\n  constructor() { }\n}\n","import { Subject } from 'rxjs';\nimport { SSModalAPI } from './modal-options';\nimport { SsModalOptions } from './modal-types';\nimport { ModalContainerComponent } from './modal-container/modal-container.component';\nimport { EventEmitter, ComponentRef } from '@angular/core';\n// import { OverlayRef } from '@angular/cdk/overlay';\n\nexport const enum SsModalState {\n  OPEN,\n  CLOSING,\n  CLOSED\n}\n\nexport const enum SsTriggerAction {\n  CANCEL = 'cancel',\n  OK = 'ok'\n}\nexport function isPromise<T>(obj: any): obj is Promise<T> {\n  return !!obj && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\nexport class SsModalRef<T = any, R = any> implements SSModalAPI<T, R> {\n  containerInstance: ModalContainerComponent;\n  componentRef: ComponentRef<T>;\n  componentInstance: T | null = null;\n  result?: R;\n  state: SsModalState = SsModalState.OPEN;\n  afterClose: Subject<R> = new Subject();\n  afterOpen: Subject<void> = new Subject();\n\n  private closeTimeout?: number;\n\n  // constructor(private overlayRef: OverlayRef,private config: SsModalOptions, public containerInstance: ModalContainerComponent) {\n  //   containerInstance.cancelTriggered.subscribe(() => this.trigger(SsTriggerAction.CANCEL));\n  //   containerInstance.okTriggered.subscribe(() => this.trigger(SsTriggerAction.OK));\n  //   containerInstance.onCloseTreggered.subscribe(() => {\n  //     this.afterClose.next(this.result);\n  //     this.afterClose.complete();\n  //     if (config.nzAfterClose instanceof EventEmitter) {\n  //       config.nzAfterClose.emit(this.result);\n  //     }\n  //     this.componentInstance = null;\n  //     //dispose\n  //   });\n  // }\n  constructor(private config: SsModalOptions, private containerRef: ComponentRef<ModalContainerComponent>) {\n    this.containerInstance = containerRef.instance;\n    this.containerInstance.cancelTriggered.subscribe(() => this.trigger(SsTriggerAction.CANCEL));\n    this.containerInstance.okTriggered.subscribe(() => this.trigger(SsTriggerAction.OK));\n    this.containerInstance.onCloseTreggered.subscribe(() => {\n      this.afterClose.next(this.result);\n      this.afterClose.complete();\n      if (config.afterClose instanceof EventEmitter) {\n        config.afterClose.emit(this.result);\n      }\n      this.containerRef = null;\n      this.containerInstance = null;\n      this.componentRef = null;\n      this.componentInstance = null;\n      //dispose\n    });\n  }\n  getContentComponent(): T {\n    return this.componentInstance as T;\n  }\n\n  getElement(): HTMLElement {\n    return this.containerInstance.getNativeElement();\n  }\n\n  destroy(result?: R): void {\n    this.close(result);\n  }\n\n  triggerOk(): void {\n    this.trigger(SsTriggerAction.OK);\n  }\n\n  triggerCancel(): void {\n    this.trigger(SsTriggerAction.CANCEL);\n  }\n\n  /**\n   * Open the modal.\n   * @deprecated Opened when create, this method is useless.\n   * @breaking-change 10.0.0\n   */\n  open(): void {\n    // noop\n  }\n\n  close(result?: R): void {\n    this.result = result;\n    // 可关闭 \n    // this.overlayRef.detachBackdrop();\n    // this.overlayRef.dispose();\n    this.componentRef.destroy();\n    this.containerRef.destroy();\n    this.state = SsModalState.CLOSED;\n    //关闭事件传递结果\n    this.afterClose.next(this.result);\n  }\n\n  updateConfig(config: SsModalOptions): void {\n    Object.assign(this.config, config);\n    this.containerInstance.cdr.markForCheck();\n  }\n\n  getState(): SsModalState {\n    return this.state;\n  }\n\n  getConfig(): SsModalOptions {\n    return this.config;\n  }\n\n  getBackdropElement(): HTMLElement | null {\n    // return this.overlayRef.backdropElement;\n    return null;\n  }\n\n  private trigger(action: SsTriggerAction): void {\n    const trigger = { ok: this.config.onOk, cancel: this.config.onCancel }[action];\n    const loadingKey = { ok: 'okLoading', cancel: 'cancelLoading' }[action] as 'okLoading' | 'cancelLoading';\n    const loading = this.config[loadingKey];\n    if (loading) {\n      return;\n    }\n    if (trigger instanceof EventEmitter) {\n      trigger.emit(this.getContentComponent());\n    } else if (typeof trigger === 'function') {\n      const result = trigger(this.getContentComponent());\n      const caseClose = (doClose: boolean | void | {}) => doClose !== false && this.close(doClose as R);\n      if (isPromise(result)) {\n        this.config[loadingKey] = true;\n        const handleThen = (doClose: boolean | void | {}) => {\n          this.config[loadingKey] = false;\n          this.closeWhitResult(doClose);\n        };\n        result.then(handleThen).catch(handleThen);\n      } else {\n        caseClose(result);\n      }\n    }\n  }\n\n  private closeWhitResult(result: any): void {\n    if (result !== false) {\n      this.close(result);\n    }\n  }\n}","import { TemplateRef, EventEmitter, Type, ViewContainerRef } from '@angular/core';\n\n\nexport type OnClickCallback<T> = (instance: T) => (false | void | {}) | Promise<false | void | {}>;\n\nexport type SsButtonType = 'primary' | 'default' | 'dashed' | 'danger' | 'link' | null;\nexport type SsButtonShape = 'circle' | 'round' | null;\nexport type SsButtonSize = 'large' | 'default' | 'small';\nexport type SsModalTypes = 'default' | 'confirm'; // Different modal styles we have supported\n\nexport type SsConfirmType = 'confirm' | 'info' | 'success' | 'error' | 'warning'; // Subtypes of Confirm Modal\n\nexport interface SsStyleObjectLike {\n  [key: string]: string;\n}\n\nconst noopFun = () => void 0;\n\nexport class SsModalOptions<T = any, R = any> {\n  closable?: boolean = true;\n  okLoading?: boolean = false;\n  okDisabled?: boolean = false;\n  cancelDisabled?: boolean = false;\n  cancelLoading?: boolean = false;\n  noAnimation?: boolean = false;\n  autofocus?: 'ok' | 'cancel' | 'auto' | null = 'auto';\n  mask?: boolean = true;\n  maskClosable?: boolean = true;\n  keyboard?: boolean = true;\n  zIndex?: number = 1000;\n  top?: number | string = 50;\n  width?: number | string = 520;\n  height?: number | string = 400;\n  closeIcon?: string | TemplateRef<void> = 'close';\n  okType?: SsButtonType = 'primary';\n  modalType?: SsModalTypes = 'default';\n  onCancel?: EventEmitter<T> | OnClickCallback<T> = noopFun;\n  onOk?: EventEmitter<T> | OnClickCallback<T> = noopFun;\n  componentParams?: Partial<T>;\n  maskStyle?: SsStyleObjectLike;\n  bodyStyle?: SsStyleObjectLike;\n  wrapClassName?: string;\n  className?: string;\n  styles?: object;\n  title?: string | TemplateRef<{}>;\n  footer?: string | TemplateRef<{}> | Array<SsModalButtonOptions<T>> | null; // Default Modal ONLY\n  cancelText?: string | null;\n  okText?: string | null;\n  content?: string | TemplateRef<any> | Type<T>;\n  closeOnNavigation?: boolean = true;\n  viewContainerRef?: ViewContainerRef;\n\n  /**\n   * Reset the container element.\n   * @deprecated Not supported.\n   * @breaking-change 10.0.0\n   */\n  getContainer?: HTMLElement;\n\n  /**\n   * 模板时用\n   */\n  afterOpen?: EventEmitter<void>;\n  afterClose?: EventEmitter<R>;\n\n  /**\n   * Confirm\n   */\n  iconType?: string = 'question-circle';\n  fullScreen?: boolean = false;\n  /**\n   * 标题栏（图标）按钮\n   */\n  titleBarButtons?: Array<SsModalTitleBarButtonOptions<T>> | null;\n}\n\nexport interface SsModalButtonOptions<T = any> {\n  label: string;\n  type?: SsButtonType;\n  shape?: SsButtonShape;\n  ghost?: boolean;\n  size?: SsButtonSize;\n  autoLoading?: boolean; // Default: true, indicate whether show loading automatically while onClick returned a Promise\n  // [NOTE] \"componentInstance\" will refer to the component's instance when using Component\n  show?: boolean | ((this: SsModalButtonOptions<T>, contentComponentInstance?: T) => boolean);\n  loading?: boolean | ((this: SsModalButtonOptions<T>, contentComponentInstance?: T) => boolean); // This prop CAN'T use with autoLoading=true\n  disabled?: boolean | ((this: SsModalButtonOptions<T>, contentComponentInstance?: T) => boolean);\n  onClick?(this: SsModalButtonOptions<T>, contentComponentInstance?: T): any | Promise<any>;\n  [key: string]: any;\n}\n/**\n * 图标按钮选项\n */\nexport interface SsModalTitleBarButtonOptions<T = any> {\n  /**\n   * 对应ngzorro的type或阿里图标\n   */\n  icon: string;\n  theme?: string;\n  spin?: boolean;\n  /**\n   * theme 为“twotone”时可用\n   */\n  twotoneColor?: string;\n  /**\n   * 是否为阿里图标\n   */\n  isIconfont?: boolean;\n  rotate?: number;\n  title?: string;\n  /**\n   * 自定义样式，建议不要设置color，全局样式默认会设置为白色\n   */\n  style?: string;\n  onClick?(this: SsModalTitleBarButtonOptions<T>, contentComponentInstance?: T): any | Promise<any>;\n}","import { SsModalOptions } from './modal-types';\nimport { SSModalComponent } from './modal.component';\n\nexport function applyConfigDefaults(config: SsModalOptions, defaultOptions: SsModalOptions): SsModalOptions {\n  return { ...defaultOptions, ...config };\n}\n\n\nexport function setContentInstanceParams<T>(instance: T, params: Partial<T> | undefined): void {\n  Object.assign(instance, params);\n}\n\nexport function getConfigFromComponent(component: SSModalComponent): SsModalOptions {\n  const {\n    mask,\n    maskClosable,\n    closable,\n    okLoading,\n    okDisabled,\n    cancelDisabled,\n    cancelLoading,\n    keyboard,\n    noAnimation,\n    content,\n    componentParams,\n    footer,\n    getContainer,\n    zIndex,\n    width,\n    wrapClassName,\n    className,\n    styles,\n    title,\n    closeIcon,\n    maskStyle,\n    bodyStyle,\n    okText,\n    cancelText,\n    okType,\n    iconType,\n    modalType,\n    onOk,\n    onCancel,\n    afterOpen,\n    afterClose\n  } = component;\n  return {\n    mask,\n    maskClosable,\n    closable,\n    okLoading,\n    okDisabled,\n    cancelDisabled,\n    cancelLoading,\n    keyboard,\n    noAnimation,\n    content,\n    componentParams,\n    footer,\n    getContainer,\n    zIndex,\n    width,\n    wrapClassName,\n    className,\n    styles,\n    title,\n    closeIcon,\n    maskStyle,\n    bodyStyle,\n    okText,\n    cancelText,\n    okType,\n    iconType,\n    modalType,\n    onOk,\n    onCancel,\n    afterOpen,\n    afterClose\n  };\n}\n","<div class=\"ssmodal_overlay\" #ssmodal_overlay>\n  <div class=\"ssmodal\" #ssmodal id=\"{{options.id}}\" [ngStyle]=\"position\">\n    <div class=\"ssmodal_titlebar ssmodal_titlebar_draggable\" #ssmodal_titlebar\n      (mousedown)=\"_titlebar_MouseDown($event);\">\n      <div class=\"ssmodal_titlebar_text\"><span class=\"ssmodal_titlebar_text_span\">{{options.title}}</span></div>\n      <!--icon button-->\n      <div class=\"ssmodal_titlebar_custom_buttons\" *ngIf=\"config.titleBarButtons\" ss-modal-titlebar-button [modalRef]=\"modalRef\"></div>\n      <ng-container *ngIf=\"options.buttonCollapse\">\n        <ng-container *ngIf=\"windowState=='collapsed'; else showCollapsedButton\">\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_collapse\" title=\"{{options.buttonUnCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,3 9,3 5,8 1,3 9,3\"></polyline>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_collapse\" title=\"{{options.buttonCollapseText}}\"\n            (click)=\"_buttonCollapse_Click($event);\">\n            <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <polyline points=\"1,7 9,7 5,2 1,7 9,7\"></polyline>\n              </g>\n            </svg></div>\n        </ng-template>\n\n\n      </ng-container>\n\n\n      <ng-container *ngIf=\"options.buttonMaximize\">\n        <ng-container *ngIf=\"windowState == 'maximized'; else showMaximizeButton\">\n\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_maximize\" title=\"{{options.buttonUnmaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"3\" height=\"6\" width=\"6\"></rect>\n                <line y1=\"3\" x1=\"3\" y2=\"1\" x2=\"3\"></line>\n                <line y1=\"1\" x1=\"2.5\" y2=\"1\" x2=\"9.5\"></line>\n                <line y1=\"1\" x1=\"9\" y2=\"7\" x2=\"9\"></line>\n                <line y1=\"7\" x1=\"9.5\" y2=\"7\" x2=\"7\"></line>\n              </g>\n            </svg></div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n\n          <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_maximize\" title=\"{{options.buttonMaximizeText}}\"\n            (click)=\"_buttonMax_Click($event);\"><svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n              <g fill=\"none\">\n                <rect x=\"1\" y=\"1\" height=\"8\" width=\"8\"></rect>\n              </g>\n            </svg></div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf=\"options.buttonClose\">\n        <div class=\"ssmodal_titlebar_button ssmodal_titlebar_button_close\" title=\"{{options.buttonCloseText}}\"\n          (click)=\"closePanel($event);\">\n          <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n            viewBox=\"0 0 10 10\" height=\"100%\" width=\"100%\">\n            <g>\n              <line y2=\"0\" x2=\"10\" y1=\"10\" x1=\"0\"></line>\n              <line y2=\"10\" x2=\"10\" y1=\"0\" x1=\"0\"></line>\n            </g>\n          </svg></div>\n      </ng-container>\n    </div>\n    <div class=\"ssmodal_content\" (click)=\"_contentClick($event);\">\n      <ng-template #widget_content></ng-template>\n    </div>\n    <div class=\"ssmodal_statusbar\" *ngIf=\"showStatusBar\">\n      <div class=\"ssmodal_statusbar_content\">\n        <div *ngIf=\"config.footer !== null\" ss-modal-footer [modalRef]=\"modalRef\" (cancelTriggered)=\"onCloseClick()\"\n          (okTriggered)=\"onOkClick()\"></div>\n      </div>\n      <!-- <div class=\"ssmodal_statusbar_handle\"> -->\n        <div class=\"ssmodal_resizer ssmodal_resizer_bottom\"\n          (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'bottom'});\"></div>\n      <!-- </div> -->\n    </div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_top\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'height',directionY:'top'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_left\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'left'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_right\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'width',directionX:'right'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_topleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'top'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_topright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'top'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_bottomleft\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'left',directionY:'bottom'});\"></div>\n    <div class=\"ssmodal_resizer ssmodal_resizer_bottomright\"\n      (mousedown)=\"_resizer_MouseDown($event,{dimension:'both',directionX:'right',directionY:'bottom'});\"></div>\n  </div>\n</div>\n<div class=\"ssmodal_minplaceholder\"></div>","import { Component, OnInit, Renderer2, ElementRef, EventEmitter, ChangeDetectorRef, NgZone, ComponentRef, EmbeddedViewRef, ViewChild } from '@angular/core';\nimport { BasePanelComponent } from '../../base-panel/base-panel.component';\nimport { SsModalRef } from '../modal-ref';\nimport { SsModalOptions } from '../modal-types';\nimport { ServiceInjector } from '../../../services/service-injector';\nimport { WidgetState, WidgetWindowState, WidgetPosition } from '../../../models/base-widget';\n// import { CdkPortalOutlet, ComponentPortal } from '@angular/cdk/portal';\nexport function throwNzModalContentAlreadyAttachedError(): never {\n  throw Error('Attempting to attach modal content after content is already attached');\n}\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\nimport { CommonService } from '../../../services/common.service';\nimport { PanelManagerService } from '../../../services/panel-manager.service';\nimport { WidgetManagerService } from '../../../services/widget-manager.service';\nimport { AppGlobalConfig } from '../../../models/app-config';\nimport { MapManagerService } from '../../../services/map-manager.service';\n@ComponentRegister({\n  uri: 'epsgis-modal-container',\n  path: \"components/modal/modal-container\"\n})\n@Component({\n  selector: 'epsgis-modal-container',\n  templateUrl: './modal-container.component.html',\n  styleUrls: ['./modal-container.component.scss'],\n})\nexport class ModalContainerComponent extends BasePanelComponent implements OnInit {\n\n  animationStateChanged = new EventEmitter<AnimationEvent>();\n  containerClick = new EventEmitter<void>();\n  cancelTriggered = new EventEmitter<void>();\n  okTriggered = new EventEmitter<void>();\n  document: Document;\n  modalRef!: SsModalRef;\n  isStringContent: boolean = false;\n  private elementFocusedBeforeModalWasOpened: HTMLElement | null = null;\n  private latestMousedownTarget: HTMLElement | null = null;\n  private oldMaskStyle: { [key: string]: string } | null = null;\n\n  onCloseTreggered = new EventEmitter<any>();\n  @ViewChild(\"ssmodal_overlay\", { static: true }) sspanelOverlay: ElementRef;\n  @ViewChild(\"ssmodal_titlebar\", { static: true }) sspanel_titlebar: ElementRef;\n  @ViewChild(\"ssmodal\", { static: true }) sspanel: ElementRef;\n  @ViewChild('ssmodal', { static: true }) modalElementRef!: ElementRef<HTMLDivElement>;\n  // portalOutlet!: CdkPortalOutlet;\n  showStatusBar: boolean = false;\n  defaultZIndex = 110;\n  constructor(\n    protected elementRef: ElementRef,\n    public cdr: ChangeDetectorRef,\n    protected render: Renderer2,\n    protected zone: NgZone,\n    public config: SsModalOptions,\n    // private serviceInjecter: ServiceInjector,\n    public commonService:CommonService,\n    public panelManager:PanelManagerService,\n    public widgetManager:WidgetManagerService,\n    public globalParams:AppGlobalConfig,\n    public mapManager:MapManagerService\n  ) {\n    super(render, cdr);\n    // this.setServiceInjector(this.serviceInjecter);\n    this.document = document;\n    this.isStringContent = typeof config.content === 'string';\n    this.setContainer();\n    if (this.config.footer != null) {\n      this.showStatusBar = true;\n    } else if (this.config.okDisabled !== true) {\n      this.showStatusBar = true;\n    } else if (this.config.cancelDisabled !== true) {\n      this.showStatusBar = true;\n    }\n  }\n  ngOnInit() {\n    if (this.commonService.isMobile()) {\n      this.widgetConfig = {\n        position: new WidgetPosition(0, 0, 0, 0, \"100%\", \"100%\", \"\", \"unset\")\n      };\n    } else {\n      let left = 0;\n      if (this.config.width === \"100%\") {\n        left = 0;\n      } else if (this.config.width === \"auto\") {\n\n      } else if (typeof this.config.width === \"number\") {\n        left = (window.innerWidth - this.config.width) / 2;\n      } else if (typeof this.config.width === \"string\") {\n        let x = parseInt(this.config.width, 10);\n        left = (window.innerWidth - x) / 2;\n      }\n      this.widgetConfig = {\n        position: {\n          top: this.config.top,\n          left: left,\n          width: this.config.width,\n          height: this.config.height,\n          zIndex: this.config.zIndex || this.defaultZIndex\n        }\n      };\n    }\n    let _index = this.defaultZIndex - 1;\n    if (this.config.zIndex >= 1) {\n      _index = this.config.zIndex - 1;\n    }\n    //如果设置了zIndex，则将背景div的zindex减1。解决背景无法遮盖高于它的div\n    this.render.setStyle(this.sspanelOverlay.nativeElement, 'z-index', _index);\n    this.setOptions({\n      buttonMaximize: true,\n      buttonClose: true,\n      buttonCollapse: false,\n      modal: this.config.mask,\n      title: this.config.title.toString(),\n      minHeight: 100,\n      minWidth: 200\n    });\n    this.label = this.tooltip = this.config.title.toString();\n    if (this.globalParams.mapConfig.is3D) {\n      this.view = this.mapManager.view;\n    } else {\n      this.map = this.mapManager.map;\n    }\n    this.id = \"ss-modal\";\n    this.gid = \"ss-modal\";\n\n    this.setPosition(this.widgetConfig.position);\n    this.state = WidgetState.opened;\n    this.windowState = WidgetWindowState.normal;\n\n    super.ngOnInit();\n  }\n  ngAfterViewInit() {\n    this.modalRef.afterOpen.next();\n    if (this.config.fullScreen) {\n      this._maximize();\n    }\n  }\n  onClose() {\n    this.onCloseTreggered.emit();\n  }\n  onMousedown(e: MouseEvent): void {\n    this.latestMousedownTarget = (e.target as HTMLElement) || null;\n  }\n\n  onMouseup(e: MouseEvent): void {\n    if (e.target === this.latestMousedownTarget && e.target === this.elementRef.nativeElement) {\n      this.containerClick.emit();\n    }\n    this.latestMousedownTarget = null;\n  }\n\n  onCloseClick(): void {\n    this.cancelTriggered.emit();\n  }\n\n  onOkClick(): void {\n    this.okTriggered.emit();\n  }\n\n  //  attach2<T>(portal: ComponentPortal<T>){\n  //   if (this.portalOutlet.hasAttached()) {\n  //     throwNzModalContentAlreadyAttachedError();\n  //   }\n  //   this.savePreviouslyFocusedElement();\n  //   this.setModalTransformOrigin();\n  //   return this.portalOutlet.attachComponentPortal(portal);\n  //  }\n  attachComponentPortal<T>(compRef: ComponentRef<T>): ComponentRef<T> {\n    this.savePreviouslyFocusedElement();\n    this.setModalTransformOrigin();\n    this.widgetContainer.insert(compRef.hostView);\n    return compRef;\n  }\n\n  attachTemplatePortal<C>(): EmbeddedViewRef<C> {\n    //TODO \n    return null;\n  }\n\n  getNativeElement(): HTMLElement {\n    return this.elementRef.nativeElement;\n  }\n\n  private animationDisabled(): boolean {\n    // return this.config.nzNoAnimation || this.animationType === 'NoopAnimations';\n    return false;\n  }\n\n  private setModalTransformOrigin(): void {\n    const modalElement = this.modalElementRef.nativeElement;\n    if (this.elementFocusedBeforeModalWasOpened as HTMLElement) {\n      const previouslyDOMRect = this.elementFocusedBeforeModalWasOpened!.getBoundingClientRect();\n\n      const lastPosition = this.commonService.getElementBounds(this.elementFocusedBeforeModalWasOpened);\n      const x = lastPosition.left + previouslyDOMRect.width / 2;\n      const y = lastPosition.top + previouslyDOMRect.height / 2;\n      const transformOrigin = `${x - modalElement.offsetLeft}px ${y - modalElement.offsetTop}px 0px`;\n      this.render.setStyle(modalElement, 'transform-origin', transformOrigin);\n    }\n  }\n\n  private savePreviouslyFocusedElement(): void {\n    if (this.document) {\n      this.elementFocusedBeforeModalWasOpened = this.document.activeElement as HTMLElement;\n      if (this.elementRef.nativeElement.focus) {\n        Promise.resolve().then(() => this.elementRef.nativeElement.focus());\n      }\n    }\n  }\n\n  private trapFocus(): void {\n\n  }\n\n  private restoreFocus(): void {\n\n  }\n\n  private setEnterAnimationClass(): void {\n\n  }\n\n  private setExitAnimationClass(): void {\n\n  }\n\n  private cleanAnimationClass(): void {\n    if (this.animationDisabled()) {\n      return;\n    }\n\n  }\n\n  private bindBackdropStyle(): void {\n  }\n\n  /**\n   * Set the container element.\n   * @deprecated Not supported.\n   * @breaking-change 10.0.0\n   */\n  private setContainer(): void {\n    const container = this.getContainer();\n    if (container) {\n      this.render.appendChild(container, this.elementRef.nativeElement);\n    }\n  }\n\n  /**\n   * Reset the container element.\n   * @deprecated Not supported.\n   * @breaking-change 10.0.0\n   */\n  private resetContainer(): void {\n    const container = this.getContainer();\n    if (container) {\n    }\n  }\n\n  private getContainer(): HTMLElement | null {\n    // const { nzGetContainer } = this.config;\n    // const container = typeof nzGetContainer === 'function' ? nzGetContainer() : nzGetContainer;\n    // return container instanceof HTMLElement ? container : null;\n    return this.config.getContainer;\n  }\n\n  onAnimationDone(event: AnimationEvent): void {\n\n  }\n\n  onAnimationStart(event: AnimationEvent): void {\n\n  }\n\n  startExitAnimation(): void {\n    this.state = WidgetState.closed;\n    this.cdr.markForCheck();\n  }\n  /**\n  * 关闭panel\n  * @param event \n  */\n  closePanel(event) {\n    this.cancelTriggered.emit();\n  }\n}\n","import { Injectable, OnDestroy, Injector, SkipSelf, Optional, TemplateRef, ComponentFactoryResolver, ReflectiveInjector, ApplicationRef, ComponentRef, Type } from '@angular/core';\nimport { SsModalRef } from '../components/modal/modal-ref';\nimport { Subject, Observable, defer } from 'rxjs';\nimport { startWith } from 'rxjs/operators';\nimport { SsModalOptions } from '../components/modal/modal-types';\nimport { setContentInstanceParams, applyConfigDefaults } from '../components/modal/utils';\nimport { PortalInjector, ComponentPortal } from '@angular/cdk/portal';\nimport { ModalContainerComponent } from '../components/modal/modal-container/modal-container.component';\nimport { ComponentType } from './services';\nimport { CommonService } from './common.service';\nimport { ServiceInjector } from './service-injector';\nimport { OverlayRef, OverlayConfig, Overlay } from '@angular/cdk/overlay';\nimport { findComponentInfo } from '../decorator/component-register.decorator';\ntype ContentType<T> = ComponentType<T> | TemplateRef<T> | string;\n\n/**\n * 模态对话框 \n * create by 20200508\n */\n@Injectable({ providedIn: 'root' })\nexport class ModalManagerService implements OnDestroy {\n  private openModalsAtThisLevel: SsModalRef[] = [];\n  private readonly afterAllClosedAtThisLevel = new Subject<void>();\n  factories = new Map();\n  factoriesArray: Array<any> = null;\n  get openModals(): SsModalRef[] {\n    return this.parentModal ? this.parentModal.openModals : this.openModalsAtThisLevel;\n  }\n\n  get _afterAllClosed(): Subject<void> {\n    const parent = this.parentModal;\n    return parent ? parent._afterAllClosed : this.afterAllClosedAtThisLevel;\n  }\n\n  readonly afterAllClose: Observable<void> = defer(() =>\n    this.openModals.length ? this._afterAllClosed : this._afterAllClosed.pipe(startWith(undefined))\n  ) as Observable<void>;\n  constructor(\n    private overlay: Overlay,\n    private injector: Injector,\n    @Optional() @SkipSelf() private parentModal: ModalManagerService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private appRef: ApplicationRef,\n    private commonService: CommonService\n  ) {\n    this.factories = this.componentFactoryResolver[\"_factories\"];\n    if (this.factories) {\n      this.factoriesArray = Array.from(this.factories);\n    }\n  }\n\n  readonly modalContainerClass: string = \"ssmodal_container\";\n\n  modalContainer: Element;\n\n  private createModalContainer() {\n    // 容器\n    let container = document.querySelector(this.modalContainerClass);\n    if (container == null) {\n      container = window.document.createElement(\"div\");\n      container.className = this.modalContainerClass;\n      window.document.body.appendChild(container);\n    }\n    this.modalContainer = container;\n  }\n  /**\n   * \n   * @param config \n   */\n  create<T, R = any>(config: SsModalOptions<T, R>): SsModalRef<T, R> {\n    return this.open<T, R>(config.content as ComponentType<T>, config);\n  }\n  /**\n   * \n   */\n  closeAll(): void {\n    this.closeModals(this.openModals);\n  }\n  private attachModalContainer2(overlayRef: OverlayRef, config: SsModalOptions): ModalContainerComponent {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n    const injector = new PortalInjector(\n      userInjector || this.injector,\n      new WeakMap<any, any>([\n        [OverlayRef, overlayRef],\n        [SsModalOptions, config]\n      ])\n    );\n\n    const ContainerComponent = ModalContainerComponent;\n\n    const containerPortal = new ComponentPortal<ModalContainerComponent>(ContainerComponent, config.viewContainerRef, injector);\n    const containerRef = overlayRef.attach<ModalContainerComponent>(containerPortal);\n\n    return containerRef.instance;\n  }\n  /**\n   * \n   * @param componentOrTemplateRef \n   * @param config \n   */\n  private open<T, R>(componentOrTemplateRef: ContentType<T>, config?: SsModalOptions): SsModalRef<T, R> {\n    const configMerged = applyConfigDefaults(config || {}, new SsModalOptions());\n    const modalContainerRef = this.attachModalContainer(configMerged);\n    const modalRef = this.attachModalContent<T, R>(componentOrTemplateRef, configMerged, modalContainerRef);\n    modalContainerRef.instance.modalRef = modalRef;\n    this.openModals.push(modalRef);\n    // const overlayRef = this.createOverlay(configMerged);\n    // const modalContainer = this.attachModalContainer2(overlayRef, configMerged);\n    // const modalRef = this.attachModalContent2<T, R>(componentOrTemplateRef, modalContainer, overlayRef, configMerged);\n    // modalContainer.modalRef = modalRef;\n    modalRef.afterClose.subscribe(() => this.removeOpenModal(modalRef));\n    return modalRef;\n  }\n  /**\n   * \n   * @param modalRef \n   */\n  private removeOpenModal(modalRef: SsModalRef): void {\n    const index = this.openModals.indexOf(modalRef);\n    if (index > -1) {\n      this.openModals.splice(index, 1);\n\n      if (!this.openModals.length) {\n        this._afterAllClosed.next();\n      }\n    }\n  }\n  /**\n   * \n   * @param dialogs \n   */\n  private closeModals(dialogs: SsModalRef[]): void {\n    let i = dialogs.length;\n    while (i--) {\n      dialogs[i].close();\n      if (!this.openModals.length) {\n        this._afterAllClosed.next();\n      }\n    }\n  }\n  // private createOverlay(config: SsModalOptions): OverlayRef {\n  //   const overlayConfig = new OverlayConfig({\n  //     hasBackdrop: true,\n  //     scrollStrategy: this.overlay.scrollStrategies.block(),\n  //     positionStrategy: this.overlay.position().global(),\n  //     disposeOnNavigation: config.nzCloseOnNavigation\n  //   });\n\n  //   if (config.nzMask) {\n  //     overlayConfig.backdropClass = \"ant-modal-mask\";\n  //   }\n\n  //   return this.overlay.create(overlayConfig);\n  // }\n\n  // private attachModalContent2<T, R>(\n  //   componentOrTemplateRef: ContentType<T>,\n  //   modalContainer: ModalContainerComponent,\n  //   overlayRef: OverlayRef,\n  //   config: SsModalOptions<T>\n  // ): SsModalRef<T, R> {\n  //   const modalRef = new SsModalRef<T, R>(overlayRef, config, modalContainer);\n\n  //   if (componentOrTemplateRef instanceof TemplateRef) {\n\n  //   } else if (componentOrTemplateRef!=null && typeof componentOrTemplateRef !== 'string') {\n  //     const injector = this.createInjector<T, R>(modalRef, config);\n  //     const contentRef = modalContainer.attach2<T>(\n  //       new ComponentPortal(componentOrTemplateRef, config.nzViewContainerRef, injector)\n  //     );\n  //     setContentInstanceParams<T>(contentRef.instance, config.nzComponentParams);\n  //     modalRef.componentInstance = contentRef.instance;\n  //   }\n  //   return modalRef;\n  // }\n  /**\n   * \n   * @param config \n   */\n  private attachModalContainer(config: SsModalOptions): ComponentRef<ModalContainerComponent> {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n    const injector = new PortalInjector(\n      userInjector || this.injector,\n      new WeakMap<any, any>([\n        [SsModalOptions, config]\n      ])\n    );\n    this.createModalContainer();\n    // const ContainerComponent =\n    //   config.nzModalType === 'confirm'\n    //       NzModalConfirmContainerComponent:\n    //       ModalContainerComponent;\n    let inputs = {\n      config: config\n    };\n    let inputProviders = Object.keys(inputs).map((inputName) => {\n      return { provide: inputName, useValue: inputs[inputName] };\n    });\n    const ContainerComponent = ModalContainerComponent;\n    const factory = this.componentFactoryResolver.resolveComponentFactory(ContainerComponent);\n    const injectorc = Injector.create({ providers: inputProviders,parent:injector });\n    //const containerRef = factory.create(ReflectiveInjector.resolveAndCreate(inputProviders, injector));\n    const containerRef = factory.create(injectorc);\n    this.modalContainer.appendChild(this.commonService.getComponentRootNode(containerRef));\n    // 加入angular脏检查\n    this.appRef.attachView(containerRef.hostView);\n    return containerRef;\n  }\n\n  findComponent(name: string): Type<any> {\n    let comp = null;\n    if (this.factories) {\n      if (!this.factories || this.factories.size <= 0) return null;\n      let item = this.factoriesArray.find((value, index: number, arr) => {\n        return value[1].selector.toLowerCase() === name.toLowerCase() || value[0].name.toLowerCase() === name.toLocaleLowerCase();\n      });\n      if (item) {\n        comp = item[0];\n      }\n    } else {\n      //ng9及以上\n      const compInfo = findComponentInfo(name);\n      if (compInfo) {\n        return compInfo.component;\n      }\n    }\n    return comp;\n\n  }\n  /**\n   * \n   * @param componentOrTemplateRef \n   * @param config \n   * @param modalContainer\n   */\n  private attachModalContent<T, R>(\n    componentOrTemplateRef: ContentType<T>,\n    config: SsModalOptions<T>,\n    modalContainerRef: ComponentRef<ModalContainerComponent>,\n  ): SsModalRef<T, R> {\n    const modalRef = new SsModalRef<T, R>(config, modalContainerRef);\n\n    if (componentOrTemplateRef instanceof TemplateRef) {\n      // TODO \n\n    } else if (componentOrTemplateRef && typeof componentOrTemplateRef !== 'string') {\n      let inputs = {};\n      if (config.componentParams) {\n        inputs = config.componentParams;\n      }\n      let inputProviders = Object.keys(inputs).map((inputName) => {\n        return { provide: inputName, useValue: inputs[inputName] };\n      });\n      let component = componentOrTemplateRef;\n      if (this.factories && !this.factories.get(componentOrTemplateRef)) {\n        component = this.findComponent(componentOrTemplateRef.name);\n      }\n      const factory = this.componentFactoryResolver.resolveComponentFactory(component);\n      const injector = Injector.create({ providers: inputProviders, parent: this.createInjector(modalRef, config) });\n      // const compRef = factory.create(ReflectiveInjector.resolveAndCreate(inputProviders, this.createInjector(modalRef, config)));\n      const compRef = factory.create(injector);\n      setContentInstanceParams<T>(compRef.instance, config.componentParams);\n      modalContainerRef.instance.attachComponentPortal<T>(compRef);\n      modalRef.componentInstance = compRef.instance;\n      modalRef.componentRef = compRef;\n    }\n    return modalRef;\n  }\n\n  private createInjector<T, R>(modalRef: SsModalRef<T, R>, config: SsModalOptions<T>): PortalInjector {\n    const userInjector = config && config.viewContainerRef && config.viewContainerRef.injector;\n    const injectionTokens = new WeakMap<any, any>([[SsModalRef, modalRef]]);\n\n    return new PortalInjector(userInjector || this.injector, injectionTokens);\n  }\n\n\n  ngOnDestroy(): void {\n    this.closeModals(this.openModalsAtThisLevel);\n    this.afterAllClosedAtThisLevel.complete();\n  }\n}","import { Injectable } from '@angular/core';\nimport { RequestResultModel } from '../models/http/request.result';\nimport { HttpReqService } from './request.service';\n\n/**\n * Setting服务\n */\n@Injectable({\n  providedIn: 'root'\n})\nexport class SettingService {\n  readonly API_SAVE_SETTING: string = \"api/setting/content\";\n  constructor(public req: HttpReqService) { }\n  /**\n   * 获取配置文件内容\n   * @param filePath 配置文件路径\n   */\n  getConfigContent(filePath: string) {\n    return this.req.getJsonFile(filePath);\n  }\n  /**\n   * 保存配置文件\n   * @param data \n   */\n  saveConfig(data: ISettingSaveModel): Promise<RequestResultModel> {\n    if (!data) {\n      return Promise.resolve({\n        success: false,\n        msg: \"data is null\",\n        data: null\n      });\n    }\n    if (!data.filePath) {\n      return Promise.resolve({\n        success: false,\n        msg: \"data.filePath is null\",\n        data: null\n      });\n    }\n    return this.req.postNoAuth(this.API_SAVE_SETTING, data, this.req.config.settingApiUrl, true);\n  }\n}\nexport interface ISettingSaveModel {\n  filePath: string;\n  content: string;\n}\n\n","import { Injectable } from '@angular/core';\r\nimport { EventManager } from '@angular/platform-browser';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { AppGlobalConfig, defaultAppGlobalConfig } from '../models/app-config';\r\nimport { LayoutManagerService } from './layout-manager.service';\r\nimport { WidgetPlaceHolderService } from './widget-place-holder.service';\r\nimport { PanelManagerService } from './panel-manager.service';\r\nimport { MapManagerService } from './map-manager.service';\r\nimport { ConfigManagerService } from './config-manager.service';\r\nimport { ConfigLoaderService } from './config-loader.service';\r\nimport { WidgetManagerService } from './widget-manager.service';\r\nimport { CommonService } from './common.service';\r\nimport { UtilsService } from './utils.service';\r\nimport { HttpReqService } from './request.service';\r\nimport { ModalManagerService } from './modal-manager.service';\r\nimport { ComponentLoaderService } from './component-loader.service';\r\nimport { SettingService } from './setting.service';\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ServiceInjector {\r\n\r\n    constructor(\r\n        public config: AppGlobalConfig,\r\n        public utils: UtilsService,\r\n        public commonService: CommonService,\r\n        public httpService: HttpReqService,\r\n        public configLoader: ConfigLoaderService,\r\n        public configManager: ConfigManagerService,\r\n        public mapManager: MapManagerService,\r\n        public panelManager: PanelManagerService,\r\n        public widgetManager: WidgetManagerService,\r\n        public widgetPlaceHolder: WidgetPlaceHolderService,\r\n        public layoutManager: LayoutManagerService,\r\n        public jsEventManager: EventManager,\r\n        private route: ActivatedRoute,\r\n        public componentManager: ComponentLoaderService,\r\n        public modalManaer: ModalManagerService,\r\n        public settingService: SettingService\r\n        // @Inject(forwardRef(() => ConfigLoaderService))\r\n        // public configLoader: ConfigLoaderService,\r\n\r\n        // @Inject(forwardRef(() => ConfigManagerService))\r\n        // public configManager: ConfigManagerService,\r\n\r\n        // @Inject(forwardRef(() => PanelManagerService))\r\n        // public panelManager: PanelManagerService,\r\n\r\n        // @Inject(forwardRef(() => WidgetManagerService))\r\n        // public widgetManager: WidgetManagerService,\r\n\r\n        // @Inject(forwardRef(() => WidgetPlaceHolderService))\r\n        // public widgetPlaceHolder: WidgetPlaceHolderService,\r\n\r\n        // @Inject(forwardRef(() => MapManagerService))\r\n        // public mapManager: MapManagerService,\r\n\r\n        // @Inject(forwardRef(() => LayoutManagerService))\r\n        // public layoutManager: LayoutManagerService\r\n    ) {\r\n        if (!config) {\r\n            config = Object.assign({}, defaultAppGlobalConfig);\r\n        }\r\n        //url中参数改变时，重新给全局参数中的urlParams赋值\r\n        this.route.queryParams.subscribe(params => {\r\n            this.config.urlParams = Object.assign(this.config.urlParams, params);\r\n        });\r\n    }\r\n}\r\n","/**\r\n * create by ruir  js 、css加载器\r\n */\r\nclass SimpleLoaderService {\r\n    /**\r\n     * 单例\r\n     */\r\n    private static _instance: SimpleLoaderService = null;\r\n    private constructor() {\r\n\r\n    }\r\n    static getInstance() {\r\n        if (!this._instance) {\r\n            this._instance = new SimpleLoaderService();\r\n        }\r\n        return this._instance;\r\n    }\r\n    /**\r\n     * 类型判断\r\n     * @param type \r\n     * @param obj \r\n     */\r\n    private is(type: string, obj: any) {\r\n        let clas = Object.prototype.toString.call(obj).slice(8, -1);\r\n        return obj !== undefined && obj !== null && clas === type;\r\n    }\r\n    /**\r\n     * 是否数组\r\n     * @param item \r\n     */\r\n    private isArray(item: any) {\r\n        return this.is(\"Array\", item);\r\n    }\r\n\r\n    /**\r\n     * 获取url扩展名\r\n     * @param url \r\n     */\r\n    private getExtension(url: string) {\r\n        url = url || \"\";\r\n        let items = url.split(\"?\")[0].split(\".\");\r\n        return items[items.length - 1].toLowerCase();\r\n    }\r\n    /**\r\n     * 创建元素\r\n     * @param config \r\n     */\r\n    private createElement(config: any) {\r\n        let e = document.createElement(config.element);\r\n        for (let i in config) {\r\n            if (i !== 'element' && i !== 'appendTo') {\r\n                e[i] = config[i];\r\n            }\r\n        }\r\n        let root = document.getElementsByTagName(config.appendTo)[0];\r\n        return (typeof root.appendChild(e) === 'object');\r\n    }\r\n    /**\r\n     * \r\n     * @param url \r\n     * @param onLoad \r\n     */\r\n    private elementLoaded(url: string, onLoad?: Function) {\r\n        if (onLoad) {\r\n            onLoad(url);\r\n        }\r\n    }\r\n    /**\r\n     * \r\n     * @param url \r\n     * @param thisObj \r\n     * @param onLoad 加载事件\r\n     */\r\n    private elementReadyStateChanged(url: string, thisObj: any, onLoad?: Function) {\r\n        if (thisObj.readyState === 'loaded' || thisObj.readyState === 'complete') {\r\n            this.elementLoaded(url, onLoad);\r\n        }\r\n    }\r\n    /**\r\n     * 加载css\r\n     * @param url css url\r\n     * @param onLoad 加载事件\r\n     */\r\n    private loadCss(url: string, onLoad?: Function) {\r\n        let result = this.createElement({\r\n            element: 'link',\r\n            rel: 'stylesheet',\r\n            type: 'text/css',\r\n            href: url,\r\n            onload: () => {\r\n                this.elementLoaded(url, onLoad);\r\n            },\r\n            appendTo: 'head'\r\n        });\r\n\r\n        //对于不触发加载事件的浏览器\r\n        // Safari在加载样式时更新document.stylesheets。\r\n        let ti = setInterval(() => {\r\n            let styles = document.styleSheets;\r\n            for (let i = 0; i < styles.length; i++) {\r\n                // console.log(styles[i].href);\r\n                if (styles[i].href &&\r\n                    styles[i].href.substr(styles[i].href.indexOf(url), styles[i].href.length) === url) {\r\n                    clearInterval(ti);\r\n                    this.elementLoaded(url, onLoad);\r\n                }\r\n            }\r\n        }, 500);\r\n\r\n        return result;\r\n    }\r\n    /**\r\n     * 加载js\r\n     * @param url js url\r\n     * @param onLoad 加载事件\r\n     */\r\n    private loadJs(url: string, onLoad?: Function) {\r\n        let result = this.createElement({\r\n            element: 'script',\r\n            type: 'text/javascript',\r\n            onload: () => {\r\n                this.elementLoaded(url, onLoad);\r\n            },\r\n            onreadystatechange: () => {\r\n                this.elementReadyStateChanged(url, this, onLoad);\r\n            },\r\n            src: url,\r\n            appendTo: 'body'\r\n        });\r\n\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 加载JavaScript、Css资源（多个）\r\n     * @param ress 资源路径数组\r\n     * @param onOneBeginLoad 单个资源开始加载回调事件\r\n     * @param onOneLoad 单个资源加载完成回调事件\r\n     * @param onLoad 所有资源加载完成回调事件\r\n     */\r\n    loadResources(ress: string[], onOneBeginLoad?: Function, onOneLoad?: Function, onLoad?: Function) {\r\n        let loaded = [];\r\n        /**\r\n         * 检测是否已经触发过onload事件\r\n         * @param url \r\n         */\r\n        const checkHaveLoaded = (url) => {\r\n            for (let i = 0; i < loaded.length; i++) {\r\n                if (loaded[i] === url) {\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        /**\r\n         * onload\r\n         * @param url \r\n         */\r\n        const _onOneLoad = (url) => {\r\n            //避免多次出发onload事件\r\n            if (checkHaveLoaded(url)) {\r\n                return;\r\n            }\r\n            loaded.push(url);\r\n            if (onOneLoad) {\r\n                onOneLoad(url, loaded.length);\r\n            }\r\n            if (loaded.length === ress.length) {\r\n                if (onLoad) {\r\n                    onLoad();\r\n                }\r\n            }\r\n        }\r\n\r\n        for (let i = 0; i < ress.length; i++) {\r\n            this.loadResource(ress[i], onOneBeginLoad, _onOneLoad);\r\n        }\r\n\r\n    }\r\n    /**\r\n     * 加载JavaScript、Css资源（一个）\r\n     * @param url 资源路径\r\n     * @param onBeginLoad 开始加载回调事件\r\n     * @param onLoad 资源加载完成回调事件\r\n     */\r\n    loadResource(url: string, onBeginLoad?: Function, onLoad?: Function) {\r\n        if (onBeginLoad) {\r\n            onBeginLoad(url);\r\n        }\r\n        let type = this.getExtension(url);\r\n        if (type.toLowerCase() === 'css') {\r\n            this.loadCss(url,onLoad);\r\n        } else {\r\n            this.loadJs(url,onLoad);\r\n        }\r\n\r\n    }\r\n\r\n}\r\nexport const simpleLoader = SimpleLoaderService.getInstance();\r\n\r\n//test\r\n// simpleLoader.loadResource(\"assets/smlib/2d/libs/moment.js/moment.min.js\", () => {\r\n//   console.log(\"simpleLoader.loadResource OnBeginLoad\");\r\n// }, () => {\r\n//   console.log(\"simpleLoader.loadResource OnLoad\");\r\n//   console.log(`moment.now():${window[\"moment\"].now()}`);\r\n// });\r\n/*\r\nsimpleLoader.loadResources([\r\n    \"assets/smlib/3d/js/china.js\",\r\n    \"assets/smlib/3d/js/config.js\",\r\n    \"assets/smlib/3d/js/echarts.js\"\r\n], (url) => {\r\n    console.log(`simpleLoader.loadResources [${url}]开始加载`);\r\n}, (url) => {\r\n    console.log(`simpleLoader.loadResources [${url}]加载完成`);\r\n}, () => {\r\n    console.log(`simpleLoader.loadResources 所有加载完成`);\r\n});\r\n*/\r\n","import { Injectable } from '@angular/core';\nimport { HttpReqService, ObjectPara } from './request.service';\nimport { TokenModel, RequestResultModel, CurrentLoginUser } from '../models/http/request.result';\n/**\n * create by ruir 20200224\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class AuthService {\n    private _tokenKey = \"\";\n    private _userKey = \"__current_user\";\n    private _currentUser: CurrentLoginUser = null;\n    constructor(private req: HttpReqService) {\n        this._tokenKey = this.req.getTokenKey();\n    }\n    /**\n     * \n     * @param key \n     * @param data \n     */\n    private saveInfo2Local(key: string, data: any) {\n        if (window.sessionStorage) {//localStorage\n            sessionStorage.setItem(key, JSON.stringify(data));\n        } else {\n            console.log(\"浏览器不支持sessionStorage\");\n        }\n    }\n    /**\n     * \n     * @param key \n     */\n    private getInfoFromLocal(key: string): string {\n        if (window.sessionStorage) {\n            return sessionStorage.getItem(key);\n        } else {\n            console.log(\"浏览器不支持sessionStorage\");\n        }\n        return \"\";\n    }\n    /**\n     * \n     * @param data \n     */\n    private saveToken(data: TokenModel) {\n        this.saveInfo2Local(this._tokenKey, data);\n        this.req.setAccessToken(data.access_token);\n    }\n    /**\n     * 获取本地保存的token\n     */\n    getLocalToken(): TokenModel {\n        let str = this.getInfoFromLocal(this._tokenKey);\n        if (str != \"\") {\n            return JSON.parse(str);\n        }\n        return null;\n    }\n    /**\n     * 刷新token\n     */\n    refreshToken(refresh_token: string): Promise<RequestResultModel> {\n        return new Promise<RequestResultModel>((resolve, reject) => {\n            this.req.get('epsoffice/token/refresh', { \"refresh_token\": refresh_token }).then(result => {\n                if (result.success) {\n                    this.saveToken(result.data);\n                }\n                resolve(result);\n            }).catch(err => reject(err));\n        });\n    }\n    /**\n     * 登录\n     * @param username \n     * @param password \n     */\n    userLogin(username: string, password: string): Promise<RequestResultModel> {\n        return new Promise((resolve, reject) => {\n            this.req.post(\"epsoffice/user/login\", { \"username\": username, \"password\": password })\n                .then(result => {\n                    if (result.success) {\n                        this._currentUser = result.data;\n                        this.saveInfo2Local(this._userKey, result.data);\n                        this.saveToken(result.data.token);\n                    }\n                    resolve(result);\n                }).catch(reject);\n        });\n    }\n\n    /**\n     * 验证token\n     */\n    checkLogin(): Promise<RequestResultModel> {\n        return this.req.get(\"epsoffice/user/login/validate\");\n    }\n    /**\n     * \n     */\n    logout() {\n        return new Promise<boolean>((resove, reject) => {\n            this.req.post(\"epsoffice/user/logout\").then(result => {\n                if (result.success) {\n                    this.removeToken();\n                }\n                resove(result.success);\n            }).catch(err => {\n                console.error(err);\n                resove(false);\n            });\n        });\n    }\n    removeToken() {\n        this._currentUser = null;\n        this.req.setAccessToken(\"\");\n        sessionStorage.removeItem(this._tokenKey);\n        sessionStorage.removeItem(this._userKey);\n    }\n    /**\n     * 远程获取用户信息\n     */\n    getRemoteUser(): Promise<CurrentLoginUser> {\n        return new Promise<CurrentLoginUser>((resolve, reject) => {\n            this.req.get(\"epsoffice/user/login/info\").then(result => {\n                if (result.success) {\n                    this._currentUser = result.data;\n                    this.saveInfo2Local(this._userKey, result.data);\n                    this._currentUser.token = this.getLocalToken();\n                    resolve(result.data);\n                } else {\n                    console.error(result.msg);\n                    resolve(null);\n                }\n            }).catch(err => {\n                console.error(err);\n                resolve(null);\n            });\n        });\n    }\n    /**\n     * 获取当前用户信息\n     */\n    getCurrentUser(): CurrentLoginUser {\n        if (this._currentUser) {\n            return this._currentUser;\n        }\n        const str = this.getInfoFromLocal(this._userKey);\n        if (str) {\n            const _user = JSON.parse(str);\n            this._currentUser = _user;\n            this._currentUser.token = this.getLocalToken();\n        }\n        return this._currentUser;\n    }\n}\n","export class GISAuthService {\n  static message: string = \"请获取开发授权！\";\n  static authtype: string = \"开发版\";\n  static encryptCode: string = \"\";\n  static decrypt(str: string, pwd?: string | number | boolean) {\n    try {\n      if (str == '') {\n        return '';\n      }\n      if (!pwd || pwd == '') {\n        pwd = 'sunway_webgis_auth_code';\n      }\n      pwd = encodeURIComponent(pwd);\n      if (str == undefined || str.length < 8) {\n        return '';\n      }\n      if (pwd == undefined || pwd.length <= 0) {\n        return '';\n      }\n      var prand: any = '';\n      for (var i = 0, len = pwd.length; i < len; i += 1) {\n        prand += pwd.charCodeAt(i).toString();\n      }\n      var sPos = Math.floor(prand.length / 5);\n      var mult = parseInt(prand.charAt(sPos) + prand.charAt(sPos * 2) + prand.charAt(sPos * 3) +\n        prand.charAt(sPos * 4) + prand.charAt(sPos * 5));\n      var incr = Math.round(pwd.length / 2);\n      var modu = Math.pow(2, 31) - 1;\n      var salt = parseInt(str.substring(str.length - 8, str.length), 16);\n      str = str.substring(0, str.length - 8);\n      prand += salt;\n      while (prand.length > 10) {\n        prand = (parseInt(prand.substring(0, 10)) +\n          parseInt(prand.substring(10, prand.length))).toString();\n      }\n      if (this.isIE()) {\n        prand++;\n      }\n      prand = (mult * prand + incr) % modu;\n      var encChr: any = '';\n      var encStr: any = '';\n      for (var i = 0, len = str.length; i < len; i += 2) {\n        encChr = parseInt(str.substring(i, i + 2), 16) ^ Math.floor((prand / modu) * 255);\n        encStr += String.fromCharCode(encChr);\n        prand = (mult * prand + incr) % modu;\n      }\n      return decodeURIComponent(encStr);\n    } catch (error) {\n      return \"\";\n    }\n  }\n\n  static validateAuth(encryptCode: string) {\n    setTimeout(() => {\n      this.doValidateAuth(encryptCode);\n    }, 0);\n  }\n  static doValidateAuth(encryptCode: string) {\n    this.encryptCode = encryptCode;\n    var enCodeStr = this.decrypt(this.encryptCode);\n    var hosts = enCodeStr.split('|')[0]; //支持多个ip同时授权，以逗号隔开\n    var deadline = enCodeStr.split('|')[1];\n    this.authtype = enCodeStr.split('|')[2];\n\n    // localhost\n    let hostname = window.location.hostname.toUpperCase();\n    if (hostname === \"LOCALHOST\") {\n      return;\n    }\n\n    var bHostPass = false;\n    var hostArry = hosts.split(',');\n    hostArry.forEach(host => {\n      if (host.toUpperCase() === hostname) {\n        bHostPass = true;\n        return;\n      }\n    });\n\n    if (!bHostPass) {\n      this.showAuthDlg(\"软件未授权，请联系软件提供商，获取授权码！\");\n      return;\n    }\n\n    //是否过期\n    if (typeof (deadline) == \"undefined\") {\n      //重定向到err页;\n      this.showAuthDlg(\"软件未授权，请联系软件提供商，获取授权码！\");\n    }\n    var oDate1 = this.getServerDate();\n    var oDate2 = new Date(deadline);\n    if (oDate1.getTime() > oDate2.getTime()) {\n      //重定向到err页;\n      this.showAuthDlg(this.authtype + \"有限期至【\" + deadline + \"】\" + \"已过期，请重新授权！@山维科技\");\n    }\n\n    if (this.authtype != \"正式版\") {\n      this.showAuthInfo(\"开发预览版，有限期至【\" + deadline + \"】\" + \"@山维科技\");\n    }\n\n  }\n\n  static isIE() { //ie?\n    if (!!window[\"ActiveXObject\"] || \"ActiveXObject\" in window) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n  static getServerDate() {\n    var xhr = null;\n    if (window['XMLHttpRequest']) {\n      xhr = new window['XMLHttpRequest']();\n    } else { // ie\n      xhr = new window[\"ActiveXObject\"](\"Microsoft\")\n    }\n    xhr.open(\"GET\", \"/\", false) //false不可变\n    xhr.send(null);\n    var date = xhr.getResponseHeader(\"Date\");\n    return new Date(date);\n  }\n  //右下角显示开发版内容\n  static showAuthInfo(msg: string) {\n\n    var chObj = document.getElementById(\"copyrightinfo\");\n    if (chObj) {\n      //存在 \n      chObj.innerHTML = msg;\n    } else {\n      var node = document.createElement(\"div\");\n      node.id = \"copyrightinfo\";\n      node.style.position = \"absolute\";\n      node.style.bottom = \"0px\";\n      node.style.right = \"20px\";\n      node.style.fontSize = \"14px\";\n      node.style.zIndex = \"700\";\n      node.style.color = \"#e51c23\";\n      var textnode = document.createTextNode(msg);\n      node.appendChild(textnode);\n      document.body.appendChild(node);\n    }\n  }\n  static showAuthDlg(msg: string) {\n\n    var chObj = document.getElementById(\"copyDlginfo\");\n    if (!chObj) {\n\n      //插入遮障 \n\n      var oMask = document.createElement(\"div\");\n      oMask.id = \"mask\";\n      oMask.style.background = \"#000\";\n      oMask.style.opacity = \"0.65\";\n      oMask.style.width = \"100%\";\n      oMask.style.position = \"absolute\";\n      oMask.style.left = \"0\";\n      oMask.style.top = \"0\";\n      oMask.style.bottom = \"0\";\n      oMask.style.zIndex = \"1000\";\n\n      document.body.appendChild(oMask);\n\n\n      //插入内容显示\n      var html = '<div style=\"text-align:center; margin-top:150px;\"><p style=\"color:red\">' + msg + '</p><a href=\"#\" id=\"hideWin\">刷新</a> </div>';\n\n      var node = document.createElement(\"div\");\n      node.id = \"copyDlginfo\";\n      node.style.position = \"absolute\";\n      node.style.top = \"0\";\n      node.style.right = \"0\";\n      node.style.bottom = \"0\";\n      node.style.left = \"0\";\n      node.style.margin = \"auto\";\n      node.style.fontSize = \"14px\";\n      node.style.borderRadius = \"20px\";\n      node.style.zIndex = \"1001\";\n      node.style.width = \"500px\"\n      node.style.height = \"300px\"\n      node.style.color = \"#e51c23\";\n      node.style.background = \"#fff\";\n      // node.style.display = \"none\";\n\n      node.innerHTML = html;\n      document.body.appendChild(node);\n\n      // let nodeTop = -1000;\n      // let timer = setInterval(() => {\n      //   if (nodeTop < 0) {\n      //     nodeTop = nodeTop + 1;\n      //     node.style.top = nodeTop + \"px\";\n      //   } else {\n      //     clearInterval(timer);\n      //   }\n      // }, 1);\n\n\n      document.getElementById('hideWin').onclick = function () {\n        window.location.reload();\n      }\n    }\n  }\n\n}\n","import { Component, OnInit, ViewChild, ViewContainerRef, Input, Output, EventEmitter, AfterViewInit, ChangeDetectorRef } from '@angular/core';\nimport { ComponentContainerDirective } from '../../directives/component-container.directive';\nimport { ServiceInjector } from '../../services/service-injector';\nimport { ComponentLoaderService } from '../../services/component-loader.service';\nimport { EventEmitterService } from '../../services/event-emitter.service';\nimport { UtilsService } from '../../services/services';\n// import { ComponentRegister } from '../../decorator/decorators';\n// @ComponentRegister({\n//   selector: 'epsgis-comp-container'\n// })\n@Component({\n  selector: 'epsgis-comp-container',\n  templateUrl: './comp-container.component.html',\n  styleUrls: ['./comp-container.component.scss'],\n})\nexport class CompContainerComponent implements OnInit, AfterViewInit {\n\n  @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: true }) container: ViewContainerRef;\n  @Input(\"config-json-file\") configJsonFile: string;\n  /**\n     * 自定义model变量\n     */\n  private _configJsonFile: string;\n  /**\n   * 返回父组件变化后的值\n   */\n  @Input()\n  get jsonFile() {\n    return this._configJsonFile;\n  }\n\n  /**\n   * 组件值产生变化后父组件改变\n   * @param value\n   */\n  set jsonFile(value) {\n    this._configJsonFile = value;\n    this.configJsonFile = value;\n    this.jsonFileChange.emit(value);\n  }\n  @Output()\n  jsonFileChange: EventEmitter<any> = new EventEmitter();\n  //增加对象配置 ruir 20200909\n  /**\n     * 自定义model变量\n     */\n  private _config: any;\n  /**\n   * 返回父组件变化后的值\n   */\n  @Input()\n  get config() {\n    return this._config;\n  }\n\n  /**\n   * 组件值产生变化后父组件改变\n   * @param value\n   */\n  set config(value) {\n    this._config = value;\n    if (typeof value === \"string\") {\n      this._configJsonFile = value;\n      this.configJsonFile = value;\n    }\n    this.configChange.emit(value);\n  }\n  @Output()\n  configChange: EventEmitter<any> = new EventEmitter();\n  /**\n   * 默认加载\n   */\n  @Input() autoLoad: boolean = true;\n  /**\n   * \n   * @param serviceInjector \n   * @param componentLoader \n   */\n  constructor(\n    public serviceInjector: ServiceInjector,\n    public cdr: ChangeDetectorRef,\n    public eventService: EventEmitterService,\n    public componentLoader: ComponentLoaderService) {\n\n    //订阅变化检测事件，当组件执行完后 add yly 20200327\n    this.eventService.rss.on(this.eventService._checkChangeDetector, (obj: any) => {\n      UtilsService.detectChanges(this.cdr);\n      // setInterval(() => { this.cdr.detectChanges(); }, 5000);\n    });\n  }\n  ngOnInit(): void {\n\n  }\n  ngAfterViewInit() {\n    this.componentLoader.setViewContainerInHome(this.container);\n    this.componentLoader.setServiceInjector(this.serviceInjector);\n    if (this.autoLoad) {\n      this._init();\n    }\n  }\n  private _init() {\n    this.serviceInjector.layoutManager.startup();\n    if (this.config) {\n      this.serviceInjector.configManager.loadConfig(this.config);\n    } else {\n      let _configJsonFile = this.serviceInjector.config.appInfo.configFile;\n      if (this.configJsonFile) {\n        _configJsonFile = this.configJsonFile;\n      }\n      this.serviceInjector.configManager.loadConfig(_configJsonFile);\n    }\n  }\n  //对外提供的函数开始\n  /**\n   * 清除已经加载的组件\n   */\n  clear() {\n    this.serviceInjector.layoutManager._destroyPreloadWidgetIcons();\n    this.serviceInjector.layoutManager._destroyOffPanelWidgets();\n    this.serviceInjector.layoutManager._destroyWidgetPlaceholders();\n    this.serviceInjector.layoutManager._destroyPreloadPanels();\n    this.serviceInjector.layoutManager._destroyPreloadGroupPanels();\n    this.serviceInjector.mapManager.destoryMap();\n  }\n  reload() {\n    this.clear();\n    this._init();\n  }\n  // 对外提供的函数结束\n}\n","<ng-template component-host> </ng-template>","import { EpsGisDirectivesModule } from '../../directives/directives.module';\nimport { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { CompContainerComponent } from './comp-container.component';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        EpsGisDirectivesModule\n    ],\n    declarations: [\n        CompContainerComponent\n    ],\n    entryComponents: [CompContainerComponent],\n    exports: [CompContainerComponent],\n    providers: []\n})\nexport class EpsGisCompContainerModule { }","import { Component, OnInit, ChangeDetectionStrategy, OnChanges, SimpleChanges, Input, TemplateRef, Type, Output, EventEmitter, ViewChild, ViewContainerRef, Renderer2, Optional, ChangeDetectorRef } from '@angular/core';\nimport { SSModalAPI } from './modal-options';\nimport { Observable } from 'rxjs';\nimport { SsStyleObjectLike, SsButtonType, SsModalTypes, OnClickCallback, SsModalOptions, SsModalButtonOptions } from './modal-types';\nimport { SsModalRef } from './modal-ref';\nimport { ModalManagerService } from '../../services/modal-manager.service';\nimport { getConfigFromComponent } from './utils';\nimport { BasePanelComponent } from '../base-panel/base-panel.component';\n\nimport { ComponentRegister } from '../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-modal',\n  path: \"epsgis/components/modal\"\n})\n@Component({\n  selector: 'epsgis-modal',\n  template: ` <ng-template><ng-content></ng-content></ng-template> `,\n  styleUrls: ['./modal.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class SSModalComponent<T = any, R = any> extends BasePanelComponent implements OnChanges, SSModalAPI<T, R> {\n\n  @Input() mask: boolean = true;\n  @Input() maskClosable: boolean = true;\n  @Input() visible: boolean = false;\n  @Input() closable: boolean = true;\n  @Input() okLoading: boolean = false;\n  @Input() okDisabled: boolean = false;\n  @Input() cancelDisabled: boolean = false;\n  @Input() cancelLoading: boolean = false;\n  @Input() keyboard: boolean = true;\n  @Input() noAnimation = false;\n  @Input() content?: string | TemplateRef<{}> | Type<T>;\n  @Input() componentParams?: T;\n  @Input() footer?: string | TemplateRef<{}> | Array<SsModalButtonOptions<T>> | null;\n  @Input() getContainer?: HTMLElement;\n  @Input() zIndex: number = 1000;\n  @Input() width: number | string = 520;\n  @Input() wrapClassName?: string;\n  @Input() className?: string;\n  @Input() styles?: object;\n  @Input() title: string;//| TemplateRef<{}>;\n  @Input() closeIcon: string | TemplateRef<void> = 'close';\n  @Input() maskStyle?: SsStyleObjectLike;\n  @Input() bodyStyle?: SsStyleObjectLike;\n  @Input() okText?: string | null;\n  @Input() cancelText?: string | null;\n  @Input() okType: SsButtonType = 'primary';\n  @Input() iconType: string = 'question-circle'; // Confirm Modal ONLY\n  @Input() modalType: SsModalTypes = 'default';\n\n  @Input()\n  @Output()\n  readonly onOk: EventEmitter<T> | OnClickCallback<T> = new EventEmitter<T>();\n  @Input()\n  @Output()\n  readonly onCancel: EventEmitter<T> | OnClickCallback<T> = new EventEmitter<T>();\n\n  @Output() readonly afterOpen = new EventEmitter<void>();\n  @Output() readonly afterClose = new EventEmitter<R>();\n  @Output() readonly visibleChange = new EventEmitter<boolean>();\n\n  @ViewChild(TemplateRef, { static: true }) contentTemplateRef!: TemplateRef<{}>;\n\n  modalRef: SsModalRef | null = null;\n\n  get afterOpenObservable(): Observable<void> {\n    return this.afterOpen.asObservable();\n  }\n\n  get afterCloseObservable(): Observable<R> {\n    return this.afterClose.asObservable();\n  }\n  // set modalFooter(value: NzModalFooterDirective) {\n  //   if (value && value.templateRef) {\n  //     this.setFooterWithTemplate(value.templateRef);\n  //   }\n  // }\n  constructor(\n    private modalService: ModalManagerService,\n    private viewContainerRef: ViewContainerRef,\n    @Optional() public _render: Renderer2\n    , @Optional() public cdr: ChangeDetectorRef) {\n    super(_render, cdr)\n  }\n  ngOnInit() {\n\n  }\n\n\n  onCloseClick(): void {\n  }\n\n  onOkClick(): void {\n  }\n  private getConfig(): SsModalOptions {\n    const componentConfig = getConfigFromComponent(this);\n    componentConfig.viewContainerRef = this.viewContainerRef;\n    if (!this.content) {\n      componentConfig.content = this.contentTemplateRef;\n    }\n    return componentConfig;\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const { Visible, ...otherChanges } = changes;\n\n    if (Object.keys(otherChanges).length && this.modalRef) {\n      this.modalRef.updateConfig(getConfigFromComponent(this));\n    }\n\n    if (Visible) {\n      if (this.visible) {\n        this.open();\n      } else {\n        this.close();\n      }\n    }\n  }\n\n\n  open(): void {\n    if (!this.visible) {\n      this.visible = true;\n      this.visibleChange.emit(true);\n    }\n\n    if (!this.modalRef) {\n      const config = this.getConfig();\n      this.modalRef = this.modalService.create(config);\n    }\n  }\n  close(result?: R): void {\n    if (this.visible) {\n      this.visible = false;\n      this.visibleChange.emit(false);\n    }\n\n    if (this.modalRef) {\n      this.modalRef.close(result);\n      this.modalRef = null;\n    }\n  }\n  destroy(result?: R): void {\n    this.close(result);\n  }\n  triggerOk(): void {\n    this.modalRef != null ? this.modalRef.triggerOk() : null;\n  }\n  triggerCancel(): void {\n    this.modalRef != null ? this.modalRef.triggerCancel() : null;\n  }\n  getContentComponent(): void | T {\n    return this.modalRef != null ? this.modalRef.getContentComponent() : null;\n  }\n  getElement(): void | HTMLElement {\n    return this.modalRef != null ? this.modalRef.getElement() : null;\n  }\n\n  getModalRef(): SsModalRef | null {\n    return this.modalRef;\n  }\n}\n","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnDestroy, Output } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { SsModalRef, isPromise } from './modal-ref';\nimport { SsModalButtonOptions, SsModalOptions } from './modal-types';\n\n@Component({\n  selector: 'div[ss-modal-footer]',\n  template: `\n    <ng-container *ngIf=\"config.footer; else defaultFooterButtons\">\n      <ng-container>\n        <div *ngIf=\"!buttonsFooter\" [innerHTML]=\"config.title\"></div>\n        <ng-container *ngIf=\"buttonsFooter\">\n          <button\n            *ngFor=\"let button of buttons\"\n            nz-button\n            (click)=\"onButtonClick(button)\"\n            [hidden]=\"!getButtonCallableProp(button, 'show')\"\n            [class]=\"getButtonClass(button)\"\n          >\n            {{ button.label }}\n          </button>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n    <ng-template #defaultFooterButtons>\n      <button\n        *ngIf=\"config.cancelText !== null\"\n        [attr.cdkFocusInitial]=\"config.autofocus === 'cancel'\"\n        nz-button\n        (click)=\"onCancel()\"\n        [disabled]=\"config.cancelDisabled\"\n        class=\"ss-btn ss-btn-default\"\n      >\n        {{ config.cancelText || locale.cancelText }}\n      </button>\n      <button\n        *ngIf=\"config.okText !== null\"\n        [attr.cdkFocusInitial]=\"config.autofocus === 'ok'\"\n        nz-button\n        class=\"ss-btn ss-btn-primary \"\n        (click)=\"onOk()\"\n        [disabled]=\"config.okDisabled\"\n      >\n        {{ config.okText || locale.okText }}\n      </button>\n    </ng-template>\n  `,\n  host: {\n    class: ''\n  },\n  changeDetection: ChangeDetectionStrategy.Default\n})\nexport class SsModalFooterComponent implements OnDestroy {\n  buttonsFooter = false;\n  buttons: SsModalButtonOptions[] = [];\n  locale: { okText?: string; cancelText?: string } = { okText: \"确定\", cancelText: \"取消\" };\n  @Output() readonly cancelTriggered = new EventEmitter<void>();\n  @Output() readonly okTriggered = new EventEmitter<void>();\n  @Input() modalRef!: SsModalRef;\n  private destroy$ = new Subject<void>();\n\n  constructor(public config: SsModalOptions) {\n    if (Array.isArray(config.footer)) {\n      this.buttonsFooter = true;\n      this.buttons = (config.footer as SsModalButtonOptions[]).map(mergeDefaultOption);\n    }\n  }\n  getButtonClass(button: SsModalButtonOptions) {\n    switch (button.type) {\n      case \"primary\":\n        return \"ss-btn ss-btn-primary\";\n      case \"dashed\":\n        return \"ss-btn ss-btn-dashed\";\n      case \"danger\":\n        return \"ss-btn ss-btn-danger\";\n      case \"link\":\n        return \"ss-btn ss-btn-link\";\n    }\n    return \"ss-btn ss-btn-default\";\n  }\n\n  onCancel(): void {\n    this.cancelTriggered.emit();\n  }\n\n  onOk(): void {\n    this.okTriggered.emit();\n  }\n\n  getButtonCallableProp(options: SsModalButtonOptions, prop: keyof SsModalButtonOptions): boolean {\n    const value = options[prop];\n    if (this.modalRef) {\n      const componentInstance = this.modalRef.getContentComponent();\n      return typeof value === 'function' ? value.apply(options, componentInstance && [componentInstance]) : value;\n    }\n    return false;\n  }\n\n\n  onButtonClick(options: SsModalButtonOptions): void {\n    const loading = this.getButtonCallableProp(options, 'loading');\n    if (!loading) {\n      const result = this.getButtonCallableProp(options, 'onClick');\n      if (options.autoLoading && isPromise(result)) {\n        options.loading = true;\n        result.then(() => (options.loading = false)).catch(() => (options.loading = false));\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n}\n\nfunction mergeDefaultOption(options: SsModalButtonOptions): SsModalButtonOptions {\n  return {\n    type: null,\n    size: 'default',\n    autoLoading: true,\n    show: true,\n    loading: false,\n    disabled: false,\n    ...options\n  };\n}\n","import { OnInit, ViewContainerRef, ViewChild, ChangeDetectorRef, Directive } from '@angular/core';\nimport { BaseWidgetComponent } from '../base-widget/base-widget.component';\nimport { ComponentLoaderService } from '../../services/component-loader.service';\nimport { ComponentContainerDirective } from '../../directives/component-container.directive';\nimport { WidgetState } from '../../models/base-widget';\n/**\n * \n */\n@Directive()\nexport class BaseMapComponent extends BaseWidgetComponent implements OnInit {\n  @ViewChild(ComponentContainerDirective, { read: ViewContainerRef, static: true }) container: ViewContainerRef;\n  //@ViewChild('mapinnercontainer', { read: ViewContainerRef, static: true }) container: ViewContainerRef;\n  private _is3d: boolean = false;\n  /**\n   * 是否3D\n   */\n  get is3D() {\n    return this._is3d;\n  }\n  /**\n   * \n   */\n  set is3D(val: boolean) {\n    this._is3d = val;\n    this.globalParams.mapConfig.is3D = val;//设置全局 用于其他地方取值\n  }\n\n  constructor(\n    public componentLoader: ComponentLoaderService\n  ) {\n    super();\n  }\n  ngOnInit() {\n    this.componentLoader.setViewContainerInMap(this.container);\n    super.ngOnInit();\n  }\n  /**\n   * \n   * @param options \n   */\n  setProps(options: { appConfig: any, config: any, manifest: any }) {\n    this.appConfig = options.appConfig;\n    //默认读取总的config.json的map.jsApi\n    if (!this.appConfig.map.jsApi) {\n      //如果没有，则读取当前组件的配置mapJsApi\n      if(this.globalParams.mapConfig.jsApi){\n        this.appConfig.map.jsApi = this.globalParams.mapConfig.jsApi;\n      }else{\n        this.appConfig.map.jsApi = this.config.mapJsApi;\n      }\n    }\n    this.widgetConfig = this.appConfig.map;\n    this.config = options.config;\n    this.widgetConfig.manifest = options.manifest;\n    this.started=true;\n    this.state=WidgetState.opened;\n    this.name=options.manifest?.name;\n    this.inPanel=options.manifest?.properties?.inPanel;\n    this.label=\"地图\";\n    this.uri=this.getCompInfo().uri;\n    this.folderUrl=this.globalParams.widgetRootPath+\"/\"+this.getCompInfo().path+\"/\";\n    this.widgetConfig.folderUrl=this.folderUrl;\n    super.setPosition(this.appConfig.map.position);\n  }\n  /**\n   * 初始化地图\n   */\n  async initMap(): Promise<any> {\n    return Promise.resolve(null);\n  }\n}\n","\nimport { Directive, Optional, TemplateRef } from '@angular/core';\nimport { SsModalRef } from './modal-ref';\n\n@Directive({\n  selector: '[SsModalFooter]',\n  exportAs: 'SsModalFooter'\n})\nexport class SsModalFooterDirective {\n  constructor(@Optional() private ssModalRef: SsModalRef, public templateRef: TemplateRef<{}>) {\n    if (this.ssModalRef) {\n      this.ssModalRef.updateConfig({\n        footer: this.templateRef\n      });\n    }\n  }\n}\n","\nimport { Observable } from 'rxjs';\n\nexport abstract class SSModalAPI<T, R> {\n  abstract afterOpen: Observable<void>;\n  abstract afterClose: Observable<R>;\n\n  abstract open(): void;\n  abstract close(result?: R): void;\n  abstract destroy(result?: R): void;\n\n  /**\n   * 手动触发nzOnOk / nzOnCancel\n   */\n  abstract triggerOk(): void;\n  abstract triggerCancel(): void;\n  /**\n   * 当指定nzContent作为组件时，返回nzContent的组件实例\n   */\n  abstract getContentComponent(): T | void;\n\n  /**\n   * 获取此Modal的dom元素\n   */\n  abstract getElement(): HTMLElement | void;\n}\n","<div class=\"pdfViewerContainer\" #pdfViewerContainer>\n\t<iframe *ngIf=\"pdfUrl\" [src]=\"pdfUrl\" frameborder=\"0\" [style.height]=\"pdfViewHeight\"></iframe>\n</div>\n","import {Component, OnInit, Input, Output, EventEmitter, ViewChild, AfterViewInit} from '@angular/core';\nimport {DomSanitizer, SafeResourceUrl} from \"@angular/platform-browser\";\nimport { ComponentRegister } from '../../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: \"pdf-viewer\",\n  path: \"components/shared/ngxviewer/pdf-viewer\"\n})\n@Component({\n  selector: \"pdf-viewer\",\n  templateUrl: \"./pdf-viewer.component.html\",\n  styleUrls: [\"./pdf-viewer.component.scss\"],\n})\nexport class PDFViewerComponent implements OnInit, AfterViewInit {\n  @ViewChild(\"pdfViewerContainer\") pdfViewerContainer: any;\n\n  @Input() width: number = 0;\n  @Input() height: number = 0;\n  @Input() viewerUrl: string;\n  @Input() source: string;\n  @Output() ready: EventEmitter<any> = new EventEmitter<any>(false);\n\n  pdfUrl: SafeResourceUrl;\n  pdfViewHeight: string = \"600px\";\n\n  constructor(public domSanitizer: DomSanitizer) {}\n\n  ngAfterViewInit(): void {\n    setTimeout(() => {\n      this.resetViewHeight();\n    }, 1000);\n  }\n\n  ngOnInit() {\n    this.pdfUrl = this.domSanitizer.bypassSecurityTrustResourceUrl(\n      this.viewerUrl + \"?file=\" + this.source\n    );\n    this.ready.emit(\"pdf viewer initialize!\");\n  }\n\n  resetViewHeight() {\n    let height = this.getMainWindowHeight();\n    if (height > 0) {\n      this.pdfViewHeight = height - 5 + \"px\";\n    } else {\n      this.pdfViewHeight = \"600px\";\n    }\n  }\n\n  /**窗体高度 */\n  getMainWindowHeight(): number {\n    let parentNode = this.pdfViewerContainer.nativeElement.parentNode;\n    while (parentNode) {\n      if (parentNode.className &&\n        (parentNode.className === \"ssmodal_content\" ||\n          parentNode.className === \"sspanel_content\")\n      ) {\n        break;\n      }\n      parentNode = parentNode.parentNode;\n    }\n    if (parentNode) {\n      return parentNode.clientHeight - 30;\n    } else {\n      parentNode = this.pdfViewerContainer.nativeElement.parentNode;\n      let contentNode = null;\n      while (parentNode) {\n        if (parentNode.childNodes && parentNode.childNodes.length > 0) {\n          for (const child of parentNode.childNodes) {\n            if (child.nodeName.toLocaleUpperCase() === \"NZ-CONTENT\") {\n              contentNode = child;\n              break;\n            }\n          }\n        }\n        if (contentNode) {\n          break;\n        }\n        parentNode = parentNode.parentNode;\n      }\n      if (contentNode) {\n        return contentNode.clientHeight;\n      }\n    }\n    return this.height;\n  }\n}\n","<div class=\"imageViewerContainer\" #imageViewerContainer>\n\t<div class=\"imageViewer\"\n\t\t (dragstart)=\"cancleCurrentImageDrag($event)\"\n\t\t (mousedown)=\"currentImageDragStart($event)\"\n\t\t (mousemove)=\"currentImageDrag($event)\"\n\t\t (mouseup)=\"currentImageDragEnd($event)\"\n\t\t [style.width]=\"imageViewerContainer.style.width\"\n\t\t [style.height]=\"imageViewHeight\" #imageViewer>\n\n\t\t<img [src]=\"currentImageUrl\"\n\t\t\t (load)=\"currentImageLoaded(showImg, imageViewer)\" #showImg>\n\n\t\t<div class=\"previousImg\" (click)=\"preOrNextImg('pre')\">\n\t\t\t<span class=\"fa fa-chevron-circle-left\" aria-hidden=\"true\" title=\"上一张\">\n\t\t\t\t<svg t=\"1588945968636\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"18261\" width=\"60\" height=\"60\"><path d=\"M564.3264 737.0752l41.5744-41.5744-184.4224-184.1152 184.4224-184.1152-41.5744-41.5744L338.944 511.3856z\" p-id=\"18262\"></path><path d=\"M511.7952 101.5808c-226.304 0-409.8048 183.5008-409.8048 409.8048s183.5008 409.8048 409.8048 409.8048S921.6 737.792 921.6 511.3856 738.0992 101.5808 511.7952 101.5808z m0 58.5728c194.048 0 351.3344 157.2864 351.3344 351.3344s-157.3888 351.232-351.3344 351.232c-194.048 0-351.3344-157.2864-351.3344-351.3344 0-93.184 36.9664-182.4768 102.912-248.4224s155.2384-102.8096 248.4224-102.8096z\" p-id=\"18263\"></path></svg>\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"nextImg\" (click)=\"preOrNextImg('next')\">\n\t\t\t<span class=\"fa fa-chevron-circle-right\" aria-hidden=\"true\" title=\"下一张\">\n\t\t\t\t<svg t=\"1588946002551\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"18478\" width=\"60\" height=\"60\"><path d=\"M459.3664 737.0752L417.792 695.5008l184.4224-184.1152L417.792 327.2704l41.5744-41.5744 225.3824 225.6896z\" p-id=\"18479\"></path><path d=\"M511.7952 101.5808c-226.304 0-409.8048 183.5008-409.8048 409.8048s183.5008 409.8048 409.8048 409.8048S921.6 737.792 921.6 511.3856 738.0992 101.5808 511.7952 101.5808z m0 58.5728c194.048 0 351.3344 157.2864 351.3344 351.3344s-157.3888 351.232-351.3344 351.232c-194.048 0-351.3344-157.2864-351.3344-351.3344 0-93.184 36.9664-182.4768 102.912-248.4224s155.2384-102.8096 248.4224-102.8096z\" p-id=\"18480\"></path></svg>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div *ngIf=\"imageSources.length>1;\" class=\"smallImageViewer\">\n\t\t<div class=\"toImg previousImgs\" title=\"向左查看\" (click)=\"previousImg(moreImg, imageViewer)\">\n\t\t\t<svg t=\"1588946161601\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4499\" width=\"16\" height=\"16\"><path d=\"M854.656 182.656a32 32 0 1 0-45.312-45.312l-352 352a32 32 0 0 0 0 45.312l352 352a32 32 0 0 0 45.312-45.312L525.248 512l329.408-329.344z m-320 0a32 32 0 1 0-45.312-45.312l-352 352a32 32 0 0 0 0 45.312l352 352a32 32 0 0 0 45.312-45.312L205.248 512l329.408-329.344z\" fill=\"#ffffff\" p-id=\"4500\"></path></svg>\t</div>\n\t\t<div class=\"toImg nextImgs\" title=\"向右查看\" (click)=\"nextImg(moreImg, imageViewer)\">\n\t\t\t<svg t=\"1588946137834\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4373\" width=\"16\" height=\"16\"><path d=\"M556.8 535.893L170.667 149.76c-13.227-13.227-13.227-34.987 0-48.213 13.226-13.227 34.986-13.227 48.213 0L605.013 487.68c13.227 13.227 13.227 34.987 0 48.213-13.226 13.227-34.986 13.227-48.213 0z\" fill=\"#ffffff\" p-id=\"4374\"></path><path d=\"M170.667 873.813L556.8 487.68c13.227-13.227 34.987-13.227 48.213 0 13.227 13.227 13.227 34.987 0 48.213L218.88 922.027c-13.227 13.226-34.987 13.226-48.213 0a33.493 33.493 0 0 1 0-48.214zM825.173 536.32L439.04 150.187c-13.227-13.227-13.227-34.987 0-48.214 13.227-13.226 34.987-13.226 48.213 0l386.134 386.134c13.226 13.226 13.226 34.986 0 48.213a33.493 33.493 0 0 1-48.214 0z\" fill=\"#ffffff\" p-id=\"4375\"></path><path d=\"M439.04 874.24l386.133-386.133c13.227-13.227 34.987-13.227 48.214 0 13.226 13.226 13.226 34.986 0 48.213L487.253 922.453c-13.226 13.227-34.986 13.227-48.213 0-13.227-13.226-13.227-34.56 0-48.213z\" fill=\"#ffffff\" p-id=\"4376\"></path></svg>\t</div>\n\t\t<div class=\"moreImg\" #moreImg [style.left]=\"moreImgInitLeft + 'px'\">\n\t\t\t<img *ngFor=\"let imgUrl of imageSources; let i = index;\" [src]=\"imgUrl\" (click)=\"changeCurrentImageUrl(imgUrl,i)\">\n\t\t</div>\n\t</div>\n\t<div class=\"imageTools\">\n\t\t<button class=\"toolsBtn imageZoomin\" title=\"放大\" (click)=\"imageZoomin()\">\n\t\t\t<svg t=\"1588941022678\" class=\"icon\" viewBox=\"0 0 1027 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"8990\" width=\"20\" height=\"20\"><path d=\"M722.489 642.844c45.511-62.577 73.955-136.533 73.955-216.177 0-204.8-164.977-369.778-369.777-369.778S56.889 221.867 56.889 426.667s164.978 369.777 369.778 369.777c79.644 0 153.6-28.444 216.177-68.266l221.867 221.866c22.756 22.756 56.889 22.756 79.645 0 22.755-22.755 22.755-56.888 0-79.644L722.489 642.844z m-295.822 96.712c-170.667 0-312.89-142.223-312.89-312.89S256 113.779 426.668 113.779 739.556 256 739.556 426.667s-142.223 312.889-312.89 312.889\" p-id=\"8991\"></path><path d=\"M227.556 398.222h398.222v56.89H227.556z\" p-id=\"8992\"></path><path d=\"M398.222 227.556h56.89v398.222h-56.89z\" p-id=\"8993\"></path></svg>\t\t\n\t\t</button>\n\t\t<button class=\"toolsBtn imageZoomout\" title=\"缩小\" (click)=\"imageZoomout()\">\n\t\t\t<svg t=\"1588941306698\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9115\" width=\"20\" height=\"20\"><path d=\"M446.258717 823.960011c-51.124378 0-100.745519-10.005888-147.456377-29.814026-45.097104-19.050891-85.673242-46.388517-120.438023-81.153298-34.762735-34.764781-62.102407-75.340919-81.153298-120.438023-19.803022-46.709835-29.814026-96.324836-29.814026-147.449213s10.011005-100.745519 29.814026-147.456377c19.050891-45.097104 46.38954-85.673242 81.153298-120.438023 34.764781-34.762735 75.340919-62.102407 120.438023-81.153298 46.709835-19.803022 96.331999-29.814026 147.456377-29.814026 51.124378 0 100.739379 10.011005 147.449213 29.814026 45.097104 19.050891 85.673242 46.38954 120.438023 81.153298 34.764781 34.764781 62.102407 75.340919 81.153298 120.438023 19.808138 46.709835 29.813003 96.331999 29.813003 147.456377s-10.005888 100.739379-29.813003 147.449213c-19.050891 45.097104-46.388517 85.673242-81.153298 120.438023-34.764781 34.764781-75.340919 62.102407-120.438023 81.153298-46.604434 19.808138-96.220459 29.814026-147.449213 29.814026z m0-688.833451c-170.920788 0-309.97889 139.058103-309.978891 309.978891 0 170.915671 139.058103 309.971727 309.978891 309.971727 170.915671 0 309.971727-139.057079 309.971727-309.971727 0-170.920788-138.951679-309.97889-309.971727-309.978891z m0 0\" p-id=\"9116\"></path><path d=\"M924.025031 957.314205c-8.823969 0-17.646915-3.337002-24.321942-10.115382L680.137395 727.635175c-13.453407-13.453407-13.453407-35.307134 0-48.76054 13.453407-13.453407 35.300994-13.453407 48.755424 0l219.563648 219.565694c13.453407 13.453407 13.453407 35.305087 0 48.759518-6.779404 6.77838-15.603373 10.114358-24.431436 10.114358z m0 0\" p-id=\"9117\"></path><path d=\"M602.106204 488.047472H290.730501c-16.679891 0-30.133298-13.453407-30.133298-30.135344 0-16.685008 13.453407-30.139437 30.133298-30.139438h311.265186c16.687054 0 30.140461 13.453407 30.140461 30.139438 0 16.681938-13.45443 30.135344-30.029944 30.135344z m0 0\" p-id=\"9118\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn rotateLeft\" title=\"向左旋转\" (click)=\"rotateLeft()\">\n\t\t\t<svg t=\"1588941359139\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9333\" width=\"20\" height=\"20\"><path d=\"M296.78775165 822.42764344a29.24918237 29.24918237 0 0 0 11.88822868 9.74972721 366.76451243 366.76451243 0 0 0 423.03239697-29.18019793c162.18119742-127.48228586 196.37422746-360.55595902 75.100495-518.98903088S456.301571 100.94781045 292.07385008 230.29266234a90.07000608 90.07000608 0 0 0-13.17592873 10.96844358c-12.57806845-15.8433068-23.52351697-30.99677536-33.82511584-43.8047899-12.8769982-16.97004443-22.07485451-30.2149576-25.70800781-33.96308395a18.16576575 18.16576575 0 0 0-14.57860182-10.00266835 19.33849276 19.33849276 0 0 0-21.70694032 16.39517847l0.3679142 1.14973193-1.33368944 20.67218142-19.49945517 135.66837756-3.1502653 18.78662109-2.71336744 16.09624873a19.82137999 19.82137999 0 0 0 3.05828656 14.14170319 16.09624795 16.09624795 0 0 0 12.44010034 7.08234912l15.86630188 2.02352844 18.62565868 2.32245896 134.08174776 13.79678406 19.75239556 1.9085554 1.14973193-0.3679142a21.08608498 21.08608498 0 0 0 21.3850155-17.63688915 18.39571183 18.39571183 0 0 0-6.43849871-16.71710329c-2.52941073-4.1620299-12.83100961-16.97004443-25.68501352-33.94008965-8.82994211-12.09518046-19.49945518-26.00693834-30.19196253-39.96468481 3.90908875-3.90908875 9.26683997-6.99037039 13.19892302-10.92245345 132.33415478-104.39566674 320.33833383-85.49407262 418.52544794 43.22992316a306.51855469 306.51855469 0 0 1-61.25772156 422.98640759 298.07952184 298.07952184 0 0 1-349.05863961 20.94811763 33.94008889 33.94008889 0 0 0-38.49302728 3.35721709 33.71014281 33.71014281 0 0 0-6.94438178 47.92083044z\" fill=\"#333333\" p-id=\"9334\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn rotateRight\" title=\"向右旋转\" (click)=\"rotateRight()\">\n\t\t\t<svg t=\"1588941386678\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9485\" width=\"20\" height=\"20\"><path d=\"M727.29746405 822.42764344a29.24918237 29.24918237 0 0 1-11.91122374 9.74972721 366.76451243 366.76451243 0 0 1-422.98640759-29.20319301C130.2416296 675.49189255 96.00261019 442.44121292 217.27634341 284.03113615s350.57628573-183.12931506 514.84999526-53.80745826a90.07000608 90.07000608 0 0 1 13.15293443 10.96844359c12.57806845-15.8203125 23.52351697-30.97378029 33.84811014-43.78179482 12.83100961-16.97004443 22.02886514-30.2149576 25.70800782-33.96308396a18.16576575 18.16576575 0 0 1 14.55560752-10.04865772 19.33849276 19.33849276 0 0 1 21.70694031 16.39517846l-0.34491988 1.14973194 1.33368941 20.69517649 19.36148706 135.76035631 3.17326038 18.7866211 2.71336744 16.09624793a19.82137999 19.82137999 0 0 1-3.05828733 14.14170397 16.09624795 16.09624795 0 0 1-12.44010035 7.05935405l-15.88929616 2.0465235-18.57966932 2.29946389-134.10474207 13.79678407-19.75239632 1.9315497-1.14973194-0.3909085a21.08608498 21.08608498 0 0 1-21.38501549-17.61389485 18.39571183 18.39571183 0 0 1 6.43849949-16.7171033c2.50641566-4.1850242 12.83100961-16.97004443 25.68501351-33.94008887 8.82994211-12.11817552 19.49945518-26.02993264 30.19196255-39.96468481-3.90908875-3.90908875-9.26683997-7.01336545-13.19892381-10.94544852-132.33415478-104.39566674-320.33833383-85.49407262-418.52544717 43.22992316A306.51855469 306.51855469 0 0 0 332.87039983 750.45441943a298.07952184 298.07952184 0 0 0 348.98965516 20.74116586 33.94008889 33.94008889 0 0 1 38.51602234 3.38021216 33.71014281 33.71014281 0 0 1 6.9443818 47.92082966z\" fill=\"#333333\" p-id=\"9486\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn flipVertical\" title=\"垂直翻转\" (click)=\"flipVertical()\">\n\t\t\t<svg t=\"1588941411559\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9669\" width=\"20\" height=\"20\"><path d=\"M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z\" p-id=\"9670\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn flipHorizontal\" title=\"水平翻转\" (click)=\"flipHorizontal()\">\n\t\t\t<svg t=\"1588941431636\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"9885\" width=\"20\" height=\"20\"><path d=\"M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z\" p-id=\"9886\"></path></svg>\n\t\t</button>\n\t\t<button class=\"toolsBtn imageReset\" title=\"重置\" (click)=\"currentImgReset()\">\n\t\t\t<svg t=\"1588941445066\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"10072\" width=\"20\" height=\"20\"><path d=\"M666.1 731.4c-48.6 35-105.6 52.5-163.8 51.8-7.7-0.1-15.3-0.7-22.9-1.3-3.1-0.3-6.1-0.8-9.2-1.3-6-0.8-11.9-1.5-17.7-2.8-3.6-0.6-7.2-1.7-10.6-2.5-5.7-1.3-11.4-2.6-16.9-4.3-2.6-1-5.1-1.9-7.8-3-6.5-2.1-12.9-4.4-19-7-1.4-0.6-2.8-1.2-4.1-1.7-7.2-3.4-14.4-6.9-21.3-10.6-0.3-0.2-0.6-0.3-0.9-0.5-23.5-13.3-44.9-29.6-63.7-49-0.3-0.3-0.6-0.7-0.9-1-5.8-6-11.4-12.2-16.7-18.9-1.1-1.4-2.1-2.7-3.3-4.3-38.2-49.1-61.2-111.3-61.2-178.8h73.6L182 314.7 64.2 496.1h73.5c0 79.4 24.2 153.1 65.2 214.2 0.5 0.9 0.8 1.9 1.4 2.6 4.2 6.3 9 12 13.5 17.8 1.8 2.1 3.3 4.3 5.1 6.7 6.6 8.2 13.9 16.1 21.1 23.8 0.8 0.8 1.4 1.4 2 2.1 24.7 25.4 52.4 46.6 82.7 63.8 0.8 0.5 1.5 0.8 2.4 1.4 8.7 4.8 17.7 9.3 26.7 13.3 2.3 1 4.5 2.1 6.7 3 7.8 3.4 15.8 6.2 23.8 9.1 3.8 1.4 7.5 2.6 11.4 3.9 7 2.1 14.2 3.9 21.5 5.6 4.8 1.2 9.5 2.4 14.4 3.4 2 0.5 3.9 1.2 5.9 1.4 6.9 1.3 13.7 1.9 20.5 2.8 2.5 0.5 5 0.9 7.4 1.2 12.3 1.2 24.5 2 36.8 2 74.7 0 147.7-23.5 210.3-68.5 19.9-14.4 24.8-42.7 10.9-63.1-13.9-20.8-41.3-25.7-61.3-11.2z m219.5-206.6c0-79.3-23.9-152.9-64.7-213.6-0.6-1-1-2.1-1.5-3-5.3-7.5-10.7-14.4-16.2-21.5-0.6-0.8-1.3-1.7-1.8-2.6-37.5-46.4-84.4-82.4-137.4-106-1.6-0.6-2.9-1.4-4.5-2-8.5-3.6-17.2-6.7-26-9.8-3-1-6.2-2.2-9.3-3.2-7.7-2.4-15.3-4.3-23.1-6.2-4.3-1-8.7-2.1-13-3-2.1-0.4-4.1-1-6.3-1.5-5.8-1-11.5-1.5-17.4-2.3-4.1-0.5-8-1.1-12-1.5-9.8-1-19.5-1.4-29.2-1.5-1.8 0-3.5-0.3-5.3-0.3-0.3 0-0.6 0.1-0.9 0.1-74.6 0.1-147.5 23.2-210 68.3-19.9 14.3-24.8 42.6-10.8 63.2 13.9 20.4 41.5 25.5 61.5 11 48.2-34.7 104.6-52.3 162.3-51.8 8.3 0.1 16.6 0.5 24.6 1.3 2.5 0.2 4.9 0.6 7.4 1 6.6 0.8 13.2 1.7 19.8 3.2 2.8 0.5 5.7 1.3 8.4 1.9 6.5 1.5 12.7 3 18.9 5 2.1 0.6 4 1.3 5.8 2.1 7.2 2.4 14.2 4.9 21 7.9 0.8 0.2 1.4 0.8 2.1 1 41.2 18.2 77.3 46.1 105.5 81.2 0.1 0.1 0.2 0.4 0.4 0.6 39.6 49.6 63.5 113 63.5 182h-73.7l117.9 181.5 117.6-181.5h-73.6z\" p-id=\"10073\"></path></svg>\n\t\t</button>\n\t</div>\n</div>\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild } from '@angular/core';\nimport { DomSanitizer, SafeResourceUrl } from \"@angular/platform-browser\";\nimport { EventEmitterService } from '../../../../services/event-emitter.service';\n\nimport { ComponentRegister } from '../../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: \"image-viewer\",\n  path: \"components/shared/ngxviewer/image-viewer\"\n})\n@Component({\n  selector: \"image-viewer\",\n  templateUrl: \"./image-viewer.component.html\",\n  styleUrls: [\"./image-viewer.component.scss\"],\n})\nexport class ImageViewerComponent implements OnInit {\n  @ViewChild(\"imageViewerContainer\")\n  imageViewerContainer: any;\n  @ViewChild(\"showImg\") showImg: any;\n\n  @Input() width: number = 0;\n  @Input() height: number = 0;\n  @Input() source: string[];\n  @Input() first: number = 0;\n  @Output() ready: EventEmitter<any> = new EventEmitter<any>(false);\n\n  private currentImage: HTMLImageElement;\n  imageSources: SafeResourceUrl[] = [];\n  currentImageUrl: SafeResourceUrl; // 当前主图路径\n  private radian: number = 0; // 旋转变换参数\n  private x: number = 1; // 水平变换参数\n  private y: number = 1; // 垂直变换参数\n  private zoom: number = 0.1; // 缩放比率\n  private initTop: number; // 图片初始css的top值\n  private initLeft: number; // 图片初始css的left值\n  moreImgInitLeft: number = 0; // 图片列表容器初始css的left值\n  private currentImageTempTop: number = 0;\n  private currentImageTempLeft: number = 0;\n  private dragStartClientX: number = 0;\n  private dragStartClientY: number = 0;\n  private isStartMove: boolean = false;\n  imageViewHeight: string = \"400px\";\n  mainWindowHeight: number = 0;\n\n  constructor(\n    public domSanitizer: DomSanitizer,\n    private eventService: EventEmitterService\n  ) {}\n\n  ngOnInit() {\n    this.convertUrl(this.source);\n  }\n  private convertUrl(sources: string[]) {\n    this.imageSources.splice(0);\n    if (sources && sources.length > 0) {\n      sources.forEach((imgUrl: string) => {\n        this.imageSources.push(\n          this.domSanitizer.bypassSecurityTrustResourceUrl(imgUrl)\n        );\n      });\n      if (this.first == null) {\n        this.currentImageUrl = this.imageSources[0];\n      } else {\n        this.currentImageUrl = this.imageSources[this.first];\n      }\n      this.ready.emit(\"image viewer initialize!\");\n    } else {\n      throw \"没有图片源，请传入！\";\n    }\n  }\n  /**\n   *\n   * @param sources\n   */\n  changeImageSources(sources: string[]) {\n    this.source = sources;\n    this.convertUrl(this.source);\n  }\n  /**\n   * 主图加载完成\n   * @param img\n   * @param viewer\n   */\n  currentImageLoaded(img: HTMLImageElement, viewer: HTMLDivElement) {\n    this.currentImage = img;\n    this.initTop = (viewer.clientHeight - img.offsetHeight) / 2;\n    this.initLeft = (viewer.clientWidth - img.offsetWidth) / 2;\n    if (this.currentImage) {\n      this.currentImage.style.top = this.initTop + \"px\";\n      this.currentImage.style.left = this.initLeft + \"px\";\n    }\n    this.mainWindowHeight = this.getMainWindowHeight();\n    if (this.imageSources.length > 1) {\n      this.imageViewHeight = this.mainWindowHeight - 96 + \"px\";\n    } else {\n      this.imageViewHeight = this.mainWindowHeight - 46 + \"px\";\n    }\n    // viewer注册滚轮事件, 火狐浏览器滚轮事件为DOMMouseScroll，其它浏览器为mousewheel\n    if (this.checkBrowser().firefox) {\n      viewer.addEventListener(\"DOMMouseScroll\", (e: any) => {\n        this.currentImageZoomByWheel(e);\n      });\n    } else {\n      viewer.addEventListener(\"mousewheel\", (e: any) => {\n        this.currentImageZoomByWheel(e);\n      });\n    }\n  }\n\n  preOrNextImg(type: string) {\n    let index: number = this.imageSources.indexOf(this.currentImageUrl);\n    if (type == \"pre\") {\n      if (index != 0) {\n        index--;\n        this.currentImageUrl = this.imageSources[index];\n        this.eventService.rss.emit(this.eventService._imageViewerIndexChanged, {\n          index: index,\n        });\n      }\n    } else if (type == \"next\") {\n      if (index != this.imageSources.length - 1) {\n        index++;\n        this.currentImageUrl = this.imageSources[index];\n        this.eventService.rss.emit(this.eventService._imageViewerIndexChanged, {\n          index: index,\n        });\n      }\n    }\n    this.currentImgReset();\n  }\n\n  /**\n   * 根据变换参数改变主图\n   */\n  changeCurrentImg() {\n    let matrix: any = this.getMatrix(this.radian, this.x, this.y);\n    if (this.currentImage) {\n      this.currentImage.style.transform =\n        \"matrix(\" +\n        matrix.M11.toFixed(16) +\n        \",\" +\n        matrix.M21.toFixed(16) +\n        \",\" +\n        matrix.M12.toFixed(16) +\n        \",\" +\n        matrix.M22.toFixed(16) +\n        \", 0, 0)\";\n    }\n  }\n\n  /**\n   * 获取变换参数函数\n   *  radian\n   *  x\n   *  y\n   *  {{M11: number, M12: number, M21: number, M22: number}}\n   */\n  getMatrix(radian: number, x: number, y: number): any {\n    let Cos = Math.cos(radian),\n      Sin = Math.sin(radian);\n    return {\n      M11: Cos * x,\n      M12: -Sin * y,\n      M21: Sin * x,\n      M22: Cos * y,\n    };\n  }\n\n  /**\n   * 设置垂直翻转有关变量\n   */\n  vertical() {\n    this.radian = Math.PI - this.radian;\n    this.y *= -1;\n  }\n\n  /**\n   * 设置水平翻转有关变量\n   */\n  horizontal() {\n    this.radian = Math.PI - this.radian;\n    this.x *= -1;\n  }\n\n  /**\n   * 设置旋转的弧度\n   * @param radian\n   */\n  rotate(radian: number) {\n    this.radian = radian;\n  }\n\n  /**\n   * 设置弧度为向左转90度\n   */\n  rotateLeftBy90() {\n    this.radian -= Math.PI / 2;\n  }\n\n  /**\n   * 设置弧度为向左转90度\n   */\n  rotateRightBy90() {\n    this.radian += Math.PI / 2;\n  }\n\n  /**\n   * 根据角度设置旋转的弧度\n   *  degress\n   */\n  rotateByDegress(degress: number) {\n    this.radian = (degress * Math.PI) / 180;\n  }\n\n  /**\n   * 判断是否可以放大/缩小\n   *  scale\n   *  zoom\n   *  {number}\n   */\n  getZoom(scale: number, zoom: number): number {\n    return scale > 0 && scale > -zoom\n      ? zoom\n      : scale < 0 && scale < zoom\n      ? -zoom\n      : 0;\n  }\n\n  /**\n   * 设置缩放的有关变量\n   * @param zoom\n   */\n  scale(zoom: number) {\n    if (zoom) {\n      let hZoom: number = this.getZoom(this.x, zoom),\n        vZoom: number = this.getZoom(this.y, zoom);\n      if (hZoom && vZoom) {\n        this.x += hZoom;\n        this.y += vZoom;\n      }\n    }\n  }\n\n  /**\n   * 设置放大的有关变量\n   */\n  zoomin() {\n    this.scale(Math.abs(this.zoom));\n  }\n\n  /**\n   * 设置缩小的有关变量\n   */\n  zoomout() {\n    this.scale(-Math.abs(this.zoom));\n  }\n\n  /**\n   * 重置参数\n   */\n  reset() {\n    this.radian = 0;\n    this.x = 1;\n    this.y = 1;\n    this.zoom = 0.1;\n    if (this.currentImage) {\n      this.currentImage.style.top = this.initTop + \"px\";\n      this.currentImage.style.left = this.initLeft + \"px\";\n    }\n  }\n\n  // 以下为工具栏的按钮点击事件\n\n  /**\n   * 放大按钮事件\n   */\n  imageZoomin() {\n    this.zoomin();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 缩小按钮事件\n   */\n  imageZoomout() {\n    this.zoomout();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 向左旋转按钮事件\n   */\n  rotateLeft() {\n    this.rotateLeftBy90();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 向右旋转按钮事件\n   */\n  rotateRight() {\n    this.rotateRightBy90();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 垂直翻转按钮事件\n   */\n  flipVertical() {\n    this.horizontal();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 水平翻转按钮事件\n   */\n  flipHorizontal() {\n    this.vertical();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 主图恢复初始状态\n   */\n  currentImgReset() {\n    this.reset();\n    this.changeCurrentImg();\n  }\n\n  /**\n   * 下一页图片\n   * @param moreImg\n   * @param viewer\n   */\n  previousImg(moreImg: HTMLDivElement, viewer: HTMLDivElement) {\n    let moveVal: number =\n      Number(moreImg.style.left.split(\"px\")[0]) + viewer.clientWidth;\n    this.moreImgInitLeft = moveVal < 0 ? moveVal : 0;\n    if (this.moreImgInitLeft <= 0) {\n      this.moreImgInitLeft = 30;\n    }\n  }\n\n  /**\n   * 下一页图片\n   * @param moreImg\n   * @param viewer\n   */\n  nextImg(moreImg: HTMLDivElement, viewer: HTMLDivElement) {\n    let moveVal: number =\n      Number(moreImg.style.left.split(\"px\")[0]) - viewer.clientWidth;\n    this.moreImgInitLeft =\n      -moreImg.clientWidth < moveVal ? moveVal : this.moreImgInitLeft;\n    if (this.moreImgInitLeft <= 0) {\n      this.moreImgInitLeft = 30;\n    }\n  }\n\n  /**\n   * 点击小图加载主图事件\n   * @param imgUrl\n   */\n  changeCurrentImageUrl(imgUrl: string, index: number) {\n    this.currentImageUrl = imgUrl;\n    this.currentImgReset();\n    this.eventService.rss.emit(this.eventService._imageViewerIndexChanged, {\n      index: index,\n    });\n  }\n  /**\n   * 根据索引切换图片\n   */\n  changeCurrentIndex(index: number) {\n    if (index >= 0 && index < this.imageSources.length) {\n      this.currentImageUrl = this.imageSources[index];\n      this.currentImgReset();\n    }\n  }\n  /**\n   * 滚轮缩放\n   * @param e\n   */\n  currentImageZoomByWheel(e: any) {\n    e.preventDefault(); // 禁用滚轮事件的默认操作\n    let scale: number =\n      (e.wheelDelta ? e.wheelDelta / -180 : (e.detail || 0) / 3) *\n      Math.abs(this.zoom);\n    this.scale(scale);\n    if (this.x >= 0.1 && this.y >= 0.1) {\n      // 修复chrome下图片缩小到一定程度会突然变大的bug\n      this.changeCurrentImg();\n    }\n  }\n\n  /**\n   * 主图拖动开始事件\n   * @param e\n   */\n  currentImageDragStart(e: MouseEvent) {\n    if (this.currentImage) {\n      this.currentImageTempTop = parseInt(this.currentImage.style.top);\n      this.currentImageTempLeft = parseInt(this.currentImage.style.left);\n    }\n    this.dragStartClientX = e.clientX;\n    this.dragStartClientY = e.clientY;\n    if (this.currentImage) {\n      this.currentImage.style.transition = \"all 0s ease-out\";\n    }\n    this.isStartMove = true;\n  }\n\n  /**\n   * 设置照片高度\n   */\n  setImageHeight() {\n    const height = this.getMainWindowHeight();\n    if (height !== this.mainWindowHeight) {\n      this.mainWindowHeight = height;\n      if (this.imageSources.length > 1) {\n        this.imageViewHeight = height - 96 + \"px\";\n      } else {\n        this.imageViewHeight = height - 46 + \"px\";\n      }\n    }\n  }\n\n  /**\n   * 主图拖动中事件\n   * @param e\n   */\n  currentImageDrag(e: MouseEvent) {\n    this.setImageHeight();\n    if (this.isStartMove) {\n      let offsetX: number = e.clientX - this.dragStartClientX;\n      let offsetY: number = e.clientY - this.dragStartClientY;\n      if (this.currentImage) {\n        this.currentImage.style.top = this.currentImageTempTop + offsetY + \"px\";\n        this.currentImage.style.left =\n          this.currentImageTempLeft + offsetX + \"px\";\n      }\n    }\n  }\n\n  /**\n   * 主图拖动结束事件\n   * @param e\n   */\n  currentImageDragEnd(e: MouseEvent) {\n    if (this.currentImage) {\n      this.currentImage.style.transition = \"all 0.5s ease-out\";\n    }\n    this.isStartMove = false;\n  }\n\n  /**\n   * 取消默认的拖拽事件\n   *  e\n   */\n  cancleCurrentImageDrag(e: DragEvent) {\n    e.preventDefault();\n  }\n\n  /**\n   * 计算窗体高度，\n   * ssmodal_content 为模态对话框；\n   * sspanel_content 为map中的panel。\n   */\n  getMainWindowHeight(): number {\n    let parentNode = this.imageViewerContainer.nativeElement.parentNode;\n    while (parentNode) {\n      if (parentNode.className &&\n        (parentNode.className === \"ssmodal_content\" ||\n          parentNode.className === \"sspanel_content\")\n      ) {\n        break;\n      }\n      parentNode = parentNode.parentNode;\n    }\n    if (parentNode) {\n      return parentNode.clientHeight - 30;\n    } else {\n      parentNode = this.imageViewerContainer.nativeElement.parentNode;\n      let contentNode = null;\n      while (parentNode) {\n        if (parentNode.childNodes && parentNode.childNodes.length > 0) {\n          for (const child of parentNode.childNodes) {\n            if (child.nodeName.toLocaleUpperCase() === \"NZ-CONTENT\") {\n              contentNode = child;\n              break;\n            }\n          }\n        }\n        if (contentNode) {\n          break;\n        }\n        parentNode = parentNode.parentNode;\n      }\n      if (contentNode) {\n        return contentNode.clientHeight;\n      }\n    }\n    return this.height;\n  }\n\n  /**\n   * 检测浏览器\n   *  {any}\n   */\n  checkBrowser(): any {\n    let browser: any = {},\n      ua: string = navigator.userAgent;\n\n    // 检测Presto内核的Opera浏览器\n    if (window[\"opera\"]) {\n      browser.ver = window[\"opera\"].version();\n      browser.opera = parseFloat(browser.ver);\n    } else {\n      //确定 Microsoft Edge\n      if (/Edge\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.misEdge = parseFloat(browser.ver);\n      }\n\n      // 确定 WebKit内核Opera\n      else if (/OPR\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.opera = parseFloat(browser.ver);\n      }\n\n      // 确定 Chrome\n      else if (/Chrome\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.chrome = parseFloat(browser.ver);\n      }\n\n      // 确定 Safari\n      else if (/Version\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.safari = parseFloat(browser.ver);\n      }\n\n      // 确定 Firefox\n      else if (/Firefox\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.firefox = parseFloat(browser.ver);\n      }\n\n      // 检测 IE\n      else if (/MSIE ([^;]+)/.test(ua) || /rv:([^\\)]+)\\) like Gecko/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.ie = parseFloat(browser.ver);\n      }\n\n      // 检测 KHTML 用于Konqueror3.1及更早版本中不包含KHTML的版本，故而就要使用Konqueror的版本来代替\n      else if (/KHTML\\/(\\S+)/.test(ua) || /Konqueror\\/(\\S+)/.test(ua)) {\n        browser.ver = RegExp[\"$1\"];\n        browser.konq = parseFloat(browser.ver);\n      }\n    }\n    return browser;\n  }\n}\n","<p class=\"video-list\">\n\t<span *ngFor=\"let video of source;let i=index\" class='label'\n\t\t[ngClass]=\"{'label-default': i != sub,'label-primary': i == sub}\"\n\t\t  (click)=\"selectVideo(video,i)\">视频{{i+1}}\n\t</span>\n</p>\n<div class=\"videoViewerContainer\"\n\t (mouseover)=\"videoMouseover($event)\"\n\t (mouseout)=\"videoMouseout($event)\"\n\t [style.width]=\"width + 'px'\" #videoViewerContainer>\n\t<div class=\"videoViewer\">\n\t\t<video (click)=\"playOrPause()\"\n\t\t\t   [width]=\"videoWidth\"\n\t\t\t   [poster]=\"poster\"\n\t\t\t   (loadedmetadata)=\"onLoadedmetadata($event)\"\n\t\t\t   (ended)=\"OnPlayEnded($event)\"\n\t\t\t   (timeupdate)=\"onTimeupdate($event)\"\n\t\t\t   (progress)=\"onProgress($event)\"\n\t\t\t   (canplaythrough)=\"onCanplaythrough($event)\"\n\t\t\t   (play)=\"onPlay($event)\">\n\t\t\t<source [src]=\"videoUrl\" type=\"video/mp4\"/>\n\t\t</video>\n\t\t<div *ngIf=\"videoElem && videoElem.paused\">\n\t\t\t<span class=\"fa\"\n\t\t\t\t  (click)=\"playOrPause()\"\n\t\t\t\t  [ngClass]=\"{'fa-repeat': videoElem.ended, 'fa-play-circle-o': !videoElem.ended}\"\n\t\t\t\t  [title]=\"videoElem.ended ? '重播' : '播放'\">\n\t\t\t</span>\n\t\t</div>\n\t</div>\n\t<div class=\"videoToolbar\" *ngIf=\"videoElem\" #videoToolbar>\n\t\t<div class=\"videoToolbar_progress\"\n\t\t\t [style.height]=\"videoToolbarProgressHeight + 'px'\">\n\t\t\t<span\n\t\t\t\t(mousedown)=\"progressBallDragStart($event)\"\n\t\t\t\t(mousemove)=\"progressBallDrag($event)\"\n\t\t\t\t(mouseup)=\"progressBallDragEnd($event)\"\n\t\t\t\t(mouseleave)=\"progressBallDragEnd($event)\"\n\t\t\t\t[style.left]=\"play_progress + 'px'\"\n\t\t\t\t[style.margin-left]=\"play_progress > 16 ? '-16px' : '0'\"\n\t\t\t\t[style.opacity]=\"showProgressBall ? 1 : 0\"\n\t\t\t\tclass=\"progress_val_ball\">\n\n\t\t\t\t<span>\n\t\t\t\t\t{{getFormatTime(play_progress / videoToolbar.clientWidth * videoElem.duration)}}\n\t\t\t\t</span>\n\n\t\t\t</span>\n\t\t\t<div (mousemove)=\"videoToolbarProgressMove($event)\" (click)=\"videoToolbarProgressClick($event)\"\n\t\t\t\t class=\"videoToolbar_play_progress\" [style.width]=\"play_progress + 'px'\">\n\t\t\t</div>\n\t\t\t<div (mousemove)=\"videoToolbarProgressMove($event)\" (click)=\"videoToolbarProgressClick($event)\"\n\t\t\t\t class=\"videoToolbar_buffer_progress\">\n\t\t\t</div>\n\t\t\t<span class=\"timeTip\" [style.left]=\"(timeTipOffsetX -16) + 'px'\">\n\t\t\t\t{{timeTip}}\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"videoToolbar_play_btn\">\n\t\t\t<span (click)=\"playOrPause()\" *ngIf=\"videoElem.paused\" class=\"playBtn fa fa-play-circle-o\"\n\t\t\t\t  aria-hidden=\"true\" [title]=\"videoElem.ended ? '重播' : '播放'\"></span>\n\t\t\t<span (click)=\"playOrPause()\" *ngIf=\"!videoElem.paused\" class=\"playBtn fa fa-pause-circle-o\"\n\t\t\t\t  aria-hidden=\"true\" title=\"暂停\"></span>\n\t\t\t<span class=\"playTime\">\n\t\t\t\t<span>{{currentTime}}</span>&nbsp;/&nbsp;{{totalTime}}\n\t\t\t</span>\n\t\t</div>\n\t\t<div class=\"videoToolbar_volume_btn\">\n\t\t\t<span (click)=\"isMuted()\" class=\"mutedBtn fa\"\n\t\t\t\t  [ngClass]=\"{'fa-volume-down': videoElem.volume > 0 && videoElem.volume < 0.5, 'fa-volume-up': videoElem.volume >= 0.5, 'fa-volume-off': videoElem.volume == 0}\"\n\t\t\t\t  aria-hidden=\"true\" title=\"静音设置\"></span>\n\t\t\t<span class=\"volume_val\"\n\t\t\t\t  #volume_val>\n\t\t\t\t<span class=\"volume_val_ball\"\n\t\t\t\t\t  (mousedown)=\"volumeBallDragStart($event)\"\n\t\t\t\t\t  (mousemove)=\"volumeBallDrag($event, volume_val.clientWidth)\"\n\t\t\t\t\t  (mouseup)=\"volumeBallDragEnd($event)\"\n\t\t\t\t\t  (mouseleave)=\"volumeBallDragEnd($event)\"\n\t\t\t\t\t  [style.left]=\"(videoElem.volume * 100 - 8) + 'px'\">\n\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{(videoElem.volume * 100).toFixed(0) + '%'}}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t\t<span (click)=\"volumeValClick($event, volume_val.clientWidth)\" class=\"volume_val_active\"\n\t\t\t\t\t  [style.width]=\"(videoElem.volume * 100) + 'px'\"></span>\n\t\t\t\t<span (click)=\"volumeValClick($event, volume_val.clientWidth)\" class=\"volume_val_notActive\"></span>\n\t\t\t</span>\n\t\t</div>\n\t</div>\n</div>\n","<div class=\"epsgis-ngx-viewer\">\n\t<pdf-viewer *ngIf=\"model == 'pdf'\" [width]=\"width\" [height]=\"height\" [source]=\"source\" [viewerUrl]=\"viewerUrl\" (ready)=\"viewerReady($event)\"></pdf-viewer>\n\t<image-viewer *ngIf=\"model == 'image'\" [source]=\"source\" [width]=\"width\" [height]=\"height\" [first]=\"first\" (ready)=\"viewerReady($event)\"></image-viewer>\n\t<video-viewer *ngIf=\"model == 'video'\" [poster]=\"poster\" [source]=\"source\" [width]=\"width\" [videoWidth]='videoWidth' [height]=\"height\" (ready)=\"viewerReady($event)\"></video-viewer>\n</div>\n","import {Component, OnInit, ViewChild, ElementRef} from '@angular/core';\nimport {Input, Output, EventEmitter} from \"@angular/core\";\nimport {DomSanitizer, SafeResourceUrl} from \"@angular/platform-browser\";\nimport { ComponentRegister } from '../../../../decorator/component-register.decorator';\n@ComponentRegister({\n\turi: 'video-viewer',\n  path: \"components/shared/ngxviewer/video-viewer\"\n})\n@Component({\n\tselector: 'video-viewer',\n\ttemplateUrl: './video-viewer.component.html',\n\tstyleUrls: ['./video-viewer.component.scss']\n})\nexport class VideoViewerComponent implements OnInit {\n\n\t@ViewChild('videoToolbar',{static:true}) videoToolbar: ElementRef;\n\t@Input() width: number = 0;\n\t@Input() videoWidth: number = 0;\n\t@Input() height: number = 0;\n\t@Input() source: string[] = [];\n\t@Input() poster: string;\n\t@Output() ready: EventEmitter<any> = new EventEmitter<any>(false);\n\n\tvideoElem: HTMLVideoElement; // video dom对象\n\tsub: number = 0;\n\tvideoUrl: SafeResourceUrl; // 视频路径\n\tcurrentTime: string; // 视频播放的当前时间\n\ttotalTime: string; // 视频总时间\n\tplay_progress: number = 0; // 播放的进度条长度值\n\tvideoToolbarProgressHeight: number = 3; // 进度条高度\n\tpreVolume: number = 1; // 静音设置前的音量值\n\tshowProgressBall: boolean = false; // 是否显示进度条上滑动的球\n\tprogressBallDragStartClientX: number = 0; // 进度条上滑动的球初始x位置\n\tisProgressBallStartMove = false; // 进度条上的球是否开始滑动\n\tvolumeBallDragStartClientX: number = 0; // 音量条上滑动的球初始x位置\n\tisVolumeBallStartMove = false; // 音量条上的球是否开始滑动\n\ttimeTip: string; // 时间提示\n\ttimeTipOffsetX: number = 0;\n\n\tconstructor(public domSanitizer: DomSanitizer) {\n\t}\n\n\tngOnInit() {\n\t\tthis.videoUrl = this.source[0];\n\t\tthis.ready.emit('video viewer initialize!');\n\t}\n\n\t/**\n\t * 视频的元数据已加载事件\n\t * @param e\n\t */\n\tonLoadedmetadata(e: any) {\n\t\tthis.videoElem = e.target as HTMLVideoElement;\n\t\tthis.totalTime = this.getFormatTime(this.videoElem.duration);\n\t\tthis.currentTime = this.getFormatTime(this.videoElem.currentTime);\n\t}\n\n\t/**\n\t * 播放结束事件\n\t * @param e\n\t */\n\tOnPlayEnded(e: any) {\n\t\tconsole.log(`播放结束：${this.videoElem.ended}`);\n\t}\n\n\t/**\n\t * 开始播放事件\n\t * @param e\n\t */\n\tonPlay(e: any) {\n\t\tconsole.log('play');\n\t}\n\n\t/**\n\t * 播放时间改变事件\n\t * @param e\n\t */\n\tonTimeupdate(e: any) {\n\t\tthis.currentTime = this.getFormatTime(this.videoElem.currentTime);\n\t\tthis.play_progress = this.videoElem.currentTime / this.videoElem.duration * this.videoToolbar.nativeElement.clientWidth;\n\t}\n\n\tonProgress(e: any) {\n\t\tconsole.log('progress');\n\t}\n\n\tonCanplaythrough(e: any) {\n\t\tconsole.log('canplaythrough');\n\t}\n\n\tvideoToolbarProgressClick(e: MouseEvent) {\n\t\tthis.play_progress = e.offsetX;\n\t\tlet tempCurrentTime: number = this.play_progress / this.videoToolbar.nativeElement.clientWidth * this.videoElem.duration;\n\t\tthis.videoElem.currentTime = tempCurrentTime;\n\t\tthis.currentTime = this.getFormatTime(tempCurrentTime);\n\t}\n\n\tvideoToolbarProgressMove(e: MouseEvent) {\n\t\tlet tempCurrentTime: number = e.offsetX / this.videoToolbar.nativeElement.clientWidth * this.videoElem.duration;\n\t\tthis.timeTipOffsetX = e.offsetX;\n\t\tthis.timeTip = this.getFormatTime(tempCurrentTime);\n\t}\n\n\tprogressBallDragStart(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.progressBallDragStartClientX = e.clientX;\n\t\tthis.isProgressBallStartMove = true;\n\t}\n\n\tprogressBallDrag(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tif (this.isProgressBallStartMove) {\n\t\t\tlet offsetX: number = e.clientX - this.progressBallDragStartClientX;\n\t\t\tthis.progressBallDragStartClientX = e.clientX;\n\t\t\tthis.play_progress = (this.play_progress + offsetX);\n\t\t\tif (this.play_progress >= this.videoToolbar.nativeElement.clientWidth) {\n\t\t\t\tthis.play_progress = this.videoToolbar.nativeElement.clientWidth;\n\t\t\t} else if (this.play_progress <= 0) {\n\t\t\t\tthis.play_progress = 0;\n\t\t\t}\n\t\t\tlet tempCurrentTime: number = this.play_progress / this.videoToolbar.nativeElement.clientWidth * this.videoElem.duration;\n\t\t\tthis.videoElem.currentTime = tempCurrentTime;\n\t\t\tthis.currentTime = this.getFormatTime(tempCurrentTime);\n\t\t}\n\t}\n\n\tprogressBallDragEnd(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.isProgressBallStartMove = false;\n\t}\n\n\tvolumeValClick(e: MouseEvent, width: number) {\n\t\tconsole.log(e.offsetX);\n\t\tthis.videoElem.volume = e.offsetX / width;\n\t}\n\n\tvolumeBallDragStart(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.volumeBallDragStartClientX = e.clientX;\n\t\tthis.isVolumeBallStartMove = true;\n\t}\n\n\tvolumeBallDrag(e: MouseEvent, width: number) {\n\t\te.stopPropagation();\n\t\tif (this.isVolumeBallStartMove) {\n\t\t\tlet offsetX: number = e.clientX - this.volumeBallDragStartClientX;\n\t\t\tthis.volumeBallDragStartClientX = e.clientX;\n\t\t\tlet volume: number = this.videoElem.volume + offsetX / width;\n\t\t\tif (volume <= 0) {\n\t\t\t\tthis.videoElem.volume = 0;\n\t\t\t} else if (volume >= 1) {\n\t\t\t\tthis.videoElem.volume = 1;\n\t\t\t} else {\n\t\t\t\tthis.videoElem.volume = volume;\n\t\t\t}\n\t\t}\n\t}\n\n\tvolumeBallDragEnd(e: MouseEvent) {\n\t\te.stopPropagation();\n\t\tthis.isVolumeBallStartMove = false;\n\t}\n\n\tvideoMouseover(e: any) {\n\t\tthis.videoToolbarProgressHeight = 16;\n\t\tthis.showProgressBall = true;\n\t}\n\n\tvideoMouseout(e: any) {\n\t\tthis.videoToolbarProgressHeight = 3;\n\t\tthis.showProgressBall = false;\n\t}\n\n\t/**\n\t * 播放视频\n\t */\n\tplay() {\n\t\tthis.videoElem.ended && (this.videoElem.currentTime = 0);\n\t\tthis.videoElem.play();\n\t}\n\n\t/**\n\t * 暂停视频\n\t */\n\tpause() {\n\t\tthis.videoElem.pause();\n\t}\n\n\t/**\n\t * 播放/暂停\n\t */\n\tplayOrPause() {\n\t\tthis.videoElem.paused ? this.play() : this.pause();\n\t}\n\t/**\n\t * 选中视频\n\t * */\n\tselectVideo(path, i) {\n\t\tthis.sub = JSON.parse(JSON.stringify(i));\n\t\tthis.videoUrl = path;\n\t\tthis.videoElem.load();\n\t}\n\n\tisMuted() {\n\t\tif (this.videoElem.muted) {\n\t\t\tthis.videoElem.muted = false;\n\t\t\tthis.videoElem.volume = this.preVolume;\n\t\t} else {\n\t\t\tthis.videoElem.muted = true;\n\t\t\tthis.preVolume = this.videoElem.volume;\n\t\t\tthis.videoElem.volume = 0;\n\t\t}\n\t}\n\n\tgetFormatTime(value: number): string {\n\t\tlet h: string = parseInt(value / 3600 + '') < 10 ? '0' + parseInt(value / 3600 + '') : '' + parseInt(value / 3600 + ''),\n\t\t\tm: string = parseInt(value % 3600 / 60 + '') < 10 ? '0' + parseInt(value % 3600 / 60 + '') : '' + parseInt(value % 3600 / 60 + ''),\n\t\t\ts: string;\n\t\tif (value >= 60) {\n\t\t\ts = value % 3600 % 60 < 10 ? '0' + parseInt(value % 3600 % 60 + '') : '' + parseInt(value % 3600 % 60 + '');\n\t\t} else if (value < 60 && value >= 10) {\n\t\t\ts = '' + parseInt(value + '');\n\t\t} else if (value < 10) {\n\t\t\ts = '0' + parseInt(value + '');\n\t\t}\n\t\treturn `${h}:${m}:${s}`;\n\t}\n}\n","import { Component, OnInit, Input, Output, EventEmitter, Injector } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-ngx-viewer',\n  path: \"components/shared/ngxviewer\"\n})\n@Component({\n    selector: 'epsgis-ngx-viewer',\n    templateUrl: './e-ngx-viewer.component.html',\n    styleUrls: ['./e-ngx-viewer.component.scss']\n})\nexport class EpsGISNgxViewerComponent implements OnInit {\n\n    @Input() model: string = 'pdf'; // 视图模式，默认pdf。将实现image与video模式\n    @Input() width: number = 600; // 查看器宽度\n    @Input() videoWidth: number = 400; //视频播放器宽度\n    @Input() height: number = 800; // 查看器高度\n    @Input() source: string | string[]; // pdf路径、图片文件路径数组及视频路径\n    @Input() poster: string = ''; // 视频预览图（海报图片）路径\n    @Input() viewerUrl: string = ''; // pdf查看器路径(pdfjs/web/viewer.html)\n    @Input() first: number = 0; //照片预览首张下标\n    @Output() ready: EventEmitter<any> = new EventEmitter<any>(false); // 查看器初始完成事件\n\n    constructor(private activatedRoute: ActivatedRoute,\n        private injector:Injector) {}\n\n    ngOnInit() {\n        //路由参数\n        this.activatedRoute.params.subscribe((param: any) => {\n          if (param['model']) {\n            this.model = param['model'];\n          }\n          if (param['source']) {\n            this.source = param['source'];\n          }\n          if (param['width']) {\n            this.width = param['width'];\n          }\n          if (param['width']) {\n            this.width = param['width'];\n          }\n          if (param['videoWidth']) {\n            this.videoWidth = param['videoWidth'];\n          }\n          if (param['height']) {\n            this.height = param['height'];\n          }\n          if (param['poster']) {\n            this.poster = param['poster'];\n          }\n          if (param['viewerUrl']) {\n            this.viewerUrl = param['viewerUrl'];\n          }\n          if (param['first']) {\n            this.first = param['first'];\n          }\n        });\n    \n         //获取动态组件参数\n         this.model = this.injector.get(\"model\",this.model);\n         this.source = this.injector.get(\"source\",this.source);\n         this.width = this.injector.get(\"width\",this.width);\n         this.videoWidth = this.injector.get(\"videoWidth\",this.videoWidth);\n         this.height = this.injector.get(\"height\",this.height);\n         this.poster = this.injector.get(\"poster\",this.poster);\n         this.viewerUrl = this.injector.get(\"viewerUrl\",this.viewerUrl);\n         this.first = this.injector.get(\"first\",this.first);\n    }\n\n    viewerReady($event: any) {\n        this.ready.emit($event);\n    }\n}\n","<section class=\"json-viewer\">\n  <section *ngFor=\"let segment of segments\" [ngClass]=\"['segment', 'segment-type-' + segment.type]\">\n    <section (click)=\"toggle(segment)\" [ngClass]=\"{\n        'segment-main': true,\n        'expandable': isExpandable(segment),\n        'expanded': segment.expanded\n      }\">\n      <div *ngIf=\"isExpandable(segment)\" class=\"toggler\"\n        [ngClass]=\"{'collapse': segment.expanded, 'expand': !segment.expanded}\"></div>\n      <span class=\"segment-key\">{{ segment.key }}</span>\n      <span class=\"segment-separator\">: </span>\n      <span *ngIf=\"!segment.expanded || !isExpandable(segment)\" class=\"segment-value\">{{ segment.description }}</span>\n    </section>\n    <section *ngIf=\"segment.expanded && isExpandable(segment)\" class=\"children\">\n      <epsgis-json-viewer [json]=\"segment.value\" [expanded]=\"expanded\"></epsgis-json-viewer>\n    </section>\n  </section>\n</section>","import { Component, OnChanges, Input, OnInit } from '@angular/core';\n\nexport interface Segment {\n  key: string;\n  value: any;\n  type: undefined | string;\n  description: string;\n  expanded: boolean;\n}\nimport { ComponentRegister } from '../../../decorator/component-register.decorator';\n@ComponentRegister({\n  uri: 'epsgis-json-viewer',\n  path: \"components/shared/jsonviewer\"\n})\n@Component({\n  selector: 'epsgis-json-viewer',\n  templateUrl: './json-viewer.component.html',\n  styleUrls: ['./json-viewer.component.scss']\n})\nexport class EpsGISJsonViewerComponent implements OnInit, OnChanges {\n  @Input() json: any;\n  @Input() expanded = true;\n  /**\n   * @deprecated It will be always true and deleted in version 3.0.0\n   */\n  @Input() cleanOnChange = true;\n\n  segments: Segment[] = [];\n\n  ngOnInit(): void {\n    this.initJson();\n  }\n\n  initJson(): void {\n    if(typeof this.json === 'string') {\n      this.json = JSON.parse(this.json);\n    }\n    this.ngOnChanges();\n  }\n\n  ngOnChanges() {\n    if (this.cleanOnChange) {\n      this.segments = [];\n    }\n\n    if (typeof this.json === 'object') {\n      Object.keys(this.json).forEach( key => {\n        this.segments.push(this.parseKeyValue(key, this.json[key]));\n      });\n    } else {\n      this.segments.push(this.parseKeyValue(`(${typeof this.json})`, this.json));\n    }\n  }\n\n  isExpandable(segment: Segment) {\n    return segment.type === 'object' || segment.type === 'array';\n  }\n\n  toggle(segment: Segment) {\n    if (this.isExpandable(segment)) {\n      segment.expanded = !segment.expanded;\n    }\n  }\n\n  private parseKeyValue(key: any, value: any): Segment {\n    const segment: Segment = {\n      key: key,\n      value: value,\n      type: undefined,\n      description: '' + value,\n      expanded: this.expanded\n    };\n\n    switch (typeof segment.value) {\n      case 'number': {\n        segment.type = 'number';\n        break;\n      }\n      case 'boolean': {\n        segment.type = 'boolean';\n        break;\n      }\n      case 'function': {\n        segment.type = 'function';\n        break;\n      }\n      case 'string': {\n        segment.type = 'string';\n        segment.description = '\"' + segment.value + '\"';\n        break;\n      }\n      case 'undefined': {\n        segment.type = 'undefined';\n        segment.description = 'undefined';\n        break;\n      }\n      case 'object': {\n        // yea, null is object\n        if (segment.value === null) {\n          segment.type = 'null';\n          segment.description = 'null';\n        } else if (Array.isArray(segment.value)) {\n          segment.type = 'array';\n          segment.description = 'Array[' + segment.value.length + '] ' + JSON.stringify(segment.value);\n        } else if (segment.value instanceof Date) {\n          segment.type = 'date';\n        } else {\n          segment.type = 'object';\n          segment.description = 'Object ' + JSON.stringify(segment.value);\n        }\n        break;\n      }\n    }\n\n    return segment;\n  }\n}\n","import { ComponentRef, Injector } from '@angular/core';\nimport { ActivatedRoute, ActivatedRouteSnapshot, DetachedRouteHandle, RouteReuseStrategy } from '@angular/router';\nimport { AppGlobalConfig } from '../models/app-config';\n// export const NotReuseRoutesConfigToken = new InjectionToken<Array<string>>('not_reuse_routes_config');\n// @dynamic\n/**\n * 路由复用策略\n */\nexport class SimpleReuseStrategy implements RouteReuseStrategy/*IonicRouteStrategy */ {\n\n  public static snapshots: { [key: string]: DetachedRouteHandle } = {};\n  // public static snapshots: Map<string, DetachedRouteHandle> = new Map();\n  private static waitDelete: string;\n  private appGlobal: AppGlobalConfig;\n  constructor(private injector: Injector) {\n\n  }\n  // constructor(@Inject(NotReuseRoutesConfigToken) private notReuseRoutes: Array<string>) {\n\n  // }\n  /**\n   * 表示对所有路由允许复用， 如果有路由不想复用可以在这加一些业务逻辑判断\n   * @param route \n   */\n  public shouldDetach(route: ActivatedRouteSnapshot): boolean {\n    //Error: Cannot reattach ActivatedRouteSnapshot created from a different route\n    if (!route.routeConfig || route.routeConfig.loadChildren) {\n      return false;\n    }\n    if (route.data.reuse === false) {\n      return false;\n    }\n    const url: string = route['_routerState'].url;\n    if (!this.appGlobal) {\n      this.appGlobal = this.injector.get(AppGlobalConfig);\n    }\n    if (this.appGlobal.menuConfig\n      && this.appGlobal.menuConfig.notReuseRoutes\n      && this.appGlobal.menuConfig.notReuseRoutes.length >= 1\n    ) {\n      return !this.appGlobal.menuConfig.notReuseRoutes.some(n => url.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()) >= 0);\n    }\n\n    // if (this.notReuseRoutes && this.notReuseRoutes.length >= 1) {\n    //   return !this.notReuseRoutes.some(n => n.toLocaleLowerCase() == url.toLocaleLowerCase());\n    // }\n    return true;\n  }\n\n  /**\n   * 当路由离开时会触发，按path作为key存储路由快照&组件当前实例对象\n   * @param route \n   * @param handle \n   */\n  public store(route: ActivatedRouteSnapshot, handle: DetachedRouteHandle): void {\n    if (!route.routeConfig || route.routeConfig.loadChildren) return;\n    const key = SimpleReuseStrategy.getRouteUrl(route);\n    if (SimpleReuseStrategy.waitDelete && SimpleReuseStrategy.waitDelete === key) {\n      // 如果待删除是当前路由则不存储快照\n      SimpleReuseStrategy.waitDelete = null;\n      return;\n    }\n    SimpleReuseStrategy.snapshots[key] = handle;\n  }\n\n  /**\n   * 如果 path 在缓存中有的都认为允许还原路由\n   * @param route \n   */\n  public shouldAttach(route: ActivatedRouteSnapshot): boolean {\n    if (!route.routeConfig || route.routeConfig.loadChildren) return false;\n    return !!SimpleReuseStrategy.snapshots[SimpleReuseStrategy.getRouteUrl(route)];\n  }\n\n  /**\n   * 从缓存中获取快照，若无则返回nul\n   * @param route \n   */\n  public retrieve(route: ActivatedRouteSnapshot): DetachedRouteHandle {\n    if (!route.routeConfig) {\n      return null;\n    }\n    // if (!route.routeConfig || route.routeConfig.loadChildren) {\n    //   return null\n    // }\n    // SimpleReuseStrategy.waitDelete = SimpleReuseStrategy.getRouteUrl(route);\n\n    if (route.routeConfig.loadChildren) {\n      Object.keys(SimpleReuseStrategy.snapshots).forEach(key => delete SimpleReuseStrategy.snapshots[key]);\n      return null as any;\n    }\n    return SimpleReuseStrategy.snapshots[SimpleReuseStrategy.getRouteUrl(route)];\n  }\n\n  /**\n   * 进入路由触发，判断是否同一路由\n   * @param future \n   * @param curr \n   */\n  public shouldReuseRoute(future: ActivatedRouteSnapshot, curr: ActivatedRouteSnapshot): boolean {\n    return future.routeConfig === curr.routeConfig && JSON.stringify(future.params) === JSON.stringify(curr.params);\n  }\n  /**\n   * 获取url\n   * @param route \n   */\n  public static getRouteUrl(route: ActivatedRouteSnapshot) {\n    // return route['_routerState'].url.replace(/\\//g, '_');\n    const key = route['_routerState'].url.replace(/\\//g, '_') + '_' + (route.routeConfig.loadChildren || route.routeConfig.component.toString().split('(')[0].split(' ')[1]);\n    return key;\n  }\n  /**\n   * 如果有路由缓存，则删除\n   * @param url \n   */\n  public static deleteRouteSnapshot(key: string): void {\n    if (SimpleReuseStrategy.snapshots[key]) {\n      this.deactivateOutlet(this.snapshots[key])\n      delete SimpleReuseStrategy.snapshots[key];\n    } else {\n      SimpleReuseStrategy.waitDelete = key;\n    }\n  }\n  private static deactivateOutlet(handle: DetachedRouteHandle): void {\n    const componentRef: ComponentRef<any> = handle ? handle['componentRef'] : null;\n    if (componentRef) {\n      componentRef.destroy()\n    }\n  }\n  public static clearRouteSnapshot() {\n    for (const key in this.snapshots) {\n      if (this.snapshots[key]) {\n        this.deactivateOutlet(this.snapshots[key]);\n        // delete this.snapshots[key];\n      }\n    }\n    this.snapshots = {};\n    SimpleReuseStrategy.waitDelete = \"\";\n  }\n}","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class MenuTabService {\n    constructor() {\n\n    }\n\n    index: number=0;\n    name: string=\"\";\n    add() {\n        this.index++;\n    }\n\n    getIndex() {\n        return this.index;\n    }\n    setName(n: string) {\n        this.name = n;\n\n    }\n    getName() {\n        return this.name;\n    }\n}","<nz-tabset [class.hide]=\"!showTab\" style=\"margin-left: -1px;\" [nzAnimated]=\"true\" [nzSelectedIndex]=\"currentIndex\" nzShowPagination=\"true\"\n  (nzSelectChange)=\"nzSelectChange($event)\" [nzType]=\"'line'\">\n  <nz-tab *ngFor=\"let menu of menuList\" [nzTitle]=\"nzTabHeading\">\n    <ng-template #nzTabHeading>\n      <div (contextmenu)=\"contextMenu($event,menu,menuComp)\">\n        {{menu.title}}\n        <!-- <i *ngIf=\"menu.isRemove\" (click)=\"closeUrl(menu.url)\" class=\"anticon anticon-cross close-red\" ></i> -->\n        <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\" *ngIf=\"menu.canClose\" (click)=\"closeTab($event,menu)\"></i>\n      </div>\n    </ng-template>\n    <!-- <ng-template #contextTemplate> -->\n      <nz-dropdown-menu #menuComp=\"nzDropdownMenu\">\n      <ul nz-menu nzInDropDown class=\"dropdown-menu\">\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeTab')\" *ngIf=\"menu.canClose\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span class=\"danger\">关闭</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canSelect\"><li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'selectTab')\" *ngIf=\"menu.canSelect\">\n          <i nz-icon [nzType]=\"'check'\" [nzTheme]=\"'outline'\"></i>\n          <span class=\"danger\">选中</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canCloseLeft\"></li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeLeftTab');\" *ngIf=\"menu.canCloseLeft\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span>关闭左侧页面</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canCloseRight\"></li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeRightTab');\" *ngIf=\"menu.canCloseRight\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span>关闭右侧页面</span>\n        </li>\n        <li nz-menu-divider *ngIf=\"menu.canCloseExceptFirst\"></li>\n        <li nz-menu-item (click)=\"selectDropdown($event,menu,'closeAllTab');\" *ngIf=\"menu.canCloseExceptFirst\">\n          <i nz-icon [nzType]=\"'close'\" [nzTheme]=\"'outline'\"></i>\n          <span>保留第一页</span>\n        </li>\n      </ul>\n    </nz-dropdown-menu>\n    <!-- </ng-template> -->\n  </nz-tab>\n</nz-tabset>\n<div class=\"tab-content\">\n  <!--路由的内容会被显示在这里-->\n  <ng-content></ng-content>\n</div>","import { ChangeDetectorRef, Component, OnDestroy, OnInit, TemplateRef } from '@angular/core';\nimport { ActivatedRoute, Data, NavigationEnd, Router } from '@angular/router';\nimport { UtilsService } from '../../services/utils.service';\n// import { NzDropdownContextComponent, NzDropdownService } from 'ng-zorro-antd';\nimport { NzContextMenuService, NzDropdownMenuComponent } from 'ng-zorro-antd/dropdown';\nimport { filter, map } from 'rxjs/operators';\nimport { SimpleReuseStrategy } from '../../strategy/simple-reuse-strategy';\nimport { AppGlobalConfig } from '../../models/app-config';\nimport { MenuTabService } from './menu-tab.service';\n@Component({\n  selector: 'epsgis-menu-tab',\n  templateUrl: './menu-tab.component.html',\n  styleUrls: ['./menu-tab.component.scss']\n  // providers: [MenuTabService]\n})\nexport class MenuTabComponent implements OnInit, OnDestroy {\n\n  /**\n   * 打开的路由列表\n   */\n  menuList: Array<ITabMenuItem> = [];\n  /**\n   * 当前选中tab索引\n   */\n  currentIndex = -1;\n  urlMapTitle = new Map();\n  dropdown: NzDropdownMenuComponent;\n  showTab: boolean = true;\n  constructor(private router: Router,\n    private activatedRoute: ActivatedRoute,\n    // private titleService: Title,\n    private nzDropdownService: NzContextMenuService,\n    private cdr: ChangeDetectorRef,\n    private appGlobal: AppGlobalConfig,\n    private menuTabService: MenuTabService\n  ) {\n    // 路由事件\n    this.router.events.pipe(filter(event => event instanceof NavigationEnd))\n      .pipe(map(() => this.activatedRoute))\n      .pipe(map(route => {\n        while (route.firstChild) { route = route.firstChild; }\n        return route;\n      }))\n      .pipe(filter(route => route.outlet === 'primary'))\n      //.pipe(mergeMap((route)=>route.data))\n      // .subscribe((data) => this.addToTab(data))\n      .subscribe(route => {\n        this.addToTab(route);\n      });\n  }\n  ngOnInit() {\n\n  }\n  ngOnDestroy() {\n    //服用里调用了destory，这里再调用就会造成递归调用\n    // this.clear();\n  }\n  /**\n   * \n   * @param activatedRoute \n   */\n  private addToTab(activatedRoute: ActivatedRoute) {\n    //activatedRoute[\"_routerState\"].snapshot.url;\n    // this.menuTabService.add();\n    // console.log(\"index:s%,naem:s%\", this.menuTabService.getIndex(), this.menuTabService.getName());\n    if (this.router.url.indexOf(\"/login\") >= 0) {\n      this.clear();\n      return;\n    }\n    const routeData = activatedRoute.data[\"value\"];\n    if (routeData.showInTab === false) {\n      this.showTab = false;\n      return;\n    }\n    if (this.appGlobal.menuConfig\n      && this.appGlobal.menuConfig.notShowInTabRoutes\n      && this.appGlobal.menuConfig.notShowInTabRoutes.length >= 1\n    ) {\n      const exists = this.appGlobal.menuConfig.notShowInTabRoutes.some(n => this.router.url.toLocaleLowerCase().indexOf(n.toLocaleLowerCase()) >= 0);\n      if (exists) {\n        this.showTab = false;\n        return;\n      }\n    }\n    this.showTab = true;\n    //先取配置的标题，没有再从菜单里查找\n    let title = routeData.title;\n    if (!title) {\n      //查找菜单\n      const m = this.findMenu(this.router.url);\n      title = m ? m.name : this.router.url;\n    }\n    this.router\n    let menu: ITabMenuItem = {\n      title: title,\n      url: this.router.url,\n      key: SimpleReuseStrategy.getRouteUrl(activatedRoute.snapshot)\n    };\n\n    // this.titleService.setTitle(menu.title); // 设置网页标题\n    const exitMenu = this.menuList.find(info => info.url === menu.url);\n    if (!exitMenu) {// 如果不存在那么不添加，\n      this.menuList.push(menu);\n    }\n    this.currentIndex = this.menuList.findIndex(p => p.url === menu.url);\n    this.refreshMenuList();\n  }\n\n  /**刷新菜单项 */\n  private refreshMenuList() {\n    if(!this.menuList || this.menuList.length < 1) {\n      return;\n    }\n    if(this.menuList.length === 1) {\n      this.menuList[0].canClose = false;\n      this.menuList[0].canSelect = false;\n      this.menuList[0].canCloseLeft = false;\n      this.menuList[0].canCloseRight = false;\n      this.menuList[0].canCloseExceptFirst = false;\n    } else {\n      let index: number = 0;\n      this.menuList.forEach(item => {\n        item.canClose = true;\n        item.canCloseExceptFirst = true;\n        item.canSelect = false;\n        if(index !== this.currentIndex) {\n          item.canSelect = true;\n        }\n        item.canCloseLeft = true;\n        item.canCloseRight = true;\n        if(index === 0) {\n          item.canCloseLeft = false;\n        } else if(index === (this.menuList.length -1)) {\n          item.canCloseRight = false;\n        }\n        index++;\n      });\n    }\n  }\n\n  private clear() {\n    this.urlMapTitle.clear();\n    this.menuList.splice(0);\n    SimpleReuseStrategy.clearRouteSnapshot();\n  }\n  private recurseFindMenu = (url: string, arr: Array<any>) => {\n    let menu = null;\n    if (arr && arr.length >= 1) {\n      for (let index = 0; index < arr.length; index++) {\n        const m = arr[index];\n        if (m.path == url) {\n          menu = m;\n        } else {\n          menu = this.recurseFindMenu(url, m.children);\n        }\n        if (menu) {\n          break;\n        }\n      }\n    }\n    return menu;\n  };\n  private findMenu(url: string) {\n    if (this.urlMapTitle.has(url)) {\n      return this.urlMapTitle.get(url);\n    }\n    if (!this.appGlobal || !this.appGlobal.menuConfig.menuData) {\n      return null;\n    }\n    const m = this.recurseFindMenu(url, this.appGlobal.menuConfig.menuData);\n    if (m) {\n      this.urlMapTitle.set(url, m);\n    }\n    return m;\n  }\n\n  private getIndex(menu: ITabMenuItem) {\n    return this.menuList.findIndex(p => p.url === menu.url);\n  }\n  /**\n   * 关闭选项标签\n   * @param key \n   */\n  private closeByUrl(key: string) {\n    // 如果只有一个不可以关闭\n    if (this.menuList.length === 1) {\n      return;\n    }\n    // 通过url查找tab索引\n    const index = this.menuList.findIndex(p => p.key === key);\n    if (index <= -1) {\n      console.log(\"没有找到tab，无法关闭,key:\" + key);\n      return;\n    }\n    this.menuList.splice(index, 1);\n    // 删除复用\n    SimpleReuseStrategy.deleteRouteSnapshot(key);\n    // 如果当前删除的对象是当前选中的，那么需要跳转\n    if (this.currentIndex === index) {\n      // 显示上一个选中\n      let menu = this.menuList[index - 1];\n      if (!menu) {// 如果上一个没有下一个选中\n        menu = this.menuList[index];\n      }\n      // 跳转路由\n      this.router.navigate([menu.url]);\n    }\n  }\n  /**\n   * tab发生改变\n   */\n  nzSelectChange($event) {\n    this.currentIndex = $event.index;\n    const menu = this.menuList[this.currentIndex];\n    this.router.navigate([menu.url]);\n  }\n\n  private navigateToUrl(index: number) {\n    if (this.menuList.length == 0) {\n      return;\n    }\n    if (index <= -1) {\n      index = 0;\n    }\n    if (index >= this.menuList.length) {\n      index = this.menuList.length - 1;\n    }\n    // const menu = this.menuList[index];\n    // 跳转路由\n    // this.router.navigate([menu.url]);\n    this.currentIndex = index;\n  }\n\n  /**\n   * \n   * @param $event \n   * @param template  template: TemplateRef<void>,\n   * @param menu \n   */\n  contextMenu($event: MouseEvent, menu: ITabMenuItem,menuComp:NzDropdownMenuComponent): void {\n    // this.dropdown = this.nzDropdownService.create($event, template);\n    this.nzDropdownService.create($event, menuComp);\n  }\n  /**\n   * \n   * @param evt \n   * @param node \n   * @param menu \n   */\n  selectDropdown(evt: MouseEvent, menu: ITabMenuItem, func: string): void {\n    //this.dropdown.close();\n    this.nzDropdownService.close();\n    this[func](evt, menu);\n    //通过x关闭的可以自动刷新，右键菜单关闭的不行。。。。艹，哪里问题？？？\n    UtilsService.detectChanges(this.cdr);\n  }\n  /**\n   * \n   * @param predicate \n   * @param thisArg \n   */\n  private removeRoute(predicate: (value: ITabMenuItem, index: number, array: ITabMenuItem[]) => ITabMenuItem, thisArg?: any) {\n    const arr = this.menuList.filter(predicate);\n    if (arr && arr.length >= 1) {\n      arr.forEach(m => {\n        SimpleReuseStrategy.deleteRouteSnapshot(m.key);\n      });\n    }\n  }\n  /**\n   * \n   * @param key \n   */\n  closeTabByRoute(activatedRoute: ActivatedRoute) {\n    const key = SimpleReuseStrategy.getRouteUrl(activatedRoute.snapshot)\n    this.closeTabByKey(key);\n  }\n  /**\n   * \n   * @param key \n   */\n  closeTabByKey(key: string) {\n    this.closeByUrl(key);\n  }\n  /**\n   * 关闭tab\n   * @param menu \n   */\n  closeTab(evt: MouseEvent, menu: ITabMenuItem) {\n    this.closeByUrl(menu.key);\n    this.refreshMenuList();\n  }\n  /**\n   * 选中tab\n   * @param menu \n   */\n  selectTab(evt: MouseEvent, menu: ITabMenuItem) {\n    this.navigateToUrl(this.getIndex(menu));\n    this.refreshMenuList();\n  }\n  /**\n   * 关闭左侧tab\n   * @param menu \n   */\n  closeLeftTab(evt: MouseEvent, menu: ITabMenuItem) {\n    const index = this.getIndex(menu);\n    if (index >= 1) {\n      this.removeRoute((v: ITabMenuItem, i: number, a: Array<ITabMenuItem>) => {\n        if (i < index) {\n          return v;\n        }\n      });\n      this.menuList.splice(0, index);\n      this.navigateToUrl(0);\n    }\n    this.refreshMenuList();\n  }\n  /**\n   * 关闭右侧tab\n   * @param menu \n   */\n  closeRightTab(evt: MouseEvent, menu: ITabMenuItem) {\n    const index = this.getIndex(menu);\n    if (index >= 0) {\n      this.removeRoute((v: ITabMenuItem, i: number, a: Array<ITabMenuItem>) => {\n        if (i > index) {\n          return v;\n        }\n      });\n      this.menuList.splice(index + 1);\n      this.navigateToUrl(index);\n    }\n    this.refreshMenuList();\n  }\n  /**\n   * 关闭所有（改为了保留第一页）\n   * @param menu \n   */\n  closeAllTab(evt: MouseEvent, menu: ITabMenuItem) {\n    this.removeRoute((v: ITabMenuItem, i: number, a: Array<ITabMenuItem>) => { if (i >= 1) { return v; } });\n    //删除所有的话，tab是全部关闭了，但是页面没有关闭完\n    // this.menuList.splice(0);\n    // this.currentIndex = -1;\n    this.menuList.splice(1);\n    this.navigateToUrl(0);\n    this.refreshMenuList();\n  }\n}\n/**菜单项 */\nexport interface ITabMenuItem {\n  title: string;\n  url: string;\n  canClose?: boolean;\n  canSelect?: boolean;\n  canCloseLeft?: boolean;\n  canCloseRight?: boolean;\n  canCloseExceptFirst?: boolean;\n  key: string;\n}","import { ChangeDetectionStrategy, Component, EventEmitter, Input, OnDestroy, Output } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { SsModalRef } from './modal-ref';\nimport { SsModalOptions, SsModalTitleBarButtonOptions } from './modal-types';\n\n@Component({\n    selector: 'div[ss-modal-titlebar-button]',\n    template: `\n    <ng-container *ngIf=\"buttons && buttons.length>=1;\">\n          <div class=\"ssmodal_titlebar_button\" *ngFor=\"let button of buttons\"  (click)=\"onButtonClick(button)\">\n            <i\n            nz-icon\n            *ngIf=\"button.isIconfont;else ngzorro\"\n            [nzIconfont]=\"button.icon\"\n            \n            [style]=\"button.style\"\n            >\n            </i>\n\n          <ng-template #ngzorro>\n                <i nz-icon \n                [nzType]=\"button.icon\" \n                [nzTheme]=\"button.theme\"\n                [nzSpin]=\"button.spin\"\n                [nzTwotoneColor]=\"button.twotoneColor\"\n                [nzRotate]=\"button.rotate\"\n                [style]=\"button.style\"\n                ></i>\n          </ng-template>\n          </div>\n      </ng-container>\n      \n  `,\n    host: {\n        class: ''\n    },\n    changeDetection: ChangeDetectionStrategy.Default\n})\nexport class SsModalTitleBarButtonComponent implements OnDestroy {\n    buttons: SsModalTitleBarButtonOptions[] = [];\n    @Input() modalRef!: SsModalRef;\n    private destroy$ = new Subject<void>();\n\n    constructor(public config: SsModalOptions) {\n        if (Array.isArray(config.titleBarButtons)) {\n            this.buttons = (config.titleBarButtons as SsModalTitleBarButtonOptions[]).map(mergeDefaultOption);\n        }\n    }\n    /**\n     * \n     * @param options \n     * @param prop \n     * @returns \n     */\n    getButtonCallableProp(options: SsModalTitleBarButtonOptions, prop: keyof SsModalTitleBarButtonOptions): boolean {\n        const value = options[prop];\n        if (this.modalRef) {\n            const componentInstance = this.modalRef.getContentComponent();\n            return typeof value === 'function' ? value.apply(options, componentInstance && [componentInstance]) : value;\n        }\n        return false;\n    }\n    /**\n     * \n     * @param options \n     */\n    onButtonClick(options: SsModalTitleBarButtonOptions): void {\n        this.getButtonCallableProp(options, 'onClick');\n    }\n\n    ngOnDestroy(): void {\n        this.destroy$.next();\n        this.destroy$.complete();\n    }\n}\n\nfunction mergeDefaultOption(options: SsModalTitleBarButtonOptions): SsModalTitleBarButtonOptions {\n    return {\n        icon: null,\n        theme: 'outline',\n        spin: false,\n        twotoneColor: null,\n        isIconfont: false,\n        rotate: null,\n        title: \"\",\n        style: \"\",\n        ...options\n    };\n}","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { SSModalComponent } from './modal.component';\nimport { SsModalFooterComponent } from './modal-footer.component';\nimport { ModalContainerComponent } from './modal-container/modal-container.component';\nimport { SsModalFooterDirective } from '../components';\nimport { SsModalTitleBarButtonComponent } from './modal-titlebar-button.component';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\n\n\n\n@NgModule({\n  declarations: [ModalContainerComponent, SSModalComponent, SsModalFooterComponent,SsModalFooterDirective,SsModalTitleBarButtonComponent],\n  exports: [SSModalComponent, SsModalFooterComponent,SsModalTitleBarButtonComponent],\n  entryComponents: [ModalContainerComponent, SSModalComponent],\n  imports: [\n    CommonModule,\n    NzIconModule\n  ]\n})   \nexport class EpsGisModalModule { }\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule, Optional, SkipSelf, ModuleWithProviders, APP_INITIALIZER } from '@angular/core';\r\nimport { AppGlobalConfig, AppGlobalConfigToken, AppInitService } from './models/app-config';\r\nimport { EpsGisWidgetBaseModule } from './components/widget-base.module';\r\nimport { EpsGisDirectivesModule } from './directives/directives.module';\r\nimport { EpsGisCompContainerModule } from './components/comp-container/comp-container.module';\r\nimport { EpsGisModalModule } from './components/modal/modal.module';\r\nimport { HttpClient } from '@angular/common/http';\r\n/**\r\n * epsgis入口\r\n */\r\n//@dynamic\r\n@NgModule({\r\n    imports: [\r\n        CommonModule,\r\n        // HttpClientModule,\r\n        EpsGisWidgetBaseModule,\r\n        EpsGisDirectivesModule,\r\n        EpsGisCompContainerModule,\r\n        EpsGisModalModule\r\n    ],\r\n    declarations: [],\r\n    exports: []\r\n})\r\nexport class EpsGisModule {\r\n    constructor(@Optional() @SkipSelf() parentModule: EpsGisModule) {\r\n        if (parentModule) {\r\n            throw new Error(\r\n                'EpsGisModule is already loaded. Import it in the AppModule only');\r\n        }\r\n    }\r\n    /**\r\n     Error during template compile of 'SSGisModule'\r\n  Function calls are not supported in decorators but 'createGlobalConfig' was called\r\n     */\r\n    /**\r\n     * \r\n     * @param config  \r\n     */\r\n    static forRoot(config?: AppGlobalConfig): ModuleWithProviders<EpsGisModule> {\r\n        return {\r\n            ngModule: EpsGisModule,\r\n            providers: [\r\n                {\r\n                    provide: AppGlobalConfigToken,\r\n                    useValue: config\r\n                },\r\n                {\r\n                    provide: AppGlobalConfig,\r\n                    useFactory: setGlobalConfig,\r\n                    deps: [AppInitService]\r\n                },\r\n                { provide: APP_INITIALIZER, useFactory: loadGlobalConfig, deps: [AppGlobalConfigToken, AppInitService, HttpClient], multi: true }\r\n\r\n            ]\r\n        };\r\n    }\r\n\r\n}\r\n\r\nexport const loadGlobalConfig = (config: AppGlobalConfig, service: AppInitService) => {\r\n    return () => service.init(config).loadGlobalConfig();\r\n};\r\nexport const setGlobalConfig = (service: AppInitService) => {\r\n    return service.getConfig();\r\n};","/**\n * Created by laixiangran on 2016/11/29.\n * homepage：http://www.laixiangran.cn.\n */\n\nimport { CommonModule } from \"@angular/common\";\nimport { NgModule } from '@angular/core';\nimport { EpsGISNgxViewerComponent } from \"./e-ngx-viewer.component\";\nimport { PDFViewerComponent } from \"./pdf-viewer/pdf-viewer.component\";\nimport { ImageViewerComponent } from \"./image-viewer/image-viewer.component\";\nimport { VideoViewerComponent } from './video-viewer/video-viewer.component';\nimport { EpsGISJsonViewerComponent } from '../jsonviewer/json-viewer.component';\n\n@NgModule({\n    imports: [\n        CommonModule\n    ],\n    entryComponents:[\n        EpsGISNgxViewerComponent,\n        PDFViewerComponent,\n        ImageViewerComponent,\n        VideoViewerComponent,\n        EpsGISJsonViewerComponent\n    ],\n    declarations: [\n        EpsGISNgxViewerComponent,\n        PDFViewerComponent,\n        ImageViewerComponent,\n        VideoViewerComponent,\n        EpsGISJsonViewerComponent\n    ],\n    exports: [\n        EpsGISNgxViewerComponent,\n        PDFViewerComponent,\n        ImageViewerComponent,\n        VideoViewerComponent,\n        EpsGISJsonViewerComponent\n    ]\n})\nexport class EpsGISNgxViewerModule {\n}","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { NzDropDownModule } from 'ng-zorro-antd/dropdown';\nimport { NzTabsModule } from 'ng-zorro-antd/tabs';\nimport { NzIconModule } from 'ng-zorro-antd/icon';\nimport { MenuTabComponent } from './menu-tab.component';\nimport { MenuTabService } from './menu-tab.service';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        NzTabsModule,\n        NzIconModule,\n        NzDropDownModule\n    ],\n    declarations: [\n        MenuTabComponent\n    ],\n    entryComponents: [\n        MenuTabComponent\n    ],\n    exports: [\n        MenuTabComponent\n    ],\n    providers: [\n        MenuTabService\n    ]\n})\nexport class EpsGisMenuTabModule { }","/**\n * id 生成器 create by ruir\n */\nexport class IdGenerater {\n    /**\n     * \n     */\n    static newGuid(format: string = \"N\") {\n        let d = new Date().getTime();\n        let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n\n            let\n                r = (d + Math.random() * 16) % 16 | 0;\n\n            d = Math.floor(d / 16);\n\n            return (c == 'x' ? r : (r & 0x3 | 0x8)).toString(16);\n\n        });\n        if (format === \"N\" || format === \"n\") {\n            uuid = uuid.replace(/-/g, \"\");\n        }\n        if (format === \"B\" || format === \"b\") {\n            uuid = `{${uuid}}`;\n        }\n        if (format === \"P\" || format === \"p\") {\n            uuid = `(${uuid})`;\n        }\n        if (format === \"X\" || format === \"x\") {\n            //\n        }\n        return uuid;\n    };\n}\n","/**\n * LocalStorageHelper\n */\nexport class LocalStorageHelper {\n    /**\n     * \n     * @param key \n     * @param data \n     */\n    static setItem(key: string, data: any) {\n        if (window.localStorage) {\n            if (typeof data === \"object\") {\n                localStorage.setItem(key, JSON.stringify(data));\n            } else {\n                localStorage.setItem(key, data);\n            }\n        } else {\n            console.log(\"浏览器不支持localStorage\");\n        }\n    }\n    /**\n     * \n     * @param key \n     */\n    static getItem(key: string): any {\n        if (window.localStorage) {\n            return localStorage.getItem(key);\n        } else {\n            console.log(\"浏览器不支持localStorage\");\n        }\n    }\n}","export class Md5 {\n\n    // One time hashing functions\n    public static hashStr(str: string, raw: boolean = false) {\n        return Md5.onePassHasher\n            .start()\n            .appendStr(str)\n            .end(raw);\n    }\n\n    public static hashAsciiStr(str: string, raw: boolean = false) {\n        return Md5.onePassHasher\n            .start()\n            .appendAsciiStr(str)\n            .end(raw);\n    }\n    // Private Static Variables\n    private static stateIdentity = new Int32Array([1732584193, -271733879, -1732584194, 271733878]);\n    private static buffer32Identity = new Int32Array([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n    private static hexChars = '0123456789abcdef';\n    private static hexOut: string[] = [];\n\n    // Permanent instance is to use for one-call hashing\n    private static onePassHasher = new Md5();\n\n    private static _hex(x: any): string {\n        const hc = Md5.hexChars;\n        const ho = Md5.hexOut;\n        let n;\n        let offset;\n        let j;\n        let i;\n\n        for (i = 0; i < 4; i += 1) {\n            offset = i * 8;\n            n = x[i];\n            for (j = 0; j < 8; j += 2) {\n                ho[offset + 1 + j] = hc.charAt(n & 0x0F);\n                n >>>= 4;\n                ho[offset + 0 + j] = hc.charAt(n & 0x0F);\n                n >>>= 4;\n            }\n        }\n        return ho.join('');\n    }\n\n    private static _md5cycle(x: Int32Array | Uint32Array, k: Int32Array | Uint32Array) {\n        let a = x[0];\n        let b = x[1];\n        let c = x[2];\n        let d = x[3];\n        // ff()\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b = (b << 22 | b >>> 10) + c | 0;\n        // gg()\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b = (b << 20 | b >>> 12) + c | 0;\n        // hh()\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b = (b << 23 | b >>> 9) + c | 0;\n        // ii()\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    private _dataLength: number;\n    private _bufferLength: number;\n\n    private _state: Int32Array = new Int32Array(4);\n    private _buffer: ArrayBuffer = new ArrayBuffer(68);\n    private _buffer8: Uint8Array;\n    private _buffer32: Uint32Array;\n\n    constructor() {\n        this._buffer8 = new Uint8Array(this._buffer, 0, 68);\n        this._buffer32 = new Uint32Array(this._buffer, 0, 17);\n        this.start();\n    }\n\n    public start() {\n        this._dataLength = 0;\n        this._bufferLength = 0;\n        this._state.set(Md5.stateIdentity);\n        return this;\n    }\n\n    // Char to code point to to array conversion:\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/charCodeAt\n    // #Example.3A_Fixing_charCodeAt_to_handle_non-Basic-Multilingual-Plane_characters_if_their_presence_earlier_in_the_string_is_unknown\n    public appendStr(str: string) {\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        let bufLen = this._bufferLength;\n        let code;\n        let i;\n\n        for (i = 0; i < str.length; i += 1) {\n            code = str.charCodeAt(i);\n            if (code < 128) {\n                buf8[bufLen++] = code;\n            } else if (code < 0x800) {\n                buf8[bufLen++] = (code >>> 6) + 0xC0;\n                buf8[bufLen++] = code & 0x3F | 0x80;\n            } else if (code < 0xD800 || code > 0xDBFF) {\n                buf8[bufLen++] = (code >>> 12) + 0xE0;\n                buf8[bufLen++] = (code >>> 6 & 0x3F) | 0x80;\n                buf8[bufLen++] = (code & 0x3F) | 0x80;\n            } else {\n                code = ((code - 0xD800) * 0x400) + (str.charCodeAt(++i) - 0xDC00) + 0x10000;\n                if (code > 0x10FFFF) {\n                    throw new Error('Unicode standard supports code points up to U+10FFFF');\n                }\n                buf8[bufLen++] = (code >>> 18) + 0xF0;\n                buf8[bufLen++] = (code >>> 12 & 0x3F) | 0x80;\n                buf8[bufLen++] = (code >>> 6 & 0x3F) | 0x80;\n                buf8[bufLen++] = (code & 0x3F) | 0x80;\n            }\n            if (bufLen >= 64) {\n                this._dataLength += 64;\n                Md5._md5cycle(this._state, buf32);\n                bufLen -= 64;\n                buf32[0] = buf32[16];\n            }\n        }\n        this._bufferLength = bufLen;\n        return this;\n    }\n\n    public appendAsciiStr(str: string) {\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        let bufLen = this._bufferLength;\n        let i;\n        let j = 0;\n\n        for (; ;) {\n            i = Math.min(str.length - j, 64 - bufLen);\n            while (i--) {\n                buf8[bufLen++] = str.charCodeAt(j++);\n            }\n            if (bufLen < 64) {\n                break;\n            }\n            this._dataLength += 64;\n            Md5._md5cycle(this._state, buf32);\n            bufLen = 0;\n        }\n        this._bufferLength = bufLen;\n        return this;\n    }\n\n    public appendByteArray(input: Uint8Array) {\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        let bufLen = this._bufferLength;\n        let i;\n        let j = 0;\n\n        for (; ;) {\n            i = Math.min(input.length - j, 64 - bufLen);\n            while (i--) {\n                buf8[bufLen++] = input[j++];\n            }\n            if (bufLen < 64) {\n                break;\n            }\n            this._dataLength += 64;\n            Md5._md5cycle(this._state, buf32);\n            bufLen = 0;\n        }\n        this._bufferLength = bufLen;\n        return this;\n    }\n\n    public getState() {\n        const self = this;\n        const s = self._state;\n\n        return {\n            buffer: String.fromCharCode.apply(null, self._buffer8),\n            buflen: self._bufferLength,\n            length: self._dataLength,\n            state: [s[0], s[1], s[2], s[3]]\n        };\n    }\n\n    public setState(state: any) {\n        const buf = state.buffer;\n        const x = state.state;\n        const s = this._state;\n        let i;\n\n        this._dataLength = state.length;\n        this._bufferLength = state.buflen;\n        s[0] = x[0];\n        s[1] = x[1];\n        s[2] = x[2];\n        s[3] = x[3];\n\n        for (i = 0; i < buf.length; i += 1) {\n            this._buffer8[i] = buf.charCodeAt(i);\n        }\n    }\n\n    public end(raw: boolean = false) {\n        const bufLen = this._bufferLength;\n        const buf8 = this._buffer8;\n        const buf32 = this._buffer32;\n        const i = (bufLen >> 2) + 1;\n        let dataBitsLen;\n\n        this._dataLength += bufLen;\n\n        buf8[bufLen] = 0x80;\n        buf8[bufLen + 1] = buf8[bufLen + 2] = buf8[bufLen + 3] = 0;\n        buf32.set(Md5.buffer32Identity.subarray(i), i);\n\n        if (bufLen > 55) {\n            Md5._md5cycle(this._state, buf32);\n            buf32.set(Md5.buffer32Identity);\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        dataBitsLen = this._dataLength * 8;\n        if (dataBitsLen <= 0xFFFFFFFF) {\n            buf32[14] = dataBitsLen;\n        } else {\n            const matches = dataBitsLen.toString(16).match(/(.*?)(.{0,8})$/);\n            if (matches === null) {\n                return;\n            }\n\n            const lo = parseInt(matches[2], 16);\n            const hi = parseInt(matches[1], 16) || 0;\n\n            buf32[14] = lo;\n            buf32[15] = hi;\n        }\n\n        Md5._md5cycle(this._state, buf32);\n\n        return raw ? this._state : Md5._hex(this._state);\n    }\n}\n\nif (Md5.hashStr('hello') !== '5d41402abc4b2a76b9719d911017c592') {\n    console.error('Md5 self test failed.');\n}","/**\n * 对象属性监控 by ruir\n */\nexport class PropWatcher {\n    /**\n     * \n     * @param obj 对象\n     * @param prop 属性\n     * @param after 赋值后处理函数\n     * @param before 赋值前处理函数\n     */\n    static watch(obj, prop, after: ((prop, oldval, newval) => void), before?: ((prop, oldval, newval) => any)) {\n        let oldval = obj[prop], newval = oldval,\n            getter = () => {\n                return newval;\n            },\n            setter = (val) => {\n                oldval = newval;\n                if (before && typeof before === \"function\") {\n                    newval = before.call(obj, prop, oldval, val);\n                } else {\n                    newval = val;\n                }\n                if (oldval != newval) {\n                    Promise.resolve().then(() => { after.call(obj, prop, oldval, newval); });\n                }\n                return newval;\n            };\n        if (delete obj[prop]) { // 不能监控常量\n            if (Object.defineProperty) {// ECMAScript 5\n                Object.defineProperty(obj, prop, {\n                    configurable: true,\n                    get: getter,\n                    set: setter\n                });\n            }\n            else if (Object.prototype[\"__defineGetter__\"] && Object.prototype[\"__defineGetter__\"]) {\n                Object.prototype[\"__defineGetter__\"].call(obj, prop, getter);\n                Object.prototype[\"__defineGetter__\"].call(obj, prop, setter);\n            }\n        }\n        return () => { PropWatcher.unwatch(obj, prop); };\n    }\n    /**\n     * \n     * @param obj 对象\n     * @param prop 属性\n     */\n    static unwatch(obj, prop) {\n        let val = obj[prop];\n        // const xobj = Object.getOwnPropertyDescriptor(obj, prop);\n        // if (xobj && xobj.set) {\n        //     xobj.set = undefined;\n        // }\n        delete obj[prop];\n        obj[prop] = val;\n    }\n}\n"]}