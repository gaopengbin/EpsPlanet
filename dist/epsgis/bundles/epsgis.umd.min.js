!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/core"),require("lodash"),require("@angular/common/http"),require("ng-zorro-antd/result"),require("esri-loader"),require("@angular/forms"),require("ng-zorro-antd/icon"),require("@angular/platform-browser"),require("rxjs"),require("events"),require("@angular/router"),require("rxjs/operators"),require("@angular/cdk/portal"),require("@angular/cdk/overlay"),require("ng-zorro-antd/dropdown"),require("ng-zorro-antd/tabs"),require("ng-zorro-antd/menu")):"function"==typeof define&&define.amd?define("epsgis",["exports","@angular/common","@angular/core","lodash","@angular/common/http","ng-zorro-antd/result","esri-loader","@angular/forms","ng-zorro-antd/icon","@angular/platform-browser","rxjs","events","@angular/router","rxjs/operators","@angular/cdk/portal","@angular/cdk/overlay","ng-zorro-antd/dropdown","ng-zorro-antd/tabs","ng-zorro-antd/menu"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).epsgis={},e.ng.common,e.ng.core,e["^4"][17][15],e.ng.common.http,e["^11"][1][0],e["^2"][12][0],e.ng.forms,e["^11"][1][0],e.ng.platformBrowser,e.rxjs,e.events,e.ng.router,e.rxjs.operators,e.ng.cdk.portal,e.ng.cdk.overlay,e["^11"][1][0],e["^11"][1][0],e["^11"][1][0])}(this,(function(e,t,n,o,i,r,s,a,l,c,p,d,u,g,f,h,m,v,y){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var C=function(e,t){return(C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}C(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function b(e,t,n,o){var i,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(r<3?i(s):r>3?i(t,n,s):i(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s}function _(e,t,n,o){return new(n||(n=Promise))((function(i,r){function s(e){try{l(o.next(e))}catch(e){r(e)}}function a(e){try{l(o.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))}function M(e,t){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,o=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){s=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){s.label=r[1];break}if(6===r[0]&&s.label<i[1]){s.label=i[1],i=r;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(r);break}i[2]&&s.ops.pop(),s.trys.pop();continue}r=t.call(e,s)}catch(e){r=[6,e],o=0}finally{n=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}Object.create;function x(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,i,r=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return s}function P(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(S(arguments[t]));return e}Object.create;var I=function(){function e(){}return e.overwriteLog=function(e){["debug","error","info","log","warn","time","timeEnd","count"].forEach((function(t){var n;window.console[t]=(n=window.console[t],function(){if(e)try{n.call.apply(n,P([console],arguments))}catch(e){console.error("console.log error",e)}})}))},e}(),O=new n.InjectionToken("app_global_config"),E="assets/global.json",k=function(){function e(e){this.httpClient=e}return e.prototype.getPath=function(){var e,t;"/"===(e=window.location.pathname)||"/"===e.substr(e.length-1)?t=e:t=e.split("/").join("/")+"/";return t},e.prototype.getUrlParams=function(){var e,t=window.location.search;if(""===t&&(t=window.location.hash)&&t.indexOf("?")>0&&(t=t.substring(t.indexOf("?"))),""===t)return{};if(e=new Object,-1!=t.indexOf("?"))for(var n=t.substr(1).split("&"),o=0;o<n.length;o++)e[n[o].split("=")[0]]=decodeURIComponent(n[o].split("=")[1]);return e},e.prototype.init=function(e){var t=o.cloneDeep(z);return t.path||(t.path=t.appInfo.path=this.getPath()),t.urlParams=o.merge(t.urlParams,this.getUrlParams()),!0===t.jimuConfig.isDesignMode&&"string"==typeof t.urlParams.config&&t.urlParams.config.length>=1&&(t.appInfo.configFile="./project/"+t.urlParams.config+"/config.json",t.appInfo.extendInitjs="./project/"+t.urlParams.config+"/thirdpartyLibs/init.js",t.appInfo.folderUrlPrefix="./project/"+t.urlParams.config),e&&(t=o.merge(t,e)),this._mergedConfig=t,this},e.prototype.loadGlobalConfig=function(){var e=this;return new Promise((function(t,n){e._mergedConfig.globalConfigFilePath=e._mergedConfig.globalConfigFilePath||E,e._mergedConfig.globalConfigFilePath?e.httpClient.get(e._mergedConfig.globalConfigFilePath).toPromise().then((function(n){n&&(e._mergedConfig=Object.assign(Object.assign({},e._mergedConfig),n),n.title&&(document.title=n.title)),I.overwriteLog(e._mergedConfig.log),t(!0)})).catch((function(e){console.log("配置文件global.json读取失败"),t(!0)})):(console.log("没有global.json"),t(!0))}))},e.prototype.getConfig=function(){return this._mergedConfig},e}();k.ɵfac=function(e){return new(e||k)(n.ɵɵinject(i.HttpClient))},k.ɵprov=n.ɵɵdefineInjectable({token:k,factory:k.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(k,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:i.HttpClient}]}),null);var D=function(){};D.ɵfac=function(e){return new(e||D)},D.ɵprov=n.ɵɵdefineInjectable({token:D,factory:D.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(D,[{type:n.Injectable,args:[{providedIn:"root"}]}],null,null);var z={title:"EPSGIS",subtitle:"山维科技",logo:"",apiRootUrl:"",widgetRootPath:"widgets",wabVersion:void 0,path:"",urlParams:{mode:""},jimuConfig:{zIndex:"auto",isDesignMode:!1,isSettings:!1,mapId:"mapContainer"},appInfo:{path:"",configFile:"assets/config.json",extendInitjs:"",folderUrlPrefix:"",appPath:"",isRunInMobile:!1},dojoConfig:{locale:""},epsoConfig:{showWorkAreaInAddUser:!0,defaultCityCode:"520100"},globalConfigFilePath:E,menuConfig:{notReuseRoutes:[],notShowInTabRoutes:[],menuData:[]},mapConfig:{is3D:!1,jsApi:""},log:!0},T=function(e){this.viewContainerRef=e};T.ɵfac=function(e){return new(e||T)(n.ɵɵdirectiveInject(n.ViewContainerRef))},T.ɵdir=n.ɵɵdefineDirective({type:T,selectors:[["","component-host",""]]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(T,[{type:n.Directive,args:[{selector:"[component-host]"}]}],(function(){return[{type:n.ViewContainerRef}]}),null);var V,W=function(){};W.ɵmod=n.ɵɵdefineNgModule({type:W}),W.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||W)},imports:[[t.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(W,{declarations:[T],imports:[t.CommonModule],exports:[T]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(W,[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[T],exports:[T]}]}],null,null),(V=e.WidgetType||(e.WidgetType={})).widget="widget",V.panel="panel",V.icon="icon";var j,R,L=function(e,t,n,o,i,r,s,a,l){void 0===l&&(l=""),this.top=e,this.left=t,this.bottom=n,this.right=o,this.height=i,this.width=r,this.zIndex=s,this.position=a,this.relativeTo=l,this.position="absolute"};(j=e.WidgetState||(e.WidgetState={})).closed="closed",j.opened="opened",j.active="active",(R=e.WidgetWindowState||(e.WidgetWindowState={})).normal="normal",R.minimized="minimized",R.maximized="maximized",R.collapsed="collapsed";var A=function(){function t(){this.type=e.WidgetType.widget,this.id="",this.label=void 0,this.icon=void 0,this.uri=void 0,this.originPosition=new L,this.position=new L,this.config=void 0,this.openAtStart=!1,this.map=null,this.view=null,this.appConfig=null,this.folderUrl=null,this.state=e.WidgetState.closed,this.windowState=e.WidgetWindowState.normal,this.started=!1,this.name="",this.moveTopOnActive=!0,this.widgetConfig=null,this.configId=null,this.style="",this.title="",this.tooltip="",this.reqPara=void 0,this.gid="",this.inPanel=!0,this.isOnScreen=!0,this.minZindex=102,this._compInfo={uri:"",name:"BaseWidgetComponent",path:""}}return t.prototype.afterNgOnInit=function(){},t.prototype.afterNgAfterViewInit=function(){},t.prototype.ngOnInit=function(){this.afterNgOnInit()},t.prototype.ngAfterViewInit=function(){this.afterNgAfterViewInit()},t.prototype.ngOnDestroy=function(){},t.prototype.getCompInfo=function(){return this._compInfo},t.prototype.setServiceInjector=function(e){e&&(this.globalParams=e.config,this.utils=e.utils,this.commonService=e.commonService,this.httpService=e.httpService,this.configLoader=e.configLoader,this.configManager=e.configManager,this.mapManager=e.mapManager,this.panelManager=e.panelManager,this.widgetManager=e.widgetManager,this.widgetPlaceHolder=e.widgetPlaceHolder,this.layoutManager=e.layoutManager,this.eventService=this.layoutManager.eventService,this.jsEventManager=e.jsEventManager,this.componentLoader=e.componentManager,this.modalManager=e.modalManaer,this.settingService=e.settingService)},t.prototype.setPosition=function(e){this.position=this.commonService.getPosition(e),this.originPosition=o.cloneDeep(this.position)},t.prototype.changePosition=function(e){this.position=this.commonService.getPosition(e)},t.prototype.setState=function(e){this.state=e},t.prototype.startup=function(){this.started=!0},t.prototype.onOpen=function(){this.state=e.WidgetState.opened},t.prototype.resize=function(e){},t.prototype.onDeActive=function(){},t.prototype.onClose=function(){this.state=e.WidgetState.closed},t.prototype.onAction=function(e,t){},t.prototype.setZIndex=function(e){switch(e){case"active":this.position.zIndex=this.minZindex;break;case"deactive":this.position.zIndex="auto";break;default:this.position.zIndex=e}},t.prototype.onNormalize=function(){},t.prototype.onMinimize=function(){},t.prototype.onMaximize=function(){},t.prototype.changeMap=function(e){this.map=e,this.eventService.rss.emit(this.eventService._mapChanged,e)},t.prototype.onMapChange=function(e){},t.prototype.changeView=function(e){this.view=e,this.eventService.rss.emit(this.eventService._viewChanged,e)},t.prototype.onViewChange=function(e){},Object.defineProperty(t.prototype,"isSettingMode",{get:function(){var e;return"config"===(null===(e=this.globalParams)||void 0===e?void 0:e.urlParams.mode)},enumerable:!1,configurable:!0}),t}();A.ɵfac=function(e){return new(e||A)},A.ɵdir=n.ɵɵdefineDirective({type:A}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(A,[{type:n.Directive}],(function(){return[]}),null);var N,B=function(e,t,n){void 0===t&&(t=""),void 0===n&&(n=null),this.success=e,this.msg=t,this.data=n,this.error={errorCode:"",errorMsg:""}};(N=e.OrderByType||(e.OrderByType={}))[N.asc=0]="asc",N[N.desc=1]="desc";var F,U=new Map,H=function(e){return function(t){if(t.getCompInfo&&"function"==typeof t.getCompInfo){var n=t.getCompInfo();e.path||(e.path=n.path),e.name||(e.name=n.name)}t.prototype.getCompInfo=function(){return e};var o=Object.assign({},e,{component:t});U.set(e.uri.toLocaleLowerCase(),o)}};function G(e){if(e)return U.get(e.toLocaleLowerCase())}var J=["jsoneditor"],q=F=function(){function e(e){this.jsonRess=["assets/json-editor/930/jsoneditor.min.css","assets/json-editor/930/jsoneditor.min.js"],this.dataChange=new n.EventEmitter,this.onChange=new n.EventEmitter,this.onError=new n.EventEmitter,this.disabled=!1,this.zone=e}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.writeValue(e),this.dataChange.emit(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.initEditor(this.editorOptions||{})},e.prototype.ngOnDestroy=function(){this.destroy()},e.prototype.initEditor=function(e){var t=this,n={enableSort:!0,colorPicker:!0,escapeUnicode:!1,sortObjectKeys:!0,history:!0,modes:["tree","view","form","code","text","preview"],language:"zh-CN",search:!0,onChangeJSON:function(e){},onChangeText:function(e){},onError:function(e){}};this.onError.observers.length>=1&&(n.onError=function(e){t.onError.emit(e)});var o=Object.assign(e,n);o.onChange=function(){if(t.editor){var e=t.editor.get();t.updateValue(e)}},this.editor=new JSONEditor(this.jsonEditorContianer.nativeElement,o,this.data)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this._onChange(e))},enumerable:!1,configurable:!0}),e.prototype._onChange=function(e){},e.prototype._onTouched=function(){},e.prototype.registerOnChange=function(e){this._onChange=e},e.prototype.registerOnTouched=function(e){this._onTouched=e},e.prototype.setDisabledState=function(e){this.disabled=e},e.prototype.updateValue=function(e){var t=this;this.zone.run((function(){t.value=e,t._onTouched(),t.editor&&t.onChange.emit(e)}))},e.prototype.writeValue=function(e){this._value=e,this.editor&&this.editor.set(e)},e.prototype.getEditor=function(){return this.editor},e.prototype.expandAll=function(){this.editor&&this.editor.expandAll()},e.prototype.collapseAll=function(){this.editor&&this.editor.collapseAll()},e.prototype.destroy=function(){this.editor&&this.editor.destroy()},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.setMode=function(e){this.editor&&this.editor.setMode(e)},e.prototype.setModes=function(e){this.editor&&this.editor.setModes(e)},e.prototype.setName=function(e){this.editor&&this.editor.setName(e)},e.prototype.setSchema=function(e){this.editor&&this.editor.setSchema(e)},e.prototype.setText=function(e){this.editor&&this.editor.setText(e)},e.prototype.getMode=function(){if(this.editor)return this.editor.getMode()},e.prototype.getName=function(){if(this.editor)return this.editor.getName()},e.prototype.getText=function(){if(this.editor)return this.editor.getText()},e}();q.ɵfac=function(e){return new(e||q)(n.ɵɵdirectiveInject(n.NgZone))},q.ɵcmp=n.ɵɵdefineComponent({type:q,selectors:[["epsgis-json-editor"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(J,3),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.jsonEditorContianer=o.first)}},inputs:{data:"data",editorOptions:["options","editorOptions"],treeMaxHeight:"treeMaxHeight"},outputs:{dataChange:"dataChange",onChange:"onChange",onError:"onError"},features:[n.ɵɵProvidersFeature([{provide:a.NG_VALUE_ACCESSOR,useExisting:n.forwardRef((function(){return F})),multi:!0}])],decls:2,vars:0,consts:[["jsoneditor",""]],template:function(e,t){1&e&&n.ɵɵelement(0,"div",null,0)},styles:["[_nghost-%COMP%]     .jsoneditor-poweredBy{\n      display: none;\n    }\n    [_nghost-%COMP%] > div[_ngcontent-%COMP%]{\n        height: 100%;\n    }"]}),q=F=b([H({uri:"epsgis-json-editor",path:"components/shared/json-editor"})],q),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(q,[{type:n.Component,args:[{selector:"epsgis-json-editor",providers:[{provide:a.NG_VALUE_ACCESSOR,useExisting:n.forwardRef((function(){return q})),multi:!0}],template:"<div #jsoneditor></div>",styles:["\n    :host ::ng-deep .jsoneditor-poweredBy{\n      display: none;\n    }\n    :host>div{\n        height: 100%;\n    }\n  "]}]}],(function(){return[{type:n.NgZone}]}),{jsonEditorContianer:[{type:n.ViewChild,args:["jsoneditor",{static:!0}]}],data:[{type:n.Input}],dataChange:[{type:n.Output}],editorOptions:[{type:n.Input,args:["options"]}],treeMaxHeight:[{type:n.Input}],onChange:[{type:n.Output}],onError:[{type:n.Output}]});var X=function(e){function t(){var t=e.call(this)||this;return t.configFileName="config.json",t.manifestFileName="manifest.json",t.validateResult=new B(!1),t._needLoadManifest=!1,t}return w(t,e),Object.defineProperty(t.prototype,"needLoadManifest",{get:function(){return this._needLoadManifest},set:function(e){this._needLoadManifest=e},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},Object.defineProperty(t.prototype,"configJsonPhysicalPath",{get:function(){return this.configJsonWebPath.replace(this.globalParams.widgetRootPath+"/","")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"manifestJsonPhysicalPath",{get:function(){return this.widgetInstance.getCompInfo().path+"/"+this.manifestFileName},enumerable:!1,configurable:!0}),t.prototype.getValidateResult=function(){return this.validateResult},t.prototype.setValidateResult=function(e,t,n){this.validateResult.success=e,this.validateResult.msg=t,this.validateResult.data=n},t.prototype.saveConfigJson=function(e){return this.settingService.saveConfig({filePath:this.configJsonPhysicalPath,content:"string"==typeof e?e:JSON.stringify(e)})},t.prototype.saveManifestJson=function(e){return this.settingService.saveConfig({filePath:this.manifestJsonPhysicalPath,content:"string"==typeof e?e:JSON.stringify(e)})},t.prototype.onSaveError=function(e){console.error(e)},t}(A);X.ɵfac=function(e){return new(e||X)},X.ɵdir=n.ɵɵdefineDirective({type:X,features:[n.ɵɵInheritDefinitionFeature]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(X,[{type:n.Directive}],(function(){return[]}),null);var Q=["config"],$=["manifest"];function Y(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",6),n.ɵɵelementStart(1,"span"),n.ɵɵelementStart(2,"input",7),n.ɵɵlistener("ngModelChange",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().switchChecked=e}))("change",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().changeMode(e)})),n.ɵɵelementEnd(),n.ɵɵtext(3," 编辑器 "),n.ɵɵelementStart(4,"label",8),n.ɵɵelement(5,"em"),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵproperty("ngModel",i.switchChecked)}}var Z=function(){return{name:"组件配置信息"}},K=function(){return{name:"组件信息"}},ee=function(e){function t(){var t=e.call(this)||this;return t.currentMode=0,t.showSwitchBtn=!1,t.previousMode=0,t.switchChecked=!1,t.needLoadManifest=!0,t}return w(t,e),t.prototype.ngOnInit=function(){this.setValidateResult(!0),this.setServiceInjector(this.widgetInstance.componentLoader.getServiceInjector()),this.widgetConfig=this.widgetInstance.widgetConfig,this.configJsonWebPath=this.widgetConfig.folderUrl.split("?")[0]+(this.widgetConfig.configPath||this.configFileName),this.manifestJsonWebPath=this.widgetConfig.folderUrl.split("?")[0]+this.manifestFileName,e.prototype.ngOnInit.call(this)},t.prototype.ngAfterViewInit=function(){this.loadWidgetConfig(),this.needLoadManifest&&this.loadWidgetManifest(),e.prototype.ngAfterViewInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.switchToConfigOrManifest=function(){2!=this.currentMode?(this.previousMode=this.currentMode,this.showSwitchBtn=!1,this.currentMode=2):(this.currentMode=this.previousMode,this.settingComponentInstance&&(this.showSwitchBtn=!0))},t.prototype.changeMode=function(e){this.switchChecked?this.currentMode=1:this.currentMode=3},t.prototype.onSaveError=function(e){this.settingComponentInstance?this.settingComponentInstance.onSaveError(e):console.error(e)},t.prototype.saveAll=function(){var e=this;return new Promise((function(t,n){var o;switch(e.currentMode){case 1:(o=e.getValidateResult()).success&&e.editorConfig?e.saveConfigJson(e.editorConfig.getText()).then((function(n){n.success&&(n.data={config:e.editorConfig.value,manifest:e.editorManifest.value}),t(n)})).catch(n):t(new B(!1,"验证失败"));break;case 2:(o=e.getValidateResult()).success&&e.editorManifest?e.saveManifestJson(e.editorManifest.getText()).then((function(n){n.success&&(n.data={config:e.editorConfig.value,manifest:e.editorManifest.value}),t(n)})).catch(n):t(new B(!1,"验证失败"));break;case 3:e.settingComponentInstance?(o=e.settingComponentInstance.getValidateResult()).success?e.settingComponentInstance.saveConfigJson(o.data).then((function(n){n.success&&(n.data={config:o.data,manifest:e.editorManifest.value}),t(n)})).catch(n):t(new B(!1,"验证失败")):t(new B(!1,"无组件，无法保存"));break;default:t(new B(!1,"不支持的模式"))}}))},t.prototype.loadWidgetConfig=function(){var e=this;this.configJsonWebPath?this.settingService.getConfigContent(this.configJsonWebPath).then((function(t){e.configJson=t,e.onConfigJsonLoad(!0,null)})).catch((function(t){return e.onConfigJsonLoad(!1,t)})):console.log("configJsonWebPath is null")},t.prototype.loadWidgetManifest=function(){var e=this;this.manifestJsonWebPath?this.settingService.getConfigContent(this.manifestJsonWebPath).then((function(t){e.manifestJson=t,e.onManifestJsonLoad(!0,null)})).catch((function(t){return e.onManifestJsonLoad(!1,t)})):console.log("manifestJsonWebPath is null")},t.prototype.onConfigJsonLoad=function(e,t){if(e||console.error(t),!0===this.widgetConfig.hasSetting){var n=this.widgetConfig.uri+"-setting",o=this.componentLoader.findComponent(n);if(!o)return console.info("未找到setting组件["+n+"]，请检查组件定义"),void(this.currentMode=1);this.showSwitchBtn=!0,this.currentMode=3,this.switchChecked=!1;var i=this.componentLoader.createComponent(o,null,this.container);this.settingComponentInstance=i.instance,this.settingComponentInstance.widgetInstance=this.widgetInstance,this.settingComponentInstance.configJson=this.configJson,this.settingComponentInstance.configJsonWebPath=this.configJsonWebPath,this.settingComponentInstance.manifestJson=this.manifestJson,this.settingComponentInstance.manifestJsonWebPath=this.manifestJsonWebPath,this.container.clear(),this.container.insert(i.hostView,0)}else this.currentMode=1},t.prototype.onManifestJsonLoad=function(e,t){e||console.error(t)},t}(X);ee.ɵfac=function(e){return new(e||ee)},ee.ɵcmp=n.ɵɵdefineComponent({type:ee,selectors:[["epsgis-widget-setting"]],viewQuery:function(e,t){if(1&e&&(n.ɵɵviewQuery(Q,1,q),n.ɵɵviewQuery($,1,q),n.ɵɵviewQuery(T,1,n.ViewContainerRef)),2&e){var o=void 0;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.editorConfig=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.editorManifest=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.container=o.first)}},features:[n.ɵɵInheritDefinitionFeature],decls:10,vars:17,consts:[["class","switch",4,"ngIf"],[1,"margin5"],[3,"data","options","dataChange"],["config",""],["component-host",""],["manifest",""],[1,"switch"],["type","checkbox","id","custom-ui",3,"ngModel","ngModelChange","change"],["for","custom-ui"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div"),n.ɵɵtemplate(1,Y,6,1,"div",0),n.ɵɵelement(2,"div",1),n.ɵɵelementStart(3,"epsgis-json-editor",2,3),n.ɵɵlistener("dataChange",(function(e){return t.configJson=e})),n.ɵɵelementEnd(),n.ɵɵelementStart(5,"div"),n.ɵɵelementContainer(6,4),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(7,"div"),n.ɵɵelementStart(8,"epsgis-json-editor",2,5),n.ɵɵlistener("dataChange",(function(e){return t.manifestJson=e})),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵclassProp("show-config",1==t.currentMode||3==t.currentMode),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.showSwitchBtn),n.ɵɵadvance(2),n.ɵɵclassProp("hide",1!=t.currentMode),n.ɵɵproperty("data",t.configJson)("options",n.ɵɵpureFunction0(15,Z)),n.ɵɵadvance(2),n.ɵɵclassProp("hide",3!=t.currentMode),n.ɵɵadvance(2),n.ɵɵclassProp("show-manifest",2==t.currentMode),n.ɵɵadvance(1),n.ɵɵclassProp("hide",2!=t.currentMode),n.ɵɵproperty("data",t.manifestJson)("options",n.ɵɵpureFunction0(16,K)))},directives:[t.NgIf,q,T,a.CheckboxControlValueAccessor,a.NgControlStatus,a.NgModel],styles:['.show-manifest[_ngcontent-%COMP%]{display:"";height:100%}.show-config[_ngcontent-%COMP%]{display:"";height:calc(100% - 22px)}.hide[_ngcontent-%COMP%]{display:none}.margin5[_ngcontent-%COMP%]{margin-top:5px}.switch[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{clear:both;display:block;line-height:22px;text-align:right}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}.switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:52px;background:#ccc;height:22px;border-radius:11px;float:right;box-shadow:inset 0 1px 2px rgba(0,0,0,.1);margin-left:20px}.switch[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{width:26px;height:20px;float:left;margin:1px;border-radius:10px;box-shadow:2px 3px 8px rgba(0,0,0,.1);background:#fff}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{background:#4390f7}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{float:right}.switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]{opacity:.5}']}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ee,[{type:n.Component,args:[{selector:"epsgis-widget-setting",templateUrl:"./widget-setting.component.html",styleUrls:["./widget-setting.component.scss"]}]}],(function(){return[]}),{editorConfig:[{type:n.ViewChild,args:["config",{read:q,static:!1}]}],editorManifest:[{type:n.ViewChild,args:["manifest",{read:q,static:!1}]}],container:[{type:n.ViewChild,args:[T,{read:n.ViewContainerRef,static:!1}]}]});var te=function(){};te.ɵfac=function(e){return new(e||te)},te.ɵcmp=n.ɵɵdefineComponent({type:te,selectors:[["epsgis-icon-setting"]],decls:2,vars:0,consts:[["viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","height","100%","width","100%"],["d","M512.6 706.2c-107 0-194.2-87-194.2-193.8 0-106.8 87-193.8 194.2-193.8 51.8 0 100.4 20.2 137.2 56.8 36.8 36.6 57 85.4 57 137 0 106.8-87.2 193.8-194.2 193.8M967.6 426h-0.2L876 405.8l-2.2-7c-6-19-13.8-38-24.2-58.2l-3.2-6.4 49.2-81.8c15-24 21.4-57 1.8-76.6l-46.2-46.2c-11.6-11.6-26.6-14-37-14-14.4 0-29.8 4.8-41.2 12.6l-0.2 0.2-79.8 51-6.6-3.4c-18.8-9.8-38.4-18-57.8-24.2l-7-2.2-20.4-92.2v-0.2c-4.8-26.2-27.6-54.4-56.4-54.4h-65.4c-27.8 0-46.6 27.8-52.8 55.4L404 148.8l-6.8 2.2c-20.8 6.6-41.6 15.4-61.6 25.8l-6.6 3.4L247.2 128l-0.2-0.2c-11.4-8-26.8-12.6-41.2-12.6-10.6 0-25.4 2.4-37 14L122.6 175.6c-19.6 19.6-13.2 52.6 1.8 76.6L175.8 338l-3.2 6.2c-9.6 19.2-16.8 37-22.2 54.4l-2.2 7L57 426h-0.2c-26.2 4.8-54.2 27.6-54.2 56.4v65.4c0 27.8 27.8 46.6 55.4 53l92 23 2.2 6.8c5.4 16.4 12.2 33 20.8 50.4l3 6.2-51.4 85.8c-15 24-21.4 57-1.8 76.6l46.2 46.2c11.6 11.6 26.6 14 37 14 14.4 0 29.8-4.8 41.2-12.6l0.2-0.2 82-52.2 6.6 3.4c20.2 10.6 41 19.4 61.8 26l6.8 2.2 22.6 90.8c6.4 27.6 25.2 55.4 52.8 55.4h65.4c28.8 0 51.6-28.2 56.4-54.4v-0.2l20.4-92.4 7-2.2c19.2-6.2 38.4-14.2 57-24l6.6-3.4 80 51 0.2 0.2c11.4 8 26.8 12.6 41.2 12.6 10.6 0 25.4-2.4 37-14l46.2-46.2c19.6-19.6 13.2-52.6-1.8-76.6l-49.2-82 3.2-6.2c9-18 16.8-36.2 22.6-54.2l2.2-6.6 92-23c27.6-6.4 55.4-25.2 55.4-53v-65.4c0-29-28.2-51.8-54.2-56.6"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelement(1,"path",1),n.ɵɵelementEnd())},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(te,[{type:n.Component,args:[{selector:"epsgis-icon-setting",template:'\n    <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" height="100%" width="100%">\n          <path\n            d="M512.6 706.2c-107 0-194.2-87-194.2-193.8 0-106.8 87-193.8 194.2-193.8 51.8 0 100.4 20.2 137.2 56.8 36.8 36.6 57 85.4 57 137 0 106.8-87.2 193.8-194.2 193.8M967.6 426h-0.2L876 405.8l-2.2-7c-6-19-13.8-38-24.2-58.2l-3.2-6.4 49.2-81.8c15-24 21.4-57 1.8-76.6l-46.2-46.2c-11.6-11.6-26.6-14-37-14-14.4 0-29.8 4.8-41.2 12.6l-0.2 0.2-79.8 51-6.6-3.4c-18.8-9.8-38.4-18-57.8-24.2l-7-2.2-20.4-92.2v-0.2c-4.8-26.2-27.6-54.4-56.4-54.4h-65.4c-27.8 0-46.6 27.8-52.8 55.4L404 148.8l-6.8 2.2c-20.8 6.6-41.6 15.4-61.6 25.8l-6.6 3.4L247.2 128l-0.2-0.2c-11.4-8-26.8-12.6-41.2-12.6-10.6 0-25.4 2.4-37 14L122.6 175.6c-19.6 19.6-13.2 52.6 1.8 76.6L175.8 338l-3.2 6.2c-9.6 19.2-16.8 37-22.2 54.4l-2.2 7L57 426h-0.2c-26.2 4.8-54.2 27.6-54.2 56.4v65.4c0 27.8 27.8 46.6 55.4 53l92 23 2.2 6.8c5.4 16.4 12.2 33 20.8 50.4l3 6.2-51.4 85.8c-15 24-21.4 57-1.8 76.6l46.2 46.2c11.6 11.6 26.6 14 37 14 14.4 0 29.8-4.8 41.2-12.6l0.2-0.2 82-52.2 6.6 3.4c20.2 10.6 41 19.4 61.8 26l6.8 2.2 22.6 90.8c6.4 27.6 25.2 55.4 52.8 55.4h65.4c28.8 0 51.6-28.2 56.4-54.4v-0.2l20.4-92.4 7-2.2c19.2-6.2 38.4-14.2 57-24l6.6-3.4 80 51 0.2 0.2c11.4 8 26.8 12.6 41.2 12.6 10.6 0 25.4-2.4 37-14l46.2-46.2c19.6-19.6 13.2-52.6-1.8-76.6l-49.2-82 3.2-6.2c9-18 16.8-36.2 22.6-54.2l2.2-6.6 92-23c27.6-6.4 55.4-25.2 55.4-53v-65.4c0-29-28.2-51.8-54.2-56.6">\n          </path>\n        </svg>\n    ',styles:[]}]}],null,null);var ne=function(e){function t(){var t=e.apply(this,P(arguments))||this;return t.widgetSettingClassName="ss-widget-setting",t.showSettingWhenInPanel=!1,t}return w(t,e),t.prototype.ngOnInit=function(){var e=this;!this.appConfig&&this.widgetManager?this.widgetManager.loadConfig(this.getCompInfo(),this).then((function(){e.afterNgOnInit()})):this.afterNgOnInit()},t.prototype.onMouseEnter=function(e){var n=this;if(!1!==this.isSettingMode&&(1!=this.inPanel||0!=this.showSettingWhenInPanel))if(e.lastElementChild.className==this.widgetSettingClassName)e.lastElementChild.classList.remove("hide"),e.lastElementChild.classList.add("show");else{var o=document.createElement("div");if(o.className=this.widgetSettingClassName,!t.settingIconEleNode){var i=this.componentLoader.createComponent(te);t.settingIconEleNode=i.location.nativeElement}var r=document.createElement("div");r.className="icon";var s=t.settingIconEleNode.cloneNode(!0);r.appendChild(s),r.onclick=function(){n.openSetting()},r.cloneNode(),o.appendChild(r),e.appendChild(o)}},t.prototype.onMouseLeave=function(e){!1!==this.isSettingMode&&(1==this.inPanel&&0==this.showSettingWhenInPanel||e.lastElementChild.className==this.widgetSettingClassName&&(e.lastElementChild.classList.remove("show"),e.lastElementChild.classList.add("hide")))},t.prototype.getPanel=function(){if(!1===this.inPanel)return null;var e=null;if("widgetOnScreen"===this.gid||"widgetPool"===this.gid)e=this.panelManager.getPanelById(this.id+"_panel");else{if(e=this.panelManager.getPanelById(this.gid+"_panel"))return e;e=this.panelManager.getPanelById(this.id+"_panel")}return e||(e={uri:"epsgis-on-screen-widget-panel"}),e},t.prototype.onConfigChanged=function(e){},t.prototype.onAppConfigChanged=function(e,t,n){},t.prototype.onAction=function(e,t){},t.prototype.loadArcgisModules=function(e,t){var n="";if(this.globalParams.mapConfig.jsApi&&(n=this.globalParams.mapConfig.jsApi),this.appConfig&&this.appConfig.map&&this.appConfig.map.jsApi&&(n=this.appConfig.map.jsApi),n){var o={url:n,css:n.replace("init.js","esri/css/main.css")};return s.loadModules(e,Object.assign(o,t))}console.error("no arcgis js api")},t.prototype.openSetting=function(e){var t=!1,n=Object.assign({width:700,height:400},e),i=this.modalManager.create({title:this.label+"-配置",content:ee,componentParams:{widgetInstance:this},top:60,width:n.width,height:n.height,titleBarButtons:[{icon:"icon-epsgis-i",isIconfont:!0,onClick:function(e){e.switchToConfigOrManifest()}}],okLoading:t,onOk:function(e){return e.saveAll().then((function(n){n.success?(e.widgetInstance.config=n.data.config,e.widgetInstance.widgetConfig.config=n.data.config,e.widgetInstance.widgetConfig.manifest=o.merge({},e.widgetInstance.widgetConfig.manifest,n.data.manifest),e.widgetInstance.onConfigChanged(e.widgetInstance.widgetConfig),i.close()):e.onSaveError(new Error(n.msg)),t=!1})).catch((function(n){e.onSaveError(n),t=!1})),!1}})},t}(A);ne.settingIconEleNode=null,ne.ɵfac=function(e){return re(e||ne)},ne.ɵdir=n.ɵɵdefineDirective({type:ne,hostBindings:function(e,t){1&e&&n.ɵɵlistener("mouseenter",(function(e){return t.onMouseEnter(e.target)}))("mouseleave",(function(e){return t.onMouseLeave(e.target)}))},inputs:{showSettingWhenInPanel:"showSettingWhenInPanel"},features:[n.ɵɵInheritDefinitionFeature]});var oe,ie,re=n.ɵɵgetInheritedFactory(ne);function se(e,t){if(1&e&&n.ɵɵelement(0,"img",2),2&e){var o=n.ɵɵnextContext();n.ɵɵproperty("src",o.icon,n.ɵɵsanitizeUrl)}}function ae(e,t){if(1&e&&n.ɵɵelement(0,"i",3),2&e){var o=n.ɵɵnextContext();n.ɵɵproperty("nzIconfont",o.icon)}}("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ne,[{type:n.Directive}],null,{showSettingWhenInPanel:[{type:n.Input}],onMouseEnter:[{type:n.HostListener,args:["mouseenter",["$event.target"]]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave",["$event.target"]]}]}),e.OnScreenWidgetIconComponent=function(t){function n(n,o){var i=t.call(this)||this;return i.viewContainerRef=n,i.cdrf=o,i.widget=null,i.panel=null,i.panelConfig=null,i.isShowImg=!0,i.spacing=2,i.iconStyleDisplay="",i.type=e.WidgetType.icon,i}return w(n,t),n.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this),this.startup()},n.prototype.setProps=function(e){e.compRef?(this.widget=e.compRef,this.appConfig=this.widget.instance.appConfig,this.globalParams.mapConfig.is3D?this.view=this.widget.instance.view:this.map=this.widget.instance.map,this.widgetConfig=this.widget.instance.widgetConfig,this.config=this.widget.instance.config):(this.appConfig=e.appConfig,this.globalParams.mapConfig.is3D?this.view=e.map:this.map=e.map,this.widgetConfig=e.widgetConfig),this.id=this.configId=this.widgetConfig.id,this.label=this.tooltip=this.title=this.widgetConfig.label,this.folderUrl=this.widgetConfig.folderUrl,void 0!==this.widgetConfig.icon&&""!=this.widgetConfig.icon?this.icon=this.widgetConfig.icon:void 0!==this.widgetConfig.manifest.icon&&""!=this.widgetConfig.manifest.icon?(this.icon=this.widgetConfig.manifest.icon,this.isShowImg=!1):this.icon=this.folderUrl+"images/icon.png",this.uri=this.widgetConfig.uri,this.gid=this.widgetConfig.gid;var n=o.cloneDeep(this.widgetConfig.position);n.width="32px",n.height="32px",t.prototype.setPosition.call(this,n),this.panelConfig=o.cloneDeep(this.widgetConfig),!1===this.widgetConfig.showIcon&&(this.iconStyleDisplay="none")},n.prototype.ngOnDestroy=function(){this.destroy()},n.prototype.ngAfterViewInit=function(){},n.prototype.resetPanelPosition=function(){if(this.commonService.isMobile())return this.panelConfig.position;var e;if("browser"!==this.widgetConfig.position.relativeTo){var t=this.commonService.getComponentRootNode(this.mapManager.comRefMap);t&&(e=this.commonService.getElementBounds(t))}else e=document.querySelector("epsgis-comp-container").getBoundingClientRect();var n=this.viewContainerRef.element.nativeElement,o=this.commonService.getElementBounds(n),i=!1;return e.width-o.right<e.width/2&&(i=!0),i?(this.panelConfig.position.left=o.left-parseFloat(this.widgetConfig.position.width)-this.spacing-e.left,this.panelConfig.position.right=e.right-o.left-this.spacing):o.left+o.width+parseFloat(this.widgetConfig.position.width)+this.spacing>e.width?this.panelConfig.position.left=o.left-parseFloat(this.widgetConfig.position.width)-this.spacing-e.left:this.panelConfig.position.left=o.left+o.width+this.spacing-e.left,parseFloat(this.panelConfig.position.left)<=-1&&(i?(this.panelConfig.position.left=this.spacing,this.panelConfig.position.width=o.left-parseFloat(this.panelConfig.position.left)-2*this.spacing-e.left):(this.panelConfig.position.left=o.left+o.width+this.spacing-e.left,this.panelConfig.position.width=e.width-o.right-2*this.spacing)),o.top+parseFloat(this.widgetConfig.position.height)+this.spacing>e.height?this.panelConfig.position.top=o.top-parseFloat(this.widgetConfig.position.height)+this.spacing-e.top:this.panelConfig.position.top=o.top-e.top,parseFloat(this.panelConfig.position.top)<=-1&&(this.panelConfig.position.top=o.top-e.top,this.panelConfig.position.height=e.height-o.top-2*this.spacing),this.panelConfig.position},n.prototype.onMouseClick=function(e){this.onClick(e)},n.prototype.startup=function(){this.started=!0},n.prototype.onClick=function(t){this.state===e.WidgetState.closed||this.panel&&this.panel.instance.state===e.WidgetState.closed?this.switchToOpen():this.switchToClose()},n.prototype._isDockPanel=function(){var e="",t="";return this.widgetConfig.panel&&this.widgetConfig.panel.dock?"left"===(t=this.widgetConfig.panel.dock.toLowerCase())||"right"===t||"bottom"===t:(this.widgetConfig.panel&&this.widgetConfig.panel.uri&&(e=this.widgetConfig.panel.uri),!!e&&("epsgis-dockable-panel-at-left"===(e=e.toLowerCase())||"epsgis-dockable-panel-at-bottom"===e||"epsgis-dockable-panel-at-right"===e))},n.prototype.switchToOpen=function(){var t=this;this._isDockPanel()||this.panelManager.closeAllPanelsInGroup(this.widgetConfig.gid),this.resetPanelPosition(),!1===this.widgetConfig.inPanel?this.widgetManager.loadWidget(this.widgetConfig):this.panelManager.showPanel(this.panelConfig,this.widget).then((function(n){t.panel=n,t.state=e.WidgetState.opened,t.panel.instance.panelIcon=t,t.panel.instance.isDockable()&&t.panelManager.onMapResize()}))},n.prototype.switchToClose=function(){var t=this;!1===this.widgetConfig.inPanel?this.widgetManager.closeWidget(this.widget):this.panelManager.closePanel(this.panel).then((function(n){t.state=e.WidgetState.closed}))},n.prototype.moveTo=function(e){},n.prototype.destroy=function(){this.panel&&this.panelManager?this.panelManager.destroyPanel(this.panel):this.widget&&this.widgetManager.destroyWidget(this.widget)},n.prototype.getOffPanelWidgetPosition=function(){},n.prototype._showLoading=function(){},n.prototype._hideLoading=function(){},n.prototype.onMapChange=function(e){this.map=e},n.prototype.onViewChange=function(e){this.view=e},n}(ne),e.OnScreenWidgetIconComponent.ɵfac=function(t){return new(t||e.OnScreenWidgetIconComponent)(n.ɵɵdirectiveInject(n.ViewContainerRef,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef))},e.OnScreenWidgetIconComponent.ɵcmp=n.ɵɵdefineComponent({type:e.OnScreenWidgetIconComponent,selectors:[["epsgis-on-screen-widget-icon"]],hostVars:2,hostBindings:function(e,t){1&e&&n.ɵɵlistener("click",(function(e){return t.onMouseClick(e)})),2&e&&n.ɵɵstyleProp("display",t.iconStyleDisplay)},features:[n.ɵɵInheritDefinitionFeature],decls:2,vars:2,consts:[[3,"src",4,"ngIf"],["nz-icon","",3,"nzIconfont",4,"ngIf"],[3,"src"],["nz-icon","",3,"nzIconfont"]],template:function(e,t){1&e&&(n.ɵɵtemplate(0,se,1,1,"img",0),n.ɵɵtemplate(1,ae,1,1,"i",1)),2&e&&(n.ɵɵproperty("ngIf",t.isShowImg),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!t.isShowImg))},directives:[t.NgIf,l.NzIconDirective],styles:[""]}),e.OnScreenWidgetIconComponent=b([H({uri:"epsgis-on-screen-widget-icon",path:"components/on-screen-widget-icon"})],e.OnScreenWidgetIconComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.OnScreenWidgetIconComponent,[{type:n.Component,args:[{selector:"epsgis-on-screen-widget-icon",templateUrl:"./on-screen-widget-icon.component.html",styleUrls:["./on-screen-widget-icon.component.scss"]}]}],(function(){return[{type:n.ViewContainerRef,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef}]}),{iconStyleDisplay:[{type:n.HostBinding,args:["style.display"]}],onMouseClick:[{type:n.HostListener,args:["click",["$event"]]}]}),(oe=e.PanelInMobileShowMode||(e.PanelInMobileShowMode={})).default="default",oe.drawer="drawer",oe.drawerRight="drawerright",oe.popup="popup",oe.action="action",oe.popover="popover",oe.modal="modal",(ie=e.PanelDockMode||(e.PanelDockMode={})).none="none",ie.left="left",ie.right="right",ie.bottom="bottom";var le={id:"ss_panel",title:"SS Panel",showTitle:!0,modal:!1,autoOpen:!1,animationTime:300,customClass:"",buttonsPosition:"right",buttonClose:!0,buttonCloseText:"关闭",buttonMaximize:!0,buttonMaximizeText:"最大化",buttonUnmaximizeText:"还原",buttonMinimize:!1,buttonMinimizeText:"最小化",buttonUnminimizeText:"打开",buttonCollapse:!0,buttonCollapseText:"收缩",buttonUnCollapseText:"展开",draggable:!0,dragOpacity:.6,resizable:!0,resizeOpacity:.6,statusBar:!1,height:200,width:400,maxHeight:void 0,maxWidth:void 0,minHeight:100,minWidth:200,collapsedWidth:void 0,keepInViewport:!0,mouseMoveEvents:!0,dockSide:e.PanelDockMode.none,relativeTo:"map",innerHtml:"",url:""},ce=function(){function e(){this.nextId=0,this.after=this._aspect("after"),this.before=this._aspect("after"),this.around=this._aspect("around")}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.advise=function(e,t,n,o){var i,r=this,s=e[t],a="around"==t;if(a){var l=n((function(){return s.advice(r,arguments)}));i={remove:function(){l&&(l=e=n=null)},advice:function(e,t){return l?l.apply(e,t):s.advice(e,t)}}}else i={remove:function(){if(i.advice){var o=i.previous,r=i.next;r||o?(o?o.next=r:e[t]=r,r&&(r.previous=o)):delete e[t],e=n=i.advice=null}},id:e.nextId++,advice:n,receiveArguments:o};return s&&!a?"after"==t?(s.next=i,i.previous=s):"before"==t&&(e[t]=i,i.next=s,s.previous=i):e[t]=i,i},e.prototype._aspect=function(e){var t=this;return function(n,o,i,r){var s,a=n[o];a&&a.target==n||(n[o]=s=function(){for(var e=s.nextId,n=arguments,o=s.before;o;)o.advice&&(n=o.advice.apply(t,n)||n),o=o.next;if(s.around)s.around.advice(t,n);for(var i=s.after;i&&i.id<e;){if(i.advice)if(i.receiveArguments){var r=i.advice.apply(t,n);l=void 0===r?l:r}else l=i.advice.call(t,l,n);i=i.next}return l},a&&(s.around={advice:function(e,t){return a.apply(e,t)}}),s.target=n,s.nextId=s.nextId||0);var l=t.advise(s||a,e,i,r);return i=null,l}},e}();ce._instance=null;var pe=ce.getInstance(),de=function(){function e(){console.log("TestAspect constructor")}return e.prototype.testBefore=function(){console.log("TestAspect testBefore")},e.prototype.testAfter=function(){console.log("TestAspect testAfter")},e.prototype.testAround=function(){console.log("TestAspect testAround")},e}(),ue=["widget_content"],ge=["sspanel_overlay"],fe=["sspanel_titlebar"],he=["sspanel"],me=function(t){function n(n,o){var i=t.call(this)||this;return i._render=n,i.cdr=o,i.options=le,i.currentPosition=void 0,i.savedPosition=void 0,i.currentSize=void 0,i.savedSize=void 0,i.isMouseEvent=!1,i.originalPosition=void 0,i.dockMode=e.PanelDockMode.none,i._isRunInMobile=!1,i._mobileShowMode=e.PanelInMobileShowMode.action,i._eventTempData=void 0,i}return w(n,t),n.prototype.ngOnInit=function(){if(this._isRunInMobile=this.commonService.isMobileNotTablet(),!0===this.options.modal?this.sspanelOverlay&&this._render.setStyle(this.sspanelOverlay.nativeElement,"pointer-events","auto"):this.sspanelOverlay&&this._render.setStyle(this.sspanelOverlay.nativeElement,"background-color","transparent"),this._isRunInMobile)this._mobileShowMode!==e.PanelInMobileShowMode.drawer&&this._mobileShowMode!==e.PanelInMobileShowMode.drawerRight||(this._render.setStyle(this.sspanelOverlay.nativeElement,"pointer-events","auto"),this._render.setStyle(this.sspanelOverlay.nativeElement,"background-color","#00000080"));else try{this.xxxx=this._document_MouseMove.bind(this),this.yyyy=this._document_MouseUp.bind(this),this.started=!0}catch(e){console.log("open panel["+this.widget.instance.uri+"] error"),console.error(e)}t.prototype.ngOnInit.call(this)},n.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this),this.widget&&this.widgetManager.destroyWidget(this.widget)},n.prototype.ngAfterViewInit=function(){var n=this;Promise.resolve(null).then((function(){n.startup(),n.state=e.WidgetState.opened,n.loadAllWidgetsInOrder(),n.onOpen(),n.cdr&&!1===n.cdr.destroyed&&n.cdr.detectChanges(),t.prototype.afterNgAfterViewInit.call(n)}))},n.prototype.setPosition=function(e){this.widgetConfig.position.width||(this.widgetConfig.position.width=this.options.width),this.widgetConfig.position.height||(this.widgetConfig.position.height=this.options.height);var n=this.commonService.getPxNumber(this.widgetConfig.position.width),o=this.commonService.getPxNumber(this.widgetConfig.position.height);"number"==typeof n&&n<this.options.minWidth&&(this.widgetConfig.position.width=this.options.minWidth),"number"==typeof o&&o<this.options.minWidth&&(this.widgetConfig.position.height=this.options.minHeight),this.commonService.isMobileNotTablet()?this._setMobilePosition():this._setPCPosition(),t.prototype.setPosition.call(this,this.widgetConfig.position)},n.prototype._setPCPosition=function(){this.currentSize={width:this.widgetConfig.position.width,height:this.widgetConfig.position.height},this.currentPosition={left:void 0,top:void 0,width:void 0,height:void 0},this.currentPosition.left=this.commonService.getPxNumber(this.widgetConfig.position.left),this.currentPosition.top=this.commonService.getPxNumber(this.widgetConfig.position.top),this.currentPosition.width=this.commonService.getPxNumber(this.widgetConfig.position.width),this.currentPosition.height=this.commonService.getPxNumber(this.widgetConfig.position.height),this.savedPosition=o.cloneDeep(this.currentPosition),this.originalPosition=o.cloneDeep(this.currentPosition)},n.prototype._setMobilePosition=function(){},n.prototype.loadAllWidgetsInOrder=function(){var t=this,n=[this.widgetConfig];o.forEach(n,(function(n){!1!==n.visible&&t.widgetManager.loadWidget(n).then((function(n){t.widget=n,!1===t.options.showTitle&&(t.widget.instance.showSettingWhenInPanel=!0),t.widget.instance.reqPara=t.reqPara,t.widgetContainer.insert(t.widget.hostView),pe.after(t.widget.instance,"afterNgAfterViewInit",(function(){t.widget.instance.started=!0,t.widget.instance.state=e.WidgetState.opened,t.widget.instance.windowState=e.WidgetWindowState.normal,t.widget.instance.startup()}))}))}))},n.prototype.getAllWidgetConfigs=function(){return Array.isArray(this.config.widgets)?this.config.widgets:[this.widgetConfig]},n.prototype.isDockable=function(){return this.dockMode===e.PanelDockMode.left||this.dockMode===e.PanelDockMode.bottom||this.dockMode===e.PanelDockMode.right},n.prototype.startup=function(){this.started=!0},n.prototype.setWidget=function(e){this.widget=e,!1===this.options.showTitle&&(this.widget.instance.showSettingWhenInPanel=!0)},n.prototype.setOptions=function(e){this.widgetConfig&&this.widgetConfig.panel&&o.merge(e,this.widgetConfig.panel),this.options=o.merge(o.cloneDeep(le),e),this.options.buttonSetting=this.isSettingMode},n.prototype.setWindowState=function(e){this.windowState=e},n.prototype.setState=function(t){switch(t){case e.WidgetState.opened:this.showPanel();break;case e.WidgetState.closed:this.hidePanel();break;case e.WidgetState.active:}this.state=t,this.widget&&this.widget.instance.setState(t)},n.prototype.showPanel=function(){this.sspanelOverlay.nativeElement.parentElement.style.display="",this.widget&&(this.commonService.getComponentRootNode(this.widget).style.display=""),this.onOpen(),this.state=e.WidgetState.opened},n.prototype.hidePanel=function(){this.sspanelOverlay.nativeElement.parentElement.style.display="none",this.widget&&(this.commonService.getComponentRootNode(this.widget).style.display="none"),this.onClose(),this.state=e.WidgetState.closed},n.prototype.closePanel=function(e){this.panelManager.closePanel(this.id),e&&(e.preventDefault(),e.stopPropagation())},n.prototype.onNormalize=function(){this.widget&&this.widget.instance.onNormalize()},n.prototype.onMinimize=function(){this.widget&&this.widget.instance.onMinimize()},n.prototype.onMaximize=function(){this.widget&&this.widget.instance.onMaximize()},n.prototype.resize=function(e){e&&(e.left<0&&(e.left=0),e.top<0&&(e.top=0),e.width<this.options.minWidth&&(e.width=this.options.minWidth),e.height<this.options.minHeight&&(e.height=this.options.minHeight),this._render.setStyle(this.sspanel.nativeElement,"left",this._convertToStyleVal(e.left)),this._render.setStyle(this.sspanel.nativeElement,"top",this._convertToStyleVal(e.top)),this._render.setStyle(this.sspanel.nativeElement,"width",this._convertToStyleVal(e.width)),this._render.setStyle(this.sspanel.nativeElement,"height",this._convertToStyleVal(e.height)),this.widgetConfig.position=o.merge(this.widgetConfig.position,e),this.setPosition(e))},n.prototype.onResize=function(){this.widget&&this.widget.instance.resize()},n.prototype.onActive=function(){},n.prototype.onDeActive=function(){},n.prototype.onCollapse=function(){},n.prototype.onExpand=function(){},n.prototype.onMove=function(){},n.prototype.onPositionChange=function(e){this.setPosition(e)},n.prototype.onOpen=function(){this.widget&&this.widget.instance.started&&this.widget.instance.onOpen()},n.prototype.onClose=function(){this.widget&&this.widgetManager.closeWidget(this.widget)},n.prototype.onMouseEnter=function(e){this.moveTopOnActive&&this.panelManager._activePanel(this.id)},n.prototype.onMouseLeave=function(){},n.prototype._getCurrentPosition=function(){var e=this.currentPosition;if("auto"===e.top&&(e.top=this.position.top),"auto"===e.left||0===e.left){var t=this.commonService.getElementBounds(this.sspanel.nativeElement),n=void 0;if("browser"!==this.widgetConfig.position.relativeTo){var i=this.commonService.getComponentRootNode(this.mapManager.comRefMap);i&&(n=this.commonService.getElementBounds(i))}else n=document.querySelector("epsgis-comp-container").getBoundingClientRect();n&&(e.left=t.left-n.left)}return o.merge({},e)},n.prototype._setCurrentPosition=function(e){this.currentPosition=o.merge(this.currentPosition,e)},n.prototype._saveCurrentPosition=function(){this.savedPosition=this._getCurrentPosition()},n.prototype._restoreSavedPosition=function(){return this._changePosition(this.savedPosition)},n.prototype._changePosition=function(t){var n=this.commonService.createPromiseDefer(),i=this.options,r=(void 0!==t.animationTime?parseInt(t.animationTime):i.animationTime,{top:t.top,left:t.left,bottom:t.bottom,right:t.right});if(t.check){if(this.state!==e.WidgetState.opened||this.windowState===e.WidgetWindowState.maximized||this.windowState===e.WidgetWindowState.minimized)return;if(i.keepInViewport){var s=this._getCurrentSize(),a=this._getWindowSize();r.top>a.height()-s.height&&(r.top=a.height()-s.height),r.left>a.width()-s.width&&(r.left=a.width()-s.width),r.top<0&&(r.top=0),r.left<0&&(r.left=0)}}var l=this._getCurrentPosition();return l.top!=r.top||l.left!=r.left?(this.position=o.merge(this.position,{left:r.left+"px",top:r.top+"px"}),this.sspanel.nativeElement.style.left=r.left+"px",this.sspanel.nativeElement.style.top=r.top+"px",this._setCurrentPosition(r),n.resolve()):n.resolve(),n.promise()},n.prototype._getWindowSize=function(){return{height:function(){return window.innerHeight},width:function(){return window.outerWidth}}},n.prototype._getCurrentSize=function(){return o.merge({},this.currentSize)},n.prototype._saveCurrentSize=function(){this.savedSize=this._getCurrentSize()},n.prototype._setCurrentSize=function(e){this.currentSize=o.merge(this.currentSize,e)},n.prototype._restoreSavedSize=function(){return this._changeSize(o.merge({checkPosition:!0,checkSize:!1,event:!1},this.savedSize))},n.prototype._convertToStyleVal=function(e){if("0"==e)return"0px";if(!e)return"";if("auto"===e||"100%"==e)return e;var t=parseFloat(e),n="";return isNaN(t)?n=e:(t<0&&(t=0),n=t+"px"),n},n.prototype._changeSize=function(t){var n=this.commonService.createPromiseDefer(),i=this.options,r=(void 0!==t.animationTime?parseInt(t.animationTime):i.animationTime,{width:t.width,height:t.height});if(t.checkSize){if(this.state===e.WidgetState.closed||this.windowState===e.WidgetWindowState.minimized||this.windowState===e.WidgetWindowState.maximized)return;i.maxWidth&&r.width>i.maxWidth&&(r.width=i.maxWidth),i.minWidth&&r.width<i.minWidth&&(r.width=i.minWidth),i.maxHeight&&r.height>i.maxHeight&&(r.height=i.maxHeight),i.minHeight&&r.height<i.minHeight&&(r.height=i.minHeight),this.windowState===e.WidgetWindowState.collapsed&&(this.currentSize=o.merge({},r),delete r.height)}var s=this._getCurrentSize();return s.width!=r.width||s.height!=r.height?(r.height&&this._render.setStyle(this.sspanel.nativeElement,"height",this._convertToStyleVal(r.height)),r.width&&this._render.setStyle(this.sspanel.nativeElement,"width",this._convertToStyleVal(r.width)),this._setCurrentSize(r),n.resolve()):n.resolve(),n.promise()},n.prototype._getBordersWidth=function(e){return void 0!==e?this._getBorderWidth(this.sspanel.nativeElement,e):{top:this._getBorderWidth(this.sspanel.nativeElement,"top"),bottom:this._getBorderWidth(this.sspanel.nativeElement,"top"),left:this._getBorderWidth(this.sspanel.nativeElement,"top"),right:this._getBorderWidth(this.sspanel.nativeElement,"top")}},n.prototype._getBorderWidth=function(e,t){"top"===t.toLowerCase()&&(t="Top"),"left"===t.toLowerCase()&&(t="Left"),"right"===t.toLowerCase()&&(t="Right"),"bottom"===t.toLowerCase()&&(t="Bottom");var n=e.style["border"+t+"Width"];return n||(n=0),parseInt(n,10)},n.prototype._contentClick=function(e){this.panelManager._activePanel(this.id)},n.prototype._titlebar_MouseDown=function(e){if(!this.commonService.isMobile()&&!this.isDockable()&&!0===this.options.draggable){this.isMouseEvent=!1,this.panelManager._activePanel(this.id);var t=this._getCurrentPosition(),n=this.options;n.modal||(this.sspanelOverlay.nativeElement.style.backgroundColor="transparent",this.sspanelOverlay.nativeElement.style.width="100%",this.sspanelOverlay.nativeElement.style.height="100%"),this._addDocumentMouseEventHandlers({action:"drag",opacity:n.dragOpacity,compensationX:e.pageX-parseFloat(t.left.toString()),compensationY:e.pageY-parseFloat(t.top.toString())}),e.preventDefault(),e.stopPropagation()}},n.prototype._resizer_MouseDown=function(e,t){if(!this.commonService.isMobile()){var n=this._getCurrentPosition(),o=this._getCurrentSize(),i={action:"resize",dimension:t.dimension,directionX:t.directionX,directionY:t.directionY,opacity:this.options.resizeOpacity,startX:e.pageX+("left"==t.directionX?parseFloat(o.width):-parseFloat(o.width)),startY:e.pageY+("top"==t.directionY?parseFloat(o.height):-parseFloat(o.height)),compensationX:e.pageX-parseInt(n.left.toString(),10),compensationY:e.pageY-parseInt(n.top.toString(),10)};this._addDocumentMouseEventHandlers(i),e.preventDefault()}},n.prototype._addDocumentMouseEventHandlers=function(e){this.sspanel.nativeElement.style.opacity=e.opacity,this.sspanel.nativeElement.style.filter="alpha(opacity="+100*e.opacity+")",this.options.mouseMoveEvents||(this.tempSavedData={position:this._getCurrentPosition(),size:this._getCurrentSize()}),this._eventTempData=e,document.addEventListener("mousemove",this.xxxx,!1),document.addEventListener("mouseup",this.yyyy,!1)},n.prototype._document_MouseMove=function(e){var t=this.options,n=this._getCurrentPosition(),o=this._getCurrentSize(),i={},r={};switch(e.data=this._eventTempData,e.data.action){case"drag":if(i.top=e.pageY-e.data.compensationY,i.left=e.pageX-e.data.compensationX,t.keepInViewport){var s=this._getCurrentSize(),a=this._getWindowSize();i.top<0&&(i.top=0),i.left<0&&(i.left=0),i.top>a.height()-s.height&&(i.top=a.height()-s.height),i.left>a.width()-s.width&&(i.left=a.width()-s.width)}this.isMouseEvent=!0;break;case"resize":if("height"!=e.data.dimension&&e.pageX>0){var l="left"==e.data.directionX?e.data.startX-e.pageX:e.pageX-e.data.startX;l>=t.minWidth&&(!t.maxWidth||l<=t.maxWidth)&&(r.width=l,"left"==e.data.directionX&&(i.left=e.pageX-e.data.compensationX))}if("width"!=e.data.dimension&&e.pageY>0){var c="top"==e.data.directionY?e.data.startY-e.pageY:e.pageY-e.data.startY;c>=t.minHeight&&(!t.maxHeight||c<=t.maxHeight)&&(r.height=c,"top"==e.data.directionY&&(i.top=e.pageY-e.data.compensationY))}}(void 0!==i.top&&i.top!=n.top||void 0!==i.left&&i.left!=n.left)&&(i.top<0&&(i.top=0),i.left<0&&(i.left=0),this._changePosition(i),this._setCurrentPosition(i),t.mouseMoveEvents&&this.onMove()),(void 0!==r.width&&r.width!=o.width||void 0!==r.height&&r.height!=o.height)&&(r.height&&(r.height<=this.options.minHeight&&(r.height=this.options.minHeight),this._render.setStyle(this.sspanel.nativeElement,"height",this._convertToStyleVal(r.height))),r.width&&(r.width<=this.options.minWidth&&(r.width=this.options.minWidth),this._render.setStyle(this.sspanel.nativeElement,"width",this._convertToStyleVal(r.width))),this._setCurrentSize(r),t.mouseMoveEvents&&(this._setIframeStyle(),this.onResize()))},n.prototype._document_MouseUp=function(e){var t=this.options;if(this.sspanel.nativeElement.style.opacity=1,this.sspanel.nativeElement.style.filter="alpha(opacity=100)",document.removeEventListener("mousemove",this.xxxx),document.removeEventListener("mouseup",this.yyyy),!0===this.isMouseEvent&&(t.modal||(this.sspanelOverlay.nativeElement.style.width="0px",this.sspanelOverlay.nativeElement.style.height="0px",this.sspanelOverlay.nativeElement.style.backgoundColor=""),!t.mouseMoveEvents)){var n=this._getCurrentPosition(),o=this._getCurrentSize(),i=this.tempSavedData;i.position.top==n.top&&i.position.left==n.left||this.onMove(),i.size.width==o.width&&i.size.height==o.height||(this._setIframeStyle(),this.onResize()),this.tempSavedData=void 0,this._eventTempData=void 0}},n.prototype._setIframeStyle=function(){},n.prototype._isDockSide=function(){return!1},n.prototype._maximize=function(){var t=this;if(this.state!==e.WidgetState.closed&&this.windowState!==e.WidgetWindowState.maximized&&this.windowState!==e.WidgetWindowState.minimized&&this.windowState!==e.WidgetWindowState.collapsed){var n=this.options;this.sspanel.nativeElement.querySelectorAll(".sspanel_statusbar_handle *, .sspanel_resizer, .sspanel_titlebar_button_collapse").forEach((function(e,n,o){t._render.setStyle(e,"display","none")})),n.draggable&&this._render.removeClass(this.sspanel_titlebar.nativeElement,"sspanel_titlebar_draggable"),n.modal||(this._render.setStyle(this.sspanelOverlay.nativeElement,"background-color","transparent"),this._render.setStyle(this.sspanelOverlay.nativeElement,"width","100%"),this._render.setStyle(this.sspanelOverlay.nativeElement,"height","100%")),this._saveCurrentPosition(),this._saveCurrentSize();this._isDockSide();var o=this._changePosition({top:0,left:0}),i=this._changeSize({width:"100%",height:"100%"});return Promise.all([o,i]).then((function(){t.windowState=e.WidgetWindowState.maximized,t._setIframeStyle(),t.onMaximize()}))}},n.prototype._unmaximize=function(){var t=this;if(this.state!==e.WidgetState.closed&&this.windowState===e.WidgetWindowState.maximized){var n=this.options,o=this._restoreSavedPosition(),i=this._restoreSavedSize();return this.sspanel.nativeElement.querySelectorAll(".sspanel_statusbar_handle *, .sspanel_resizer, .sspanel_titlebar_button_collapse").forEach((function(e,n,o){t._render.setStyle(e,"display","")})),n.draggable&&this._render.addClass(this.sspanel_titlebar.nativeElement,"sspanel_titlebar_draggable"),n.modal||(this._render.setStyle(this.sspanelOverlay.nativeElement,"background-color",""),this._render.setStyle(this.sspanelOverlay.nativeElement,"width","0"),this._render.setStyle(this.sspanelOverlay.nativeElement,"height","0")),Promise.all([o,i]).then((function(){t.windowState=e.WidgetWindowState.normal,t._setIframeStyle(),t.onNormalize()}))}},n.prototype._minimize=function(){},n.prototype._unminimize=function(){},n.prototype._collapse=function(){var t=this;if(!0===this.started&&this.state!==e.WidgetState.closed&&this.windowState!==e.WidgetWindowState.maximized&&this.windowState!==e.WidgetWindowState.collapsed&&this.windowState!==e.WidgetWindowState.minimized){var n=this.options;this.sspanel.nativeElement.querySelectorAll(".sspanel_content, .sspanel_statusbar, .sspanel_resizer, .sspanel_titlebar_button_maximize, .sspanel_titlebar_button_minimize").forEach((function(e,n,o){t._render.setStyle(e,"display","none")})),this._saveCurrentSize();var o=this._changeSize({width:n.collapsedWidth,height:this._getBordersWidth("top")+this._getBordersWidth("bottom")+this.sspanel_titlebar.nativeElement.offsetHeight});return Promise.all([o]).then((function(){t.windowState=e.WidgetWindowState.collapsed,t.onCollapse()}))}},n.prototype._uncollapse=function(){var t=this;if(1==this.started&&this.state!==e.WidgetState.closed&&this.windowState===e.WidgetWindowState.collapsed){this.options;var n=this._restoreSavedSize();return this.sspanel.nativeElement.querySelectorAll(".sspanel_content, .sspanel_statusbar, .sspanel_resizer, .sspanel_titlebar_button_maximize, .sspanel_titlebar_button_minimize").forEach((function(e,n,o){t._render.setStyle(e,"display","")})),n.then((function(){t.windowState=e.WidgetWindowState.normal,t.onNormalize()}))}},n.prototype._buttonMax_Click=function(t){this.windowState!==e.WidgetWindowState.maximized?this._maximize():this._unmaximize(),t.preventDefault(),t.stopPropagation()},n.prototype._buttonCollapse_Click=function(t){this.windowState!==e.WidgetWindowState.collapsed?this._collapse():this._uncollapse(),t.preventDefault(),t.stopPropagation()},n.prototype._buttonMin_Click=function(t){this.windowState!==e.WidgetWindowState.minimized?this._minimize():this._unminimize(),t.preventDefault(),t.stopPropagation()},n.prototype.openWidgetSetting=function(){this.widget||(this.widget=this.widgetManager.getWidgetById(this.widgetConfig.id).instance),this.widget&&this.widget.instance.openSetting()},n}(A);me.ɵfac=function(e){return new(e||me)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},me.ɵdir=n.ɵɵdefineDirective({type:me,viewQuery:function(e,t){if(1&e&&(n.ɵɵviewQuery(ue,3,n.ViewContainerRef),n.ɵɵviewQuery(ge,3),n.ɵɵviewQuery(fe,3),n.ɵɵviewQuery(he,3)),2&e){var o=void 0;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.widgetContainer=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.sspanelOverlay=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.sspanel_titlebar=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.sspanel=o.first)}},hostBindings:function(e,t){1&e&&n.ɵɵlistener("mouseenter",(function(e){return t.onMouseEnter(e.target)}))("mouseleave",(function(){return t.onMouseLeave()}))},features:[n.ɵɵInheritDefinitionFeature]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(me,[{type:n.Directive}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),{widgetContainer:[{type:n.ViewChild,args:["widget_content",{read:n.ViewContainerRef,static:!0}]}],sspanelOverlay:[{type:n.ViewChild,args:["sspanel_overlay",{static:!0}]}],sspanel_titlebar:[{type:n.ViewChild,args:["sspanel_titlebar",{static:!0}]}],sspanel:[{type:n.ViewChild,args:["sspanel",{static:!0}]}],onMouseEnter:[{type:n.HostListener,args:["mouseenter",["$event.target"]]}],onMouseLeave:[{type:n.HostListener,args:["mouseleave"]}]});var ve=function(){};ve.ɵfac=function(e){return new(e||ve)},ve.ɵcmp=n.ɵɵdefineComponent({type:ve,selectors:[["epsgis-icon-uncollapsed"]],decls:3,vars:0,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["points","1,3 9,3 5,8 1,3 9,3"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelementStart(1,"g",1),n.ɵɵelement(2,"polyline",2),n.ɵɵelementEnd(),n.ɵɵelementEnd())},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ve,[{type:n.Component,args:[{selector:"epsgis-icon-uncollapsed",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                viewBox="0 0 10 10" height="100%" width="100%">\n                <g fill="none">\n                <polyline points="1,3 9,3 5,8 1,3 9,3"></polyline>\n                </g>\n            </svg>',styles:[]}]}],null,null);var ye=function(){};ye.ɵfac=function(e){return new(e||ye)},ye.ɵcmp=n.ɵɵdefineComponent({type:ye,selectors:[["epsgis-icon-collapsed"]],decls:3,vars:0,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["points","1,7 9,7 5,2 1,7 9,7"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelementStart(1,"g",1),n.ɵɵelement(2,"polyline",2),n.ɵɵelementEnd(),n.ɵɵelementEnd())},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ye,[{type:n.Component,args:[{selector:"epsgis-icon-collapsed",template:'<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            viewBox="0 0 10 10" height="100%" width="100%">\n            <g fill="none">\n            <polyline points="1,7 9,7 5,2 1,7 9,7"></polyline>\n            </g>\n            </svg>',styles:[]}]}],null,null);var Ce=function(){};Ce.ɵfac=function(e){return new(e||Ce)},Ce.ɵcmp=n.ɵɵdefineComponent({type:Ce,selectors:[["epsgis-icon-unmaximize"]],decls:7,vars:0,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["x","1","y","3","height","6","width","6"],["y1","3","x1","3","y2","1","x2","3"],["y1","1","x1","2.5","y2","1","x2","9.5"],["y1","1","x1","9","y2","7","x2","9"],["y1","7","x1","9.5","y2","7","x2","7"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelementStart(1,"g",1),n.ɵɵelement(2,"rect",2),n.ɵɵelement(3,"line",3),n.ɵɵelement(4,"line",4),n.ɵɵelement(5,"line",5),n.ɵɵelement(6,"line",6),n.ɵɵelementEnd(),n.ɵɵelementEnd())},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Ce,[{type:n.Component,args:[{selector:"epsgis-icon-unmaximize",template:'\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg"\n              xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%">\n              <g fill="none">\n                <rect x="1" y="3" height="6" width="6"></rect>\n                <line y1="3" x1="3" y2="1" x2="3"></line>\n                <line y1="1" x1="2.5" y2="1" x2="9.5"></line>\n                <line y1="1" x1="9" y2="7" x2="9"></line>\n                <line y1="7" x1="9.5" y2="7" x2="7"></line>\n              </g>\n    </svg>\n    ',styles:[]}]}],null,null);var we=function(){};we.ɵfac=function(e){return new(e||we)},we.ɵcmp=n.ɵɵdefineComponent({type:we,selectors:[["epsgis-icon-maximize"]],decls:3,vars:0,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["x","1","y","1","height","8","width","8"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelementStart(1,"g",1),n.ɵɵelement(2,"rect",2),n.ɵɵelementEnd(),n.ɵɵelementEnd())},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(we,[{type:n.Component,args:[{selector:"epsgis-icon-maximize",template:'\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg"\n              xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 10 10" height="100%" width="100%">\n              <g fill="none">\n                <rect x="1" y="1" height="8" width="8"></rect>\n              </g>\n    </svg>\n    ',styles:[]}]}],null,null);var be=function(){};be.ɵfac=function(e){return new(e||be)},be.ɵcmp=n.ɵɵdefineComponent({type:be,selectors:[["epsgis-icon-close"]],decls:4,vars:0,consts:[["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["y2","0","x2","10","y1","10","x1","0"],["y2","10","x2","10","y1","0","x1","0"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelementStart(1,"g"),n.ɵɵelement(2,"line",1),n.ɵɵelement(3,"line",2),n.ɵɵelementEnd(),n.ɵɵelementEnd())},encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(be,[{type:n.Component,args:[{selector:"epsgis-icon-close",template:'\n    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n            viewBox="0 0 10 10" height="100%" width="100%">\n            <g>\n              <line y2="0" x2="10" y1="10" x1="0"></line>\n              <line y2="10" x2="10" y1="0" x1="0"></line>\n            </g>\n    </svg>\n    ',styles:[]}]}],null,null);function _e(e,t){if(1&e&&n.ɵɵelement(0,"img",7),2&e){var o=n.ɵɵnextContext(2);n.ɵɵproperty("src",o.icon,n.ɵɵsanitizeUrl)}}function Me(e,t){if(1&e&&n.ɵɵelement(0,"i",8),2&e){var o=n.ɵɵnextContext(2);n.ɵɵproperty("nzIconfont",o.icon)}}function xe(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",4),n.ɵɵtemplate(2,_e,1,1,"img",5),n.ɵɵtemplate(3,Me,1,1,"i",6),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵproperty("ngIf",o.isShowImg),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!o.isShowImg)}}function Se(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",9),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext()._buttonSettingClick(e)})),n.ɵɵelement(1,"epsgis-icon-setting"),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵpropertyInterpolate("title",i.options.buttonSettingText)}}function Pe(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",13),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapseClick(e)})),n.ɵɵelement(1,"epsgis-icon-uncollapsed"),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonUnCollapseText)}}function Ie(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,Pe,2,1,"div",12),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.options.buttonCollapse)}}function Oe(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",15),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapseClick(e)})),n.ɵɵelement(1,"epsgis-icon-collapsed"),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonCollapseText)}}function Ee(e,t){if(1&e&&n.ɵɵtemplate(0,Oe,2,1,"div",14),2&e){var o=n.ɵɵnextContext(2);n.ɵɵproperty("ngIf",o.options.buttonCollapse)}}function ke(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,Ie,2,1,"ng-container",10),n.ɵɵtemplate(2,Ee,1,1,"ng-template",null,11,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngIf","collapsed"==i.windowState)("ngIfElse",o)}}function De(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",18),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMaximizeClick(e)})),n.ɵɵelement(1,"epsgis-icon-unmaximize"),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonUnmaximizeText)}}function ze(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,De,2,1,"div",17),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.options.buttonMaximize)}}function Te(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",20),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMaximizeClick(e)})),n.ɵɵelement(1,"epsgis-icon-maximize"),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonMaximizeText)}}function Ve(e,t){if(1&e&&n.ɵɵtemplate(0,Te,2,1,"div",19),2&e){var o=n.ɵɵnextContext(2);n.ɵɵproperty("ngIf",o.options.buttonMaximize)}}function We(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,ze,2,1,"ng-container",10),n.ɵɵtemplate(2,Ve,1,1,"ng-template",null,16,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngIf","maximized"==i.windowState)("ngIfElse",o)}}function je(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",22),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2)._buttonCloseClick(e)})),n.ɵɵelement(1,"epsgis-icon-close"),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵpropertyInterpolate("title",i.options.buttonCloseText)}}function Re(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,je,2,1,"div",21),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.options.buttonClose)}}var Le=function(){function e(e){var t=this;this.ele=e,this.options=le,this.hasIcon=!1,this.onMouseDown=new n.EventEmitter,this.onClickSetting=new n.EventEmitter,this.onClickCollapse=new n.EventEmitter,this.onClickMaximize=new n.EventEmitter,this.onClickClose=new n.EventEmitter,this.ele.nativeElement.onmousedown=function(e){t._titlebarMouseDown(e)}}return Object.defineProperty(e.prototype,"nativeElement",{get:function(){return this.ele.nativeElement},enumerable:!1,configurable:!0}),e.prototype._titlebarMouseDown=function(e){this.onMouseDown.observers.length>=1&&this.onMouseDown.emit(e)},e.prototype._buttonSettingClick=function(e){this.onClickSetting.observers.length>=1&&this.onClickSetting.emit(e)},e.prototype._buttonCollapseClick=function(e){this.onClickCollapse.observers.length>=1&&this.onClickCollapse.emit(e)},e.prototype._buttonMaximizeClick=function(e){this.onClickMaximize.observers.length>=1&&this.onClickMaximize.emit(e)},e.prototype._buttonCloseClick=function(e){this.onClickClose.observers.length>=1&&this.onClickClose.emit(e)},e}();function Ae(e,t){}Le.ɵfac=function(e){return new(e||Le)(n.ɵɵdirectiveInject(n.ElementRef))},Le.ɵcmp=n.ɵɵdefineComponent({type:Le,selectors:[["div","sspanel-titlebar",""]],inputs:{options:"options",hasIcon:"hasIcon",isShowImg:"isShowImg",icon:"icon",windowState:"windowState"},outputs:{onMouseDown:"onMouseDown",onClickSetting:"onClickSetting",onClickCollapse:"onClickCollapse",onClickMaximize:"onClickMaximize",onClickClose:"onClickClose"},attrs:["sspanel-titlebar",""],decls:8,vars:6,consts:[[4,"ngIf"],[1,"sspanel_titlebar_text"],[1,"sspanel_titlebar_text_span"],["class","sspanel_titlebar_button sspanel_titlebar_button_setting",3,"title","click",4,"ngIf"],[1,"icon"],[3,"src",4,"ngIf"],["nz-icon","",3,"nzIconfont",4,"ngIf"],[3,"src"],["nz-icon","",3,"nzIconfont"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_setting",3,"title","click"],[4,"ngIf","ngIfElse"],["showCollapsedButton",""],["class","sspanel_titlebar_button sspanel_titlebar_button_uncollapse",3,"title","click",4,"ngIf"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_uncollapse",3,"title","click"],["class","sspanel_titlebar_button sspanel_titlebar_button_collapse",3,"title","click",4,"ngIf"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_collapse",3,"title","click"],["showMaximizeButton",""],["class","sspanel_titlebar_button sspanel_titlebar_button_unmaximize",3,"title","click",4,"ngIf"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_unmaximize",3,"title","click"],["class","sspanel_titlebar_button sspanel_titlebar_button_maximize",3,"title","click",4,"ngIf"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_maximize",3,"title","click"],["class","sspanel_titlebar_button sspanel_titlebar_button_close",3,"title","click",4,"ngIf"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_close",3,"title","click"]],template:function(e,t){1&e&&(n.ɵɵtemplate(0,xe,4,2,"ng-container",0),n.ɵɵelementStart(1,"div",1),n.ɵɵelementStart(2,"span",2),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵtemplate(4,Se,2,1,"div",3),n.ɵɵtemplate(5,ke,4,2,"ng-container",0),n.ɵɵtemplate(6,We,4,2,"ng-container",0),n.ɵɵtemplate(7,Re,2,1,"ng-container",0)),2&e&&(n.ɵɵproperty("ngIf",t.hasIcon),n.ɵɵadvance(3),n.ɵɵtextInterpolate(t.options.title),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.options.buttonSetting),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.options.buttonCollapse),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.options.buttonMaximize),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.options.buttonClose))},directives:[t.NgIf,l.NzIconDirective,te,ve,ye,Ce,we,be],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Le,[{type:n.Component,args:[{selector:"div[sspanel-titlebar]",template:'\n    \x3c!-- 这影响样式 --\x3e\n    \x3c!-- <div class="sspanel_titlebar sspanel_titlebar_draggable" #sspanel_titlebar\n      (mousedown)="_titlebarMouseDown($event);"> --\x3e\n      <ng-container *ngIf="hasIcon">\n        <div class="icon">\n          <img *ngIf="isShowImg" [src]="icon">\n          <i *ngIf="!isShowImg" nz-icon [nzIconfont]="icon"></i>\n        </div>\n      </ng-container>\n      <div class="sspanel_titlebar_text"><span class="sspanel_titlebar_text_span">{{options.title}}</span></div>\n      <div *ngIf="options.buttonSetting" class="sspanel_titlebar_button sspanel_titlebar_button_setting" title="{{options.buttonSettingText}}" (click)="_buttonSettingClick($event);">\n        <epsgis-icon-setting></epsgis-icon-setting>\n      </div>\n      <ng-container *ngIf="options.buttonCollapse">\n        <ng-container *ngIf="windowState==\'collapsed\'; else showCollapsedButton">\n          <div *ngIf="options.buttonCollapse"  class="sspanel_titlebar_button sspanel_titlebar_button_uncollapse" title="{{options.buttonUnCollapseText}}"\n            (click)="_buttonCollapseClick($event);">\n            <epsgis-icon-uncollapsed></epsgis-icon-uncollapsed>\n          </div>\n        </ng-container>\n        <ng-template #showCollapsedButton>\n          <div *ngIf="options.buttonCollapse" class="sspanel_titlebar_button sspanel_titlebar_button_collapse" title="{{options.buttonCollapseText}}"\n            (click)="_buttonCollapseClick($event);">\n            <epsgis-icon-collapsed></epsgis-icon-collapsed>\n          </div>\n        </ng-template>\n      </ng-container>\n      <ng-container *ngIf="options.buttonMaximize">\n        <ng-container *ngIf="windowState == \'maximized\'; else showMaximizeButton">\n          <div *ngIf="options.buttonMaximize" class="sspanel_titlebar_button sspanel_titlebar_button_unmaximize" title="{{options.buttonUnmaximizeText}}"\n            (click)="_buttonMaximizeClick($event);">\n            <epsgis-icon-unmaximize></epsgis-icon-unmaximize>\n          </div>\n        </ng-container>\n        <ng-template #showMaximizeButton>\n          <div *ngIf="options.buttonMaximize" class="sspanel_titlebar_button sspanel_titlebar_button_maximize" title="{{options.buttonMaximizeText}}"\n            (click)="_buttonMaximizeClick($event);">\n            <epsgis-icon-maximize></epsgis-icon-maximize>\n            \n          </div>\n        </ng-template>\n      </ng-container>\n\n      <ng-container *ngIf="options.buttonClose">\n        <div  *ngIf="options.buttonClose" class="sspanel_titlebar_button sspanel_titlebar_button_close" title="{{options.buttonCloseText}}"\n          (click)="_buttonCloseClick($event);">\n          <epsgis-icon-close></epsgis-icon-close>\n        </div>\n      </ng-container>\n    \x3c!-- </div> --\x3e\n    ',styles:[]}]}],(function(){return[{type:n.ElementRef}]}),{options:[{type:n.Input}],hasIcon:[{type:n.Input}],isShowImg:[{type:n.Input}],icon:[{type:n.Input}],windowState:[{type:n.Input}],onMouseDown:[{type:n.Output}],onClickSetting:[{type:n.Output}],onClickCollapse:[{type:n.Output}],onClickMaximize:[{type:n.Output}],onClickClose:[{type:n.Output}]}),e.OnScreenWidgetPanelComponent=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o.cdr=n,o}return w(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this)},t}(me),e.OnScreenWidgetPanelComponent.ɵfac=function(t){return new(t||e.OnScreenWidgetPanelComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.OnScreenWidgetPanelComponent.ɵcmp=n.ɵɵdefineComponent({type:e.OnScreenWidgetPanelComponent,selectors:[["epsgis-on-screen-widget-panel"]],features:[n.ɵɵInheritDefinitionFeature],decls:18,vars:5,consts:[[1,"sspanel_overlay"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngStyle"],["sspanel",""],["sspanel-titlebar","",1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"hasIcon","options","windowState","onMouseDown","onClickSetting","onClickCollapse","onClickMaximize","onClickClose"],["sspanel_titlebar",""],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_resizer","sspanel_resizer_top",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_bottom",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_left",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_right",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_topleft",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_topright",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_bottomleft",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_bottomright",3,"mousedown"],[1,"sspanel_minplaceholder"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵelementStart(4,"div",4,5),n.ɵɵlistener("onMouseDown",(function(e){return t._titlebar_MouseDown(e)}))("onClickSetting",(function(){return t.openWidgetSetting()}))("onClickCollapse",(function(e){return t._buttonCollapse_Click(e)}))("onClickMaximize",(function(e){return t._buttonMax_Click(e)}))("onClickClose",(function(e){return t.closePanel(e)})),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",6),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(7,Ae,0,0,"ng-template",null,7,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementStart(9,"div",8),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"height",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(10,"div",9),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"height",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(11,"div",10),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"left"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(12,"div",11),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"right"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(13,"div",12),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"left",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(14,"div",13),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"right",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(15,"div",14),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"left",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(16,"div",15),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"right",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelement(17,"div",16)),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("hasIcon",!1)("options",t.options)("windowState",t.windowState))},directives:[t.NgStyle,Le],styles:[""]}),e.OnScreenWidgetPanelComponent=b([H({uri:"epsgis-on-screen-widget-panel",path:"components/on-screen-widget-panel"})],e.OnScreenWidgetPanelComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.OnScreenWidgetPanelComponent,[{type:n.Component,args:[{selector:"epsgis-on-screen-widget-panel",templateUrl:"./on-screen-widget-panel.component.html",styleUrls:["./on-screen-widget-panel.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null);var Ne=["center_collapse"],Be=function(t){function n(e,n){var o=t.call(this,e,n)||this;return o._render=e,o.cdr=n,o.zIndex=100,o._isCollapse=!1,o.moveTopOnActive=!1,o}return w(n,t),Object.defineProperty(n.prototype,"mapBounds",{get:function(){var e=this.commonService.getElementBounds(this.commonService.getComponentRootNode(this.mapManager.comRefMap));return e.top=e.top-this._getMapTop(),e.left=e.left-this._getMapLeft(),e},enumerable:!1,configurable:!0}),n.prototype._getMapTop=function(){var e=this.commonService.getComponentRootNode(this.mapManager.comRefMap).getBoundingClientRect(),t="0";this.widgetManager.appConfig.map.position&&this.widgetManager.appConfig.map.position.top&&(t=this.widgetManager.appConfig.map.position.top);var n=parseFloat(this.commonService.getPxNumber(t).toString());return e.top-n},n.prototype._getMapLeft=function(){var e=this.commonService.getComponentRootNode(this.mapManager.comRefMap).getBoundingClientRect(),t=0;this.widgetManager.appConfig.map.position&&this.widgetManager.appConfig.map.position.left&&(t=this.widgetManager.appConfig.map.position.left);var n=parseFloat(this.commonService.getPxNumber(t).toString());return e.left-n},n.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},n.prototype.ngAfterViewInit=function(){t.prototype.ngAfterViewInit.call(this)},n.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this)},n.prototype._setPCPosition=function(){this.widgetConfig.position.zIndex=this.zIndex,t.prototype._setPCPosition.call(this)},n.prototype.onMove=function(){t.prototype.onMove.call(this)},n.prototype.onClose=function(){t.prototype.onClose.call(this)},n.prototype._resizeMapWhenResize=function(){switch(this.dockMode){case e.PanelDockMode.left:this.mapManager.changeMapPosition({left:this.commonService.getPx(this.currentSize.width)});break;case e.PanelDockMode.bottom:this.mapManager.changeMapPosition({bottom:this.commonService.getPx(this.currentSize.height)});break;case e.PanelDockMode.right:this.mapManager.changeMapPosition({right:this.commonService.getPx(this.currentSize.width)})}},n.prototype._resizeMapWhenClose=function(){switch(this.dockMode){case e.PanelDockMode.left:this.mapManager.changeMapPosition({left:this.commonService.getPx(this.mapManager.originMapPosition.left)});break;case e.PanelDockMode.bottom:this.mapManager.changeMapPosition({bottom:this.commonService.getPx(this.mapManager.originMapPosition.bottom)});break;case e.PanelDockMode.right:this.mapManager.changeMapPosition({right:this.commonService.getPx(this.mapManager.originMapPosition.right)})}},n.prototype.showPanel=function(){this.__expand(!1),t.prototype.showPanel.call(this)},n.prototype.hidePanel=function(){this.__collapse(!1),t.prototype.hidePanel.call(this)},n.prototype.__collapse=function(t){var n=this.sspanel_center_collapse.nativeElement.querySelector("svg");if(this.dockMode===e.PanelDockMode.left){var o=-this.commonService.getElementBounds(this.sspanel.nativeElement).width;this._render.setStyle(this.sspanel.nativeElement,"left",o+"px")}else if(this.dockMode===e.PanelDockMode.bottom){var i=-this.commonService.getElementBounds(this.sspanel.nativeElement).height;this._render.setStyle(this.sspanel.nativeElement,"bottom",i+"px")}else if(this.dockMode===e.PanelDockMode.right){var r=-this.commonService.getElementBounds(this.sspanel.nativeElement).width;this._render.setStyle(this.sspanel.nativeElement,"right",r+"px")}this._render.addClass(n,"expand"),this._resizeMapWhenClose(),this._isCollapse=!0},n.prototype.__expand=function(t){var n=this.sspanel_center_collapse.nativeElement.querySelector("svg");this.dockMode===e.PanelDockMode.left?this._render.setStyle(this.sspanel.nativeElement,"left","0px"):this.dockMode===e.PanelDockMode.bottom?this._render.setStyle(this.sspanel.nativeElement,"bottom","0px"):this.dockMode===e.PanelDockMode.right&&this._render.setStyle(this.sspanel.nativeElement,"right","0px"),this._render.removeClass(n,"expand"),this._resizeMapWhenResize(),this._isCollapse=!1},n.prototype.collapsePanel=function(e){this._isCollapse?this.__expand(!1):this.__collapse(!1)},n}(me);function Fe(e,t){}Be.ɵfac=function(e){return new(e||Be)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},Be.ɵdir=n.ɵɵdefineDirective({type:Be,viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(Ne,3),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.sspanel_center_collapse=o.first)}},features:[n.ɵɵInheritDefinitionFeature]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Be,[{type:n.Directive}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),{sspanel_center_collapse:[{type:n.ViewChild,args:["center_collapse",{static:!0}]}]});var Ue=function(e){return{notitle:e}},He=function(e){return{display:e}};function Ge(e,t){}e.DockablePanelAtBottomComponent=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i.dockMode=e.PanelDockMode.bottom,i}return w(n,t),n.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},n.prototype.setOptions=function(n){n.modal=!1,n.draggable=!1,n.buttonClose=!0,n.buttonCollapse=!1,n.buttonMaximize=!1,n.buttonMinimize=!1,n.centerCollapse=!0,n.dockSide=e.PanelDockMode.bottom,t.prototype.setOptions.call(this,n)},n.prototype._setPCPosition=function(){this.widgetConfig.position=o.merge(this.widgetConfig.position,{left:this.mapBounds.left,top:"auto",bottom:0,right:0,width:this.mapBounds.width}),t.prototype._setPCPosition.call(this)},n.prototype.onResize=function(){t.prototype._resizeMapWhenResize.call(this),t.prototype.onResize.call(this)},n.prototype.onOpen=function(){t.prototype._resizeMapWhenResize.call(this),t.prototype.onOpen.call(this)},n.prototype.onClose=function(){t.prototype._resizeMapWhenClose.call(this),t.prototype.onClose.call(this)},n.prototype.resize=function(){this.widgetConfig.position=o.merge(this.widgetConfig.position,{left:this.mapBounds.left,width:this.mapBounds.width}),this._render.setStyle(this.sspanel.nativeElement,"left",this._convertToStyleVal(this.mapBounds.left)),this._render.setStyle(this.sspanel.nativeElement,"width",this._convertToStyleVal(this.mapBounds.width))},n}(Be),e.DockablePanelAtBottomComponent.ɵfac=function(t){return new(t||e.DockablePanelAtBottomComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.DockablePanelAtBottomComponent.ɵcmp=n.ɵɵdefineComponent({type:e.DockablePanelAtBottomComponent,selectors:[["epsgis-dockable-panel-at-bottom"]],features:[n.ɵɵInheritDefinitionFeature],decls:14,vars:11,consts:[[1,"sspanel_overlay",2,"display","none"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngClass","ngStyle"],["sspanel",""],["sspanel-titlebar","",1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"hasIcon","options","windowState","onClickSetting","onClickClose"],["sspanel_titlebar",""],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_resizer","sspanel_resizer_top",3,"mousedown"],[1,"collapse",3,"ngStyle","click"],["center_collapse",""],["t","1575033841131","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","16367","width","16","height","16",1,"icon"],["d","M128.759037 245.033739l383.064442 383.064442 388.096039-388.097062 0.033769 0.070608c13.138228-12.709463 31.024597-20.528546 50.730405-20.528546 40.377616 0 73.114205 32.736589 73.114205 73.115228 0 19.705807-7.820106 37.591153-20.530592 50.730405l0.035816 0.034792-438.681134 438.685227-0.035816-0.035816c-13.280468 13.780865-31.915897 22.3838-52.585659 22.3838-0.071631 0-0.107447 0-0.178055 0-0.072655 0-0.10847 0-0.146333 0-20.669762 0-39.341007-8.601912-52.621475-22.3838l-0.035816 0.035816L20.336676 343.425653l0.179079-0.179079c-12.565177-13.139252-20.313651-30.951943-20.313651-50.587142 0-40.378639 32.736589-73.115228 73.114205-73.115228C95.485213 219.544205 115.334283 229.432413 128.759037 245.033739z","p-id","16368","fill","#bababa"]],template:function(e,t){1&e&&(n.ɵɵelement(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵelementStart(4,"div",4,5),n.ɵɵlistener("onClickSetting",(function(){return t.openWidgetSetting()}))("onClickClose",(function(e){return t.closePanel(e)})),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",6),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(7,Fe,0,0,"ng-template",null,7,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementStart(9,"div",8),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"height",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(10,"div",9,10),n.ɵɵlistener("click",(function(e){return t.collapsePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(12,"svg",11),n.ɵɵelement(13,"path",12),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(7,Ue,!1===t.options.showTitle))("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("hasIcon",!1)("options",t.options)("windowState",t.windowState),n.ɵɵadvance(6),n.ɵɵproperty("ngStyle",n.ɵɵpureFunction1(9,He,t.options.centerCollapse?"block":"none")))},directives:[t.NgClass,t.NgStyle,Le],styles:[".notitle[_ngcontent-%COMP%], .sspanel[_ngcontent-%COMP%]{border:none}.notitle[_ngcontent-%COMP%]   .sspanel_titlebar[_ngcontent-%COMP%]{display:none}.notitle[_ngcontent-%COMP%]   .sspanel_content[_ngcontent-%COMP%]{border:none}.notitle[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]{background:#fcfcfc}.notitle[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{fill:#000}.collapse[_ngcontent-%COMP%]{position:absolute;left:50%;top:-16px;width:60px;height:16px;line-height:16px;padding-left:24px;cursor:pointer;background:#549dfe;border-radius:5px 5px 0 0;box-shadow:0 -3px 6px 0 #a0a0a0}.collapse[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{fill:#fff}"]}),e.DockablePanelAtBottomComponent=b([H({uri:"epsgis-dockable-panel-at-bottom",path:"components/ex-panels/dockable-panel-at-bottom"})],e.DockablePanelAtBottomComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.DockablePanelAtBottomComponent,[{type:n.Component,args:[{selector:"epsgis-dockable-panel-at-bottom",templateUrl:"./dockable-panel-at-bottom.component.html",styleUrls:["./dockable-panel-at-bottom.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null);var Je=function(e){return{notitle:e}},qe=function(e){return{display:e}};function Xe(e,t){}e.DockablePanelAtRightComponent=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i.dockMode=e.PanelDockMode.right,i}return w(n,t),n.prototype.setOptions=function(n){n.modal=!1,n.draggable=!1,n.buttonClose=!1,n.buttonCollapse=!1,n.buttonMaximize=!1,n.buttonMinimize=!1,n.centerCollapse=!0,n.dockSide=e.PanelDockMode.right,t.prototype.setOptions.call(this,n)},n.prototype._setPCPosition=function(){this.widgetConfig.position=o.merge(this.widgetConfig.position,{left:"auto",top:this.mapBounds.top,bottom:0,right:0,height:"auto"}),t.prototype._setPCPosition.call(this)},n.prototype.onResize=function(){t.prototype._resizeMapWhenResize.call(this),t.prototype.onResize.call(this)},n.prototype.onOpen=function(){t.prototype._resizeMapWhenResize.call(this),t.prototype.onOpen.call(this)},n.prototype.onClose=function(){t.prototype._resizeMapWhenClose.call(this),t.prototype.onClose.call(this)},n.prototype.resize=function(){},n}(Be),e.DockablePanelAtRightComponent.ɵfac=function(t){return new(t||e.DockablePanelAtRightComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.DockablePanelAtRightComponent.ɵcmp=n.ɵɵdefineComponent({type:e.DockablePanelAtRightComponent,selectors:[["epsgis-dockable-panel-at-right"]],features:[n.ɵɵInheritDefinitionFeature],decls:14,vars:11,consts:[[1,"sspanel_overlay",2,"display","none"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngClass","ngStyle"],["sspanel",""],["sspanel-titlebar","",1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"hasIcon","options","windowState","onClickSetting","onClickClose"],["sspanel_titlebar",""],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_resizer","sspanel_resizer_left",3,"mousedown"],[1,"collapse",3,"ngStyle","click"],["center_collapse",""],["viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","width","16","height","16"],["d","M245.034251 895.239428l383.063419-383.063419L240.001631 124.07997l0.070608-0.033769c-12.709463-13.137205-20.530592-31.024597-20.530592-50.731428 0-40.376593 32.736589-73.111135 73.115228-73.111135 19.705807 0 37.591153 7.819083 50.730405 20.528546l0.034792-0.035816 438.686251 438.681134-0.035816 0.034792c13.779841 13.281491 22.3838 31.915897 22.3838 52.586682 0 0.071631 0 0.106424 0 0.178055 0 0.072655 0 0.10847 0 0.144286 0 20.669762-8.603959 39.341007-22.3838 52.623521l0.035816 0.033769L343.426165 1003.661789l-0.180102-0.179079c-13.140275 12.565177-30.950919 20.313651-50.588165 20.313651-40.378639 0-73.115228-32.736589-73.115228-73.114205C219.544717 928.512229 229.432924 908.664182 245.034251 895.239428z","fill","#bababa"]],template:function(e,t){1&e&&(n.ɵɵelement(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵelementStart(4,"div",4,5),n.ɵɵlistener("onClickSetting",(function(){return t.openWidgetSetting()}))("onClickClose",(function(e){return t.closePanel(e)})),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",6),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(7,Ge,0,0,"ng-template",null,7,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementStart(9,"div",8),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"left"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(10,"div",9,10),n.ɵɵlistener("click",(function(e){return t.collapsePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(12,"svg",11),n.ɵɵelement(13,"path",12),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(7,Je,!1===t.options.showTitle))("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("hasIcon",!1)("options",t.options)("windowState",t.windowState),n.ɵɵadvance(6),n.ɵɵproperty("ngStyle",n.ɵɵpureFunction1(9,qe,t.options.centerCollapse?"block":"none")))},directives:[t.NgClass,t.NgStyle,Le],styles:[".notitle[_ngcontent-%COMP%]{border:none}.notitle[_ngcontent-%COMP%]   .sspanel_titlebar[_ngcontent-%COMP%]{display:none}.notitle[_ngcontent-%COMP%]   .sspanel_content[_ngcontent-%COMP%]{border:none}.collapse[_ngcontent-%COMP%]{position:absolute;top:50%;left:-16px;width:16px;height:60px;line-height:60px;cursor:pointer;background:#fcfcfc;border-radius:5px 0 0 5px;box-shadow:-6px 0 6px 0 #a0a0a0}.collapse[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{fill:#000}"]}),e.DockablePanelAtRightComponent=b([H({uri:"epsgis-dockable-panel-at-right",path:"components/ex-panels/dockable-panel-at-right"})],e.DockablePanelAtRightComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.DockablePanelAtRightComponent,[{type:n.Component,args:[{selector:"epsgis-dockable-panel-at-right",templateUrl:"./dockable-panel-at-right.component.html",styleUrls:["./dockable-panel-at-right.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null);var Qe=function(e){return{notitle:e}},$e=function(e){return{display:e}};e.DockablePanelAtLeftComponent=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i.dockMode=e.PanelDockMode.left,i}return w(n,t),n.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},n.prototype.ngAfterViewInit=function(){t.prototype.ngAfterViewInit.call(this)},n.prototype.ngOnDestroy=function(){t.prototype.ngOnDestroy.call(this)},n.prototype.setOptions=function(n){n.modal=!1,n.draggable=!1,n.buttonClose=!1,n.buttonCollapse=!1,n.buttonMaximize=!1,n.buttonMinimize=!1,n.centerCollapse=!0,n.dockSide=e.PanelDockMode.left,t.prototype.setOptions.call(this,n)},n.prototype._setPCPosition=function(){this.widgetConfig.position=o.merge(this.widgetConfig.position,{left:0,top:this.mapBounds.top,bottom:0,right:0,height:"auto"}),t.prototype._setPCPosition.call(this)},n.prototype.onResize=function(){t.prototype._resizeMapWhenResize.call(this),t.prototype.onResize.call(this)},n.prototype.onOpen=function(){t.prototype._resizeMapWhenResize.call(this),t.prototype.onOpen.call(this)},n.prototype.onClose=function(){t.prototype._resizeMapWhenClose.call(this),t.prototype.onClose.call(this)},n.prototype.resize=function(){},n}(Be),e.DockablePanelAtLeftComponent.ɵfac=function(t){return new(t||e.DockablePanelAtLeftComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.DockablePanelAtLeftComponent.ɵcmp=n.ɵɵdefineComponent({type:e.DockablePanelAtLeftComponent,selectors:[["epsgis-dockable-panel-at-left"]],features:[n.ɵɵInheritDefinitionFeature],decls:14,vars:11,consts:[[1,"sspanel_overlay",2,"display","none"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngClass","ngStyle"],["sspanel",""],["sspanel-titlebar","",1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"hasIcon","options","windowState","onClickSetting","onClickClose"],["sspanel_titlebar",""],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_resizer","sspanel_resizer_right",3,"mousedown"],[1,"collapse",3,"ngStyle","click"],["center_collapse",""],["viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","width","16","height","16"],["d","M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z","fill","#bababa"]],template:function(e,t){1&e&&(n.ɵɵelement(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵelementStart(4,"div",4,5),n.ɵɵlistener("onClickSetting",(function(){return t.openWidgetSetting()}))("onClickClose",(function(e){return t.closePanel(e)})),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",6),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(7,Xe,0,0,"ng-template",null,7,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementStart(9,"div",8),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"right"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(10,"div",9,10),n.ɵɵlistener("click",(function(e){return t.collapsePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(12,"svg",11),n.ɵɵelement(13,"path",12),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(7,Qe,!1===t.options.showTitle))("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("hasIcon",!1)("options",t.options)("windowState",t.windowState),n.ɵɵadvance(6),n.ɵɵproperty("ngStyle",n.ɵɵpureFunction1(9,$e,t.options.centerCollapse?"block":"none")))},directives:[t.NgClass,t.NgStyle,Le],styles:[".notitle[_ngcontent-%COMP%]{border:none}.notitle[_ngcontent-%COMP%]   .sspanel_titlebar[_ngcontent-%COMP%]{display:none}.notitle[_ngcontent-%COMP%]   .sspanel_content[_ngcontent-%COMP%]{border:none}.collapse[_ngcontent-%COMP%]{position:absolute;top:50%;right:-16px;width:16px;height:60px;line-height:60px;cursor:pointer;background:#fcfcfc;border-radius:0 5px 5px 0;box-shadow:3px 0 3px 0 #a0a0a0}.collapse[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   path[_ngcontent-%COMP%]{fill:#000}"]}),e.DockablePanelAtLeftComponent=b([H({uri:"epsgis-dockable-panel-at-left",path:"components/ex-panels/dockable-panel-at-left"})],e.DockablePanelAtLeftComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.DockablePanelAtLeftComponent,[{type:n.Component,args:[{selector:"epsgis-dockable-panel-at-left",templateUrl:"./dockable-panel-at-left.component.html",styleUrls:["./dockable-panel-at-left.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null);var Ye=function(e){function t(t,n){var o=e.call(this,t,n)||this;return o._render=t,o.cdr=n,o.zIndex=9999,o.moveTopOnActive=!1,o}return w(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngAfterViewInit=function(){e.prototype.ngAfterViewInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.setOptions=function(t){this.widgetConfig&&this.widgetConfig.mobile&&o.merge(t,this.widgetConfig.mobile),e.prototype.setOptions.call(this,t)},t.prototype.getWidthHeight=function(){var e=this.widgetConfig.position,t=e.width,n=e.height;this.widgetConfig.mobile&&this.widgetConfig.mobile.position&&(t=this.widgetConfig.mobile.position.width,n=this.widgetConfig.mobile.position.height);var o=this.commonService.getPxNumber(t),i=this.commonService.getPxNumber(n);return"number"==typeof o&&(o<=0||o>innerWidth)&&(o="100%"),"number"==typeof i&&(i<=0||o>innerHeight)&&(i="100%"),{width:o,height:i}},t}(me);function Ze(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",14),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g",16),n.ɵɵelement(4,"rect",17),n.ɵɵelement(5,"line",18),n.ɵɵelement(6,"line",19),n.ɵɵelement(7,"line",20),n.ɵɵelement(8,"line",21),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnmaximizeText)}}function Ke(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",14),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",15),n.ɵɵelementStart(2,"g",16),n.ɵɵelement(3,"rect",22),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonMaximizeText)}}function et(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,Ze,9,1,"ng-container",12),n.ɵɵtemplate(2,Ke,4,1,"ng-template",null,13,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","maximized"==i.windowState)("ngIfElse",o)}}function tt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",23),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).closePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g"),n.ɵɵelement(4,"line",24),n.ɵɵelement(5,"line",25),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonCloseText)}}function nt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",8,9),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext()._titlebar_MouseDown(e)})),n.ɵɵelementStart(2,"div",10),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵtemplate(4,et,4,2,"ng-container",11),n.ɵɵtemplate(5,tt,6,1,"ng-container",11),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(3),n.ɵɵtextInterpolate1(" ",i.options.title,""),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonMaximize),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonClose)}}function ot(e,t){}function it(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",13),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",14),n.ɵɵelementStart(3,"g",15),n.ɵɵelement(4,"polyline",16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnCollapseText)}}function rt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",13),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",14),n.ɵɵelementStart(2,"g",15),n.ɵɵelement(3,"polyline",17),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonCollapseText)}}function st(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,it,5,1,"ng-container",11),n.ɵɵtemplate(2,rt,4,1,"ng-template",null,12,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","collapsed"==i.windowState)("ngIfElse",o)}}function at(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",19),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",14),n.ɵɵelementStart(3,"g",15),n.ɵɵelement(4,"rect",20),n.ɵɵelement(5,"line",21),n.ɵɵelement(6,"line",22),n.ɵɵelement(7,"line",23),n.ɵɵelement(8,"line",24),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnmaximizeText)}}function lt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",19),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",14),n.ɵɵelementStart(2,"g",15),n.ɵɵelement(3,"rect",25),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonMaximizeText)}}function ct(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,at,9,1,"ng-container",11),n.ɵɵtemplate(2,lt,4,1,"ng-template",null,18,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","maximized"==i.windowState)("ngIfElse",o)}}function pt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",26),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).closePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",14),n.ɵɵelementStart(3,"g"),n.ɵɵelement(4,"line",27),n.ɵɵelement(5,"line",28),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonCloseText)}}function dt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",7,8),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext()._titlebar_MouseDown(e)})),n.ɵɵelementStart(2,"div",9),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵtemplate(4,st,4,2,"ng-container",10),n.ɵɵtemplate(5,ct,4,2,"ng-container",10),n.ɵɵtemplate(6,pt,6,1,"ng-container",10),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(3),n.ɵɵtextInterpolate1(" ",i.options.title,""),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonCollapse),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonMaximize),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonClose)}}function ut(e,t){}function gt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",14),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g",16),n.ɵɵelement(4,"polyline",17),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnCollapseText)}}function ft(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",14),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",15),n.ɵɵelementStart(2,"g",16),n.ɵɵelement(3,"polyline",18),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonCollapseText)}}function ht(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,gt,5,1,"ng-container",12),n.ɵɵtemplate(2,ft,4,1,"ng-template",null,13,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","collapsed"==i.windowState)("ngIfElse",o)}}function mt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",20),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g",16),n.ɵɵelement(4,"rect",21),n.ɵɵelement(5,"line",22),n.ɵɵelement(6,"line",23),n.ɵɵelement(7,"line",24),n.ɵɵelement(8,"line",25),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnmaximizeText)}}function vt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",20),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",15),n.ɵɵelementStart(2,"g",16),n.ɵɵelement(3,"rect",26),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonMaximizeText)}}function yt(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,mt,9,1,"ng-container",12),n.ɵɵtemplate(2,vt,4,1,"ng-template",null,19,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","maximized"==i.windowState)("ngIfElse",o)}}function Ct(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",27),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).closePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g"),n.ɵɵelement(4,"line",28),n.ɵɵelement(5,"line",29),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonCloseText)}}function wt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",8,9),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext()._titlebar_MouseDown(e)})),n.ɵɵelementStart(2,"div",10),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵtemplate(4,ht,4,2,"ng-container",11),n.ɵɵtemplate(5,yt,4,2,"ng-container",11),n.ɵɵtemplate(6,Ct,6,1,"ng-container",11),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(3),n.ɵɵtextInterpolate1(" ",i.options.title,""),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonCollapse),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonMaximize),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonClose)}}function bt(e,t){}function _t(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",14),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g",16),n.ɵɵelement(4,"polyline",17),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnCollapseText)}}function Mt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",14),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",15),n.ɵɵelementStart(2,"g",16),n.ɵɵelement(3,"polyline",18),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonCollapseText)}}function xt(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,_t,5,1,"ng-container",12),n.ɵɵtemplate(2,Mt,4,1,"ng-template",null,13,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","collapsed"==i.windowState)("ngIfElse",o)}}function St(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",20),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g",16),n.ɵɵelement(4,"rect",21),n.ɵɵelement(5,"line",22),n.ɵɵelement(6,"line",23),n.ɵɵelement(7,"line",24),n.ɵɵelement(8,"line",25),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnmaximizeText)}}function Pt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",20),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",15),n.ɵɵelementStart(2,"g",16),n.ɵɵelement(3,"rect",26),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonMaximizeText)}}function It(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,St,9,1,"ng-container",12),n.ɵɵtemplate(2,Pt,4,1,"ng-template",null,19,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","maximized"==i.windowState)("ngIfElse",o)}}function Ot(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",27),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).closePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",15),n.ɵɵelementStart(3,"g"),n.ɵɵelement(4,"line",28),n.ɵɵelement(5,"line",29),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonCloseText)}}function Et(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",8,9),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext()._titlebar_MouseDown(e)})),n.ɵɵelementStart(2,"div",10),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵtemplate(4,xt,4,2,"ng-container",11),n.ɵɵtemplate(5,It,4,2,"ng-container",11),n.ɵɵtemplate(6,Ot,6,1,"ng-container",11),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(3),n.ɵɵtextInterpolate1(" ",i.options.title,""),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonCollapse),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonMaximize),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonClose)}}function kt(e,t){}function Dt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",13),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",14),n.ɵɵelementStart(3,"g",15),n.ɵɵelement(4,"polyline",16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnCollapseText)}}function zt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",13),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",14),n.ɵɵelementStart(2,"g",15),n.ɵɵelement(3,"polyline",17),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonCollapseText)}}function Tt(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,Dt,5,1,"ng-container",11),n.ɵɵtemplate(2,zt,4,1,"ng-template",null,12,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","collapsed"==i.windowState)("ngIfElse",o)}}function Vt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",19),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",14),n.ɵɵelementStart(3,"g",15),n.ɵɵelement(4,"rect",20),n.ɵɵelement(5,"line",21),n.ɵɵelement(6,"line",22),n.ɵɵelement(7,"line",23),n.ɵɵelement(8,"line",24),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnmaximizeText)}}function Wt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",19),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(3)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",14),n.ɵɵelementStart(2,"g",15),n.ɵɵelement(3,"rect",25),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(3);n.ɵɵpropertyInterpolate("title",i.options.buttonMaximizeText)}}function jt(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,Vt,9,1,"ng-container",11),n.ɵɵtemplate(2,Wt,4,1,"ng-template",null,18,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngIf","maximized"==i.windowState)("ngIfElse",o)}}function Rt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",26),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).closePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",14),n.ɵɵelementStart(3,"g"),n.ɵɵelement(4,"line",27),n.ɵɵelement(5,"line",28),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonCloseText)}}function Lt(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",7,8),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext()._titlebar_MouseDown(e)})),n.ɵɵelementStart(2,"div",9),n.ɵɵtext(3),n.ɵɵelementEnd(),n.ɵɵtemplate(4,Tt,4,2,"ng-container",10),n.ɵɵtemplate(5,jt,4,2,"ng-container",10),n.ɵɵtemplate(6,Rt,6,1,"ng-container",10),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(3),n.ɵɵtextInterpolate1(" ",i.options.title,""),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonCollapse),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonMaximize),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.options.buttonClose)}}function At(e,t){}Ye.ɵfac=function(e){return new(e||Ye)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},Ye.ɵdir=n.ɵɵdefineDirective({type:Ye,features:[n.ɵɵInheritDefinitionFeature]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Ye,[{type:n.Directive}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null),e.MobileActionPanelComponent=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i._mobileShowMode=e.PanelInMobileShowMode.action,i}return w(n,t),n.prototype.setOptions=function(e){e.buttonCollapse=!1,e.buttonMaximize=!1,t.prototype.setOptions.call(this,e)},n.prototype._setMobilePosition=function(){var e=this.getWidthHeight(),t=new L("auto",0,0,0,e.height,"100%");this.widgetConfig.position=t,this._render.setStyle(this.sspanel.nativeElement,"max-height",e.height)},n}(Ye),e.MobileActionPanelComponent.ɵfac=function(t){return new(t||e.MobileActionPanelComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.MobileActionPanelComponent.ɵcmp=n.ɵɵdefineComponent({type:e.MobileActionPanelComponent,selectors:[["epsgis-mobile-action-panel"]],features:[n.ɵɵInheritDefinitionFeature],decls:9,vars:3,consts:[[1,"sspanel_overlay"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngStyle"],["sspanel",""],["class","sspanel_titlebar sspanel_titlebar_draggable",3,"mousedown",4,"ngIf"],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_resizer","sspanel_resizer_top",3,"mousedown"],[1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"mousedown"],["sspanel_titlebar",""],[1,"sspanel_titlebar_text"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["showMaximizeButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_maximize",3,"title","click"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["x","1","y","3","height","6","width","6"],["y1","3","x1","3","y2","1","x2","3"],["y1","1","x1","2.5","y2","1","x2","9.5"],["y1","1","x1","9","y2","7","x2","9"],["y1","7","x1","9.5","y2","7","x2","7"],["x","1","y","1","height","8","width","8"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_close",3,"title","click"],["y2","0","x2","10","y1","10","x1","0"],["y2","10","x2","10","y1","0","x1","0"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵtemplate(4,nt,6,3,"div",4),n.ɵɵelementStart(5,"div",5),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(6,ot,0,0,"ng-template",null,6,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementStart(8,"div",7),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"height",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.options.showTitle))},directives:[t.NgStyle,t.NgIf],styles:[".sspanel[_ngcontent-%COMP%]{border:none}"]}),e.MobileActionPanelComponent=b([H({uri:"epsgis-mobile-action-panel",path:"components/mobile/action-panel"})],e.MobileActionPanelComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.MobileActionPanelComponent,[{type:n.Component,args:[{selector:"epsgis-mobile-action-panel",templateUrl:"./action-panel.component.html",styleUrls:["./action-panel.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null),e.MobileDrawerPanelComponent=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i._mobileShowMode=e.PanelInMobileShowMode.drawer,i}return w(n,t),n.prototype.ngOnDestroy=function(){this._sspanelOverlayClickHandler(),t.prototype.ngOnDestroy.call(this)},n.prototype.setOptions=function(e){e.buttonCollapse=!1,e.buttonMaximize=!1,t.prototype.setOptions.call(this,e)},n.prototype._setMobilePosition=function(){var e=this,t="80%";if(this.widgetConfig.mobile&&this.widgetConfig.mobile.position){var n=this.getWidthHeight();n.width&&(t=n.width)}var o=new L(0,0,0,20,"100%",t);this.widgetConfig.position=o,this._sspanelOverlayClickHandler=this.jsEventManager.addEventListener(this.sspanelOverlay.nativeElement,"click",(function(t){t.target===e.sspanelOverlay.nativeElement&&e.closePanel(t)}))},n}(Ye),e.MobileDrawerPanelComponent.ɵfac=function(t){return new(t||e.MobileDrawerPanelComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.MobileDrawerPanelComponent.ɵcmp=n.ɵɵdefineComponent({type:e.MobileDrawerPanelComponent,selectors:[["epsgis-mobile-drawer-panel"]],features:[n.ɵɵInheritDefinitionFeature],decls:8,vars:3,consts:[[1,"sspanel_overlay"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngStyle"],["sspanel",""],["class","sspanel_titlebar sspanel_titlebar_draggable",3,"mousedown",4,"ngIf"],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"mousedown"],["sspanel_titlebar",""],[1,"sspanel_titlebar_text"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["showCollapsedButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_collapse",3,"title","click"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["points","1,3 9,3 5,8 1,3 9,3"],["points","1,7 9,7 5,2 1,7 9,7"],["showMaximizeButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_maximize",3,"title","click"],["x","1","y","3","height","6","width","6"],["y1","3","x1","3","y2","1","x2","3"],["y1","1","x1","2.5","y2","1","x2","9.5"],["y1","1","x1","9","y2","7","x2","9"],["y1","7","x1","9.5","y2","7","x2","7"],["x","1","y","1","height","8","width","8"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_close",3,"title","click"],["y2","0","x2","10","y1","10","x1","0"],["y2","10","x2","10","y1","0","x1","0"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵtemplate(4,dt,7,4,"div",4),n.ɵɵelementStart(5,"div",5),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(6,ut,0,0,"ng-template",null,6,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.options.showTitle))},directives:[t.NgStyle,t.NgIf],styles:[".sspanel[_ngcontent-%COMP%]{border:none}.sspanel_titlebar[_ngcontent-%COMP%]{background:#3880ff;height:44px}.sspanel_titlebar_text[_ngcontent-%COMP%]{text-align:center}.sspanel_titlebar_button[_ngcontent-%COMP%]{display:none}"]}),e.MobileDrawerPanelComponent=b([H({uri:"epsgis-mobile-drawer-panel",path:"components/mobile/drawer-panel"})],e.MobileDrawerPanelComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.MobileDrawerPanelComponent,[{type:n.Component,args:[{selector:"epsgis-mobile-drawer-panel",templateUrl:"./drawer-panel.component.html",styleUrls:["./drawer-panel.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null),e.MobileModalPanelComponent=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i._mobileShowMode=e.PanelInMobileShowMode.modal,i}return w(n,t),n.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},n.prototype.setOptions=function(e){e.buttonCollapse=!1,e.buttonMaximize=!1,e.modal=!0,t.prototype.setOptions.call(this,e)},n.prototype._setMobilePosition=function(){var e=new L(0,0,0,0,"100%","100%","","unset");this.widgetConfig.position=e},n}(Ye),e.MobileModalPanelComponent.ɵfac=function(t){return new(t||e.MobileModalPanelComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.MobileModalPanelComponent.ɵcmp=n.ɵɵdefineComponent({type:e.MobileModalPanelComponent,selectors:[["epsgis-mobile-modal-panel"]],features:[n.ɵɵInheritDefinitionFeature],decls:9,vars:3,consts:[[1,"sspanel_overlay"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngStyle"],["sspanel",""],["class","sspanel_titlebar sspanel_titlebar_draggable",3,"mousedown",4,"ngIf"],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_minplaceholder"],[1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"mousedown"],["sspanel_titlebar",""],[1,"sspanel_titlebar_text"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["showCollapsedButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_collapse",3,"title","click"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["points","1,3 9,3 5,8 1,3 9,3"],["points","1,7 9,7 5,2 1,7 9,7"],["showMaximizeButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_maximize",3,"title","click"],["x","1","y","3","height","6","width","6"],["y1","3","x1","3","y2","1","x2","3"],["y1","1","x1","2.5","y2","1","x2","9.5"],["y1","1","x1","9","y2","7","x2","9"],["y1","7","x1","9.5","y2","7","x2","7"],["x","1","y","1","height","8","width","8"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_close",3,"title","click"],["y2","0","x2","10","y1","10","x1","0"],["y2","10","x2","10","y1","0","x1","0"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵtemplate(4,wt,7,4,"div",4),n.ɵɵelementStart(5,"div",5),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(6,bt,0,0,"ng-template",null,6,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelement(8,"div",7)),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.options.showTitle))},directives:[t.NgStyle,t.NgIf],styles:[".sspanel[_ngcontent-%COMP%]{border:none;box-shadow:none}"]}),e.MobileModalPanelComponent=b([H({uri:"epsgis-mobile-modal-panel",path:"components/mobile/modal-panel"})],e.MobileModalPanelComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.MobileModalPanelComponent,[{type:n.Component,args:[{selector:"epsgis-mobile-modal-panel",templateUrl:"./modal-panel.component.html",styleUrls:["./modal-panel.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null),e.MobilePopupPanelComponent=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i._mobileShowMode=e.PanelInMobileShowMode.popup,i}return w(n,t),n.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this)},n.prototype.setOptions=function(e){e.buttonCollapse=!1,e.buttonMaximize=!1,e.modal=!1,t.prototype.setOptions.call(this,e)},n.prototype._setMobilePosition=function(){var e=t.prototype.getWidthHeight.call(this),n=new L(0,0,0,0,e.height,e.width,"","unset");this.widgetConfig.position=n},n}(Ye),e.MobilePopupPanelComponent.ɵfac=function(t){return new(t||e.MobilePopupPanelComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.MobilePopupPanelComponent.ɵcmp=n.ɵɵdefineComponent({type:e.MobilePopupPanelComponent,selectors:[["epsgis-mobile-popup-panel"]],features:[n.ɵɵInheritDefinitionFeature],decls:9,vars:3,consts:[[1,"sspanel_overlay"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngStyle"],["sspanel",""],["class","sspanel_titlebar sspanel_titlebar_draggable",3,"mousedown",4,"ngIf"],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_minplaceholder"],[1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"mousedown"],["sspanel_titlebar",""],[1,"sspanel_titlebar_text"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["showCollapsedButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_collapse",3,"title","click"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["points","1,3 9,3 5,8 1,3 9,3"],["points","1,7 9,7 5,2 1,7 9,7"],["showMaximizeButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_maximize",3,"title","click"],["x","1","y","3","height","6","width","6"],["y1","3","x1","3","y2","1","x2","3"],["y1","1","x1","2.5","y2","1","x2","9.5"],["y1","1","x1","9","y2","7","x2","9"],["y1","7","x1","9.5","y2","7","x2","7"],["x","1","y","1","height","8","width","8"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_close",3,"title","click"],["y2","0","x2","10","y1","10","x1","0"],["y2","10","x2","10","y1","0","x1","0"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵtemplate(4,Et,7,4,"div",4),n.ɵɵelementStart(5,"div",5),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(6,kt,0,0,"ng-template",null,6,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelement(8,"div",7)),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.options.showTitle))},directives:[t.NgStyle,t.NgIf],styles:[".sspanel_overlay[_ngcontent-%COMP%]{display:flex}.sspanel[_ngcontent-%COMP%]{position:unset;margin:auto}"]}),e.MobilePopupPanelComponent=b([H({uri:"epsgis-mobile-popup-panel",path:"components/mobile/popup-panel"})],e.MobilePopupPanelComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.MobilePopupPanelComponent,[{type:n.Component,args:[{selector:"epsgis-mobile-popup-panel",templateUrl:"./popup-panel.component.html",styleUrls:["./popup-panel.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null);var Nt=function(t){function n(n,o){var i=t.call(this,n,o)||this;return i._render=n,i.cdr=o,i._mobileShowMode=e.PanelInMobileShowMode.drawerRight,i}return w(n,t),n.prototype.ngOnDestroy=function(){this._sspanelOverlayClickHandler(),t.prototype.ngOnDestroy.call(this)},n.prototype.setOptions=function(e){e.buttonCollapse=!1,e.buttonMaximize=!1,t.prototype.setOptions.call(this,e)},n.prototype._setMobilePosition=function(){var e=this,t="80%";if(this.widgetConfig.mobile&&this.widgetConfig.mobile.position){var n=this.getWidthHeight();n.width&&(t=n.width)}var o=new L(0,"auto",0,0,"100%",t);this.widgetConfig.position=o,this._sspanelOverlayClickHandler=this.jsEventManager.addEventListener(this.sspanelOverlay.nativeElement,"click",(function(t){t.target===e.sspanelOverlay.nativeElement&&e.closePanel(t)}))},n}(Ye);Nt.ɵfac=function(e){return new(e||Nt)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},Nt.ɵcmp=n.ɵɵdefineComponent({type:Nt,selectors:[["epsgis-mobile-drawer-right-panel"]],features:[n.ɵɵInheritDefinitionFeature],decls:8,vars:3,consts:[[1,"sspanel_overlay"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngStyle"],["sspanel",""],["class","sspanel_titlebar sspanel_titlebar_draggable",3,"mousedown",4,"ngIf"],[1,"sspanel_content",3,"click"],["widget_content",""],[1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"mousedown"],["sspanel_titlebar",""],[1,"sspanel_titlebar_text"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["showCollapsedButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_collapse",3,"title","click"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["points","1,3 9,3 5,8 1,3 9,3"],["points","1,7 9,7 5,2 1,7 9,7"],["showMaximizeButton",""],[1,"sspanel_titlebar_button","sspanel_titlebar_button_maximize",3,"title","click"],["x","1","y","3","height","6","width","6"],["y1","3","x1","3","y2","1","x2","3"],["y1","1","x1","2.5","y2","1","x2","9.5"],["y1","1","x1","9","y2","7","x2","9"],["y1","7","x1","9.5","y2","7","x2","7"],["x","1","y","1","height","8","width","8"],[1,"sspanel_titlebar_button","sspanel_titlebar_button_close",3,"title","click"],["y2","0","x2","10","y1","10","x1","0"],["y2","10","x2","10","y1","0","x1","0"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵtemplate(4,Lt,7,4,"div",4),n.ɵɵelementStart(5,"div",5),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(6,At,0,0,"ng-template",null,6,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.options.showTitle))},directives:[t.NgStyle,t.NgIf],styles:[".sspanel[_ngcontent-%COMP%]{border:none}.sspanel_titlebar[_ngcontent-%COMP%]{background:linear-gradient(270deg,#5677fc,#50bfff)}.sspanel_titlebar_text[_ngcontent-%COMP%]{order:5;text-align:right}.sspanel_titlebar_button[_ngcontent-%COMP%]{order:1}.sspanel_titlebar_button_collapse[_ngcontent-%COMP%]{order:3}.sspanel_titlebar_button_maximize[_ngcontent-%COMP%]{order:2}.sspanel_titlebar[_ngcontent-%COMP%]{background:#3880ff;height:44px}.sspanel_titlebar_text[_ngcontent-%COMP%]{text-align:center}.sspanel_titlebar_button[_ngcontent-%COMP%]{display:none}"]}),Nt=b([H({uri:"epsgis-mobile-drawer-right-panel",path:"components/mobile/drawer-panel-right"})],Nt),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Nt,[{type:n.Component,args:[{selector:"epsgis-mobile-drawer-right-panel",templateUrl:"./drawer-panel-right.component.html",styleUrls:["./drawer-panel-right.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),null);var Bt=function(){function e(e){this.sanitizer=e}return e.prototype.transform=function(e,t){return void 0===t&&(t="img"),"img"==t?this.sanitizer.bypassSecurityTrustUrl(e):this.sanitizer.bypassSecurityTrustResourceUrl(e)},e}();Bt.ɵfac=function(e){return new(e||Bt)(n.ɵɵdirectiveInject(c.DomSanitizer))},Bt.ɵpipe=n.ɵɵdefinePipe({name:"safeurl",type:Bt,pure:!0}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Bt,[{type:n.Pipe,args:[{name:"safeurl"}]}],(function(){return[{type:c.DomSanitizer}]}),null);var Ft=["iframeContent"];function Ut(e,t){if(1&e&&(n.ɵɵelement(0,"iframe",17,18),n.ɵɵpipe(2,"safeurl")),2&e){var o=n.ɵɵnextContext();n.ɵɵproperty("src",n.ɵɵpipeBind2(2,1,o.url,"iframe"),n.ɵɵsanitizeResourceUrl)}}function Ht(e,t){if(1&e&&(n.ɵɵelementContainerStart(0,null,19),n.ɵɵtext(2),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",o.url," ")}}var Gt=function(e){return{notitle:e}};e.IframePanelComponent=function(t){function n(e,n){var o=t.call(this,e,n)||this;return o._render=e,o.cdr=n,o.url="",o.isShowIframe=!1,o}return w(n,t),n.prototype.ngOnInit=function(){t.prototype.ngOnInit.call(this),this.url=this.options.url,this.options.url&&(this.isShowIframe=!0)},n.prototype.ngAfterViewInit=function(){this.startup(),this.state=e.WidgetState.opened},n}(me),e.IframePanelComponent.ɵfac=function(t){return new(t||e.IframePanelComponent)(n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.IframePanelComponent.ɵcmp=n.ɵɵdefineComponent({type:e.IframePanelComponent,selectors:[["epsgis-iframe-panel"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(Ft,3),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.iframeEl=o.first)}},features:[n.ɵɵInheritDefinitionFeature],decls:17,vars:10,consts:[[1,"sspanel_overlay",2,"display","none"],["sspanel_overlay",""],[1,"sspanel",3,"id","ngClass","ngStyle"],["sspanel",""],["sspanel-titlebar","",1,"sspanel_titlebar","sspanel_titlebar_draggable",3,"hasIcon","options","windowState","onClickSetting","onClickClose"],["sspanel_titlebar",""],[1,"sspanel_content",3,"click"],["class","iframe_content",3,"src",4,"ngIf"],[4,"ngIf"],[1,"sspanel_resizer","sspanel_resizer_top",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_bottom",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_left",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_right",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_topleft",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_topright",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_bottomleft",3,"mousedown"],[1,"sspanel_resizer","sspanel_resizer_bottomright",3,"mousedown"],[1,"iframe_content",3,"src"],["iframeContent",""],["content",""]],template:function(e,t){1&e&&(n.ɵɵelement(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵelementStart(4,"div",4,5),n.ɵɵlistener("onClickSetting",(function(){return t.openWidgetSetting()}))("onClickClose",(function(e){return t.closePanel(e)})),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",6),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(7,Ut,3,4,"iframe",7),n.ɵɵtemplate(8,Ht,3,1,"ng-container",8),n.ɵɵelementEnd(),n.ɵɵelementStart(9,"div",9),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"height",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(10,"div",10),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"height",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(11,"div",11),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"left"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(12,"div",12),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"right"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(13,"div",13),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"left",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(14,"div",14),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"right",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(15,"div",15),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"left",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(16,"div",16),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"right",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(8,Gt,!1===t.options.showTitle))("ngStyle",t.position),n.ɵɵadvance(2),n.ɵɵproperty("hasIcon",!1)("options",t.options)("windowState",t.windowState),n.ɵɵadvance(3),n.ɵɵproperty("ngIf",t.isShowIframe),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!t.isShowIframe))},directives:[t.NgClass,t.NgStyle,Le,t.NgIf],pipes:[Bt],styles:[".iframe_content[_ngcontent-%COMP%]{width:100%;height:100%;border:0}"]}),e.IframePanelComponent=b([H({uri:"epsgis-iframe-panel",path:"components/ex-panels/iframe-panel"})],e.IframePanelComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.IframePanelComponent,[{type:n.Component,args:[{selector:"epsgis-iframe-panel",templateUrl:"./iframe-panel.component.html",styleUrls:["./iframe-panel.component.scss"]}]}],(function(){return[{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),{iframeEl:[{type:n.ViewChild,args:["iframeContent",{static:!0}]}]});var Jt=function(){};Jt.ɵmod=n.ɵɵdefineNgModule({type:Jt}),Jt.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||Jt)},imports:[[t.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(Jt,{declarations:[Bt],imports:[t.CommonModule],exports:[Bt]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Jt,[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[Bt],exports:[Bt]}]}],null,null);var qt=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();qt.ɵfac=function(e){return new(e||qt)},qt.ɵcmp=n.ɵɵdefineComponent({type:qt,selectors:[["epsgis-result-fof"]],decls:2,vars:0,consts:[["nzStatus","404","nzTitle","404","nzSubTitle","抱歉，您访问的页面不存在。"],["nz-result-extra",""]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"nz-result",0),n.ɵɵelement(1,"div",1),n.ɵɵelementEnd())},directives:[r.NzResultComponent,r.NzResultExtraDirective],styles:[""]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(qt,[{type:n.Component,args:[{selector:"epsgis-result-fof",templateUrl:"./resultfof.component.html",styleUrls:["./resultfof.component.scss"]}]}],(function(){return[]}),null);var Xt=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();Xt.ɵfac=function(e){return new(e||Xt)},Xt.ɵcmp=n.ɵɵdefineComponent({type:Xt,selectors:[["epsgis-result-foo"]],decls:2,vars:0,consts:[["nzStatus","500","nzTitle","500","nzSubTitle","抱歉，服务器上有错误."],["nz-result-extra",""]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"nz-result",0),n.ɵɵelement(1,"div",1),n.ɵɵelementEnd())},directives:[r.NzResultComponent,r.NzResultExtraDirective],styles:[""]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Xt,[{type:n.Component,args:[{selector:"epsgis-result-foo",templateUrl:"./resultfoo.component.html",styleUrls:["./resultfoo.component.scss"]}]}],(function(){return[]}),null);var Qt=function(){function e(){}return e.prototype.ngOnInit=function(){},e}();Qt.ɵfac=function(e){return new(e||Qt)},Qt.ɵcmp=n.ɵɵdefineComponent({type:Qt,selectors:[["epsgis-result-fot"]],decls:2,vars:0,consts:[["nzStatus","403","nzTitle","403","nzSubTitle","抱歉，您无权访问此页面。"],["nz-result-extra",""]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"nz-result",0),n.ɵɵelement(1,"div",1),n.ɵɵelementEnd())},directives:[r.NzResultComponent,r.NzResultExtraDirective],styles:[""]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Qt,[{type:n.Component,args:[{selector:"epsgis-result-fot",templateUrl:"./resultfot.component.html",styleUrls:["./resultfot.component.scss"]}]}],(function(){return[]}),null);var $t=function(){};$t.ɵmod=n.ɵɵdefineNgModule({type:$t}),$t.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||$t)},imports:[[t.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope($t,{declarations:[q],imports:[t.CommonModule],exports:[q]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata($t,[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:[q],entryComponents:[],exports:[q]}]}],null,null);var Yt=function(){};Yt.ɵfac=function(e){return new(e||Yt)},Yt.ɵcmp=n.ɵɵdefineComponent({type:Yt,selectors:[["epsgis-icon-arrow-down"]],decls:2,vars:0,consts:[["t","1575033841131","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","16367","width","16","height","16",1,"icon"],["d","M128.759037 245.033739l383.064442 383.064442 388.096039-388.097062 0.033769 0.070608c13.138228-12.709463 31.024597-20.528546 50.730405-20.528546 40.377616 0 73.114205 32.736589 73.114205 73.115228 0 19.705807-7.820106 37.591153-20.530592 50.730405l0.035816 0.034792-438.681134 438.685227-0.035816-0.035816c-13.280468 13.780865-31.915897 22.3838-52.585659 22.3838-0.071631 0-0.107447 0-0.178055 0-0.072655 0-0.10847 0-0.146333 0-20.669762 0-39.341007-8.601912-52.621475-22.3838l-0.035816 0.035816L20.336676 343.425653l0.179079-0.179079c-12.565177-13.139252-20.313651-30.951943-20.313651-50.587142 0-40.378639 32.736589-73.115228 73.114205-73.115228C95.485213 219.544205 115.334283 229.432413 128.759037 245.033739z","p-id","16368","fill","#bababa"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelement(1,"path",1),n.ɵɵelementEnd())},styles:[".expand[_ngcontent-%COMP%] {\n          -webkit-transform: rotate(180deg);\n          -moz-transform: rotate(180deg);\n          -o-transform: rotate(180deg);\n          -ms-transform: rotate(180deg);\n          transform: rotate(180deg);\n      }"]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Yt,[{type:n.Component,args:[{selector:"epsgis-icon-arrow-down",template:'\n    <svg t="1575033841131" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n      p-id="16367" width="16" height="16">\n      <path\n        d="M128.759037 245.033739l383.064442 383.064442 388.096039-388.097062 0.033769 0.070608c13.138228-12.709463 31.024597-20.528546 50.730405-20.528546 40.377616 0 73.114205 32.736589 73.114205 73.115228 0 19.705807-7.820106 37.591153-20.530592 50.730405l0.035816 0.034792-438.681134 438.685227-0.035816-0.035816c-13.280468 13.780865-31.915897 22.3838-52.585659 22.3838-0.071631 0-0.107447 0-0.178055 0-0.072655 0-0.10847 0-0.146333 0-20.669762 0-39.341007-8.601912-52.621475-22.3838l-0.035816 0.035816L20.336676 343.425653l0.179079-0.179079c-12.565177-13.139252-20.313651-30.951943-20.313651-50.587142 0-40.378639 32.736589-73.115228 73.114205-73.115228C95.485213 219.544205 115.334283 229.432413 128.759037 245.033739z"\n        p-id="16368" fill="#bababa"></path>\n    </svg>\n    ',styles:["\n      .expand {\n          -webkit-transform: rotate(180deg);\n          -moz-transform: rotate(180deg);\n          -o-transform: rotate(180deg);\n          -ms-transform: rotate(180deg);\n          transform: rotate(180deg);\n      }\n      "]}]}],null,null);var Zt=function(){};Zt.ɵfac=function(e){return new(e||Zt)},Zt.ɵcmp=n.ɵɵdefineComponent({type:Zt,selectors:[["epsgis-icon-arrow-left"]],decls:2,vars:0,consts:[["viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","width","16","height","16"],["d","M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelement(1,"path",1),n.ɵɵelementEnd())},styles:[".expand[_ngcontent-%COMP%]{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }"]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Zt,[{type:n.Component,args:[{selector:"epsgis-icon-arrow-left",template:'\n    <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n      width="16" height="16">\n      <path\n        d="M778.965749 128.759549l-383.064442 383.063419 388.097062 388.096039-0.070608 0.033769c12.709463 13.137205 20.529569 31.024597 20.529569 50.731428 0 40.376593-32.736589 73.112158-73.115228 73.112158-19.705807 0-37.591153-7.819083-50.730405-20.528546l-0.034792 0.035816L241.890654 564.622498l0.035816-0.035816c-13.779841-13.281491-22.3838-31.915897-22.3838-52.585659 0-0.071631 0-0.106424 0-0.178055 0-0.072655 0-0.10847 0-0.144286 0-20.669762 8.603959-39.341007 22.3838-52.622498l-0.035816-0.034792L680.573835 20.337187l0.180102 0.179079c13.139252-12.5662 30.950919-20.313651 50.587142-20.313651 40.378639 0 73.115228 32.736589 73.115228 73.114205C804.455283 95.485725 794.567076 115.334795 778.965749 128.759549z"\n        ></path>\n    </svg>\n    ',styles:["\n\n        .expand{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }\n        "]}]}],null,null);var Kt=function(){};Kt.ɵfac=function(e){return new(e||Kt)},Kt.ɵcmp=n.ɵɵdefineComponent({type:Kt,selectors:[["epsgis-icon-arrow-right"]],decls:2,vars:0,consts:[["viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","width","16","height","16"],["d","M245.034251 895.239428l383.063419-383.063419L240.001631 124.07997l0.070608-0.033769c-12.709463-13.137205-20.530592-31.024597-20.530592-50.731428 0-40.376593 32.736589-73.111135 73.115228-73.111135 19.705807 0 37.591153 7.819083 50.730405 20.528546l0.034792-0.035816 438.686251 438.681134-0.035816 0.034792c13.779841 13.281491 22.3838 31.915897 22.3838 52.586682 0 0.071631 0 0.106424 0 0.178055 0 0.072655 0 0.10847 0 0.144286 0 20.669762-8.603959 39.341007-22.3838 52.623521l0.035816 0.033769L343.426165 1003.661789l-0.180102-0.179079c-13.140275 12.565177-30.950919 20.313651-50.588165 20.313651-40.378639 0-73.115228-32.736589-73.115228-73.114205C219.544717 928.512229 229.432924 908.664182 245.034251 895.239428z","fill","#bababa"]],template:function(e,t){1&e&&(n.ɵɵnamespaceSVG(),n.ɵɵelementStart(0,"svg",0),n.ɵɵelement(1,"path",1),n.ɵɵelementEnd())},styles:[".expand[_ngcontent-%COMP%]{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }"]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Kt,[{type:n.Component,args:[{selector:"epsgis-icon-arrow-right",template:'\n    <svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg"\n      width="16" height="16">\n      <path\n        d="M245.034251 895.239428l383.063419-383.063419L240.001631 124.07997l0.070608-0.033769c-12.709463-13.137205-20.530592-31.024597-20.530592-50.731428 0-40.376593 32.736589-73.111135 73.115228-73.111135 19.705807 0 37.591153 7.819083 50.730405 20.528546l0.034792-0.035816 438.686251 438.681134-0.035816 0.034792c13.779841 13.281491 22.3838 31.915897 22.3838 52.586682 0 0.071631 0 0.106424 0 0.178055 0 0.072655 0 0.10847 0 0.144286 0 20.669762-8.603959 39.341007-22.3838 52.623521l0.035816 0.033769L343.426165 1003.661789l-0.180102-0.179079c-13.140275 12.565177-30.950919 20.313651-50.588165 20.313651-40.378639 0-73.115228-32.736589-73.115228-73.114205C219.544717 928.512229 229.432924 908.664182 245.034251 895.239428z"\n        fill="#bababa"></path>\n    </svg>\n    ',styles:["\n        .expand{\n            -webkit-transform: rotate(180deg);\n            -moz-transform: rotate(180deg);\n            -o-transform: rotate(180deg);\n            -ms-transform: rotate(180deg);\n            transform: rotate(180deg);\n        }\n        "]}]}],null,null);var en=[be,ye,ve,we,Ce,te,Zt,Kt,Yt],tn=function(){};tn.ɵmod=n.ɵɵdefineNgModule({type:tn}),tn.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||tn)},imports:[[t.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(tn,{declarations:[be,ye,ve,we,Ce,te,Zt,Kt,Yt],imports:[t.CommonModule],exports:[be,ye,ve,we,Ce,te,Zt,Kt,Yt]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(tn,[{type:n.NgModule,args:[{imports:[t.CommonModule],declarations:en,exports:en}]}],null,null);var nn=function(){};nn.ɵmod=n.ɵɵdefineNgModule({type:nn}),nn.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||nn)},providers:[],imports:[[t.CommonModule,a.FormsModule,l.NzIconModule,r.NzResultModule,W,Jt,$t,tn]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(nn,{declarations:[e.OnScreenWidgetIconComponent,e.OnScreenWidgetPanelComponent,e.DockablePanelAtLeftComponent,e.DockablePanelAtBottomComponent,e.DockablePanelAtRightComponent,e.IframePanelComponent,e.MobileActionPanelComponent,e.MobileDrawerPanelComponent,e.MobileModalPanelComponent,e.MobilePopupPanelComponent,Nt,qt,Xt,Qt,ee,Le],imports:[t.CommonModule,a.FormsModule,l.NzIconModule,r.NzResultModule,W,Jt,$t,tn],exports:[Le,qt,Xt,Qt]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(nn,[{type:n.NgModule,args:[{imports:[t.CommonModule,a.FormsModule,l.NzIconModule,r.NzResultModule,W,Jt,$t,tn],declarations:[e.OnScreenWidgetIconComponent,e.OnScreenWidgetPanelComponent,e.DockablePanelAtLeftComponent,e.DockablePanelAtBottomComponent,e.DockablePanelAtRightComponent,e.IframePanelComponent,e.MobileActionPanelComponent,e.MobileDrawerPanelComponent,e.MobileModalPanelComponent,e.MobilePopupPanelComponent,Nt,qt,Xt,Qt,ee,Le],entryComponents:[e.OnScreenWidgetIconComponent,e.OnScreenWidgetPanelComponent,e.DockablePanelAtLeftComponent,e.DockablePanelAtBottomComponent,e.DockablePanelAtRightComponent,e.IframePanelComponent,e.MobileActionPanelComponent,e.MobileDrawerPanelComponent,e.MobileModalPanelComponent,e.MobilePopupPanelComponent,Nt,ee],exports:[Le,qt,Xt,Qt],providers:[]}]}],null,null);var on=function(){function e(){this.widgetProperties=["inPanel","hasLocale","hasStyle","hasConfig","hasUIFile","hasSettingPage","hasSettingUIFile","hasSettingLocale","hasSettingStyle","keepConfigAfterMapSwithched","isController","hasVersionManager","isThemeWidget","supportMultiInstance"]}return e.prototype.isHostedService=function(){return!1},e.prototype.processWidgetProperties=function(e){void 0===e.properties&&(e.properties={}),void 0===e.properties.isController&&(e.properties.isController=!1),void 0===e.properties.isThemeWidget&&(e.properties.isThemeWidget=!1),void 0===e.properties.hasVersionManager&&(e.properties.hasVersionManager=!1),this.widgetProperties.forEach((function(t){void 0===e.properties[t]&&(e.properties[t]=!0)})),e.properties.hasLocale=!1,e.properties.supportMultiInstance=!1,e.properties.hasVersionManager=!1,e.properties.hasSettingLocale=!1,!0!==e.properties.hasSetting&&(e.properties.hasSettingPage=!1,e.properties.hasSettingUIFile=!1,e.properties.hasSettingStyle=!1)},e.prototype.processWidgetUriPara=function(e){if("string"==typeof e.uri&&e.uri.length>=1){var t=e.uri,n=new Object,o=t.lastIndexOf("?");if(o>=0){e.uri=t.substring(0,o);for(var i=t.substring(o+1).split("&"),r=0;r<i.length;r++)n[i[r].split("=")[0]]=decodeURIComponent(i[r].split("=")[1]);e.reqPara=n}}else e.uri=""},e.prototype.getConfigElementById=function(e,t){var n;return"map"===t?e.map:(this.visitElement(e,(function(e){if(e.id===t)return n=e,!0})),n)},e.prototype.visitElement=function(e,t){this.visitBigSection(e,"widgetOnScreen",t),this.visitBigSection(e,"widgetPool",t)},e.prototype.visitBigSection=function(e,t,n){var i,r,s,a,l,c=this,p="widgetOnScreen"===t,d="widgetPool"===t;if(e[t]){if(e[t].groups)for(i=0;i<e[t].groups.length;i++)if(s=e[t].groups[i],l={index:i,isWidget:!1,groupId:s.id,gid:s.id,isThemeWidget:!1,isOnScreen:p},n(s=o.extend(s,l),l),s.widgets)for(r=0;r<s.widgets.length;r++)a=s.widgets[r],l={index:r,isWidget:!0,groupId:s.id,gid:s.id,isThemeWidget:!1,isOnScreen:p},a=o.extend(a,l),Object.assign,this.processWidgetUriPara(a),n(a,l);if(e[t].widgets){var u=function(e,n){if(e.children&&e.children.length>=1)for(var r=0;r<e.children.length;r++){var s=e.children[r];l={index:i,isWidget:!0,groupId:t,gid:t,isThemeWidget:!1,isOnScreen:p,isHeadMenu:d},(s.groupId||s.gid)&&(l.groupId=s.groupId||s.gid,l.gid=l.groupId),s=o.extend(s,l),c.processWidgetUriPara(s),n(s,l),u(s,n)}};for(i=0;i<e[t].widgets.length;i++)a=e[t].widgets[i],l={index:i,isWidget:!0,groupId:t,gid:t,isThemeWidget:!1,isOnScreen:p,isHeadMenu:d},(a.groupId||a.gid)&&(l.groupId=a.groupId||a.gid,l.gid=l.groupId),a=o.extend(a,l),this.processWidgetUriPara(a),n(a,l),u(a,n)}}},e.prototype.getConfigElementByLabel=function(e,t){var n;return"map"===t?e.map:(this.visitElement(e,(function(e){if(e.label||e.name===t)return n=e,!0})),n)},e.prototype.getConfigElementsByName=function(e,t){var n=[];return"map"===t?[e.map]:(this.visitElement(e,(function(e){e.name===t&&n.push(e)})),n)},e.prototype.getConfigElementsByUri=function(e,t){var n=[];return"map"===t?[e.map]:(this.visitElement(e,(function(e){e.uri&&e.uri.toLowerCase()===t.toLowerCase()&&n.push(e)})),n)},e.prototype.getWidgetNameFromUri=function(e){var t=e.split("/");return t.pop(),t.pop()},e.prototype.getAmdFolderFromUri=function(e){var t=e.split("/");return t.pop(),t.join("/")+"/"},e}();on.ɵfac=function(e){return new(e||on)},on.ɵprov=n.ɵɵdefineInjectable({token:on,factory:on.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(on,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);var rn=function(e){return an(e)},sn=function(e,t){return"string"==typeof e&&(t=e,e=void 0),e||(e=window),t||(t="desktop"),vn[t](e)},an=function(e){void 0===e&&(e=window),e.Ionic=e.Ionic||{};var t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=ln(e)).forEach((function(t){return e.document.documentElement.classList.add("plt-"+t)})),t},ln=function(e){return Object.keys(vn).filter((function(t){return vn[t](e)}))},cn=function(e){return!!hn(e,/iPad/i)||!(!hn(e,/Macintosh/i)||!dn(e))},pn=function(e){return hn(e,/android|sink/i)},dn=function(e){return!!navigator.userAgent.match(/AppleWebkit.*Mobile.*/)||"ontouchstart"in e||mn(e,"(pointer:coarse)")||!!mn(e,"-moz-touch-enabled")},un=function(e){return gn(e)||fn(e)},gn=function(e){return!!(e.cordova||e.phonegap||e.PhoneGap)},fn=function(e){var t=e.Capacitor;return!(!t||!t.isNative)},hn=function(e,t){return t.test(e.navigator.userAgent)},mn=function(e,t){return e.matchMedia(t).matches},vn={ipad:cn,iphone:function(e){return hn(e,/iPhone/i)},ios:function(e){return hn(e,/iPhone|iPod/i)||cn(e)},android:pn,phablet:function(e){var t=e.innerWidth,n=e.innerHeight,o=Math.min(t,n),i=Math.max(t,n);return o>390&&o<520&&i>620&&i<800},tablet:function(e){var t=e.innerWidth,n=e.innerHeight,o=Math.min(t,n),i=Math.max(t,n);return cn(e)||function(e){return pn(e)&&!hn(e,/mobile/i)}(e)||o>460&&o<820&&i>780&&i<1400},cordova:gn,capacitor:fn,electron:function(e){return hn(e,/electron/i)},pwa:function(e){return!(!e.matchMedia("(display-mode: standalone)").matches&&!e.navigator.standalone)},mobile:dn,mobileweb:function(e){return dn(e)&&!un(e)},desktop:function(e){return!dn(e)},hybrid:un},yn=function(e){function t(t){var n=e.call(this)||this;return n.globalParams=t,n}return w(t,e),t.prototype.getUriInfo=function(e){if(!e||e.indexOf(this.globalParams.appInfo.folderUrlPrefix)>=0)return{};var t,n,o={};return t=e.indexOf("/"),e.substring(0,t),n=e.substring(0,e.lastIndexOf("/")+1),!0===this.globalParams.jimuConfig.isDesignMode&&this.globalParams.appInfo.folderUrlPrefix?o.folderUrl=this.globalParams.appInfo.folderUrlPrefix+"/"+n:o.folderUrl=n,o.amdFolder=n,o},t.prototype.processWidgetSetting=function(e){return e.uri?(o.extend(e,this.getUriInfo(e.uri)),e.position||(e.position={left:100,top:100,width:300,height:400,relativeTo:"map"}),e):e},t.prototype.addManifest2WidgetJson=function(e,t){o.extend(e,t.properties),e.name=t.name,e.label||(e.label=t.label),e.manifest=t},t.prototype.addManifestProperies=function(e){e.url&&(e.icon=e.url+"images/icon.png"),"theme"===e.category?this.addThemeManifestProperies(e):this.addWidgetManifestProperties(e)},t.prototype.addThemeManifestProperies=function(e){e.panels.forEach((function(e){e.uri="panels/"+e.name+"/Panel.js"})),e.styles.forEach((function(e){e.uri="styles/"+e.name+"/style.css"})),e.layouts.forEach((function(e){e.uri="layouts/"+e.name+"/config.json",e.icon="layouts/"+e.name+"/icon.png",e.RTLIcon="layouts/"+e.name+"/icon_rtl.png"}))},t.prototype.addWidgetManifestProperties=function(t){void 0!==t["2D"]&&(t.support2D=t["2D"]),void 0!==t["3D"]&&(t.support3D=t["3D"]),void 0===t["2D"]&&void 0===t["3D"]&&(t.support2D=!0),delete t["2D"],delete t["3D"],void 0===t.properties&&(t.properties={}),e.prototype.processWidgetProperties.call(this,t)},t.prototype.processManifestLabel=function(e,t){e.label=e.i18nLabels&&(e.i18nLabels[t]||e.i18nLabels.defaultLabel)||e.label||e.name,e.layouts&&o.forEach(e.layouts,(function(n){var o="i18nLabels_layout_"+n.name;n.label=e[o]&&(e[o][t]||e[o].defaultLabel)||n.label||n.name})),e.styles&&o.forEach(e.styles,(function(n){var o="i18nLabels_style_"+n.name;n.label=e[o]&&(e[o][t]||e[o].defaultLabel)||n.label||n.name}))},t.prototype.replacePlaceHolder=function(e,t){var n,o=JSON.stringify(e),i=o.match(/\$\{(\w)+\}/g);if(null===i)return e;for(n=0;n<i.length;n++){var r=i[n].match(/(\w)+/g)[0];t[r]&&(o=o.replace(i[n],t[r]))}return JSON.parse(o)},t.prototype.addI18NLabel=function(e){return new Promise((function(t,n){e.i18nLabels||(e.i18nLabels={},e.properties&&!1===e.properties.hasLocale&&t(e)),t(e)}))},t.prototype.processUrlInAppConfig=function(e){if(e)return e.startWith("data:")||e.startWith("http")||e.startWith("/")?e:this.globalParams.appInfo.appPath+e},t.prototype.isEqual=function(e,t){var n,o;return n=[],o=[],!!function e(t,i){var r;if(null===t&&null===i||void 0===t&&void 0===i)return!0;if(null===t&&null!==i||null===i&&null!==t||void 0===t&&void 0!==i||void 0===i&&void 0!==t)return!1;if(isNaN(t)&&isNaN(i)&&"number"==typeof t&&"number"==typeof i)return!0;if(t===i)return!0;if("function"==typeof t&&"function"==typeof i||t instanceof Date&&i instanceof Date||t instanceof RegExp&&i instanceof RegExp||t instanceof String&&i instanceof String||t instanceof Number&&i instanceof Number)return t.toString()===i.toString();if(n.indexOf(t)>-1||o.indexOf(i)>-1)return!1;if(null!==i){for(r in i){if(i.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;if(typeof i[r]!=typeof t[r])return!1}for(r in t){if(i.hasOwnProperty(r)!==t.hasOwnProperty(r))return!1;if(typeof i[r]!=typeof t[r])return!1;switch(typeof t[r]){case"object":case"function":if(n.push(t),o.push(i),!e(t[r],i[r]))return!1;n.pop(),o.pop();break;default:if(t[r]!==i[r])return!1}}}return!0}(e,t)},t.prototype.deleteMapOptions=function(e){e&&(delete e.extent,delete e.lods,delete e.center,delete e.scale,delete e.zoom,delete e.maxScale,delete e.maxZoom,delete e.minScale,delete e.minZoom)},t.prototype.reCreateObject=function(e){function t(e){var o=[];return e.forEach((function(e){Array.isArray(e)?o.push(t(e)):"object"==typeof e?o.push(n(e)):o.push(e)})),o}function n(e){var o={};for(var i in e)e.hasOwnProperty(i)&&(null===e[i]?o[i]=null:Array.isArray(e[i])?o[i]=t(e[i]):"object"==typeof e[i]?o[i]=n(e[i]):o[i]=e[i]);return o}return Array.isArray(e)?t(e):n(e)},t.prototype.getPositionStyle=function(e){var t={};if(!e)return t;for(var n=o.clone(e),i=["left","top","right","bottom","width","height","padding","paddingLeft","paddingRight","paddingTop","paddingBottom"],r=0;r<i.length;r++){var s=i[r];"number"==typeof n[s]?t[s]=n[s]+"px":void 0!==n[s]?t[s]=n[s]:"padding"===s.substr(0,7)?t[s]=0:t[s]="auto"}return void 0===n.zIndex?t.zIndex=this.globalParams.jimuConfig.zIndex:t.zIndex=n.zIndex,t},t.detectChanges=function(e){e&&!1===e.destroyed&&e.detectChanges()},t}(on);yn.ɵfac=function(e){return new(e||yn)(n.ɵɵinject(D))},yn.ɵprov=n.ɵɵdefineInjectable({token:yn,factory:yn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(yn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:D}]}),null);var Cn=function(){function e(e,t){var n=this;this.doc=e,this.backButton=new p.Subject,this.pause=new p.Subject,this.resume=new p.Subject,this.resize=new p.Subject,t.run((function(){var o;n.win=e.defaultView,n.backButton.subscribeWithPriority=function(e,n){return this.subscribe((function(o){return o.register(e,(function(){return t.run(n)}))}))},bn(n.pause,e,"pause"),bn(n.resume,e,"resume"),bn(n.backButton,e,"ionBackButton"),bn(n.resize,n.win,"resize"),n._readyPromise=new Promise((function(e){o=e})),n.win&&n.win.cordova?e.addEventListener("deviceready",(function(){o("cordova")}),{once:!0}):o("dom")}))}return e.prototype.is=function(e){return sn(this.win,e)},e.prototype.platforms=function(){return rn(this.win)},e.prototype.ready=function(){return this._readyPromise},Object.defineProperty(e.prototype,"isRTL",{get:function(){return"rtl"===this.doc.dir},enumerable:!1,configurable:!0}),e.prototype.getQueryParam=function(e){return wn(this.win.location.href,e)},e.prototype.isLandscape=function(){return!this.isPortrait()},e.prototype.isPortrait=function(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches},e.prototype.testUserAgent=function(e){var t=this.win.navigator;return!!(t&&t.userAgent&&t.userAgent.indexOf(e)>=0)},e.prototype.url=function(){return this.win.location.href},e.prototype.width=function(){return this.win.innerWidth},e.prototype.height=function(){return this.win.innerHeight},e}();Cn.ɵfac=function(e){return new(e||Cn)(n.ɵɵinject(t.DOCUMENT),n.ɵɵinject(n.NgZone))},Cn.ɵprov=n.ɵɵdefineInjectable({token:Cn,factory:Cn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Cn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:void 0,decorators:[{type:n.Inject,args:[t.DOCUMENT]}]},{type:n.NgZone}]}),null);var wn=function(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},bn=function(e,t,n){t&&t.addEventListener(n,(function(t){e.next(null!=t?t.detail:void 0)}))},_n=function(){function e(e,t){this.utils=e,this.platform=t}return e.prototype.createPromiseDefer=function(){var e,t,n=new Promise((function(){e=arguments[0],t=arguments[1]}));return{resolve:e,reject:t,promise:function(){return n}}},e.prototype.getComponentRootNode=function(e){return e?e.hostView.rootNodes[0]:(console.log("componentRef undefined"),null)},e.prototype.getElementBounds=function(e){if(!e)return null;var t=e.getBoundingClientRect(),n=document.documentElement.clientTop,o=document.documentElement.clientLeft;return{top:t.top-n,left:t.left-o,bottom:t.bottom-n,right:t.right-o,width:t.width,height:t.height}},e.prototype.getPx=function(e){if(!e)return"0px";if("string"==typeof e&&e.indexOf("px")>=0)return e;if(e.toString().indexOf("%")>=0||"auto"===e)return e;if("number"==typeof e)return e+"px";var t=parseFloat(e);return isNaN(t)?"0px":t+"px"},e.prototype.getPxNumber=function(e){if(!e)return 0;if("string"==typeof e&&e.indexOf("px")>=0)return parseInt(e,10);if(e.toString().indexOf("%")>=0||"auto"===e)return e;if("number"==typeof e)return e;var t=parseFloat(e.toString());return isNaN(t)?0:t},e.prototype.getPosition=function(e){var t=new L;return(e.top||0==e.top)&&(t.top=this.getPx(e.top)),(e.left||0==e.left)&&(t.left=this.getPx(e.left)),(e.right||0==e.right)&&(t.right=this.getPx(e.right)),(e.bottom||0==e.bottom)&&(t.bottom=this.getPx(e.bottom)),e.width||0==e.width?t.width=this.getPx(e.width):t.width="100%",e.height||0==e.height?t.height=this.getPx(e.height):t.height="100%",(e.zIndex||0==e.zIndex)&&(t.zIndex=e.zIndex),t},e.prototype.setWidgetPosition=function(e,t){var n=this.getComponentRootNode(e),o=this.utils.getPositionStyle(t);n.style.position="absolute",(o.top||0==o.top)&&(n.style.top=o.top),(o.right||0==o.right)&&(n.style.right=o.right),(o.bottom||0==o.bottom)&&(n.style.bottom=o.bottom),(o.left||0==o.left)&&(n.style.left=o.left),(o.width||0==o.width)&&(n.style.width=o.width),(o.height||0==o.height)&&(n.style.height=o.height),(o.zIndex||0==o.zIndex)&&(n.style.zIndex=o.zIndex)},e.prototype.is=function(e){return sn(this.win,e)},e.prototype.getPlatformName=function(){return this.isAndroid()?"android":this.isIos()?"ios":this.isMobile()?"unknown":"browser"},e.prototype.isMobileNotTablet=function(){return this.isMobile()&&0==this.platform.is("ipad")&&0==this.platform.is("phablet")&&0==this.platform.is("tablet")},e.prototype.isMobile=function(){return this.platform.is("mobile")||this.platform.is("mobileweb")},e.prototype.isMobileRealMachine=function(){return this.platform.is("mobile")&&!this.platform.is("mobileweb")},e.prototype.isAndroid=function(){return this.isMobileRealMachine()&&this.platform.is("android")},e.prototype.isIos=function(){return this.isMobileRealMachine()&&(this.platform.is("ios")||this.platform.is("ipad")||this.platform.is("iphone"))},e}();_n.ɵfac=function(e){return new(e||_n)(n.ɵɵinject(yn),n.ɵɵinject(Cn))},_n.ɵprov=n.ɵɵdefineInjectable({token:_n,factory:_n.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(_n,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:yn},{type:Cn}]}),null);var Mn=function(){function e(e){this.componentFactoryResolver=e,this.viewContainerInHome=null,this.viewContainerInMap=null,this.serviceInjector=null,this.factories=null,this.factoriesArray=null,this.factories=this.componentFactoryResolver._factories,this.factories&&(this.factoriesArray=Array.from(this.factories))}return e.prototype.createComponent=function(e,t,o){var i={};t&&(i=t);var r=Object.keys(i).map((function(e){return{provide:e,useValue:i[e]}})),s=n.Injector.create({providers:r,parent:null==o?void 0:o.parentInjector}),a=this.componentFactoryResolver.resolveComponentFactory(e).create(s);return"function"==typeof a.instance.setServiceInjector&&a.instance.setServiceInjector(this.serviceInjector),a},e.prototype.getComponentPath=function(e){var t=G(e);if(t)return t.path||t.uri;var n=this.findComponent(e);return n&&"function"==typeof n.getCompInfo?n.getCompInfo().path:""},e.prototype.findComponent=function(e){var t=null;if(this.factories){if(!this.factories||this.factories.size<=0)return null;var n=this.factoriesArray.find((function(t,n,o){return t[1].selector.toLowerCase()===e.toLowerCase()}));n&&(t=n[0])}else{var o=G(e);if(o)return o.component}return t},e.prototype.getServiceInjector=function(){return this.serviceInjector},e.prototype.setServiceInjector=function(e){this.serviceInjector=e},e.prototype.setViewContainerInHome=function(e){this.viewContainerInHome=e},e.prototype.createComponentToHome=function(e,t){return this.createComponent(e,t,this.viewContainerInHome)},e.prototype.showInHome=function(e){e&&(this.viewContainerInHome?this.viewContainerInHome.insert(e.hostView):console.error("未设置容器，无法显示组件"))},e.prototype.setViewContainerInMap=function(e){this.viewContainerInMap=e},e.prototype.createComponentToMap=function(e,t){return this.createComponent(e,t,this.viewContainerInMap)},e.prototype.showInMap=function(e){e&&(this.viewContainerInMap?this.viewContainerInMap.insert(e.hostView):console.error("未设置容器，无法显示组件"))},e.prototype.ngOnDestroy=function(){this.viewContainerInHome&&this.viewContainerInHome.clear(),this.viewContainerInMap&&this.viewContainerInMap.clear()},e}();Mn.ɵfac=function(e){return new(e||Mn)(n.ɵɵinject(n.ComponentFactoryResolver))},Mn.ɵprov=n.ɵɵdefineInjectable({token:Mn,factory:Mn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Mn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:n.ComponentFactoryResolver}]}),null);var xn=function(){},Sn=function(){},Pn=function(){},In=function(){},On=function(){function e(e){this.index=0,this.configId="",this.id="dijit__WidgetBase_"+this.index,this.class="jimu-widget-placeholder",this.params=null,this.params=e}return e.prototype.postCreate=function(){},e.prototype.moveTo=function(e){},e.prototype.setIndex=function(e){},e}(),En=function(){function e(){this.rss=new d.EventEmitter,this._mapLoaded="manLoaded",this._mapChanged="mapChanged",this._viewLoaded="viewLoaded",this._viewChanged="viewChanged",this._widget_Created="widget-created",this._widgetCreated="widgetCreated",this._designConfigChanged="DesignConfigChanged",this._appConfigLoaded="appConfigLoaded",this._appConfigChanged="appConfigChanged",this._header_ConfigChanged="header-configChanged",this._createPanelContainer="createPanelContainer",this._mapPositionChanged="mapPositionChanged",this._checkChangeDetector="detectChanges",this._imageViewerIndexChanged="imageViewerIndexChanged"}return e.prototype.removeListener=function(e,t){return"function"==typeof t?this.rss.removeListener(e,t):this.rss},e}();En.ɵfac=function(e){return new(e||En)},En.ɵprov=n.ɵɵdefineInjectable({token:En,factory:En.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(En,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);var kn=function(){function t(e,t){this.httpClient=e,this.config=t,this.ServiceUrl="",this.headers=(new i.HttpHeaders).set("Content-type","application/json; charset=UTF-8"),this._tokenKey="__token",this._tokenValue="",this.ServiceUrl=t.apiRootUrl}return t.prototype.getLocalToken=function(){if(window.sessionStorage){var e=sessionStorage.getItem(this._tokenKey);if(""!=e)return JSON.parse(e)}else console.log("浏览器不支持sessionStorage");return null},t.prototype.getTokenKey=function(){return this._tokenKey},t.prototype.setAccessToken=function(e){this._tokenValue=e},t.prototype.getAccessToken=function(){var e="";if(this._tokenValue)e=this._tokenValue;else{var t=this.getLocalToken();t&&(this.setAccessToken(t.access_token),e=t.access_token)}return e},t.prototype.getAuthHeaders=function(){return this.headers.set("Authorization","Bearer "+this.getAccessToken())},t.prototype.getJsonFile=function(e){return this.httpClient.get(e,{responseType:"json"}).toPromise()},t.prototype._toHttpParams=function(e){if(!e)return null;var t={};return e.forEach((function(e){t[e.name]=e.value})),new i.HttpParams({fromObject:t})},t.prototype._toParaString=function(e){if(!e||e.length<=0)return"";var t="";return e.forEach((function(e){t+="&"+e.name+"="+e.value})),t.substring(1)},t.prototype._toHttpParams2=function(e){return"string"==typeof e?new i.HttpParams({fromString:e}):new i.HttpParams({fromObject:e})},t.prototype._toParaString2=function(e){if(!e)return"";if("string"==typeof e)return e.startsWith("&")||e.startsWith("?")?e.substring(1):e;var t="";for(var n in e)e.hasOwnProperty(n)&&(t+="&"+n+"="+e[n]);return t.substring(1)},t.prototype.getNoAuthGeneric=function(e,t,n){var o=this.ServiceUrl;return n&&(o=n),this.httpClient.get(o+"/"+e,{headers:this.headers,params:this._toHttpParams2(t)}).toPromise()},t.prototype.getNoAuth=function(e,t,n){return this.getNoAuthGeneric(e,t,n)},t.prototype.getGeneric=function(e,t,n){var o=this.ServiceUrl;return n&&(o=n),this.httpClient.get(o+"/"+e,{headers:this.getAuthHeaders(),params:this._toHttpParams2(t)}).toPromise()},t.prototype.get=function(e,t,n){return this.getGeneric(e,t,n)},t.prototype.getPage=function(t,n,o,i,r,s,a){n<=0&&(n=1),o<=0&&(o=20);var l={page:n.toString(),size:o.toString(),orderby:i||"",direction:r===e.OrderByType.desc?"1":"0"},c=this._toParaString2(l);return s&&(c=c+"&"+this._toParaString2(s)),this.getGeneric(t,c,a)},t.prototype.postNoAuthGeneric=function(e,t,n,o){var i=this.ServiceUrl;return"string"==typeof n&&n&&(i=n),!0===o||"boolean"==typeof n&&!0===n?this.httpClient.post(i+"/"+e,t,{headers:this.headers}).toPromise():this.httpClient.post(i+"/"+e,this._toParaString2(t),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"}}).toPromise()},t.prototype.postNoAuth=function(e,t,n,o){return this.postNoAuthGeneric(e,t,n,o)},t.prototype.postGeneric=function(e,t,n,o){var i=this.ServiceUrl;return"string"==typeof n&&n&&(i=n),!0===o||"boolean"==typeof n&&!0===n?this.httpClient.post(i+"/"+e,t,{headers:this.getAuthHeaders()}).toPromise():this.httpClient.post(i+"/"+e,this._toParaString2(t),{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",Authorization:"Bearer "+this.getAccessToken()}}).toPromise()},t.prototype.post=function(e,t,n,o){return this.postGeneric(e,t,n,o)},t.prototype.postPage=function(t,n,o,i,r,s,a,l){n<=0&&(n=1),o<=0&&(o=20);var c={page:n.toString(),size:o.toString(),orderby:i||"",direction:r===e.OrderByType.desc?"1":"0"},p=this._toParaString2(c);return s&&(p=p+"&"+this._toParaString2(s)),this.postGeneric(t,p,a,l)},t.prototype.deleteGeneric=function(e,t,n){var o=this.ServiceUrl;return n&&(o=n),this.httpClient.delete(o+"/"+e,{params:this._toHttpParams2(t),headers:{Authorization:"Bearer "+this.getAccessToken()}}).toPromise()},t.prototype.delete=function(e,t,n){return this.deleteGeneric(e,t,n)},t}();kn.ɵfac=function(e){return new(e||kn)(n.ɵɵinject(i.HttpClient),n.ɵɵinject(D))},kn.ɵprov=n.ɵɵdefineInjectable({token:kn,factory:kn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(kn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:i.HttpClient},{type:D}]}),null);var Dn=function(){function t(e,t,n,o,i,r){this.globalParams=e,this.eventService=t,this.utils=n,this.httpService=o,this.commonService=i,this.componentLoader=r,this.loaded=null,this.missedActions=null,this.activeWidget=null,this.map=null,this.view=null,this.appConfig=null,this.loaded=[],this.missedActions=[],this.activeWidget=null}return t.prototype.setMap=function(e){!0===this.globalParams.mapConfig.is3D?this.view=e:this.map=e},t.prototype.setAppConfig=function(e){this.appConfig=e},t.prototype._onMapLoaded=function(e){},t.prototype._onMapChanged=function(e){},t.prototype.loadConfig=function(t,n){var o=this;n.appConfig=this.appConfig,n.view=this.view,n.map=this.map;var i=this.commonService.createPromiseDefer(),r=this.appConfig.widgetOnScreen.widgets.find((function(e){return e.uri.toLowerCase()===t.uri.toLowerCase()}));if(r)r.config||this.tryLoadWidgetConfig(r).then((function(t){return o.setWidgetPorp(n,t),n.started=!0,n.state=e.WidgetState.opened,i.resolve(!0)})).catch((function(e){return i.resolve(!0)}));else{var s={widgetOnScreen:{widgets:[{uri:t.uri,label:t.name}]}};this.configLoader._upgradeAppConfig(s),this.configLoader._processAfterTryLoad(s),this.configLoader.loadWidgetsManifest(s).then((function(t){var r=t.widgetOnScreen.widgets[0];o.tryLoadWidgetConfig(r).then((function(t){return o.setWidgetPorp(n,t),n.started=!0,n.state=e.WidgetState.opened,i.resolve(!0)})).catch((function(e){return i.resolve(!0)}))}))}return i.promise()},t.prototype.openWidget=function(t){var n=this,i=function(e){var i=o.cloneDeep(t),s=e.inPanel;!0===t.onlyCreateWidget&&(s=!1),!1!==s?n.panelManager.showPanel(e,null,t.panel,i).then((function(e){e.instance.isDockable()&&n.panelManager.onMapResize(),r.resolve(e)})):n.loadWidget(e,i).then((function(o){!0===t.onlyCreateWidget?r.resolve(o):(n.showWidget(o),o.instance.setPosition(e.position),n.commonService.setWidgetPosition(o,e.position),e.loaded=!0,o.instance.configId=e.id,r.resolve(o.instance))})).catch((function(e){return r.reject(e)}))},r=this.commonService.createPromiseDefer();if(!t.uri)return console.error("no uri"),r.reject(new Error("no uri")),r.promise();var s=this.appConfig.widgetOnScreen.widgets.find((function(e){return e.uri.toLowerCase()===t.uri.toLowerCase()}));if(s)i(s);else{if(!t.position)return console.error("no position"),r.reject(new Error("no position")),r.promise();var a={label:"",uri:t.uri,position:{}};if(a.position=o.merge(a.position,t.position),t.panel&&(a.label=t.panel.title,t.panel.dockSide))switch(t.panel.dockSide){case e.PanelDockMode.left:a.panel={uri:"epsgis-dockable-panel-at-left"};break;case e.PanelDockMode.bottom:a.panel={uri:"epsgis-dockable-panel-at-bottom"};break;case e.PanelDockMode.right:a.panel={uri:"epsgis-dockable-panel-at-right"}}a.label||(a.label=a.uri);var l={widgetOnScreen:{widgets:[a]}};this.configLoader._processAfterTryLoad(l),this.configLoader.loadWidgetsManifest(l).then((function(e){var t=e.widgetOnScreen.widgets[0];n.appConfig.widgetOnScreen.widgets.push(t),i(t)})).catch((function(e){return r.reject(e)}))}return r.promise()},t.prototype.loadWidget=function(e,t){var n,i=this.commonService.createPromiseDefer();return(e=o.clone(e)).folderUrl||this.utils.processWidgetSetting(e),(n=this.getWidgetById(e.id))?(t&&(n.instance.reqPara=t.param),i.resolve(n)):i.resolve(this.createWidget(e,t)),i.promise()},t.prototype.setWidgetPorp=function(e,t){t.rawConfig=o.cloneDeep(t),t.class="jimu-widget",t.label||(t.label=t.name),this.globalParams.mapConfig.is3D?this.view&&(t.view=this.view,e.view=this.view):this.map&&(t.map=this.map,e.map=this.map),e.appConfig=this.appConfig,e.widgetConfig=t,e.config=t.config,e.configId=e.id=t.id,e.folderUrl=t.folderUrl,e.icon=t.icon,e.label=e.title=e.tooltip=t.label,e.baseClass=t.class,e.gid=t.gid,e.uri=t.uri,e.openAtStart=!0===t.openAtStart,t.manifest&&t.manifest.properties&&!1===t.manifest.properties.inPanel?e.inPanel=t.inPanel=t.manifest.properties.inPanel:e.inPanel=t.inPanel=!0},t.prototype.createWidget=function(e,t){return _(this,void 0,void 0,(function(){var n,o,i,r,s,a,l;return M(this,(function(c){switch(c.label){case 0:if(n=this.commonService.createPromiseDefer(),i=this.getWidgetById(e.id))return n.resolve(i),[2,n.promise()];c.label=1;case 1:return c.trys.push([1,6,,7]),r=this.componentLoader.findComponent(e.uri),s=null,!1,r?("map"!==e.position.relativeTo?s=this.componentLoader.createComponentToHome(r):(s=this.componentLoader.createComponentToMap(r),!0),s?(o=s.instance,t&&(o.reqPara=t.param),e.config?[3,3]:[4,this.tryLoadWidgetConfig(e)]):(a="widget ["+e.label+"] create fail",console.log(a),n.reject(new Error(a)),[2,n.promise()])):(a="widget ["+e.uri+"] not find",console.log(a),n.reject(new Error(a)),[2,n.promise()]);case 2:c.sent(),c.label=3;case 3:return e.manifest?[3,5]:[4,this.loadWidgetManifest(e)];case 4:c.sent(),c.label=5;case 5:return this.setWidgetPorp(o,e),this.loaded.push(s),console.log("widget ["+e.uri+"] created."),this.eventService.rss.emit(this.eventService._widgetCreated,o),n.resolve(s),[3,7];case 6:return l=c.sent(),console.log("create ["+e.uri+"] error:"+l.stack),n.reject(l),[3,7];case 7:return[2,n.promise()]}}))}))},t.prototype.getAllWidgets=function(){return this.loaded},t.prototype.loadWidgetClass=function(e){return this.commonService.createPromiseDefer().promise()},t.prototype.loadWidgetResources=function(e){return this.commonService.createPromiseDefer().promise()},t.prototype.tryLoadWidgetConfig=function(e){var t=this.commonService.createPromiseDefer(),n=e.configPath||"config.json",o=e.folderUrl+n,i=e.folderUrl.split("?");if(i.length>0&&(o=i[0]+n+"?"+(i[1]?i[1]:"")),e.config)return t.resolve(e),t.promise();try{this.httpService.getJsonFile(o).then((function(n){e.config=n,t.resolve(e)})).catch((function(n){console.error("load ["+e.uri+"] config.json error"),console.error(n),t.resolve(e)}))}catch(n){console.error(n),t.resolve(e)}return t.promise()},t.prototype._tryLoadWidgetConfig=function(e){},t.prototype.loadWidgetManifest=function(e){var t=this,n=this.commonService.createPromiseDefer(),o=e.folderUrl+"manifest.json",i=e.folderUrl.split("?");if(i.length>0&&(o=i[0]+"manifest.json?"+(i[1]?i[1]:"")),e.manifest)return n.resolve(e),n.promise();var r=function(o){o.amdFolder=e.amdFolder,o.category="widget";var i="auto",r="auto";!1!==o.properties.inPanel&&(i="300",r="400"),void 0===e.position.width&&(e.position.width=i),void 0===e.position.height&&(e.position.height=r),e.label?(t._processManifest(o),t.utils.addManifest2WidgetJson(e,o),n.resolve(e)):t.utils.addI18NLabel(o).then((function(){t._processManifest(o),t.utils.addManifest2WidgetJson(e,o),n.resolve(e)}))};return this.httpService.getJsonFile(o).then(r).catch((function(t){if(4===t.readyState&&200===t.status&&""===t.responseText){var o={};o.amdFolder=e.amdFolder,o.category="widget",r(o)}else console.error("load ["+e.uri+"] config.json error"),console.error(t),n.resolve(e)})),n.promise()},t.prototype.loadWidgetSettingPage=function(e){return this.commonService.createPromiseDefer().promise()},t.prototype.loadWidgetSettingClass=function(e){return this.commonService.createPromiseDefer().promise()},t.prototype.loadWidgetSettingPageResources=function(e){return this.commonService.createPromiseDefer().promise()},t.prototype.createWidgetSetting=function(e,t){return null},t.prototype._hideLoading=function(){},t.prototype.getWidgetById=function(e){var t;return o.some(this.loaded,(function(n){if(n.instance.id===e)return t=n,!0})),t},t.prototype.getWidgetByLabel=function(e){var t;return o.some(this.loaded,(function(n){if(n.instance.label===e)return t=n,!0})),t},t.prototype.getWidgetsByName=function(e){var t=[];return o.some(this.loaded,(function(n){n.instance.name===e&&t.push(n)})),t},t.prototype.getOpenedWidgetByGroupId=function(t){return o.find(this.loaded,(function(n){return n.instance.gid===t&&(n.instance.state===e.WidgetState.opened||n.instance.state===e.WidgetState.active)}))},t.prototype.showWidget=function(t){if(t){var n=t.instance;if("string"!=typeof n||(n=this.getWidgetById(n))){if(!n.started)try{n.started=!0,"browser"===n.widgetConfig.position.relativeTo?this.componentLoader.showInHome(t):this.componentLoader.showInMap(t),n.startup()}catch(e){console.error("fail to startup widget "+n.name+". "+e.stack)}if(n.state===e.WidgetState.closed){n.setState(e.WidgetState.opened);try{n.onOpen()}catch(e){console.error("fail to open widget "+n.name+". "+e.stack)}}}}},t.prototype.closeOtherWidgetsInTheSameGroup=function(e){if("string"!=typeof e||(e=this.getWidgetById(e)))for(var t=this.getAllWidgets(),n=0;n<t.length;n++)t[n].instance.gid===e.instance.gid&&t[n].instance.id!==e.instance.id&&this.closeWidget(t[n])},t.prototype.closeAllWidgetsInGroup=function(e){for(var t=this.getAllWidgets(),n=0;n<t.length;n++)t[n].instance.gid===e&&this.closeWidget(t[n])},t.prototype.closeWidget=function(t){var n,o=this.commonService.createPromiseDefer();if(!(n="string"==typeof t?this.getWidgetById(t):t))return o.reject(new Error("widget is null")),o.promise();if(n.instance.state!==e.WidgetState.closed)try{this.activeWidget&&this.activeWidget.instance.id===n.instance.id&&(this.activeWidget.instance.onDeActive(),this.activeWidget=null),this.commonService.getComponentRootNode(n).style.display="none",n.instance.setState(e.WidgetState.closed),n.instance.onClose(),o.resolve(n)}catch(e){console.log(console.error("fail to close widget "+n.instance.name+". "+e.stack)),o.reject(e)}return o.promise()},t.prototype.destroyWidget=function(e){var t;if("string"==typeof e){if(!(t=this.getWidgetById(e)))return;e=t}this._removeWidget(e);try{e.destroy(),console.log("destroy widget ["+e.instance.id+"].")}catch(t){console.log(console.error("fail to destroy widget "+e.instance.name+". "+t.stack))}},t.prototype._processManifest=function(e){this.utils.addManifestProperies(e),this.utils.processManifestLabel(e,"zh-cn")},t.prototype._tryLoadResource=function(e,t){return this.commonService.createPromiseDefer().promise()},t.prototype._replaceId=function(e){return e.replace(/\//g,"_").replace(/\./g,"_")},t.prototype.loadWidgetStyle=function(e){},t.prototype.loadWidgetSettingStyle=function(e){},t.prototype.loadWidgetConfig=function(e){},t.prototype.loadWidgetI18n=function(e){},t.prototype.loadWidgetSettingI18n=function(e){},t.prototype.loadWidgetTemplate=function(e){return this.commonService.createPromiseDefer().promise()},t.prototype.loadWidgetSettingTemplate=function(e){return this.commonService.createPromiseDefer().promise()},t.prototype.getOnScreenOffPanelWidgets=function(){return o.filter(this.loaded,(function(e){return e.instance.isOnScreen&&!e.instance.inPanel||e.instance.widgetConfig.isOnScreen&&!e.instance.widgetConfig.inPanel}))},t.prototype._postWidgetStartup=function(e){},t.prototype._triggerMissedAction=function(e){this.missedActions.forEach((function(t){t.id===e.instance.id&&e.instance.onAction(t.action.name,t.action.data)}))},t.prototype._remove=function(e){var t=this;return o.some(this.loaded,(function(n,o){if(n.instance.id===e)return t.loaded.splice(o,1),!0}))},t.prototype._onDestroyWidget=function(t){t.instance.state!==e.WidgetState.closed&&this.closeWidget(t),this._removeWidget(t),console.log("destroy widget ["+t.instance.uri+"].")},t.prototype._onDestroyWidgetSetting=function(e){this.removeWidgetSettingStyle(e)},t.prototype._removeWidget=function(e){var t;if("string"==typeof e){if(!(t=this.getWidgetById(e)))return;e=t}this.activeWidget&&this.activeWidget.instance.id===e.instance.id&&(this.activeWidget=null),this._remove(e.instance.id),0===this.getWidgetsByName(e.instance.name).length&&this.removeWidgetStyle(e)},t.prototype.removeWidgetStyle=function(e){},t.prototype.removeWidgetSettingStyle=function(e){},t.prototype._onClickWidget=function(e,t){this._activeWidget(e)},t.prototype._activeWidget=function(e){},t.prototype.getOffPanelWidgets=function(){return o.filter(this.loaded,(function(e){return!e.instance.inPanel}))},t}();Dn.ɵfac=function(e){return new(e||Dn)(n.ɵɵinject(D),n.ɵɵinject(En),n.ɵɵinject(yn),n.ɵɵinject(kn),n.ɵɵinject(_n),n.ɵɵinject(Mn))},Dn.ɵprov=n.ɵɵdefineInjectable({token:Dn,factory:Dn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Dn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:D},{type:En},{type:yn},{type:kn},{type:_n},{type:Mn}]}),null);var zn=function(){function e(e,t,n,o,i,r){this.widgetManager=e,this.utils=t,this.httpService=n,this.globalParams=o,this.commonService=i,this.componentLoader=r,this.urlParams=null,this.appConfig=null,this.rawAppConfig=null,this.configFile=null,this._configLoaded=!1,this.portalSelf=null,this.options=null,this.urlParams=o.urlParams,this._removeHash(this.urlParams)}return e.prototype._removeHash=function(e){for(var t in e)e[t]&&(e[t]=e[t].replace("#",""))},e.prototype.loadConfig=function(e){var t=this;console.time("Load Config");var n=this.commonService.createPromiseDefer(),i=function(e){t.rawAppConfig=o.cloneDeep(e);var i=o.cloneDeep(t.globalParams.mapConfig);e=o.merge(i,e),e=t._upgradeAppConfig(e),t._processAfterTryLoad(e),e.title&&(document.title=e.title),t.loadWidgetsManifest(e).then((function(e){return t._upgradeAllWidgetsConfig(e)})).then((function(e){t._configLoaded=!0,t.appConfig=e,n.resolve(t.getAppConfig())}))};return"string"==typeof e?this._tryLoadConfig(e).then(i).catch((function(e){if(4===e.readyState&&200===e.status&&""!==e.responseText){try{var t=JSON.parse(e.responseText)}catch(e){return console.log("将json串转为对象出错"),void n.reject(e)}i(t)}else console.log("Load Config error"),n.reject(e)})):i(e),n.promise()},e.prototype.getAppConfig=function(){var e=this,t=o.clone(this.appConfig);return t.getConfigElementById=function(t){return e.utils.getConfigElementById(e,t)},t.getConfigElementsByName=function(t){return e.utils.getConfigElementsByName(e,t)},t.visitElement=function(t){e.utils.visitElement(e,t)},this._addAuthorizedCrossOriginDomains(this.portalSelf,t),t},e.prototype._addAuthorizedCrossOriginDomains=function(e,t){},e.prototype._tryLoadConfig=function(e){return this.configFile=e||this.globalParams.appInfo.configFile,this.httpService.getJsonFile(this.configFile)},e.prototype._processAfterTryLoad=function(e){return this.addNeedValues(e),this.processProxy(e),e},e.prototype.getUriInfo=function(e){},e.prototype.processWidgetSetting=function(e){this.utils.processWidgetSetting(e)},e.prototype._processWidgetJsons=function(e){var t=this;this.utils.visitElement(e,(function(e,n){n.isWidget&&e.uri&&t.processWidgetSetting(e)}))},e.prototype._processNoUriWidgets=function(e){var t=0;this.utils.visitElement(e,(function(e,n){n.isWidget&&(t++,e.placeholderIndex=t)}))},e.prototype._addElementId=function(e){var t,n=0;this.utils.visitElement(e,(function(e){if(e.id){e.id=e.id.replace(/\//g,"_");var o=e.id.lastIndexOf("_");o>-1&&(t=e.id.substr(o+1),n=Math.max(n,t))}})),this.utils.visitElement(e,(function(e){e.id||(n++,e.id=e.uri?e.uri.replace(/\//g,"_")+"_"+n:"_"+n)}))},e.prototype.addNeedValues=function(e){this._processNoUriWidgets(e),this._addElementId(e),this._processWidgetJsons(e)},e.prototype.processProxy=function(e){e.httpProxy&&e.httpProxy.useProxy&&e.httpProxy.url,e.httpProxy&&e.httpProxy.useProxy&&e.httpProxy.rules},e.prototype._upgradeAppConfig=function(e){var t={};return this.globalParams.wabVersion===e.wabVersion?e:(t.isUpgraded=!0,t)},e.prototype._upgradeAllWidgetsConfig=function(e){return Promise.resolve(e)},e.prototype.loadWidgetsManifest=function(e){var t=this,n=[],o=this.commonService.createPromiseDefer();return!0===this.globalParams.jimuConfig.isSettings||this.utils.visitElement(e,(function(e){if(!e.widgets&&e.uri){var o=t.componentLoader.getComponentPath(e.uri);o?(e.folderUrl=e.amdFolder=t.globalParams.widgetRootPath+"/"+o+"/",e.icon&&(e.icon=t.globalParams.widgetRootPath+"/"+o+"/"+e.icon),n.push(t.widgetManager.loadWidgetManifest(e))):(console.log("widget ["+e.uri+"] not config componentPath"),n.push(Promise.resolve(e)))}})),Promise.all(n).then((function(){o.resolve(e)})),o.promise()},e.prototype._addNeedValuesForManifest=function(e){this.utils.addManifestProperies(e),this.utils.processManifestLabel(e,this.globalParams.dojoConfig.locale)},e.prototype._loadMergedWidgetManifests=function(){var e=this.globalParams.appInfo.appPath+"widgets/widgets-manifest.json";return this.httpService.getJsonFile(e)},e}();zn.ɵfac=function(e){return new(e||zn)(n.ɵɵinject(Dn),n.ɵɵinject(yn),n.ɵɵinject(kn),n.ɵɵinject(D),n.ɵɵinject(_n),n.ɵɵinject(Mn))},zn.ɵprov=n.ɵɵdefineInjectable({token:zn,factory:zn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(zn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Dn},{type:yn},{type:kn},{type:D},{type:_n},{type:Mn}]}),null);var Tn=function(){function e(e,t,n,o,i,r){this.utils=e,this.globalParams=t,this.eventService=n,this.widgetManager=o,this.configLoader=i,this.commonService=r,this.urlParams=null,this.appConfig=null,this.configFile=null,this._configLoaded=!1,this.portalSelf=null,this._originConfig=null,this.urlParams=t.urlParams,this.listenBuilderEvents()}return e.prototype.listenBuilderEvents=function(){this.eventService.rss.on(this.eventService._designConfigChanged,this._onDesignConfigChanged)},e.prototype.loadConfig=function(e){var t=this;return this.widgetManager.configLoader=this.configLoader,this.configLoader.loadConfig(e).then((function(e){t.portalSelf=t.configLoader.portalSelf,t.appConfig=t._addDefaultValues(e),t.globalParams.appInfo.isRunInMobile=t._isRunInMobile(),t.appConfig.logo&&t.globalParams.appInfo.folderUrlPrefix&&(t.appConfig.logo=t.globalParams.appInfo.folderUrlPrefix+"/"+t.appConfig.logo),t.eventService.rss.emit(t.eventService._appConfigLoaded,t.appConfig)}),(function(e){console.error(e),e&&e.message&&e.message}))},e.prototype._isRunInMobile=function(){return!1},e.prototype._addDefaultValues=function(e){return this._addDefaultPortalUrl(e),this._addDefaultGeometryService(e),this._addDefaultStyle(e),this._addDefaultMap(e),this._addDefaultVisible(e),void 0===e.widgetOnScreen&&(e.widgetOnScreen={}),void 0===e.widgetPool&&(e.widgetPool={}),e},e.prototype._addDefaultPortalUrl=function(e){e.portalUrl="https://www.supermap.com/cn"},e.prototype._addDefaultGeometryService=function(e){},e.prototype._addDefaultStyle=function(e){e.theme&&(e.theme.styles&&0!==e.theme.styles.length||(e.theme.styles=["default"]))},e.prototype._addDefaultMap=function(e){e.map.id="mapCantainer",void 0===e.map["3D"]&&void 0===e.map["2D"]&&(e.map["2D"]=!0),void 0===e.map.position&&(e.map.position={left:0,right:0,top:0,bottom:0}),void 0===e.map.portalUrl&&(e.map.portalUrl=e.portalUrl)},e.prototype._addDefaultVisible=function(e){void 0===e.visible&&(e.visible=!0)},e.prototype._addDefaultPanelAndPosition=function(e){},e.prototype.processMenuWidgetConfig=function(e){var t=this;function n(e,t){if(e.children&&e.children.length>=1)for(var i=0;i<e.children.length;i++){var c=e.children[i],p={index:e.index+""+i,isWidget:!0,groupId:a,gid:a,isThemeWidget:!1,isOnScreen:s,isHeadMenu:r};p.id=c.uri?c.uri.replace(/\//g,"_")+"_"+(parseInt(p.index)+1):"_"+(parseInt(p.index)+1),(c.groupId||c.gid)&&(p.groupId=c.groupId||c.gid,p.gid=p.groupId),c=o.extend(c,p),this.utils.processWidgetUriPara(c),c.isWidget&&c.uri&&(d.configLoader.processWidgetSetting(c),l.push(d.widgetManager.loadWidgetManifest(c))),n(c,t)}}var i,r=!0,s=!1,a="widgetPool",l=[],c=this.commonService.createPromiseDefer(),p=this.appConfig.widgetOnScreen.widgets.length+2;i=p-1;var d=this;return o.forEach(e,(function(e,o,c){e.id=e.uri?e.uri.replace(/\//g,"_")+"_"+p:"_"+p,e.index=i,e.isWidget=!0,e.groupId=a,e.gid=a,e.isThemeWidget=e.uri&&e.uri.indexOf("themes/"+d.appConfig.theme.name)>-1,e.isOnScreen=s,e.isHeadMenu=r,e.reqPara={},e.version=void 0,t.utils.processWidgetUriPara(e),n(e),e.isWidget&&e.uri&&(d.configLoader.processWidgetSetting(e),l.push(d.widgetManager.loadWidgetManifest(e))),i++})),Promise.all(l).then((function(){c.resolve(e)})),c.promise()},e.prototype._onWidgetAdded=function(e,t){var n=this,i=o.extend({},e),r=this.appConfig.widgetOnScreen.widgets.length;i.id=i.uri?i.uri.replace(/\//g,"_")+"_"+r:"_"+r,i.index=r-1,i.isWidget=!0,i.groupId="widgetOnScreen",i.gid="widgetOnScreen",i.isThemeWidget=i.uri&&i.uri.indexOf("themes/"+this.appConfig.theme.name)>-1,i.isOnScreen=!0,i.isHeadMenu=!1,i.reqPara={},i.version=void 0,this.utils.processWidgetUriPara(i),i.isWidget&&i.uri&&(this.configLoader.processWidgetSetting(i),this.widgetManager.loadWidgetManifest(i).then((function(e){n.appConfig.widgetOnScreen.widgets.push(e),n.eventService.rss.emit(n.eventService._appConfigChanged,{type:"widgetAdded",appConfig:n.appConfig,data:e})})).catch((function(e){console.log("loadWidgetManifest err",e)})))},e.prototype._getCleanConfig=function(e){var t=this,n=o.clone(e),i=this.utils.widgetProperties;return delete n.mode,this.utils.visitElement(n,(function(e,o){if(e.widgets)return delete e.isOnScreen,delete e.gid,delete e.openType,void(o.isOnScreen&&e.panel&&t.utils.isEqual(e.panel,n.widgetOnScreen.panel)&&delete e.panel);e.icon&&e.icon===e.amdFolder+"images/icon.png"&&delete e.icon,delete e.panel,delete e.folderUrl,delete e.amdFolder,delete e.thumbnail,delete e.configFile,delete e.gid,delete e.isOnScreen,i.forEach((function(t){delete e[t]})),e.visible&&delete e.visible,delete e.manifest})),delete n.rawAppConfig,delete n._ssl,delete n.getConfigElementById,delete n.getConfigElementsByName,delete n.getConfigElementByLabel,delete n.getConfigElementsByUri,delete n.processNoUriWidgets,delete n.addElementId,delete n.getCleanConfig,delete n.visitElement,delete n.agolConfig,delete n._itemData,delete n.oldWabVersion,n},e.prototype.getAppConfig=function(){var e,t=this;return this.globalParams.appInfo.isRunInMobile||(e=o.clone(this.appConfig)),e.getConfigElementById=function(e){return t.utils.getConfigElementById(t,e)},e.getConfigElementByLabel=function(e){return t.utils.getConfigElementByLabel(t,e)},e.getConfigElementsByName=function(e){return t.utils.getConfigElementsByName(t,e)},e.getConfigElementsByUri=function(e){return t.utils.getConfigElementsByUri(t,e)},e.getCleanConfig=function(){return t._originConfig?t._getCleanConfig(t._originConfig):t._getCleanConfig(t.appConfig)},e.visitElement=function(e){this.utils.visitElement(this,e)},e},e.prototype._getAppConfigFromTheme=function(e){var t,n=this,i=this.commonService.createPromiseDefer(),r=this.getAppConfig().getCleanConfig();return r.mode=this.urlParams.mode,o.forEach(r.widgetPool.groups,(function(e){delete e.panel})),e.appConfig&&((t=o.clone(e.appConfig)).map=r.map,t.map.position=e.appConfig.map.position,t.links=r.links,t.title=r.title,t.subtitle=r.subtitle,t.logo=r.logo),this.configLoader.addNeedValues(t),this.configLoader.loadWidgetsManifest(t).then((function(){n._addDefaultValues(t),i.resolve(t)})),i.promise()},e.prototype._onDesignConfigChanged=function(e){var t=this,n={appAttributeChanged:function(e){e.data.appConfig.logo=t.globalParams.appInfo.folderUrlPrefix+"/"+e.data.appConfig.logo,e.data.changeData.logo=e.data.appConfig.logo},mapChanged:function(e){var n=t.utils.reCreateObject(e.data.appConfig.map);n.itemId&&n.itemId!==t.appConfig.map.itemId&&t.appConfig.map.mapOptions&&t.utils.deleteMapOptions(t.appConfig.map.mapOptions),o.extend(t.appConfig.map,n),e.data.appConfig=t.getAppConfig(),t.eventService.rss.emit(t.eventService._appConfigChanged,e)},themeChanged:function(e){t._getAppConfigFromTheme(e.data).then((function(n){t.appConfig=n,e.data.appConfig=t.getAppConfig(),t.eventService.rss.emit(t.eventService._appConfigChanged,e)}))},layoutChanged:function(e){t._getAppConfigFromTheme(e.data).then((function(n){t.appConfig=n,e.data.appConfig=t.getAppConfig(),t.eventService.rss.emit(t.eventService._appConfigChanged,e)}))},styleChanged:function(e){t.appConfig.theme.styles=t._genStyles(t.appConfig.theme.styles,e.data.appConfig.theme.styles[0]),e.data.appConfig=t.getAppConfig(),t.eventService.rss.emit(t.eventService._appConfigChanged,e)},widgetChanged:function(e){e.data.appConfig=t.getAppConfig(),t.eventService.rss.emit(t.eventService._appConfigChanged,e)},widgetPoolChanged:function(e){e.data.appConfig=t.getAppConfig()},actionTriggered:function(e){var n="",i=e.data.actionInfo,r=i.widget;if(r.id)n=r.id;else if(r.uri||r.oldUri){var s=r.uri?r.uri:r.oldUri;t.globalParams.appInfo.folderUrlPrefix&&(s=t.globalParams.appInfo.folderUrlPrefix+"/"+s);var a=t.utils.getConfigElementsByUri(t.appConfig,s),l=o.find(a,(function(e,t){return e.isOnScreen===i.isOnScreen}));l&&(n=l.id)}e.data.eleid=n}},i=o.extend({},e);n[i.type].call(this,i)},e.prototype._genStyles=function(e,t){var n=[];return n.push(t),o.forEach(e,(function(e){n.indexOf(e)<0&&n.push(e)})),n},e}();Tn.ɵfac=function(e){return new(e||Tn)(n.ɵɵinject(yn),n.ɵɵinject(D),n.ɵɵinject(En),n.ɵɵinject(Dn),n.ɵɵinject(zn),n.ɵɵinject(_n))},Tn.ɵprov=n.ɵɵdefineInjectable({token:Tn,factory:Tn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Tn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:yn},{type:D},{type:En},{type:Dn},{type:zn},{type:_n}]}),null);var Vn=function(){function t(e,t,n,o,i,r,s){var a=this;this.globalParams=e,this.commonService=t,this.widgetManager=n,this.appRef=o,this.componentFactoryResolver=i,this.componentLoader=r,this.eventService=s,this.panels=[],this.activePanel=null,this.map=null,this.view=null,this.panelAddToMap=!0,this.eventService.rss.on(this.eventService._createPanelContainer,(function(e){a.createPanelContainer(e)})),this.eventService.rss.on(this.eventService._mapPositionChanged,(function(e){a.onMapResize()}))}return t.prototype.create=function(e,t){var o={};t&&(o=t);var i=Object.keys(o).map((function(e){return{provide:e,useValue:o[e]}}));return this.componentFactoryResolver.resolveComponentFactory(e).create(n.ReflectiveInjector.resolveAndCreate(i))},t.prototype.createPanelContainer=function(e){var t=document.querySelector(".sspanel_container");if(null==t)if((t=window.document.createElement("div")).className="sspanel_container",this.commonService.isMobileNotTablet()){var n=document.querySelector("ion-app");n?n.appendChild(t):window.document.body.appendChild(t)}else this.panelAddToMap&&e?e.appendChild(t):window.document.body.appendChild(t);this.panelContainer=t},t.prototype.show=function(e){e.instance.started||(e.instance.isDockable()?this.componentLoader.showInHome(e):(this.panelContainer.appendChild(this.commonService.getComponentRootNode(e)),this.appRef.attachView(e.hostView)))},t.prototype.setMap=function(e){!0===this.globalParams.mapConfig.is3D?this.view=e:this.map=e},t.prototype._findPanelUri=function(e){var t="epsgis-on-screen-widget-panel";if(this.commonService.isMobileNotTablet()){if(e.panel){switch(e.panel.dock){case"left":return"epsgis-mobile-drawer-panel";case"right":return"epsgis-mobile-drawer-right-panel";case"bottom":return"epsgis-mobile-action-panel"}switch(e.panel.uri){case"epsgis-dockable-panel-at-left":return"epsgis-mobile-drawer-panel";case"epsgis-dockable-panel-at-bottom":return"epsgis-mobile-action-panel";case"epsgis-dockable-panel-at-right":return"epsgis-mobile-drawer-right-panel"}}if(e.mobile&&e.mobile.mode)switch(e.mobile.mode.toLowerCase()){case"drawer":return"epsgis-mobile-drawer-panel";case"drawerright":return"epsgis-mobile-drawer-right-panel";case"modal":return"epsgis-mobile-modal-panel";case"popup":return"epsgis-mobile-popup-panel";case"popover":return t}return"epsgis-mobile-action-panel"}if(e.panel){switch(e.panel.dock){case"left":return"epsgis-dockable-panel-at-left";case"right":return"epsgis-dockable-panel-at-right";case"bottom":return"epsgis-dockable-panel-at-bottom"}if(e.panel.uri)return e.panel.uri}return t},t.prototype.showPanel=function(t,n,i,r){var s=this.commonService.createPromiseDefer(),a=t.id+"_panel",l=this.getPanelById(a);if(l)l.instance.state===e.WidgetState.closed&&(r&&(l.instance.reqPara=r.param,l.instance.widget&&(l.instance.widget.instance.reqPara=r.param)),this.openPanel(l)),s.resolve(l);else try{var c=this.componentLoader.findComponent(this._findPanelUri(t));if(!c){var p="not find panel ["+t.panel.uri+"]";return console.error(p),s.reject(new Error(p))}l=this.componentLoader.createComponent(c),i||((i={}).id=a,i.title=t.label),i.buttonMaximize=!(!1===t.maximizable),i.buttonCollapse=!(!1===t.collapsible),i.modal=!0===t.modal,r&&r.panel&&(i=o.merge(i,r.panel)),l.instance.label=l.instance.title=l.instance.tooltip=t.label,l.instance.widgetConfig=t,this.globalParams.mapConfig.is3D?l.instance.view=this.view:l.instance.map=this.map,l.instance.id=a,l.instance.gid=t.gid,r&&(l.instance.reqPara=r.param),l.instance.setOptions(i),l.instance.setPosition(t.position),n&&(l.instance.setWidget(n),l.instance.widget.instance.reqPara=r.param),console.log("panel ["+a+"] created."),this.openPanel(l),this.panels.push(l),s.resolve(l)}catch(e){return console.log("create panel error: "+e+", panelId: "+a),void s.reject(e)}return s.promise()},t.prototype.showPanelNotWidget=function(t){var n={width:t.width+"px",height:t.height+"px",relativeTo:t.relativeTo},o={id:t.id?t.id:"ss_panel",label:t.title?t.title:"SS Panel",position:n,dockSide:t.dockSide,panel:{uri:"epsgis-iframe-panel"},resizable:t.resizable,draggable:t.draggable,gid:"panelOfNotWidget"};this.closeAllPanelsInGroup(o.gid);var i=this.commonService.createPromiseDefer(),r=o.id,s=this.getPanelById(r);return s?(s.instance.state===e.WidgetState.closed&&this.openPanel(s),i.resolve(s)):this.showPanel(o,null,t),i.promise()},t.prototype.closeOtherPanelsInTheSameGroup=function(e){if("string"!=typeof e||(e=this.getPanelById(e)))for(var t=0;t<this.panels.length;t++)this.panels[t].instance.isDockable()||this.panels[t].instance.gid===e.instance.gid&&this.panels[t].instance.id!==e.instance.id&&this.closePanel(this.panels[t])},t.prototype.closeAllPanelsInGroup=function(e){for(var t=0;t<this.panels.length;t++)this.panels[t].instance.isDockable()||this.panels[t].instance.gid===e&&this.closePanel(this.panels[t])},t.prototype.openPanel=function(t){var n=this,o=this.commonService.createPromiseDefer();if(!t.instance.started)try{this.show(t)}catch(e){console.error("fail to startup panel "+t.instance.id+". "+e.stack)}return t.instance.state===e.WidgetState.opened?(o.resolve(t),o.promise()):(t.instance.started&&(t.instance.setState(e.WidgetState.opened),this.playOpenPanelAnimation(t).then((function(){n._activePanel(t),o.resolve(t)}))),o.promise())},t.prototype.closePanel=function(t){var n,o=this,i=this.commonService.createPromiseDefer();return(n="string"==typeof t?this.getPanelById(t):t)?n.instance.state===e.WidgetState.closed?(i.resolve(n),i.promise()):(this.playClosePanelAnimation(n).then((function(){o.activePanel&&o.activePanel.instance.id===n.instance.id&&(o.activePanel.instance.onDeActive(),o.activePanel=null),n.instance.setState(e.WidgetState.closed),i.resolve(n)})),i.promise()):(i.reject(new Error("panel is null")),i.promise())},t.prototype.minimizePanel=function(t){if("string"!=typeof t||(t=this.getPanelById(t))){t.instance.state===e.WidgetState.closed&&this.openPanel(t),t.instance.setWindowState(e.WidgetWindowState.minimized);try{t.instance.onMinimize()}catch(e){console.log(console.error("fail to minimize panel "+t.instance.id+". "+e.stack))}}},t.prototype.maximizePanel=function(t){if("string"!=typeof t||(t=this.getPanelById(t))){t.instance.state===e.WidgetState.closed&&this.openPanel(t),t.instance.setWindowState(e.WidgetWindowState.maximized);try{t.instance.onMaximize()}catch(e){console.log(console.error("fail to maximize panel "+t.instance.id+". "+e.stack))}}},t.prototype.normalizePanel=function(t){if("string"!=typeof t||(t=this.getPanelById(t))){t.instance.state===e.WidgetState.closed&&this.openPanel(t),t.instance.setWindowState(e.WidgetWindowState.normal);try{t.instance.onNormalize()}catch(e){console.log(console.error("fail to noralize panel "+t.instance.id+". "+e.stack))}}},t.prototype.changeWindowStateTo=function(t,n){("string"!=typeof t||(t=this.getPanelById(t)))&&(n===e.WidgetWindowState.normal?this.normalizePanel(t):n===e.WidgetWindowState.minimized?this.minimizePanel(t):n===e.WidgetWindowState.maximized?this.maximizePanel(t):console.log("error state: "+n))},t.prototype.getPanelById=function(e){for(var t=0;t<this.panels.length;t++)if(this.panels[t].instance.id===e)return this.panels[t]},t.prototype.onWindowResize=function(){for(var t=0;t<this.panels.length;t++)this.panels[t].instance.state!==e.WidgetState.closed&&"map"!==this.panels[t].instance.position.relativeTo&&this.panels[t].instance.resize()},t.prototype.onMapResize=function(){for(var e=0;e<this.panels.length;e++)this.panels[e].instance.isDockable()&&this.panels[e].instance.resize()},t.prototype.destroyPanel=function(t){if("string"!=typeof t||(t=this.getPanelById(t))){t.instance.state!==e.WidgetState.closed&&this.closePanel(t),this._removePanel(t);try{t.destroy(),console.log("destroy panel ["+t.instance.id+"].")}catch(e){console.log(console.error("fail to destroy panel "+t.instance.id+". "+e.stack))}}},t.prototype.destroyAllPanels=function(){var e=this,t=o.map(this.panels,(function(e){return e.instance.id}));o.forEach(t,(function(t){e.destroyPanel(t)})),this.panels=[]},t.prototype.playOpenPanelAnimation=function(e){return Promise.resolve(!0)},t.prototype.playClosePanelAnimation=function(e){return Promise.resolve(!0)},t.prototype.getPositionOnMobile=function(e){if("string"==typeof e&&!(e=this.getPanelById(e)))return{}},t.prototype._onPanelClick=function(e){this._activePanel(e)},t.prototype._activePanel=function(t){var n=this;if("string"==typeof t&&(t=this.getPanelById(t)),t&&!t.instance.isDockable()){if(this.activePanel){if(this.activePanel.instance.id===t.instance.id)return void(this.activePanel.instance.moveTopOnActive&&this.activePanel.instance.setZIndex("active"));this.activePanel.instance.state===e.WidgetState.active&&(this.activePanel.instance.setState(e.WidgetState.opened),this.activePanel.instance.position.zIndex,this.activePanel.instance.setZIndex("deactive"),this.activePanel.instance.onDeActive())}var i=this.widgetManager.activeWidget;i&&i.instance.state===e.WidgetState.active&&i.instance.getPanel()!==t&&(i.instance.setState(e.WidgetState.opened),!1===i.instance.inPanel&&(i.instance.position.zIndex,i.instance.setZIndex("deactive")),i.instance.onDeActive(),this.widgetManager.activeWidget=null),this.activePanel=t,this.activePanel.instance.state!==e.WidgetState.active&&(this.activePanel.instance.setState(e.WidgetState.active),this.activePanel.instance.moveTopOnActive&&this.activePanel.instance.setZIndex("active"),o.forEach(this.panels,(function(e,t,o){0==e.instance.isDockable()&&e.instance.id!=n.activePanel.instance.id&&e.instance.setZIndex("deactive")})),this.activePanel.instance.onActive())}},t.prototype._removePanel=function(e){var t=this.panels.indexOf(e);t>-1&&this.panels.splice(t,1),this.activePanel&&this.activePanel.instance.id===e.instance.id&&(this.activePanel=null)},t.prototype._onMoveStart=function(e){},t.prototype._onWidgetActived=function(t){this.activePanel&&this.activePanel.instance.state===e.WidgetState.active&&t.getPanel()!==this.activePanel&&(this.activePanel.instance.setState(e.WidgetState.opened),this.activePanel.instance.position.zIndex,this.activePanel.instance.onDeActive(),this.activePanel=null)},t.prototype._loadPanelClass=function(e){},t.prototype._loadThemeI18N=function(e){},t.prototype.getAllPanels=function(){return this.panels},t}();Vn.ɵfac=function(e){return new(e||Vn)(n.ɵɵinject(D),n.ɵɵinject(_n),n.ɵɵinject(Dn),n.ɵɵinject(n.ApplicationRef),n.ɵɵinject(n.ComponentFactoryResolver),n.ɵɵinject(Mn),n.ɵɵinject(En))},Vn.ɵprov=n.ɵɵdefineInjectable({token:Vn,factory:Vn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Vn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:D},{type:_n},{type:Dn},{type:n.ApplicationRef},{type:n.ComponentFactoryResolver},{type:Mn},{type:En}]}),null);var Wn=function(){function e(e,t,n,o,i,r){this.utils=e,this.httpService=t,this.globalParams=n,this.eventService=o,this.commonService=i,this.componentLoader=r,this.originMapPosition=null,this.mapPosition=null,this.appConfig=null,this.id="",this.mapDivId="",this.map=null,this.view=null,this.previousInfoWindow=null,this.mobileInfoWindow=null,this.isMobileInfoWindow=!1,this.tiandituToken="95c02448602e3ee0683e07de5e772e96",this.layerInfosObj=null,this.options=null,this.urlParams=null,this.comRefMap=null,this.mapDivId=this.id=this.globalParams.jimuConfig.mapId,this.urlParams=this.globalParams.urlParams}return e.prototype.setAppConfig=function(e){this.appConfig=e},e.prototype.restorePosition=function(){this.changeMapPosition(this.originMapPosition)},e.prototype.changeMapPosition=function(e,t){void 0===t&&(t=!0),this.mapPosition=o.merge(this.mapPosition,e),this.commonService.setWidgetPosition(this.comRefMap,this.mapPosition),this.comRefMap.instance.resize&&this.comRefMap.instance.resize(),t&&this.eventService.rss.emit(this.eventService._mapPositionChanged,this.mapPosition)},e.prototype.setMapPosition=function(e){this.mapPosition=e,this.originMapPosition=o.cloneDeep(e)},e.prototype.getMapPosition=function(){return this.mapPosition},e.prototype.centerAtMap=function(e,t,n){},e.prototype.showMap=function(){return _(this,void 0,void 0,(function(){var e,t,n,i,r,s,a,l,c=this;return M(this,(function(p){switch(p.label){case 0:if(!(e=this.componentLoader.findComponent(this.appConfig.map.uri)))return console.log("没有找到map组件，请检查config.json文件map[uri]配置"),[2];if(!(t="function"==typeof e.prototype.getCompInfo?e.prototype.getCompInfo().path:""))return[3,6];p.label=1;case 1:return p.trys.push([1,5,,6]),r=this.globalParams.widgetRootPath+"/"+t,[4,this.httpService.getJsonFile(r+"/manifest.json")];case 2:return i=p.sent(),(n=this.appConfig.map.config)?[3,4]:(s=this.appConfig.map.configPath||"config.json",[4,this.httpService.getJsonFile(r+"/"+s)]);case 3:n=p.sent(),p.label=4;case 4:return[3,6];case 5:return a=p.sent(),console.log(a),[3,6];case 6:return this.comRefMap=this.componentLoader.createComponentToHome(e),this.comRefMap.instance.setProps({appConfig:this.appConfig,config:n,manifest:i}),l=o.cloneDeep(this.appConfig.map.position),this.commonService.setWidgetPosition(this.comRefMap,l),pe.after(this.comRefMap.instance,"afterNgOnInit",(function(){c.initMap()})),this.componentLoader.showInHome(this.comRefMap),[2]}}))}))},e.prototype.destoryMap=function(){this.comRefMap&&(this.comRefMap.destroy(),console.log("destroy map."))},e.prototype.initMap=function(){var e=this;this.comRefMap.instance.initMap().then((function(t){console.log("map loaded."),!0===e.globalParams.mapConfig.is3D?(e.view=t,e.comRefMap.instance.view=t):(e.comRefMap.instance.map=t,e.map=t),e.eventService.rss.emit(e.eventService._createPanelContainer,e.commonService.getComponentRootNode(e.comRefMap)),e.eventService.rss.emit(e.eventService._mapLoaded,t)}),(function(e){console.log(e)}))},e}();Wn.ɵfac=function(e){return new(e||Wn)(n.ɵɵinject(yn),n.ɵɵinject(kn),n.ɵɵinject(D),n.ɵɵinject(En),n.ɵɵinject(_n),n.ɵɵinject(Mn))},Wn.ɵprov=n.ɵɵdefineInjectable({token:Wn,factory:Wn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Wn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:yn},{type:kn},{type:D},{type:En},{type:_n},{type:Mn}]}),null);var jn=function(){function t(e,t,n,o,i,r,s,a,l){var c=this;this.panelManager=e,this.widgetManager=t,this.utils=n,this.httpService=o,this.globalParams=i,this.eventService=r,this.commonService=s,this.mapManager=a,this.componentLoader=l,this.map=null,this.view=null,this.mapId="mapContainer",this.widgetPlaceholders=[],this.preloadWidgetIcons=[],this.preloadGroupPanels=[],this.invisibleWidgetIds=[],this.id="",this.urlParams="",this.appConfig=null,this.widgetPlaceholders=[],this.preloadWidgetIcons=[],this.preloadGroupPanels=[],this.invisibleWidgetIds=[],this.eventService.rss.on(this.eventService._appConfigLoaded,(function(e){return c.onAppConfigLoaded(e)})),this.eventService.rss.on(this.eventService._appConfigChanged,(function(e){return c.onAppConfigChanged(e)})),this.eventService.rss.on(this.eventService._mapLoaded,(function(e){return c.onMapLoaded(e)})),this.eventService.rss.on(this.eventService._mapChanged,(function(e){return c.onMapChanged(e)})),this.eventService.rss.on(this.eventService._viewChanged,(function(e){return c.onViewChanged(e)}))}return t.prototype.startup=function(){console.log("layout startup"),this.widgetManager.panelManager=this.panelManager},t.prototype.resize=function(){o.forEach(this.widgetManager.getAllWidgets(),(function(e){!1===e.instance.inPanel&&e.instance.resize()}))},t.prototype.onAppConfigLoaded=function(e){this.appConfig=e,this.appConfig.theme&&this._loadTheme(this.appConfig.theme),this._loadMap()},t.prototype.onAppConfigChanged=function(e){},t.prototype._loadMap=function(){this.mapManager.setAppConfig(this.appConfig),this.mapManager.setMapPosition(this.appConfig.map.position),this.mapManager.showMap()},t.prototype.onMapLoaded=function(e){!0===this.globalParams.mapConfig.is3D?this.view=e:this.map=e,this.panelManager.setMap(e),this.widgetManager.setMap(e),this.widgetManager.setAppConfig(this.appConfig),this._loadPreloadWidgets(this.appConfig)},t.prototype.onMapChanged=function(e){var t=this;this.map=e,this.panelManager.map=e,this.widgetManager.map=e,this.mapManager.map=e,this.preloadWidgetIcons.forEach((function(e){e.instance.map=t.map,e.instance.onMapChange(t.map)})),this.panelManager.getAllPanels().forEach((function(e){e.instance.map=t.map,e.instance.onMapChange(t.map)})),this.widgetManager.getAllWidgets().forEach((function(e){e.instance.map=t.map,e.instance.onMapChange(t.map)}))},t.prototype.onViewChanged=function(e){var t=this;this.view=e,this.panelManager.view=e,this.widgetManager.view=e,this.mapManager.view=e,this.preloadWidgetIcons.forEach((function(e){e.instance.view=t.view,e.instance.onViewChange(t.view)})),this.panelManager.getAllPanels().forEach((function(e){e.instance.view=t.view,e.instance.onViewChange(t.view)})),this.widgetManager.getAllWidgets().forEach((function(e){e.instance.view=t.view,e.instance.onViewChange(t.view)}))},t.prototype._loadPreloadWidgets=function(e){var t=this;console.time("Load widgetOnScreen");var n=[],i=this.commonService.createPromiseDefer();return o.each(e.widgetOnScreen.widgets,(function(o,i,r){if(!0===o.headerMenu)return!0;!1===o.visible||t.commonService.isMobile()&&void 0!==o.mobile&&!1===o.mobile.visible?t.invisibleWidgetIds.push(o.id):n.push(t._loadPreloadWidget(o,e))})),Promise.all(n).then((function(){console.timeEnd("Load widgetOnScreen"),t.eventService.rss.emit(t.eventService._checkChangeDetector,n),t._hideLoading()})).catch((function(){t._hideLoading()})),i.promise()},t.prototype._hideLoading=function(){},t.prototype._doPostLoad=function(){},t.prototype._loadPreloadWidget=function(e,t){return _(this,void 0,void 0,(function(){var n,o,i,r,s=this;return M(this,(function(a){return n=this.commonService.createPromiseDefer(),e&&e.uri?(!0===this.globalParams.jimuConfig.isDesignMode&&this.urlParams.config&&this.globalParams.appInfo.folderUrlPrefix||"config"===t.mode)&&!e.uri?(e.oldUri?((o=e.oldUri).startsWith("/")&&(o=o.substring(1)),e.amdFolder=o.substring(0,o.toLowerCase().lastIndexOf("/widget"))+"/",e.folderUrl=this.globalParams.appInfo.folderUrlPrefix+"/"+e.amdFolder,this.widgetManager.loadWidgetManifest(e).then((function(e){var t=s._createPreloadWidgetPlaceHolder(e);n.resolve(t)}))):(i=this._createPreloadWidgetPlaceHolder(e),n.resolve(i)),[2,n.promise()]):(e.inPanel||e.closeable?(r=this._createPreloadWidgetIcon(e),n.resolve(r)):this.widgetManager.loadWidget(e).then((function(t){s.widgetManager.showWidget(t),t.instance.setPosition(e.position),s.commonService.setWidgetPosition(t,e.position),e.loaded=!0,t.instance.configId=e.id,n.resolve(t)})).catch((function(e){console.error(e)})),[2,n.promise()]):(console.error("widget ["+e.label+"] no uri"),[2,n.resolve(null)])}))}))},t.prototype._createPreloadWidgetPlaceHolder=function(e){},t.prototype._createPreloadWidgetIcon=function(t,n){var i=this,r=null,s=!1;"browser"===t.position.relativeTo?r=this.componentLoader.createComponentToHome(e.OnScreenWidgetIconComponent):(s=!0,r=this.componentLoader.createComponentToMap(e.OnScreenWidgetIconComponent)),r.instance.setProps({compRef:n,appConfig:this.appConfig,map:this.globalParams.mapConfig.is3D?this.view:this.map,widgetConfig:t}),pe.before(r.instance,"destroy",(function(){i._onDestroyIcon(r)})),this.preloadWidgetIcons.push(r),s?this.componentLoader.showInMap(r):this.componentLoader.showInHome(r);var a=this.commonService.getComponentRootNode(r);a&&(a.classList.add("jimu-widget-onscreen-icon"),a.title=t.label);var l=o.cloneDeep(t.position);return delete l.height,delete l.width,this.commonService.setWidgetPosition(r,l),!0===t.openAtStart&&r.instance.switchToOpen(),r},t.prototype._onDestroyPlaceholder=function(e){for(var t=0,n=-1;t<this.widgetPlaceholders.length;t++){var o=this.widgetPlaceholders[t];if(e.id===o.id||e.configId===o.configId){n=t;break}}n>=0&&this.widgetPlaceholders.splice(n,1),console.log("destroy placeholder ["+e.id+"].")},t.prototype._onDestroyIcon=function(e){for(var t=0,n=-1;t<this.preloadWidgetIcons.length;t++){var o=this.preloadWidgetIcons[t];if(e.instance.id===o.instance.id){n=t;break}}n>=0&&this.preloadWidgetIcons.splice(n,1),console.log("destroy icon ["+e.instance.id+"].")},t.prototype._loadPreloadGroup=function(e,t){var n=this.commonService.createPromiseDefer();return t.mode||e.widgets&&0!==e.widgets.length?n.promise():(n.resolve(null),n)},t.prototype._getThemeCommonStyleId=function(e){return"theme_"+e.name+"_style_common"},t.prototype._getThemeCurrentStyleId=function(e){return"theme_"+e.name+"_style_"+e.styles[0]},t.prototype._loadTheme=function(e){},t.prototype._loadThemeCommonStyle=function(e){},t.prototype._removeThemeCommonStyle=function(e){},t.prototype._loadThemeCurrentStyle=function(e){},t.prototype._removeThemeCurrentStyle=function(e){},t.prototype._destroyPreloadWidgetIcons=function(){for(var e=this.preloadWidgetIcons.length-1;e>=0;e--){this.preloadWidgetIcons[e].destroy()}this.preloadWidgetIcons=[]},t.prototype._destroyOffPanelWidgets=function(){var e=this;o.forEach(this.widgetManager.getOffPanelWidgets(),(function(t){e.widgetManager.destroyWidget(t)}))},t.prototype._destroyWidgetPlaceholders=function(){for(var e=this.widgetPlaceholders.length-1;e>=0;e--){this.widgetPlaceholders[e].destroy()}this.widgetPlaceholders=[]},t.prototype._destroyPreloadPanels=function(){this.panelManager.destroyAllPanels()},t.prototype._destroyPreloadGroupPanels=function(){this.preloadGroupPanels=[]},t.prototype._onThemeChange=function(e){},t.prototype._onLayoutChange2=function(e){},t.prototype._onLayoutChange=function(e){this._onLayoutChange2(e)},t.prototype._onStyleChange=function(e){},t.prototype._changeMapPosition=function(e){},t.prototype._onMapChange=function(e){},t.prototype._onWidgetPoolChange=function(e,t){},t.prototype._onActionTriggerd=function(e,t,n){var i=o.find(this.preloadWidgetIcons,(function(e,t){return e.instance.configId===n}));i&&i.instance.onAction(t,"TODO");var r=o.find(this.widgetManager.getOnScreenOffPanelWidgets(),(function(e){return e.instance.id===n}));r&&r.instance.onAction(t,"TODO");var s=o.find(this.widgetPlaceholders,(function(e,t){return e.configId===n}));s&&s.onAction(t,"TODO")},t.prototype._onWidgetChange=function(e,t,n){var i=t.widgetList;if(i&&!(i.length<=0)){var r=this;o.forEach(i,(function(t){var i=this,a=this.globalParams.appInfo.folderUrlPrefix+"/"+(t.oldUri?t.oldUri:t.uri),l=o.find(r.preloadWidgetIcons,(function(e){return t.id===e.instance.configId||a===e.instance.uri})),c=void 0,p=void 0;if(l)c=l.instance.state,p=l.instance.widgetConfig,l.instance.widget&&l.instance.widget.destroy(),l.destroy(),"delete"===n?r._createPreloadWidgetPlaceHolder(p):"modify"===n&&s(p,e,!0,c);else{var d=o.find(r.widgetManager.getOnScreenOffPanelWidgets(),(function(e){return t.id===e.instance.configId||a===e.instance.uri}),this);if(d)p=d.instance.widgetConfig,d.destroy(),"delete"===n?r._createPreloadWidgetPlaceHolder(p):"modify"===n&&s(p,e,!1,"");else{var u=this.utils.getConfigElementById(e,t.id);if(u){var g=o.find(r.widgetPlaceholders,(function(e){return t.id===e.configId||t.id===e.id}),this);g&&g.destroy(),!0===u.loaded&&(delete u.amdFolder,delete u.checked,delete u.folderUrl,delete u.hasConfig,delete u.hasLocale,delete u.hasSetting,delete u.hasSettingLocale,delete u.hasSettingPage,delete u.hasSettingStyle,delete u.hasSettingUIFile,delete u.hasStyle,delete u.hasUIFile,delete u.hasVersionManager,delete u.icon,delete u.inPanel,delete u.isController,delete u.isHeadMenu,delete u.keepConfigAfterMapSwithched,delete u.loaded,delete u.manifest,delete u.supportMultiInstance,delete u.thumbnail,delete u.uri,delete u.version),p=o.extend(u,t),this.configManager.configLoader._processAfterTryLoad(e),r.widgetManager.loadWidgetManifest(p).then((function(t){s(p,e,!1,"")})).catch((function(e){console.log("loadWidgetManifest err",e)}))}else o.forEach(r.invisibleWidgetIds,(function(n){if(n===t.id&&!1!==t.visible){p=i.utils.getConfigElementById(e,t.id),r._loadPreloadWidget(p,e);var o=r.invisibleWidgetIds.indexOf(p.id);r.invisibleWidgetIds.splice(o,1)}}))}}}))}function s(e,t,n,o){return!0===e.headerMenu||(!1===e.visible?(r.invisibleWidgetIds.push(e.id),!0):void r._loadPreloadWidget(e,t).then((function(t){n&&e.uri&&"opened"===o&&t.onClick()})))}},t}();jn.ɵfac=function(e){return new(e||jn)(n.ɵɵinject(Vn),n.ɵɵinject(Dn),n.ɵɵinject(yn),n.ɵɵinject(kn),n.ɵɵinject(D),n.ɵɵinject(En),n.ɵɵinject(_n),n.ɵɵinject(Wn),n.ɵɵinject(Mn))},jn.ɵprov=n.ɵɵdefineInjectable({token:jn,factory:jn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(jn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Vn},{type:Dn},{type:yn},{type:kn},{type:D},{type:En},{type:_n},{type:Wn},{type:Mn}]}),null);var Rn=function(){};function Ln(e){return!!e&&"function"==typeof e.then&&"function"==typeof e.catch}Rn.ɵfac=function(e){return new(e||Rn)},Rn.ɵprov=n.ɵɵdefineInjectable({token:Rn,factory:Rn.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Rn,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);var An=function(){function e(e,t){var o=this;this.config=e,this.containerRef=t,this.componentInstance=null,this.state=0,this.afterClose=new p.Subject,this.afterOpen=new p.Subject,this.containerInstance=t.instance,this.containerInstance.cancelTriggered.subscribe((function(){return o.trigger("cancel")})),this.containerInstance.okTriggered.subscribe((function(){return o.trigger("ok")})),this.containerInstance.onCloseTreggered.subscribe((function(){o.afterClose.next(o.result),o.afterClose.complete(),e.afterClose instanceof n.EventEmitter&&e.afterClose.emit(o.result),o.containerRef=null,o.containerInstance=null,o.componentRef=null,o.componentInstance=null}))}return e.prototype.getContentComponent=function(){return this.componentInstance},e.prototype.getElement=function(){return this.containerInstance.getNativeElement()},e.prototype.destroy=function(e){this.close(e)},e.prototype.triggerOk=function(){this.trigger("ok")},e.prototype.triggerCancel=function(){this.trigger("cancel")},e.prototype.open=function(){},e.prototype.close=function(e){this.result=e,this.componentRef.destroy(),this.containerRef.destroy(),this.state=2,this.afterClose.next(this.result)},e.prototype.updateConfig=function(e){Object.assign(this.config,e),this.containerInstance.cdr.markForCheck()},e.prototype.getState=function(){return this.state},e.prototype.getConfig=function(){return this.config},e.prototype.getBackdropElement=function(){return null},e.prototype.trigger=function(e){var t,o=this,i={ok:this.config.onOk,cancel:this.config.onCancel}[e],r={ok:"okLoading",cancel:"cancelLoading"}[e];if(!this.config[r])if(i instanceof n.EventEmitter)i.emit(this.getContentComponent());else if("function"==typeof i){var s=i(this.getContentComponent());if(Ln(s)){this.config[r]=!0;var a=function(e){o.config[r]=!1,o.closeWhitResult(e)};s.then(a).catch(a)}else!1!==(t=s)&&o.close(t)}},e.prototype.closeWhitResult=function(e){!1!==e&&this.close(e)},e}(),Nn=function(){},Bn=function(){this.closable=!0,this.okLoading=!1,this.okDisabled=!1,this.cancelDisabled=!1,this.cancelLoading=!1,this.noAnimation=!1,this.autofocus="auto",this.mask=!0,this.maskClosable=!0,this.keyboard=!0,this.zIndex=1e3,this.top=50,this.width=520,this.height=400,this.closeIcon="close",this.okType="primary",this.modalType="default",this.onCancel=Nn,this.onOk=Nn,this.closeOnNavigation=!0,this.iconType="question-circle",this.fullScreen=!1};function Fn(e,t){return Object.assign(Object.assign({},t),e)}function Un(e,t){Object.assign(e,t)}function Hn(e){return{mask:e.mask,maskClosable:e.maskClosable,closable:e.closable,okLoading:e.okLoading,okDisabled:e.okDisabled,cancelDisabled:e.cancelDisabled,cancelLoading:e.cancelLoading,keyboard:e.keyboard,noAnimation:e.noAnimation,content:e.content,componentParams:e.componentParams,footer:e.footer,getContainer:e.getContainer,zIndex:e.zIndex,width:e.width,wrapClassName:e.wrapClassName,className:e.className,styles:e.styles,title:e.title,closeIcon:e.closeIcon,maskStyle:e.maskStyle,bodyStyle:e.bodyStyle,okText:e.okText,cancelText:e.cancelText,okType:e.okType,iconType:e.iconType,modalType:e.modalType,onOk:e.onOk,onCancel:e.onCancel,afterOpen:e.afterOpen,afterClose:e.afterClose}}var Gn=["ssmodal_overlay"],Jn=["ssmodal_titlebar"],qn=["ssmodal"];function Xn(e,t){if(1&e&&n.ɵɵelement(0,"div",21),2&e){var o=n.ɵɵnextContext();n.ɵɵproperty("modalRef",o.modalRef)}}function Qn(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",24),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",25),n.ɵɵelementStart(3,"g",26),n.ɵɵelement(4,"polyline",27),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnCollapseText)}}function $n(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",24),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2)._buttonCollapse_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",25),n.ɵɵelementStart(2,"g",26),n.ɵɵelement(3,"polyline",28),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵpropertyInterpolate("title",i.options.buttonCollapseText)}}function Yn(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,Qn,5,1,"ng-container",22),n.ɵɵtemplate(2,$n,4,1,"ng-template",null,23,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngIf","collapsed"==i.windowState)("ngIfElse",o)}}function Zn(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",30),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",25),n.ɵɵelementStart(3,"g",26),n.ɵɵelement(4,"rect",31),n.ɵɵelement(5,"line",32),n.ɵɵelement(6,"line",33),n.ɵɵelement(7,"line",34),n.ɵɵelement(8,"line",35),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonUnmaximizeText)}}function Kn(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",30),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2)._buttonMax_Click(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(1,"svg",25),n.ɵɵelementStart(2,"g",26),n.ɵɵelement(3,"rect",36),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵpropertyInterpolate("title",i.options.buttonMaximizeText)}}function eo(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,Zn,9,1,"ng-container",22),n.ɵɵtemplate(2,Kn,4,1,"ng-template",null,29,n.ɵɵtemplateRefExtractor),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵreference(3),i=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngIf","maximized"==i.windowState)("ngIfElse",o)}}function to(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementContainerStart(0),n.ɵɵelementStart(1,"div",37),n.ɵɵlistener("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().closePanel(e)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",25),n.ɵɵelementStart(3,"g"),n.ɵɵelement(4,"line",38),n.ɵɵelement(5,"line",39),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementContainerEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵpropertyInterpolate("title",i.options.buttonCloseText)}}function no(e,t){}function oo(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",44),n.ɵɵlistener("cancelTriggered",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).onCloseClick()}))("okTriggered",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).onOkClick()})),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵproperty("modalRef",i.modalRef)}}function io(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",40),n.ɵɵelementStart(1,"div",41),n.ɵɵtemplate(2,oo,1,1,"div",42),n.ɵɵelementEnd(),n.ɵɵelementStart(3,"div",43),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext()._resizer_MouseDown(e,{dimension:"height",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵproperty("ngIf",null!==i.config.footer)}}e.ModalContainerComponent=function(t){function o(e,o,i,r,s,a,l,c,p,d){var u=t.call(this,i,o)||this;return u.elementRef=e,u.cdr=o,u.render=i,u.zone=r,u.config=s,u.commonService=a,u.panelManager=l,u.widgetManager=c,u.globalParams=p,u.mapManager=d,u.animationStateChanged=new n.EventEmitter,u.containerClick=new n.EventEmitter,u.cancelTriggered=new n.EventEmitter,u.okTriggered=new n.EventEmitter,u.isStringContent=!1,u.elementFocusedBeforeModalWasOpened=null,u.latestMousedownTarget=null,u.oldMaskStyle=null,u.onCloseTreggered=new n.EventEmitter,u.showStatusBar=!1,u.defaultZIndex=110,u.document=document,u.isStringContent="string"==typeof s.content,u.setContainer(),(null!=u.config.footer||!0!==u.config.okDisabled||!0!==u.config.cancelDisabled)&&(u.showStatusBar=!0),u}return w(o,t),o.prototype.ngOnInit=function(){if(this.commonService.isMobile())this.widgetConfig={position:new L(0,0,0,0,"100%","100%","","unset")};else{var n=0;if("100%"===this.config.width)n=0;else if("auto"===this.config.width);else if("number"==typeof this.config.width)n=(window.innerWidth-this.config.width)/2;else if("string"==typeof this.config.width){var o=parseInt(this.config.width,10);n=(window.innerWidth-o)/2}this.widgetConfig={position:{top:this.config.top,left:n,width:this.config.width,height:this.config.height,zIndex:this.config.zIndex||this.defaultZIndex}}}var i=this.defaultZIndex-1;this.config.zIndex>=1&&(i=this.config.zIndex-1),this.render.setStyle(this.sspanelOverlay.nativeElement,"z-index",i),this.setOptions({buttonMaximize:!0,buttonClose:!0,buttonCollapse:!1,modal:this.config.mask,title:this.config.title.toString(),minHeight:100,minWidth:200}),this.label=this.tooltip=this.config.title.toString(),this.globalParams.mapConfig.is3D?this.view=this.mapManager.view:this.map=this.mapManager.map,this.id="ss-modal",this.gid="ss-modal",this.setPosition(this.widgetConfig.position),this.state=e.WidgetState.opened,this.windowState=e.WidgetWindowState.normal,t.prototype.ngOnInit.call(this)},o.prototype.ngAfterViewInit=function(){this.modalRef.afterOpen.next(),this.config.fullScreen&&this._maximize()},o.prototype.onClose=function(){this.onCloseTreggered.emit()},o.prototype.onMousedown=function(e){this.latestMousedownTarget=e.target||null},o.prototype.onMouseup=function(e){e.target===this.latestMousedownTarget&&e.target===this.elementRef.nativeElement&&this.containerClick.emit(),this.latestMousedownTarget=null},o.prototype.onCloseClick=function(){this.cancelTriggered.emit()},o.prototype.onOkClick=function(){this.okTriggered.emit()},o.prototype.attachComponentPortal=function(e){return this.savePreviouslyFocusedElement(),this.setModalTransformOrigin(),this.widgetContainer.insert(e.hostView),e},o.prototype.attachTemplatePortal=function(){return null},o.prototype.getNativeElement=function(){return this.elementRef.nativeElement},o.prototype.animationDisabled=function(){return!1},o.prototype.setModalTransformOrigin=function(){var e=this.modalElementRef.nativeElement;if(this.elementFocusedBeforeModalWasOpened){var t=this.elementFocusedBeforeModalWasOpened.getBoundingClientRect(),n=this.commonService.getElementBounds(this.elementFocusedBeforeModalWasOpened),o=n.left+t.width/2,i=n.top+t.height/2,r=o-e.offsetLeft+"px "+(i-e.offsetTop)+"px 0px";this.render.setStyle(e,"transform-origin",r)}},o.prototype.savePreviouslyFocusedElement=function(){var e=this;this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement,this.elementRef.nativeElement.focus&&Promise.resolve().then((function(){return e.elementRef.nativeElement.focus()})))},o.prototype.trapFocus=function(){},o.prototype.restoreFocus=function(){},o.prototype.setEnterAnimationClass=function(){},o.prototype.setExitAnimationClass=function(){},o.prototype.cleanAnimationClass=function(){this.animationDisabled()},o.prototype.bindBackdropStyle=function(){},o.prototype.setContainer=function(){var e=this.getContainer();e&&this.render.appendChild(e,this.elementRef.nativeElement)},o.prototype.resetContainer=function(){this.getContainer()},o.prototype.getContainer=function(){return this.config.getContainer},o.prototype.onAnimationDone=function(e){},o.prototype.onAnimationStart=function(e){},o.prototype.startExitAnimation=function(){this.state=e.WidgetState.closed,this.cdr.markForCheck()},o.prototype.closePanel=function(e){this.cancelTriggered.emit()},o}(me),e.ModalContainerComponent.ɵfac=function(t){return new(t||e.ModalContainerComponent)(n.ɵɵdirectiveInject(n.ElementRef),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(n.Renderer2),n.ɵɵdirectiveInject(n.NgZone),n.ɵɵdirectiveInject(Bn),n.ɵɵdirectiveInject(_n),n.ɵɵdirectiveInject(Vn),n.ɵɵdirectiveInject(Dn),n.ɵɵdirectiveInject(D),n.ɵɵdirectiveInject(Wn))},e.ModalContainerComponent.ɵcmp=n.ɵɵdefineComponent({type:e.ModalContainerComponent,selectors:[["epsgis-modal-container"]],viewQuery:function(e,t){if(1&e&&(n.ɵɵviewQuery(Gn,3),n.ɵɵviewQuery(Jn,3),n.ɵɵviewQuery(qn,3),n.ɵɵviewQuery(qn,3)),2&e){var o=void 0;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.sspanelOverlay=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.sspanel_titlebar=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.sspanel=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.modalElementRef=o.first)}},features:[n.ɵɵInheritDefinitionFeature],decls:25,vars:8,consts:[[1,"ssmodal_overlay"],["ssmodal_overlay",""],[1,"ssmodal",3,"id","ngStyle"],["ssmodal",""],[1,"ssmodal_titlebar","ssmodal_titlebar_draggable",3,"mousedown"],["ssmodal_titlebar",""],[1,"ssmodal_titlebar_text"],[1,"ssmodal_titlebar_text_span"],["class","ssmodal_titlebar_custom_buttons","ss-modal-titlebar-button","",3,"modalRef",4,"ngIf"],[4,"ngIf"],[1,"ssmodal_content",3,"click"],["widget_content",""],["class","ssmodal_statusbar",4,"ngIf"],[1,"ssmodal_resizer","ssmodal_resizer_top",3,"mousedown"],[1,"ssmodal_resizer","ssmodal_resizer_left",3,"mousedown"],[1,"ssmodal_resizer","ssmodal_resizer_right",3,"mousedown"],[1,"ssmodal_resizer","ssmodal_resizer_topleft",3,"mousedown"],[1,"ssmodal_resizer","ssmodal_resizer_topright",3,"mousedown"],[1,"ssmodal_resizer","ssmodal_resizer_bottomleft",3,"mousedown"],[1,"ssmodal_resizer","ssmodal_resizer_bottomright",3,"mousedown"],[1,"ssmodal_minplaceholder"],["ss-modal-titlebar-button","",1,"ssmodal_titlebar_custom_buttons",3,"modalRef"],[4,"ngIf","ngIfElse"],["showCollapsedButton",""],[1,"ssmodal_titlebar_button","ssmodal_titlebar_button_collapse",3,"title","click"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 10 10","height","100%","width","100%"],["fill","none"],["points","1,3 9,3 5,8 1,3 9,3"],["points","1,7 9,7 5,2 1,7 9,7"],["showMaximizeButton",""],[1,"ssmodal_titlebar_button","ssmodal_titlebar_button_maximize",3,"title","click"],["x","1","y","3","height","6","width","6"],["y1","3","x1","3","y2","1","x2","3"],["y1","1","x1","2.5","y2","1","x2","9.5"],["y1","1","x1","9","y2","7","x2","9"],["y1","7","x1","9.5","y2","7","x2","7"],["x","1","y","1","height","8","width","8"],[1,"ssmodal_titlebar_button","ssmodal_titlebar_button_close",3,"title","click"],["y2","0","x2","10","y1","10","x1","0"],["y2","10","x2","10","y1","0","x1","0"],[1,"ssmodal_statusbar"],[1,"ssmodal_statusbar_content"],["ss-modal-footer","",3,"modalRef","cancelTriggered","okTriggered",4,"ngIf"],[1,"ssmodal_resizer","ssmodal_resizer_bottom",3,"mousedown"],["ss-modal-footer","",3,"modalRef","cancelTriggered","okTriggered"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵelementStart(4,"div",4,5),n.ɵɵlistener("mousedown",(function(e){return t._titlebar_MouseDown(e)})),n.ɵɵelementStart(6,"div",6),n.ɵɵelementStart(7,"span",7),n.ɵɵtext(8),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵtemplate(9,Xn,1,1,"div",8),n.ɵɵtemplate(10,Yn,4,2,"ng-container",9),n.ɵɵtemplate(11,eo,4,2,"ng-container",9),n.ɵɵtemplate(12,to,6,1,"ng-container",9),n.ɵɵelementEnd(),n.ɵɵelementStart(13,"div",10),n.ɵɵlistener("click",(function(e){return t._contentClick(e)})),n.ɵɵtemplate(14,no,0,0,"ng-template",null,11,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd(),n.ɵɵtemplate(16,io,4,1,"div",12),n.ɵɵelementStart(17,"div",13),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"height",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(18,"div",14),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"left"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(19,"div",15),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"width",directionX:"right"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(20,"div",16),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"left",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(21,"div",17),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"right",directionY:"top"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(22,"div",18),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"left",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementStart(23,"div",19),n.ɵɵlistener("mousedown",(function(e){return t._resizer_MouseDown(e,{dimension:"both",directionX:"right",directionY:"bottom"})})),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelement(24,"div",20)),2&e&&(n.ɵɵadvance(2),n.ɵɵpropertyInterpolate("id",t.options.id),n.ɵɵproperty("ngStyle",t.position),n.ɵɵadvance(6),n.ɵɵtextInterpolate(t.options.title),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.config.titleBarButtons),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.options.buttonCollapse),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.options.buttonMaximize),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.options.buttonClose),n.ɵɵadvance(4),n.ɵɵproperty("ngIf",t.showStatusBar))},styles:[""]}),e.ModalContainerComponent=b([H({uri:"epsgis-modal-container",path:"components/modal/modal-container"})],e.ModalContainerComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.ModalContainerComponent,[{type:n.Component,args:[{selector:"epsgis-modal-container",templateUrl:"./modal-container.component.html",styleUrls:["./modal-container.component.scss"]}]}],(function(){return[{type:n.ElementRef},{type:n.ChangeDetectorRef},{type:n.Renderer2},{type:n.NgZone},{type:Bn},{type:_n},{type:Vn},{type:Dn},{type:D},{type:Wn}]}),{sspanelOverlay:[{type:n.ViewChild,args:["ssmodal_overlay",{static:!0}]}],sspanel_titlebar:[{type:n.ViewChild,args:["ssmodal_titlebar",{static:!0}]}],sspanel:[{type:n.ViewChild,args:["ssmodal",{static:!0}]}],modalElementRef:[{type:n.ViewChild,args:["ssmodal",{static:!0}]}]});var ro=function(){function t(e,t,n,o,i,r){var s=this;this.overlay=e,this.injector=t,this.parentModal=n,this.componentFactoryResolver=o,this.appRef=i,this.commonService=r,this.openModalsAtThisLevel=[],this.afterAllClosedAtThisLevel=new p.Subject,this.factories=new Map,this.factoriesArray=null,this.afterAllClose=p.defer((function(){return s.openModals.length?s._afterAllClosed:s._afterAllClosed.pipe(g.startWith(void 0))})),this.modalContainerClass="ssmodal_container",this.factories=this.componentFactoryResolver._factories,this.factories&&(this.factoriesArray=Array.from(this.factories))}return Object.defineProperty(t.prototype,"openModals",{get:function(){return this.parentModal?this.parentModal.openModals:this.openModalsAtThisLevel},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_afterAllClosed",{get:function(){var e=this.parentModal;return e?e._afterAllClosed:this.afterAllClosedAtThisLevel},enumerable:!1,configurable:!0}),t.prototype.createModalContainer=function(){var e=document.querySelector(this.modalContainerClass);null==e&&((e=window.document.createElement("div")).className=this.modalContainerClass,window.document.body.appendChild(e)),this.modalContainer=e},t.prototype.create=function(e){return this.open(e.content,e)},t.prototype.closeAll=function(){this.closeModals(this.openModals)},t.prototype.attachModalContainer2=function(t,n){var o=n&&n.viewContainerRef&&n.viewContainerRef.injector,i=new f.PortalInjector(o||this.injector,new WeakMap([[h.OverlayRef,t],[Bn,n]])),r=e.ModalContainerComponent,s=new f.ComponentPortal(r,n.viewContainerRef,i);return t.attach(s).instance},t.prototype.open=function(e,t){var n=this,o=Fn(t||{},new Bn),i=this.attachModalContainer(o),r=this.attachModalContent(e,o,i);return i.instance.modalRef=r,this.openModals.push(r),r.afterClose.subscribe((function(){return n.removeOpenModal(r)})),r},t.prototype.removeOpenModal=function(e){var t=this.openModals.indexOf(e);t>-1&&(this.openModals.splice(t,1),this.openModals.length||this._afterAllClosed.next())},t.prototype.closeModals=function(e){for(var t=e.length;t--;)e[t].close(),this.openModals.length||this._afterAllClosed.next()},t.prototype.attachModalContainer=function(t){var o=t&&t.viewContainerRef&&t.viewContainerRef.injector,i=new f.PortalInjector(o||this.injector,new WeakMap([[Bn,t]]));this.createModalContainer();var r={config:t},s=Object.keys(r).map((function(e){return{provide:e,useValue:r[e]}})),a=e.ModalContainerComponent,l=this.componentFactoryResolver.resolveComponentFactory(a),c=n.Injector.create({providers:s,parent:i}),p=l.create(c);return this.modalContainer.appendChild(this.commonService.getComponentRootNode(p)),this.appRef.attachView(p.hostView),p},t.prototype.findComponent=function(e){var t=null;if(this.factories){if(!this.factories||this.factories.size<=0)return null;var n=this.factoriesArray.find((function(t,n,o){return t[1].selector.toLowerCase()===e.toLowerCase()||t[0].name.toLowerCase()===e.toLocaleLowerCase()}));n&&(t=n[0])}else{var o=G(e);if(o)return o.component}return t},t.prototype.attachModalContent=function(e,t,o){var i=new An(t,o);if(e instanceof n.TemplateRef);else if(e&&"string"!=typeof e){var r={};t.componentParams&&(r=t.componentParams);var s=Object.keys(r).map((function(e){return{provide:e,useValue:r[e]}})),a=e;this.factories&&!this.factories.get(e)&&(a=this.findComponent(e.name));var l=this.componentFactoryResolver.resolveComponentFactory(a),c=n.Injector.create({providers:s,parent:this.createInjector(i,t)}),p=l.create(c);Un(p.instance,t.componentParams),o.instance.attachComponentPortal(p),i.componentInstance=p.instance,i.componentRef=p}return i},t.prototype.createInjector=function(e,t){var n=t&&t.viewContainerRef&&t.viewContainerRef.injector,o=new WeakMap([[An,e]]);return new f.PortalInjector(n||this.injector,o)},t.prototype.ngOnDestroy=function(){this.closeModals(this.openModalsAtThisLevel),this.afterAllClosedAtThisLevel.complete()},t}();ro.ɵfac=function(e){return new(e||ro)(n.ɵɵinject(h.Overlay),n.ɵɵinject(n.Injector),n.ɵɵinject(ro,12),n.ɵɵinject(n.ComponentFactoryResolver),n.ɵɵinject(n.ApplicationRef),n.ɵɵinject(_n))},ro.ɵprov=n.ɵɵdefineInjectable({token:ro,factory:ro.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ro,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:h.Overlay},{type:n.Injector},{type:ro,decorators:[{type:n.Optional},{type:n.SkipSelf}]},{type:n.ComponentFactoryResolver},{type:n.ApplicationRef},{type:_n}]}),null);var so=function(){function e(e){this.req=e,this.API_SAVE_SETTING="api/setting/content"}return e.prototype.getConfigContent=function(e){return this.req.getJsonFile(e)},e.prototype.saveConfig=function(e){return e?e.filePath?this.req.postNoAuth(this.API_SAVE_SETTING,e,this.req.config.settingApiUrl,!0):Promise.resolve({success:!1,msg:"data.filePath is null",data:null}):Promise.resolve({success:!1,msg:"data is null",data:null})},e}();so.ɵfac=function(e){return new(e||so)(n.ɵɵinject(kn))},so.ɵprov=n.ɵɵdefineInjectable({token:so,factory:so.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(so,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:kn}]}),null);var ao=function(e,t,n,o,i,r,s,a,l,c,p,d,u,g,f,h){var m=this;this.config=e,this.utils=t,this.commonService=n,this.httpService=o,this.configLoader=i,this.configManager=r,this.mapManager=s,this.panelManager=a,this.widgetManager=l,this.widgetPlaceHolder=c,this.layoutManager=p,this.jsEventManager=d,this.route=u,this.componentManager=g,this.modalManaer=f,this.settingService=h,e||(e=Object.assign({},z)),this.route.queryParams.subscribe((function(e){m.config.urlParams=Object.assign(m.config.urlParams,e)}))};ao.ɵfac=function(e){return new(e||ao)(n.ɵɵinject(D),n.ɵɵinject(yn),n.ɵɵinject(_n),n.ɵɵinject(kn),n.ɵɵinject(zn),n.ɵɵinject(Tn),n.ɵɵinject(Wn),n.ɵɵinject(Vn),n.ɵɵinject(Dn),n.ɵɵinject(Rn),n.ɵɵinject(jn),n.ɵɵinject(c.EventManager),n.ɵɵinject(u.ActivatedRoute),n.ɵɵinject(Mn),n.ɵɵinject(ro),n.ɵɵinject(so))},ao.ɵprov=n.ɵɵdefineInjectable({token:ao,factory:ao.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ao,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:D},{type:yn},{type:_n},{type:kn},{type:zn},{type:Tn},{type:Wn},{type:Vn},{type:Dn},{type:Rn},{type:jn},{type:c.EventManager},{type:u.ActivatedRoute},{type:Mn},{type:ro},{type:so}]}),null);var lo=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.is=function(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&n===e},e.prototype.isArray=function(e){return this.is("Array",e)},e.prototype.getExtension=function(e){var t=(e=e||"").split("?")[0].split(".");return t[t.length-1].toLowerCase()},e.prototype.createElement=function(e){var t=document.createElement(e.element);for(var n in e)"element"!==n&&"appendTo"!==n&&(t[n]=e[n]);return"object"==typeof document.getElementsByTagName(e.appendTo)[0].appendChild(t)},e.prototype.elementLoaded=function(e,t){t&&t(e)},e.prototype.elementReadyStateChanged=function(e,t,n){"loaded"!==t.readyState&&"complete"!==t.readyState||this.elementLoaded(e,n)},e.prototype.loadCss=function(e,t){var n=this,o=this.createElement({element:"link",rel:"stylesheet",type:"text/css",href:e,onload:function(){n.elementLoaded(e,t)},appendTo:"head"}),i=setInterval((function(){for(var o=document.styleSheets,r=0;r<o.length;r++)o[r].href&&o[r].href.substr(o[r].href.indexOf(e),o[r].href.length)===e&&(clearInterval(i),n.elementLoaded(e,t))}),500);return o},e.prototype.loadJs=function(e,t){var n=this;return this.createElement({element:"script",type:"text/javascript",onload:function(){n.elementLoaded(e,t)},onreadystatechange:function(){n.elementReadyStateChanged(e,n,t)},src:e,appendTo:"body"})},e.prototype.loadResources=function(e,t,n,o){for(var i=[],r=function(t){(function(e){for(var t=0;t<i.length;t++)if(i[t]===e)return!0;return!1})(t)||(i.push(t),n&&n(t,i.length),i.length===e.length&&o&&o())},s=0;s<e.length;s++)this.loadResource(e[s],t,r)},e.prototype.loadResource=function(e,t,n){t&&t(e),"css"===this.getExtension(e).toLowerCase()?this.loadCss(e,n):this.loadJs(e,n)},e}();lo._instance=null;var co=lo.getInstance(),po=function(){function e(e){this.req=e,this._tokenKey="",this._userKey="__current_user",this._currentUser=null,this._tokenKey=this.req.getTokenKey()}return e.prototype.saveInfo2Local=function(e,t){window.sessionStorage?sessionStorage.setItem(e,JSON.stringify(t)):console.log("浏览器不支持sessionStorage")},e.prototype.getInfoFromLocal=function(e){return window.sessionStorage?sessionStorage.getItem(e):(console.log("浏览器不支持sessionStorage"),"")},e.prototype.saveToken=function(e){this.saveInfo2Local(this._tokenKey,e),this.req.setAccessToken(e.access_token)},e.prototype.getLocalToken=function(){var e=this.getInfoFromLocal(this._tokenKey);return""!=e?JSON.parse(e):null},e.prototype.refreshToken=function(e){var t=this;return new Promise((function(n,o){t.req.get("epsoffice/token/refresh",{refresh_token:e}).then((function(e){e.success&&t.saveToken(e.data),n(e)})).catch((function(e){return o(e)}))}))},e.prototype.userLogin=function(e,t){var n=this;return new Promise((function(o,i){n.req.post("epsoffice/user/login",{username:e,password:t}).then((function(e){e.success&&(n._currentUser=e.data,n.saveInfo2Local(n._userKey,e.data),n.saveToken(e.data.token)),o(e)})).catch(i)}))},e.prototype.checkLogin=function(){return this.req.get("epsoffice/user/login/validate")},e.prototype.logout=function(){var e=this;return new Promise((function(t,n){e.req.post("epsoffice/user/logout").then((function(n){n.success&&e.removeToken(),t(n.success)})).catch((function(e){console.error(e),t(!1)}))}))},e.prototype.removeToken=function(){this._currentUser=null,this.req.setAccessToken(""),sessionStorage.removeItem(this._tokenKey),sessionStorage.removeItem(this._userKey)},e.prototype.getRemoteUser=function(){var e=this;return new Promise((function(t,n){e.req.get("epsoffice/user/login/info").then((function(n){n.success?(e._currentUser=n.data,e.saveInfo2Local(e._userKey,n.data),e._currentUser.token=e.getLocalToken(),t(n.data)):(console.error(n.msg),t(null))})).catch((function(e){console.error(e),t(null)}))}))},e.prototype.getCurrentUser=function(){if(this._currentUser)return this._currentUser;var e=this.getInfoFromLocal(this._userKey);if(e){var t=JSON.parse(e);this._currentUser=t,this._currentUser.token=this.getLocalToken()}return this._currentUser},e}();po.ɵfac=function(e){return new(e||po)(n.ɵɵinject(kn))},po.ɵprov=n.ɵɵdefineInjectable({token:po,factory:po.ɵfac,providedIn:"root"}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(po,[{type:n.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:kn}]}),null);var uo=function(){function e(){}return e.decrypt=function(e,t){try{if(""==e)return"";if(t&&""!=t||(t="sunway_webgis_auth_code"),t=encodeURIComponent(t),null==e||e.length<8)return"";if(null==t||t.length<=0)return"";for(var n="",o=0,i=t.length;o<i;o+=1)n+=t.charCodeAt(o).toString();var r=Math.floor(n.length/5),s=parseInt(n.charAt(r)+n.charAt(2*r)+n.charAt(3*r)+n.charAt(4*r)+n.charAt(5*r)),a=Math.round(t.length/2),l=Math.pow(2,31)-1,c=parseInt(e.substring(e.length-8,e.length),16);for(e=e.substring(0,e.length-8),n+=c;n.length>10;)n=(parseInt(n.substring(0,10))+parseInt(n.substring(10,n.length))).toString();this.isIE()&&n++,n=(s*n+a)%l;var p="",d="";for(o=0,i=e.length;o<i;o+=2)p=parseInt(e.substring(o,o+2),16)^Math.floor(n/l*255),d+=String.fromCharCode(p),n=(s*n+a)%l;return decodeURIComponent(d)}catch(e){return""}},e.validateAuth=function(e){var t=this;setTimeout((function(){t.doValidateAuth(e)}),0)},e.doValidateAuth=function(e){this.encryptCode=e;var t=this.decrypt(this.encryptCode),n=t.split("|")[0],o=t.split("|")[1];this.authtype=t.split("|")[2];var i=window.location.hostname.toUpperCase();if("LOCALHOST"!==i){var r=!1;if(n.split(",").forEach((function(e){e.toUpperCase()!==i||(r=!0)})),r){void 0===o&&this.showAuthDlg("软件未授权，请联系软件提供商，获取授权码！");var s=this.getServerDate(),a=new Date(o);s.getTime()>a.getTime()&&this.showAuthDlg(this.authtype+"有限期至【"+o+"】已过期，请重新授权！@山维科技"),"正式版"!=this.authtype&&this.showAuthInfo("开发预览版，有限期至【"+o+"】@山维科技")}else this.showAuthDlg("软件未授权，请联系软件提供商，获取授权码！")}},e.isIE=function(){return!(!window.ActiveXObject&&!("ActiveXObject"in window))},e.getServerDate=function(){var e=null;(e=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft")).open("GET","/",!1),e.send(null);var t=e.getResponseHeader("Date");return new Date(t)},e.showAuthInfo=function(e){var t=document.getElementById("copyrightinfo");if(t)t.innerHTML=e;else{var n=document.createElement("div");n.id="copyrightinfo",n.style.position="absolute",n.style.bottom="0px",n.style.right="20px",n.style.fontSize="14px",n.style.zIndex="700",n.style.color="#e51c23";var o=document.createTextNode(e);n.appendChild(o),document.body.appendChild(n)}},e.showAuthDlg=function(e){if(!document.getElementById("copyDlginfo")){var t=document.createElement("div");t.id="mask",t.style.background="#000",t.style.opacity="0.65",t.style.width="100%",t.style.position="absolute",t.style.left="0",t.style.top="0",t.style.bottom="0",t.style.zIndex="1000",document.body.appendChild(t);var n='<div style="text-align:center; margin-top:150px;"><p style="color:red">'+e+'</p><a href="#" id="hideWin">刷新</a> </div>',o=document.createElement("div");o.id="copyDlginfo",o.style.position="absolute",o.style.top="0",o.style.right="0",o.style.bottom="0",o.style.left="0",o.style.margin="auto",o.style.fontSize="14px",o.style.borderRadius="20px",o.style.zIndex="1001",o.style.width="500px",o.style.height="300px",o.style.color="#e51c23",o.style.background="#fff",o.innerHTML=n,document.body.appendChild(o),document.getElementById("hideWin").onclick=function(){window.location.reload()}}},e}();function go(e,t){}uo.message="请获取开发授权！",uo.authtype="开发版",uo.encryptCode="";var fo=function(){function e(e,t,o,i){var r=this;this.serviceInjector=e,this.cdr=t,this.eventService=o,this.componentLoader=i,this.jsonFileChange=new n.EventEmitter,this.configChange=new n.EventEmitter,this.autoLoad=!0,this.eventService.rss.on(this.eventService._checkChangeDetector,(function(e){yn.detectChanges(r.cdr)}))}return Object.defineProperty(e.prototype,"jsonFile",{get:function(){return this._configJsonFile},set:function(e){this._configJsonFile=e,this.configJsonFile=e,this.jsonFileChange.emit(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._config},set:function(e){this._config=e,"string"==typeof e&&(this._configJsonFile=e,this.configJsonFile=e),this.configChange.emit(e)},enumerable:!1,configurable:!0}),e.prototype.ngOnInit=function(){},e.prototype.ngAfterViewInit=function(){this.componentLoader.setViewContainerInHome(this.container),this.componentLoader.setServiceInjector(this.serviceInjector),this.autoLoad&&this._init()},e.prototype._init=function(){if(this.serviceInjector.layoutManager.startup(),this.config)this.serviceInjector.configManager.loadConfig(this.config);else{var e=this.serviceInjector.config.appInfo.configFile;this.configJsonFile&&(e=this.configJsonFile),this.serviceInjector.configManager.loadConfig(e)}},e.prototype.clear=function(){this.serviceInjector.layoutManager._destroyPreloadWidgetIcons(),this.serviceInjector.layoutManager._destroyOffPanelWidgets(),this.serviceInjector.layoutManager._destroyWidgetPlaceholders(),this.serviceInjector.layoutManager._destroyPreloadPanels(),this.serviceInjector.layoutManager._destroyPreloadGroupPanels(),this.serviceInjector.mapManager.destoryMap()},e.prototype.reload=function(){this.clear(),this._init()},e}();fo.ɵfac=function(e){return new(e||fo)(n.ɵɵdirectiveInject(ao),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(En),n.ɵɵdirectiveInject(Mn))},fo.ɵcmp=n.ɵɵdefineComponent({type:fo,selectors:[["epsgis-comp-container"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(T,3,n.ViewContainerRef),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.container=o.first)}},inputs:{configJsonFile:["config-json-file","configJsonFile"],jsonFile:"jsonFile",config:"config",autoLoad:"autoLoad"},outputs:{jsonFileChange:"jsonFileChange",configChange:"configChange"},decls:1,vars:0,consts:[["component-host",""]],template:function(e,t){1&e&&n.ɵɵtemplate(0,go,0,0,"ng-template",0)},directives:[T],styles:["epsgis-comp-container{width:100%;height:100%}"]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(fo,[{type:n.Component,args:[{selector:"epsgis-comp-container",templateUrl:"./comp-container.component.html",styleUrls:["./comp-container.component.scss"]}]}],(function(){return[{type:ao},{type:n.ChangeDetectorRef},{type:En},{type:Mn}]}),{container:[{type:n.ViewChild,args:[T,{read:n.ViewContainerRef,static:!0}]}],configJsonFile:[{type:n.Input,args:["config-json-file"]}],jsonFile:[{type:n.Input}],jsonFileChange:[{type:n.Output}],config:[{type:n.Input}],configChange:[{type:n.Output}],autoLoad:[{type:n.Input}]});var ho=function(){};function mo(e,t){1&e&&n.ɵɵprojection(0)}ho.ɵmod=n.ɵɵdefineNgModule({type:ho}),ho.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||ho)},providers:[],imports:[[t.CommonModule,W]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(ho,{declarations:[fo],imports:[t.CommonModule,W],exports:[fo]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ho,[{type:n.NgModule,args:[{imports:[t.CommonModule,W],declarations:[fo],entryComponents:[fo],exports:[fo],providers:[]}]}],null,null);e.SSModalComponent=function(e){function t(t,o,i,r){var s=e.call(this,i,r)||this;return s.modalService=t,s.viewContainerRef=o,s._render=i,s.cdr=r,s.mask=!0,s.maskClosable=!0,s.visible=!1,s.closable=!0,s.okLoading=!1,s.okDisabled=!1,s.cancelDisabled=!1,s.cancelLoading=!1,s.keyboard=!0,s.noAnimation=!1,s.zIndex=1e3,s.width=520,s.closeIcon="close",s.okType="primary",s.iconType="question-circle",s.modalType="default",s.onOk=new n.EventEmitter,s.onCancel=new n.EventEmitter,s.afterOpen=new n.EventEmitter,s.afterClose=new n.EventEmitter,s.visibleChange=new n.EventEmitter,s.modalRef=null,s}return w(t,e),Object.defineProperty(t.prototype,"afterOpenObservable",{get:function(){return this.afterOpen.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"afterCloseObservable",{get:function(){return this.afterClose.asObservable()},enumerable:!1,configurable:!0}),t.prototype.ngOnInit=function(){},t.prototype.onCloseClick=function(){},t.prototype.onOkClick=function(){},t.prototype.getConfig=function(){var e=Hn(this);return e.viewContainerRef=this.viewContainerRef,this.content||(e.content=this.contentTemplateRef),e},t.prototype.ngOnChanges=function(e){var t=e.Visible,n=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(e);i<o.length;i++)t.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(e,o[i])&&(n[o[i]]=e[o[i]])}return n}(e,["Visible"]);Object.keys(n).length&&this.modalRef&&this.modalRef.updateConfig(Hn(this)),t&&(this.visible?this.open():this.close())},t.prototype.open=function(){if(this.visible||(this.visible=!0,this.visibleChange.emit(!0)),!this.modalRef){var e=this.getConfig();this.modalRef=this.modalService.create(e)}},t.prototype.close=function(e){this.visible&&(this.visible=!1,this.visibleChange.emit(!1)),this.modalRef&&(this.modalRef.close(e),this.modalRef=null)},t.prototype.destroy=function(e){this.close(e)},t.prototype.triggerOk=function(){null!=this.modalRef&&this.modalRef.triggerOk()},t.prototype.triggerCancel=function(){null!=this.modalRef&&this.modalRef.triggerCancel()},t.prototype.getContentComponent=function(){return null!=this.modalRef?this.modalRef.getContentComponent():null},t.prototype.getElement=function(){return null!=this.modalRef?this.modalRef.getElement():null},t.prototype.getModalRef=function(){return this.modalRef},t}(me),e.SSModalComponent.ɵfac=function(t){return new(t||e.SSModalComponent)(n.ɵɵdirectiveInject(ro),n.ɵɵdirectiveInject(n.ViewContainerRef),n.ɵɵdirectiveInject(n.Renderer2,8),n.ɵɵdirectiveInject(n.ChangeDetectorRef,8))},e.SSModalComponent.ɵcmp=n.ɵɵdefineComponent({type:e.SSModalComponent,selectors:[["epsgis-modal"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(n.TemplateRef,3),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.contentTemplateRef=o.first)}},inputs:{mask:"mask",maskClosable:"maskClosable",visible:"visible",closable:"closable",okLoading:"okLoading",okDisabled:"okDisabled",cancelDisabled:"cancelDisabled",cancelLoading:"cancelLoading",keyboard:"keyboard",noAnimation:"noAnimation",content:"content",componentParams:"componentParams",footer:"footer",getContainer:"getContainer",zIndex:"zIndex",width:"width",wrapClassName:"wrapClassName",className:"className",styles:"styles",title:"title",closeIcon:"closeIcon",maskStyle:"maskStyle",bodyStyle:"bodyStyle",okText:"okText",cancelText:"cancelText",okType:"okType",iconType:"iconType",modalType:"modalType",onOk:"onOk",onCancel:"onCancel"},outputs:{onOk:"onOk",onCancel:"onCancel",afterOpen:"afterOpen",afterClose:"afterClose",visibleChange:"visibleChange"},features:[n.ɵɵInheritDefinitionFeature,n.ɵɵNgOnChangesFeature],ngContentSelectors:["*"],decls:1,vars:0,template:function(e,t){1&e&&(n.ɵɵprojectionDef(),n.ɵɵtemplate(0,mo,1,0,"ng-template"))},styles:[".ssmodal_container[_ngcontent-%COMP%]{box-sizing:border-box;position:absolute;top:0;bottom:0;right:0;left:0;display:flex;justify-content:flex-start;align-content:flex-start;pointer-events:none}.sspanel_statusbar[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 auto;display:flex;align-items:flex-end}.statusbar_content[_ngcontent-%COMP%]{box-sizing:border-box;flex:1 1 auto;overflow:hidden;text-align:left;text-overflow:ellipsis;white-space:nowrap}.statusbar_handle[_ngcontent-%COMP%]{box-sizing:border-box;display:flex}.statusbar_handle_resizable[_ngcontent-%COMP%]{cursor:se-resize}"],changeDetection:0}),e.SSModalComponent=b([H({uri:"epsgis-modal",path:"epsgis/components/modal"})],e.SSModalComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.SSModalComponent,[{type:n.Component,args:[{selector:"epsgis-modal",template:" <ng-template><ng-content></ng-content></ng-template> ",styleUrls:["./modal.component.scss"],changeDetection:n.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:ro},{type:n.ViewContainerRef},{type:n.Renderer2,decorators:[{type:n.Optional}]},{type:n.ChangeDetectorRef,decorators:[{type:n.Optional}]}]}),{mask:[{type:n.Input}],maskClosable:[{type:n.Input}],visible:[{type:n.Input}],closable:[{type:n.Input}],okLoading:[{type:n.Input}],okDisabled:[{type:n.Input}],cancelDisabled:[{type:n.Input}],cancelLoading:[{type:n.Input}],keyboard:[{type:n.Input}],noAnimation:[{type:n.Input}],content:[{type:n.Input}],componentParams:[{type:n.Input}],footer:[{type:n.Input}],getContainer:[{type:n.Input}],zIndex:[{type:n.Input}],width:[{type:n.Input}],wrapClassName:[{type:n.Input}],className:[{type:n.Input}],styles:[{type:n.Input}],title:[{type:n.Input}],closeIcon:[{type:n.Input}],maskStyle:[{type:n.Input}],bodyStyle:[{type:n.Input}],okText:[{type:n.Input}],cancelText:[{type:n.Input}],okType:[{type:n.Input}],iconType:[{type:n.Input}],modalType:[{type:n.Input}],onOk:[{type:n.Input},{type:n.Output}],onCancel:[{type:n.Input},{type:n.Output}],afterOpen:[{type:n.Output}],afterClose:[{type:n.Output}],visibleChange:[{type:n.Output}],contentTemplateRef:[{type:n.ViewChild,args:[n.TemplateRef,{static:!0}]}]});function vo(e,t){if(1&e&&n.ɵɵelement(0,"div",4),2&e){var o=n.ɵɵnextContext(2);n.ɵɵproperty("innerHTML",o.config.title,n.ɵɵsanitizeHtml)}}function yo(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"button",6),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(o);var e=t.$implicit;return n.ɵɵnextContext(3).onButtonClick(e)})),n.ɵɵtext(1),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=n.ɵɵnextContext(3);n.ɵɵclassMap(r.getButtonClass(i)),n.ɵɵproperty("hidden",!r.getButtonCallableProp(i,"show")),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.label," ")}}function Co(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,yo,2,4,"button",5),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext(2);n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",o.buttons)}}function wo(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵelementContainerStart(1),n.ɵɵtemplate(2,vo,1,1,"div",2),n.ɵɵtemplate(3,Co,2,1,"ng-container",3),n.ɵɵelementContainerEnd(),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵproperty("ngIf",!o.buttonsFooter),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.buttonsFooter)}}function bo(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"button",9),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).onCancel()})),n.ɵɵtext(1),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵproperty("disabled",i.config.cancelDisabled),n.ɵɵattribute("cdkFocusInitial","cancel"===i.config.autofocus),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.config.cancelText||i.locale.cancelText," ")}}function _o(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"button",10),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).onOk()})),n.ɵɵtext(1),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵproperty("disabled",i.config.okDisabled),n.ɵɵattribute("cdkFocusInitial","ok"===i.config.autofocus),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.config.okText||i.locale.okText," ")}}function Mo(e,t){if(1&e&&(n.ɵɵtemplate(0,bo,2,3,"button",7),n.ɵɵtemplate(1,_o,2,3,"button",8)),2&e){var o=n.ɵɵnextContext();n.ɵɵproperty("ngIf",null!==o.config.cancelText),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",null!==o.config.okText)}}var xo=function(){function e(e){this.config=e,this.buttonsFooter=!1,this.buttons=[],this.locale={okText:"确定",cancelText:"取消"},this.cancelTriggered=new n.EventEmitter,this.okTriggered=new n.EventEmitter,this.destroy$=new p.Subject,Array.isArray(e.footer)&&(this.buttonsFooter=!0,this.buttons=e.footer.map(So))}return e.prototype.getButtonClass=function(e){switch(e.type){case"primary":return"ss-btn ss-btn-primary";case"dashed":return"ss-btn ss-btn-dashed";case"danger":return"ss-btn ss-btn-danger";case"link":return"ss-btn ss-btn-link"}return"ss-btn ss-btn-default"},e.prototype.onCancel=function(){this.cancelTriggered.emit()},e.prototype.onOk=function(){this.okTriggered.emit()},e.prototype.getButtonCallableProp=function(e,t){var n=e[t];if(this.modalRef){var o=this.modalRef.getContentComponent();return"function"==typeof n?n.apply(e,o&&[o]):n}return!1},e.prototype.onButtonClick=function(e){if(!this.getButtonCallableProp(e,"loading")){var t=this.getButtonCallableProp(e,"onClick");e.autoLoading&&Ln(t)&&(e.loading=!0,t.then((function(){return e.loading=!1})).catch((function(){return e.loading=!1})))}},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e}();function So(e){return Object.assign({type:null,size:"default",autoLoading:!0,show:!0,loading:!1,disabled:!1},e)}xo.ɵfac=function(e){return new(e||xo)(n.ɵɵdirectiveInject(Bn))},xo.ɵcmp=n.ɵɵdefineComponent({type:xo,selectors:[["div","ss-modal-footer",""]],hostAttrs:[1,""],inputs:{modalRef:"modalRef"},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},attrs:["ss-modal-footer",""],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["defaultFooterButtons",""],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["nz-button","",3,"hidden","class","click",4,"ngFor","ngForOf"],["nz-button","",3,"hidden","click"],["nz-button","","class","ss-btn ss-btn-default",3,"disabled","click",4,"ngIf"],["nz-button","","class","ss-btn ss-btn-primary ",3,"disabled","click",4,"ngIf"],["nz-button","",1,"ss-btn","ss-btn-default",3,"disabled","click"],["nz-button","",1,"ss-btn","ss-btn-primary",3,"disabled","click"]],template:function(e,t){if(1&e&&(n.ɵɵtemplate(0,wo,4,2,"ng-container",0),n.ɵɵtemplate(1,Mo,2,2,"ng-template",null,1,n.ɵɵtemplateRefExtractor)),2&e){var o=n.ɵɵreference(2);n.ɵɵproperty("ngIf",t.config.footer)("ngIfElse",o)}},directives:[t.NgIf,t.NgForOf],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(xo,[{type:n.Component,args:[{selector:"div[ss-modal-footer]",template:'\n    <ng-container *ngIf="config.footer; else defaultFooterButtons">\n      <ng-container>\n        <div *ngIf="!buttonsFooter" [innerHTML]="config.title"></div>\n        <ng-container *ngIf="buttonsFooter">\n          <button\n            *ngFor="let button of buttons"\n            nz-button\n            (click)="onButtonClick(button)"\n            [hidden]="!getButtonCallableProp(button, \'show\')"\n            [class]="getButtonClass(button)"\n          >\n            {{ button.label }}\n          </button>\n        </ng-container>\n      </ng-container>\n    </ng-container>\n    <ng-template #defaultFooterButtons>\n      <button\n        *ngIf="config.cancelText !== null"\n        [attr.cdkFocusInitial]="config.autofocus === \'cancel\'"\n        nz-button\n        (click)="onCancel()"\n        [disabled]="config.cancelDisabled"\n        class="ss-btn ss-btn-default"\n      >\n        {{ config.cancelText || locale.cancelText }}\n      </button>\n      <button\n        *ngIf="config.okText !== null"\n        [attr.cdkFocusInitial]="config.autofocus === \'ok\'"\n        nz-button\n        class="ss-btn ss-btn-primary "\n        (click)="onOk()"\n        [disabled]="config.okDisabled"\n      >\n        {{ config.okText || locale.okText }}\n      </button>\n    </ng-template>\n  ',host:{class:""},changeDetection:n.ChangeDetectionStrategy.Default}]}],(function(){return[{type:Bn}]}),{cancelTriggered:[{type:n.Output}],okTriggered:[{type:n.Output}],modalRef:[{type:n.Input}]});var Po=function(t){function n(e){var n=t.call(this)||this;return n.componentLoader=e,n._is3d=!1,n}return w(n,t),Object.defineProperty(n.prototype,"is3D",{get:function(){return this._is3d},set:function(e){this._is3d=e,this.globalParams.mapConfig.is3D=e},enumerable:!1,configurable:!0}),n.prototype.ngOnInit=function(){this.componentLoader.setViewContainerInMap(this.container),t.prototype.ngOnInit.call(this)},n.prototype.setProps=function(n){var o,i,r;this.appConfig=n.appConfig,this.appConfig.map.jsApi||(this.globalParams.mapConfig.jsApi?this.appConfig.map.jsApi=this.globalParams.mapConfig.jsApi:this.appConfig.map.jsApi=this.config.mapJsApi),this.widgetConfig=this.appConfig.map,this.config=n.config,this.widgetConfig.manifest=n.manifest,this.started=!0,this.state=e.WidgetState.opened,this.name=null===(o=n.manifest)||void 0===o?void 0:o.name,this.inPanel=null===(r=null===(i=n.manifest)||void 0===i?void 0:i.properties)||void 0===r?void 0:r.inPanel,this.label="地图",this.uri=this.getCompInfo().uri,this.folderUrl=this.globalParams.widgetRootPath+"/"+this.getCompInfo().path+"/",this.widgetConfig.folderUrl=this.folderUrl,t.prototype.setPosition.call(this,this.appConfig.map.position)},n.prototype.initMap=function(){return _(this,void 0,void 0,(function(){return M(this,(function(e){return[2,Promise.resolve(null)]}))}))},n}(ne);Po.ɵfac=function(e){return new(e||Po)(n.ɵɵdirectiveInject(Mn))},Po.ɵdir=n.ɵɵdefineDirective({type:Po,viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(T,3,n.ViewContainerRef),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.container=o.first)}},features:[n.ɵɵInheritDefinitionFeature]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Po,[{type:n.Directive}],(function(){return[{type:Mn}]}),{container:[{type:n.ViewChild,args:[T,{read:n.ViewContainerRef,static:!0}]}]});var Io=function(e,t){this.ssModalRef=e,this.templateRef=t,this.ssModalRef&&this.ssModalRef.updateConfig({footer:this.templateRef})};Io.ɵfac=function(e){return new(e||Io)(n.ɵɵdirectiveInject(An,8),n.ɵɵdirectiveInject(n.TemplateRef))},Io.ɵdir=n.ɵɵdefineDirective({type:Io,selectors:[["","SsModalFooter",""]],exportAs:["SsModalFooter"]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Io,[{type:n.Directive,args:[{selector:"[SsModalFooter]",exportAs:"SsModalFooter"}]}],(function(){return[{type:An,decorators:[{type:n.Optional}]},{type:n.TemplateRef}]}),null);var Oo=function(){},Eo=["pdfViewerContainer"];function ko(e,t){if(1&e&&n.ɵɵelement(0,"iframe",3),2&e){var o=n.ɵɵnextContext();n.ɵɵstyleProp("height",o.pdfViewHeight),n.ɵɵproperty("src",o.pdfUrl,n.ɵɵsanitizeResourceUrl)}}e.PDFViewerComponent=function(){function e(e){this.domSanitizer=e,this.width=0,this.height=0,this.ready=new n.EventEmitter(!1),this.pdfViewHeight="600px"}return e.prototype.ngAfterViewInit=function(){var e=this;setTimeout((function(){e.resetViewHeight()}),1e3)},e.prototype.ngOnInit=function(){this.pdfUrl=this.domSanitizer.bypassSecurityTrustResourceUrl(this.viewerUrl+"?file="+this.source),this.ready.emit("pdf viewer initialize!")},e.prototype.resetViewHeight=function(){var e=this.getMainWindowHeight();this.pdfViewHeight=e>0?e-5+"px":"600px"},e.prototype.getMainWindowHeight=function(){for(var e,t,n=this.pdfViewerContainer.nativeElement.parentNode;n&&(!n.className||"ssmodal_content"!==n.className&&"sspanel_content"!==n.className);)n=n.parentNode;if(n)return n.clientHeight-30;n=this.pdfViewerContainer.nativeElement.parentNode;for(var o=null;n;){if(n.childNodes&&n.childNodes.length>0)try{for(var i=(e=void 0,x(n.childNodes)),r=i.next();!r.done;r=i.next()){var s=r.value;if("NZ-CONTENT"===s.nodeName.toLocaleUpperCase()){o=s;break}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}if(o)break;n=n.parentNode}return o?o.clientHeight:this.height},e}(),e.PDFViewerComponent.ɵfac=function(t){return new(t||e.PDFViewerComponent)(n.ɵɵdirectiveInject(c.DomSanitizer))},e.PDFViewerComponent.ɵcmp=n.ɵɵdefineComponent({type:e.PDFViewerComponent,selectors:[["pdf-viewer"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(Eo,1),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.pdfViewerContainer=o.first)}},inputs:{width:"width",height:"height",viewerUrl:"viewerUrl",source:"source"},outputs:{ready:"ready"},decls:3,vars:1,consts:[[1,"pdfViewerContainer"],["pdfViewerContainer",""],["frameborder","0",3,"src","height",4,"ngIf"],["frameborder","0",3,"src"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0,1),n.ɵɵtemplate(2,ko,1,3,"iframe",2),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(2),n.ɵɵproperty("ngIf",t.pdfUrl))},directives:[t.NgIf],styles:["iframe[_ngcontent-%COMP%]{width:100%;height:100%;border:0}"]}),e.PDFViewerComponent=b([H({uri:"pdf-viewer",path:"components/shared/ngxviewer/pdf-viewer"})],e.PDFViewerComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.PDFViewerComponent,[{type:n.Component,args:[{selector:"pdf-viewer",templateUrl:"./pdf-viewer.component.html",styleUrls:["./pdf-viewer.component.scss"]}]}],(function(){return[{type:c.DomSanitizer}]}),{pdfViewerContainer:[{type:n.ViewChild,args:["pdfViewerContainer"]}],width:[{type:n.Input}],height:[{type:n.Input}],viewerUrl:[{type:n.Input}],source:[{type:n.Input}],ready:[{type:n.Output}]});var Do=["imageViewerContainer"],zo=["showImg"];function To(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"img",55),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(o);var e=t.$implicit,i=t.index;return n.ɵɵnextContext(2).changeCurrentImageUrl(e,i)})),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit;n.ɵɵproperty("src",i,n.ɵɵsanitizeUrl)}}function Vo(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵnamespaceSVG(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(0,"div",43),n.ɵɵelementStart(1,"div",44),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(o);var e=n.ɵɵreference(10),t=n.ɵɵnextContext(),i=n.ɵɵreference(3);return t.previousImg(e,i)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(2,"svg",45),n.ɵɵelement(3,"path",46),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(4,"div",47),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(o);var e=n.ɵɵreference(10),t=n.ɵɵnextContext(),i=n.ɵɵreference(3);return t.nextImg(e,i)})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(5,"svg",48),n.ɵɵelement(6,"path",49),n.ɵɵelement(7,"path",50),n.ɵɵelement(8,"path",51),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(9,"div",52,53),n.ɵɵtemplate(11,To,1,1,"img",54),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(9),n.ɵɵstyleProp("left",i.moreImgInitLeft+"px"),n.ɵɵadvance(2),n.ɵɵproperty("ngForOf",i.imageSources)}}e.ImageViewerComponent=function(){function e(e,t){this.domSanitizer=e,this.eventService=t,this.width=0,this.height=0,this.first=0,this.ready=new n.EventEmitter(!1),this.imageSources=[],this.radian=0,this.x=1,this.y=1,this.zoom=.1,this.moreImgInitLeft=0,this.currentImageTempTop=0,this.currentImageTempLeft=0,this.dragStartClientX=0,this.dragStartClientY=0,this.isStartMove=!1,this.imageViewHeight="400px",this.mainWindowHeight=0}return e.prototype.ngOnInit=function(){this.convertUrl(this.source)},e.prototype.convertUrl=function(e){var t=this;if(this.imageSources.splice(0),!(e&&e.length>0))throw"没有图片源，请传入！";e.forEach((function(e){t.imageSources.push(t.domSanitizer.bypassSecurityTrustResourceUrl(e))})),null==this.first?this.currentImageUrl=this.imageSources[0]:this.currentImageUrl=this.imageSources[this.first],this.ready.emit("image viewer initialize!")},e.prototype.changeImageSources=function(e){this.source=e,this.convertUrl(this.source)},e.prototype.currentImageLoaded=function(e,t){var n=this;this.currentImage=e,this.initTop=(t.clientHeight-e.offsetHeight)/2,this.initLeft=(t.clientWidth-e.offsetWidth)/2,this.currentImage&&(this.currentImage.style.top=this.initTop+"px",this.currentImage.style.left=this.initLeft+"px"),this.mainWindowHeight=this.getMainWindowHeight(),this.imageSources.length>1?this.imageViewHeight=this.mainWindowHeight-96+"px":this.imageViewHeight=this.mainWindowHeight-46+"px",this.checkBrowser().firefox?t.addEventListener("DOMMouseScroll",(function(e){n.currentImageZoomByWheel(e)})):t.addEventListener("mousewheel",(function(e){n.currentImageZoomByWheel(e)}))},e.prototype.preOrNextImg=function(e){var t=this.imageSources.indexOf(this.currentImageUrl);"pre"==e?0!=t&&(t--,this.currentImageUrl=this.imageSources[t],this.eventService.rss.emit(this.eventService._imageViewerIndexChanged,{index:t})):"next"==e&&t!=this.imageSources.length-1&&(t++,this.currentImageUrl=this.imageSources[t],this.eventService.rss.emit(this.eventService._imageViewerIndexChanged,{index:t})),this.currentImgReset()},e.prototype.changeCurrentImg=function(){var e=this.getMatrix(this.radian,this.x,this.y);this.currentImage&&(this.currentImage.style.transform="matrix("+e.M11.toFixed(16)+","+e.M21.toFixed(16)+","+e.M12.toFixed(16)+","+e.M22.toFixed(16)+", 0, 0)")},e.prototype.getMatrix=function(e,t,n){var o=Math.cos(e),i=Math.sin(e);return{M11:o*t,M12:-i*n,M21:i*t,M22:o*n}},e.prototype.vertical=function(){this.radian=Math.PI-this.radian,this.y*=-1},e.prototype.horizontal=function(){this.radian=Math.PI-this.radian,this.x*=-1},e.prototype.rotate=function(e){this.radian=e},e.prototype.rotateLeftBy90=function(){this.radian-=Math.PI/2},e.prototype.rotateRightBy90=function(){this.radian+=Math.PI/2},e.prototype.rotateByDegress=function(e){this.radian=e*Math.PI/180},e.prototype.getZoom=function(e,t){return e>0&&e>-t?t:e<0&&e<t?-t:0},e.prototype.scale=function(e){if(e){var t=this.getZoom(this.x,e),n=this.getZoom(this.y,e);t&&n&&(this.x+=t,this.y+=n)}},e.prototype.zoomin=function(){this.scale(Math.abs(this.zoom))},e.prototype.zoomout=function(){this.scale(-Math.abs(this.zoom))},e.prototype.reset=function(){this.radian=0,this.x=1,this.y=1,this.zoom=.1,this.currentImage&&(this.currentImage.style.top=this.initTop+"px",this.currentImage.style.left=this.initLeft+"px")},e.prototype.imageZoomin=function(){this.zoomin(),this.changeCurrentImg()},e.prototype.imageZoomout=function(){this.zoomout(),this.changeCurrentImg()},e.prototype.rotateLeft=function(){this.rotateLeftBy90(),this.changeCurrentImg()},e.prototype.rotateRight=function(){this.rotateRightBy90(),this.changeCurrentImg()},e.prototype.flipVertical=function(){this.horizontal(),this.changeCurrentImg()},e.prototype.flipHorizontal=function(){this.vertical(),this.changeCurrentImg()},e.prototype.currentImgReset=function(){this.reset(),this.changeCurrentImg()},e.prototype.previousImg=function(e,t){var n=Number(e.style.left.split("px")[0])+t.clientWidth;this.moreImgInitLeft=n<0?n:0,this.moreImgInitLeft<=0&&(this.moreImgInitLeft=30)},e.prototype.nextImg=function(e,t){var n=Number(e.style.left.split("px")[0])-t.clientWidth;this.moreImgInitLeft=-e.clientWidth<n?n:this.moreImgInitLeft,this.moreImgInitLeft<=0&&(this.moreImgInitLeft=30)},e.prototype.changeCurrentImageUrl=function(e,t){this.currentImageUrl=e,this.currentImgReset(),this.eventService.rss.emit(this.eventService._imageViewerIndexChanged,{index:t})},e.prototype.changeCurrentIndex=function(e){e>=0&&e<this.imageSources.length&&(this.currentImageUrl=this.imageSources[e],this.currentImgReset())},e.prototype.currentImageZoomByWheel=function(e){e.preventDefault();var t=(e.wheelDelta?e.wheelDelta/-180:(e.detail||0)/3)*Math.abs(this.zoom);this.scale(t),this.x>=.1&&this.y>=.1&&this.changeCurrentImg()},e.prototype.currentImageDragStart=function(e){this.currentImage&&(this.currentImageTempTop=parseInt(this.currentImage.style.top),this.currentImageTempLeft=parseInt(this.currentImage.style.left)),this.dragStartClientX=e.clientX,this.dragStartClientY=e.clientY,this.currentImage&&(this.currentImage.style.transition="all 0s ease-out"),this.isStartMove=!0},e.prototype.setImageHeight=function(){var e=this.getMainWindowHeight();e!==this.mainWindowHeight&&(this.mainWindowHeight=e,this.imageSources.length>1?this.imageViewHeight=e-96+"px":this.imageViewHeight=e-46+"px")},e.prototype.currentImageDrag=function(e){if(this.setImageHeight(),this.isStartMove){var t=e.clientX-this.dragStartClientX,n=e.clientY-this.dragStartClientY;this.currentImage&&(this.currentImage.style.top=this.currentImageTempTop+n+"px",this.currentImage.style.left=this.currentImageTempLeft+t+"px")}},e.prototype.currentImageDragEnd=function(e){this.currentImage&&(this.currentImage.style.transition="all 0.5s ease-out"),this.isStartMove=!1},e.prototype.cancleCurrentImageDrag=function(e){e.preventDefault()},e.prototype.getMainWindowHeight=function(){for(var e,t,n=this.imageViewerContainer.nativeElement.parentNode;n&&(!n.className||"ssmodal_content"!==n.className&&"sspanel_content"!==n.className);)n=n.parentNode;if(n)return n.clientHeight-30;n=this.imageViewerContainer.nativeElement.parentNode;for(var o=null;n;){if(n.childNodes&&n.childNodes.length>0)try{for(var i=(e=void 0,x(n.childNodes)),r=i.next();!r.done;r=i.next()){var s=r.value;if("NZ-CONTENT"===s.nodeName.toLocaleUpperCase()){o=s;break}}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}if(o)break;n=n.parentNode}return o?o.clientHeight:this.height},e.prototype.checkBrowser=function(){var e={},t=navigator.userAgent;return window.opera?(e.ver=window.opera.version(),e.opera=parseFloat(e.ver)):/Edge\/(\S+)/.test(t)?(e.ver=RegExp.$1,e.misEdge=parseFloat(e.ver)):/OPR\/(\S+)/.test(t)?(e.ver=RegExp.$1,e.opera=parseFloat(e.ver)):/Chrome\/(\S+)/.test(t)?(e.ver=RegExp.$1,e.chrome=parseFloat(e.ver)):/Version\/(\S+)/.test(t)?(e.ver=RegExp.$1,e.safari=parseFloat(e.ver)):/Firefox\/(\S+)/.test(t)?(e.ver=RegExp.$1,e.firefox=parseFloat(e.ver)):/MSIE ([^;]+)/.test(t)||/rv:([^\)]+)\) like Gecko/.test(t)?(e.ver=RegExp.$1,e.ie=parseFloat(e.ver)):(/KHTML\/(\S+)/.test(t)||/Konqueror\/(\S+)/.test(t))&&(e.ver=RegExp.$1,e.konq=parseFloat(e.ver)),e},e}(),e.ImageViewerComponent.ɵfac=function(t){return new(t||e.ImageViewerComponent)(n.ɵɵdirectiveInject(c.DomSanitizer),n.ɵɵdirectiveInject(En))},e.ImageViewerComponent.ɵcmp=n.ɵɵdefineComponent({type:e.ImageViewerComponent,selectors:[["image-viewer"]],viewQuery:function(e,t){if(1&e&&(n.ɵɵviewQuery(Do,1),n.ɵɵviewQuery(zo,1)),2&e){var o=void 0;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.imageViewerContainer=o.first),n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.showImg=o.first)}},inputs:{width:"width",height:"height",source:"source",first:"first"},outputs:{ready:"ready"},decls:43,vars:6,consts:[[1,"imageViewerContainer"],["imageViewerContainer",""],[1,"imageViewer",3,"dragstart","mousedown","mousemove","mouseup"],["imageViewer",""],[3,"src","load"],["showImg",""],[1,"previousImg",3,"click"],["aria-hidden","true","title","上一张",1,"fa","fa-chevron-circle-left"],["t","1588945968636","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","18261","width","60","height","60",1,"icon"],["d","M564.3264 737.0752l41.5744-41.5744-184.4224-184.1152 184.4224-184.1152-41.5744-41.5744L338.944 511.3856z","p-id","18262"],["d","M511.7952 101.5808c-226.304 0-409.8048 183.5008-409.8048 409.8048s183.5008 409.8048 409.8048 409.8048S921.6 737.792 921.6 511.3856 738.0992 101.5808 511.7952 101.5808z m0 58.5728c194.048 0 351.3344 157.2864 351.3344 351.3344s-157.3888 351.232-351.3344 351.232c-194.048 0-351.3344-157.2864-351.3344-351.3344 0-93.184 36.9664-182.4768 102.912-248.4224s155.2384-102.8096 248.4224-102.8096z","p-id","18263"],[1,"nextImg",3,"click"],["aria-hidden","true","title","下一张",1,"fa","fa-chevron-circle-right"],["t","1588946002551","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","18478","width","60","height","60",1,"icon"],["d","M459.3664 737.0752L417.792 695.5008l184.4224-184.1152L417.792 327.2704l41.5744-41.5744 225.3824 225.6896z","p-id","18479"],["d","M511.7952 101.5808c-226.304 0-409.8048 183.5008-409.8048 409.8048s183.5008 409.8048 409.8048 409.8048S921.6 737.792 921.6 511.3856 738.0992 101.5808 511.7952 101.5808z m0 58.5728c194.048 0 351.3344 157.2864 351.3344 351.3344s-157.3888 351.232-351.3344 351.232c-194.048 0-351.3344-157.2864-351.3344-351.3344 0-93.184 36.9664-182.4768 102.912-248.4224s155.2384-102.8096 248.4224-102.8096z","p-id","18480"],["class","smallImageViewer",4,"ngIf"],[1,"imageTools"],["title","放大",1,"toolsBtn","imageZoomin",3,"click"],["t","1588941022678","viewBox","0 0 1027 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","8990","width","20","height","20",1,"icon"],["d","M722.489 642.844c45.511-62.577 73.955-136.533 73.955-216.177 0-204.8-164.977-369.778-369.777-369.778S56.889 221.867 56.889 426.667s164.978 369.777 369.778 369.777c79.644 0 153.6-28.444 216.177-68.266l221.867 221.866c22.756 22.756 56.889 22.756 79.645 0 22.755-22.755 22.755-56.888 0-79.644L722.489 642.844z m-295.822 96.712c-170.667 0-312.89-142.223-312.89-312.89S256 113.779 426.668 113.779 739.556 256 739.556 426.667s-142.223 312.889-312.89 312.889","p-id","8991"],["d","M227.556 398.222h398.222v56.89H227.556z","p-id","8992"],["d","M398.222 227.556h56.89v398.222h-56.89z","p-id","8993"],["title","缩小",1,"toolsBtn","imageZoomout",3,"click"],["t","1588941306698","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","9115","width","20","height","20",1,"icon"],["d","M446.258717 823.960011c-51.124378 0-100.745519-10.005888-147.456377-29.814026-45.097104-19.050891-85.673242-46.388517-120.438023-81.153298-34.762735-34.764781-62.102407-75.340919-81.153298-120.438023-19.803022-46.709835-29.814026-96.324836-29.814026-147.449213s10.011005-100.745519 29.814026-147.456377c19.050891-45.097104 46.38954-85.673242 81.153298-120.438023 34.764781-34.762735 75.340919-62.102407 120.438023-81.153298 46.709835-19.803022 96.331999-29.814026 147.456377-29.814026 51.124378 0 100.739379 10.011005 147.449213 29.814026 45.097104 19.050891 85.673242 46.38954 120.438023 81.153298 34.764781 34.764781 62.102407 75.340919 81.153298 120.438023 19.808138 46.709835 29.813003 96.331999 29.813003 147.456377s-10.005888 100.739379-29.813003 147.449213c-19.050891 45.097104-46.388517 85.673242-81.153298 120.438023-34.764781 34.764781-75.340919 62.102407-120.438023 81.153298-46.604434 19.808138-96.220459 29.814026-147.449213 29.814026z m0-688.833451c-170.920788 0-309.97889 139.058103-309.978891 309.978891 0 170.915671 139.058103 309.971727 309.978891 309.971727 170.915671 0 309.971727-139.057079 309.971727-309.971727 0-170.920788-138.951679-309.97889-309.971727-309.978891z m0 0","p-id","9116"],["d","M924.025031 957.314205c-8.823969 0-17.646915-3.337002-24.321942-10.115382L680.137395 727.635175c-13.453407-13.453407-13.453407-35.307134 0-48.76054 13.453407-13.453407 35.300994-13.453407 48.755424 0l219.563648 219.565694c13.453407 13.453407 13.453407 35.305087 0 48.759518-6.779404 6.77838-15.603373 10.114358-24.431436 10.114358z m0 0","p-id","9117"],["d","M602.106204 488.047472H290.730501c-16.679891 0-30.133298-13.453407-30.133298-30.135344 0-16.685008 13.453407-30.139437 30.133298-30.139438h311.265186c16.687054 0 30.140461 13.453407 30.140461 30.139438 0 16.681938-13.45443 30.135344-30.029944 30.135344z m0 0","p-id","9118"],["title","向左旋转",1,"toolsBtn","rotateLeft",3,"click"],["t","1588941359139","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","9333","width","20","height","20",1,"icon"],["d","M296.78775165 822.42764344a29.24918237 29.24918237 0 0 0 11.88822868 9.74972721 366.76451243 366.76451243 0 0 0 423.03239697-29.18019793c162.18119742-127.48228586 196.37422746-360.55595902 75.100495-518.98903088S456.301571 100.94781045 292.07385008 230.29266234a90.07000608 90.07000608 0 0 0-13.17592873 10.96844358c-12.57806845-15.8433068-23.52351697-30.99677536-33.82511584-43.8047899-12.8769982-16.97004443-22.07485451-30.2149576-25.70800781-33.96308395a18.16576575 18.16576575 0 0 0-14.57860182-10.00266835 19.33849276 19.33849276 0 0 0-21.70694032 16.39517847l0.3679142 1.14973193-1.33368944 20.67218142-19.49945517 135.66837756-3.1502653 18.78662109-2.71336744 16.09624873a19.82137999 19.82137999 0 0 0 3.05828656 14.14170319 16.09624795 16.09624795 0 0 0 12.44010034 7.08234912l15.86630188 2.02352844 18.62565868 2.32245896 134.08174776 13.79678406 19.75239556 1.9085554 1.14973193-0.3679142a21.08608498 21.08608498 0 0 0 21.3850155-17.63688915 18.39571183 18.39571183 0 0 0-6.43849871-16.71710329c-2.52941073-4.1620299-12.83100961-16.97004443-25.68501352-33.94008965-8.82994211-12.09518046-19.49945518-26.00693834-30.19196253-39.96468481 3.90908875-3.90908875 9.26683997-6.99037039 13.19892302-10.92245345 132.33415478-104.39566674 320.33833383-85.49407262 418.52544794 43.22992316a306.51855469 306.51855469 0 0 1-61.25772156 422.98640759 298.07952184 298.07952184 0 0 1-349.05863961 20.94811763 33.94008889 33.94008889 0 0 0-38.49302728 3.35721709 33.71014281 33.71014281 0 0 0-6.94438178 47.92083044z","fill","#333333","p-id","9334"],["title","向右旋转",1,"toolsBtn","rotateRight",3,"click"],["t","1588941386678","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","9485","width","20","height","20",1,"icon"],["d","M727.29746405 822.42764344a29.24918237 29.24918237 0 0 1-11.91122374 9.74972721 366.76451243 366.76451243 0 0 1-422.98640759-29.20319301C130.2416296 675.49189255 96.00261019 442.44121292 217.27634341 284.03113615s350.57628573-183.12931506 514.84999526-53.80745826a90.07000608 90.07000608 0 0 1 13.15293443 10.96844359c12.57806845-15.8203125 23.52351697-30.97378029 33.84811014-43.78179482 12.83100961-16.97004443 22.02886514-30.2149576 25.70800782-33.96308396a18.16576575 18.16576575 0 0 1 14.55560752-10.04865772 19.33849276 19.33849276 0 0 1 21.70694031 16.39517846l-0.34491988 1.14973194 1.33368941 20.69517649 19.36148706 135.76035631 3.17326038 18.7866211 2.71336744 16.09624793a19.82137999 19.82137999 0 0 1-3.05828733 14.14170397 16.09624795 16.09624795 0 0 1-12.44010035 7.05935405l-15.88929616 2.0465235-18.57966932 2.29946389-134.10474207 13.79678407-19.75239632 1.9315497-1.14973194-0.3909085a21.08608498 21.08608498 0 0 1-21.38501549-17.61389485 18.39571183 18.39571183 0 0 1 6.43849949-16.7171033c2.50641566-4.1850242 12.83100961-16.97004443 25.68501351-33.94008887 8.82994211-12.11817552 19.49945518-26.02993264 30.19196255-39.96468481-3.90908875-3.90908875-9.26683997-7.01336545-13.19892381-10.94544852-132.33415478-104.39566674-320.33833383-85.49407262-418.52544717 43.22992316A306.51855469 306.51855469 0 0 0 332.87039983 750.45441943a298.07952184 298.07952184 0 0 0 348.98965516 20.74116586 33.94008889 33.94008889 0 0 1 38.51602234 3.38021216 33.71014281 33.71014281 0 0 1 6.9443818 47.92082966z","fill","#333333","p-id","9486"],["title","垂直翻转",1,"toolsBtn","flipVertical",3,"click"],["t","1588941411559","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","9669","width","20","height","20",1,"icon"],["d","M494.03 74.72l-109.59 144.09c-12.48 16.41-5.82 29.97 14.79000001 30.09L482 249.47 482 774.53l-82.77 0.54c-20.64 0.15-27.27 13.68-14.79 30.09l109.59 144.09c12.48 16.41 32.43 16.05 44.31000001-0.81l101.81999999-144.51c11.88-16.86 4.74-30.54-15.9-30.39L542.00000001 774.14l-1e-8-524.25 82.23 0.54c20.64 0.15 27.78-13.53 15.9-30.39l-101.82-144.51c-11.88-16.86-31.8-17.25-44.28-0.81z","p-id","9670"],["title","水平翻转",1,"toolsBtn","flipHorizontal",3,"click"],["t","1588941431636","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","9885","width","20","height","20",1,"icon"],["d","M978.432 492.832l-153.696-116.896c-17.504-13.312-31.968-6.208-32.096 15.776L792.032 480H231.968l-0.608-88.288c-0.16-22.016-14.592-29.088-32.096-15.776l-153.696 116.896c-17.504 13.312-17.12 34.592 0.864 47.264l154.144 108.608c17.984 12.672 32.576 5.056 32.416-16.96L232.384 544h559.2l-0.576 87.712c-0.16 22.016 14.432 29.632 32.416 16.96l154.144-108.608c17.984-12.672 18.4-33.92 0.864-47.232z","p-id","9886"],["title","重置",1,"toolsBtn","imageReset",3,"click"],["t","1588941445066","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","10072","width","20","height","20",1,"icon"],["d","M666.1 731.4c-48.6 35-105.6 52.5-163.8 51.8-7.7-0.1-15.3-0.7-22.9-1.3-3.1-0.3-6.1-0.8-9.2-1.3-6-0.8-11.9-1.5-17.7-2.8-3.6-0.6-7.2-1.7-10.6-2.5-5.7-1.3-11.4-2.6-16.9-4.3-2.6-1-5.1-1.9-7.8-3-6.5-2.1-12.9-4.4-19-7-1.4-0.6-2.8-1.2-4.1-1.7-7.2-3.4-14.4-6.9-21.3-10.6-0.3-0.2-0.6-0.3-0.9-0.5-23.5-13.3-44.9-29.6-63.7-49-0.3-0.3-0.6-0.7-0.9-1-5.8-6-11.4-12.2-16.7-18.9-1.1-1.4-2.1-2.7-3.3-4.3-38.2-49.1-61.2-111.3-61.2-178.8h73.6L182 314.7 64.2 496.1h73.5c0 79.4 24.2 153.1 65.2 214.2 0.5 0.9 0.8 1.9 1.4 2.6 4.2 6.3 9 12 13.5 17.8 1.8 2.1 3.3 4.3 5.1 6.7 6.6 8.2 13.9 16.1 21.1 23.8 0.8 0.8 1.4 1.4 2 2.1 24.7 25.4 52.4 46.6 82.7 63.8 0.8 0.5 1.5 0.8 2.4 1.4 8.7 4.8 17.7 9.3 26.7 13.3 2.3 1 4.5 2.1 6.7 3 7.8 3.4 15.8 6.2 23.8 9.1 3.8 1.4 7.5 2.6 11.4 3.9 7 2.1 14.2 3.9 21.5 5.6 4.8 1.2 9.5 2.4 14.4 3.4 2 0.5 3.9 1.2 5.9 1.4 6.9 1.3 13.7 1.9 20.5 2.8 2.5 0.5 5 0.9 7.4 1.2 12.3 1.2 24.5 2 36.8 2 74.7 0 147.7-23.5 210.3-68.5 19.9-14.4 24.8-42.7 10.9-63.1-13.9-20.8-41.3-25.7-61.3-11.2z m219.5-206.6c0-79.3-23.9-152.9-64.7-213.6-0.6-1-1-2.1-1.5-3-5.3-7.5-10.7-14.4-16.2-21.5-0.6-0.8-1.3-1.7-1.8-2.6-37.5-46.4-84.4-82.4-137.4-106-1.6-0.6-2.9-1.4-4.5-2-8.5-3.6-17.2-6.7-26-9.8-3-1-6.2-2.2-9.3-3.2-7.7-2.4-15.3-4.3-23.1-6.2-4.3-1-8.7-2.1-13-3-2.1-0.4-4.1-1-6.3-1.5-5.8-1-11.5-1.5-17.4-2.3-4.1-0.5-8-1.1-12-1.5-9.8-1-19.5-1.4-29.2-1.5-1.8 0-3.5-0.3-5.3-0.3-0.3 0-0.6 0.1-0.9 0.1-74.6 0.1-147.5 23.2-210 68.3-19.9 14.3-24.8 42.6-10.8 63.2 13.9 20.4 41.5 25.5 61.5 11 48.2-34.7 104.6-52.3 162.3-51.8 8.3 0.1 16.6 0.5 24.6 1.3 2.5 0.2 4.9 0.6 7.4 1 6.6 0.8 13.2 1.7 19.8 3.2 2.8 0.5 5.7 1.3 8.4 1.9 6.5 1.5 12.7 3 18.9 5 2.1 0.6 4 1.3 5.8 2.1 7.2 2.4 14.2 4.9 21 7.9 0.8 0.2 1.4 0.8 2.1 1 41.2 18.2 77.3 46.1 105.5 81.2 0.1 0.1 0.2 0.4 0.4 0.6 39.6 49.6 63.5 113 63.5 182h-73.7l117.9 181.5 117.6-181.5h-73.6z","p-id","10073"],[1,"smallImageViewer"],["title","向左查看",1,"toImg","previousImgs",3,"click"],["t","1588946161601","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","4499","width","16","height","16",1,"icon"],["d","M854.656 182.656a32 32 0 1 0-45.312-45.312l-352 352a32 32 0 0 0 0 45.312l352 352a32 32 0 0 0 45.312-45.312L525.248 512l329.408-329.344z m-320 0a32 32 0 1 0-45.312-45.312l-352 352a32 32 0 0 0 0 45.312l352 352a32 32 0 0 0 45.312-45.312L205.248 512l329.408-329.344z","fill","#ffffff","p-id","4500"],["title","向右查看",1,"toImg","nextImgs",3,"click"],["t","1588946137834","viewBox","0 0 1024 1024","version","1.1","xmlns","http://www.w3.org/2000/svg","p-id","4373","width","16","height","16",1,"icon"],["d","M556.8 535.893L170.667 149.76c-13.227-13.227-13.227-34.987 0-48.213 13.226-13.227 34.986-13.227 48.213 0L605.013 487.68c13.227 13.227 13.227 34.987 0 48.213-13.226 13.227-34.986 13.227-48.213 0z","fill","#ffffff","p-id","4374"],["d","M170.667 873.813L556.8 487.68c13.227-13.227 34.987-13.227 48.213 0 13.227 13.227 13.227 34.987 0 48.213L218.88 922.027c-13.227 13.226-34.987 13.226-48.213 0a33.493 33.493 0 0 1 0-48.214zM825.173 536.32L439.04 150.187c-13.227-13.227-13.227-34.987 0-48.214 13.227-13.226 34.987-13.226 48.213 0l386.134 386.134c13.226 13.226 13.226 34.986 0 48.213a33.493 33.493 0 0 1-48.214 0z","fill","#ffffff","p-id","4375"],["d","M439.04 874.24l386.133-386.133c13.227-13.227 34.987-13.227 48.214 0 13.226 13.226 13.226 34.986 0 48.213L487.253 922.453c-13.226 13.227-34.986 13.227-48.213 0-13.227-13.226-13.227-34.56 0-48.213z","fill","#ffffff","p-id","4376"],[1,"moreImg"],["moreImg",""],[3,"src","click",4,"ngFor","ngForOf"],[3,"src","click"]],template:function(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",0,1),n.ɵɵelementStart(2,"div",2,3),n.ɵɵlistener("dragstart",(function(e){return t.cancleCurrentImageDrag(e)}))("mousedown",(function(e){return t.currentImageDragStart(e)}))("mousemove",(function(e){return t.currentImageDrag(e)}))("mouseup",(function(e){return t.currentImageDragEnd(e)})),n.ɵɵelementStart(4,"img",4,5),n.ɵɵlistener("load",(function(){n.ɵɵrestoreView(o);var e=n.ɵɵreference(5),i=n.ɵɵreference(3);return t.currentImageLoaded(e,i)})),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",6),n.ɵɵlistener("click",(function(){return t.preOrNextImg("pre")})),n.ɵɵelementStart(7,"span",7),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(8,"svg",8),n.ɵɵelement(9,"path",9),n.ɵɵelement(10,"path",10),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(11,"div",11),n.ɵɵlistener("click",(function(){return t.preOrNextImg("next")})),n.ɵɵelementStart(12,"span",12),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(13,"svg",13),n.ɵɵelement(14,"path",14),n.ɵɵelement(15,"path",15),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵtemplate(16,Vo,12,3,"div",16),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(17,"div",17),n.ɵɵelementStart(18,"button",18),n.ɵɵlistener("click",(function(){return t.imageZoomin()})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(19,"svg",19),n.ɵɵelement(20,"path",20),n.ɵɵelement(21,"path",21),n.ɵɵelement(22,"path",22),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(23,"button",23),n.ɵɵlistener("click",(function(){return t.imageZoomout()})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(24,"svg",24),n.ɵɵelement(25,"path",25),n.ɵɵelement(26,"path",26),n.ɵɵelement(27,"path",27),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(28,"button",28),n.ɵɵlistener("click",(function(){return t.rotateLeft()})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(29,"svg",29),n.ɵɵelement(30,"path",30),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(31,"button",31),n.ɵɵlistener("click",(function(){return t.rotateRight()})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(32,"svg",32),n.ɵɵelement(33,"path",33),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(34,"button",34),n.ɵɵlistener("click",(function(){return t.flipVertical()})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(35,"svg",35),n.ɵɵelement(36,"path",36),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(37,"button",37),n.ɵɵlistener("click",(function(){return t.flipHorizontal()})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(38,"svg",38),n.ɵɵelement(39,"path",39),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵnamespaceHTML(),n.ɵɵelementStart(40,"button",40),n.ɵɵlistener("click",(function(){return t.currentImgReset()})),n.ɵɵnamespaceSVG(),n.ɵɵelementStart(41,"svg",41),n.ɵɵelement(42,"path",42),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵreference(1);n.ɵɵadvance(2),n.ɵɵstyleProp("width",i.style.width)("height",t.imageViewHeight),n.ɵɵadvance(2),n.ɵɵproperty("src",t.currentImageUrl,n.ɵɵsanitizeUrl),n.ɵɵadvance(12),n.ɵɵproperty("ngIf",t.imageSources.length>1)}},directives:[t.NgIf,t.NgForOf],styles:[".imageViewerContainer[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;min-width:400px;min-height:400px;background-color:#3e3e3e}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]{position:relative;overflow:hidden}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;border:0;padding:0;margin:0;width:auto;height:98%;visibility:visible;transition:all .5s ease-out}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:80px;height:100%;background:rgba(112,109,109,0);transition:all .5s}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]   div.previousImg[_ngcontent-%COMP%]{top:0;left:0}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]   div.nextImg[_ngcontent-%COMP%]{top:0;right:0}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover{background:rgba(112,109,109,.5)}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{opacity:1;color:#f5f5f5}.imageViewerContainer[_ngcontent-%COMP%]   .imageViewer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;font-size:60px;width:1em;height:1em;text-align:center;top:50%;margin-top:-30px;left:50%;margin-left:-30px;opacity:.2;color:#797979;transition:all .5s;cursor:pointer}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]{border-top:2px solid #888484;border-bottom:2px solid #888484;margin-top:2px;height:50px;position:relative;overflow:hidden;white-space:nowrap}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]   .moreImg[_ngcontent-%COMP%]{height:100%;position:absolute;z-index:1;top:0;transition:left .6s ease-out}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]   .moreImg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;cursor:pointer;margin:0 2px 0 0;height:100%;transform:scale(1);transition:transform .5s;z-index:1}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]   .moreImg[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.5);z-index:2}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]   .toImg[_ngcontent-%COMP%]{height:100%;width:25px;color:#fff;text-align:center;line-height:50px;font-weight:700;opacity:.8;cursor:pointer;overflow:hidden;background-color:#3e3e3e;position:absolute;z-index:9;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:opacity .5s}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]   .toImg[_ngcontent-%COMP%]:hover{opacity:1}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]   .previousImgs[_ngcontent-%COMP%]{left:0}.imageViewerContainer[_ngcontent-%COMP%]   .smallImageViewer[_ngcontent-%COMP%]   .nextImgs[_ngcontent-%COMP%]{right:0}.imageViewerContainer[_ngcontent-%COMP%]   .imageTools[_ngcontent-%COMP%]{text-align:center;height:46px;line-height:46px}.imageViewerContainer[_ngcontent-%COMP%]   .imageTools[_ngcontent-%COMP%]   .toolsBtn[_ngcontent-%COMP%]{margin:0 5px;padding:4px 8px;color:#3e3e3e;font-size:16px;font-weight:400;line-height:1.5;display:inline-block;text-align:center;white-space:nowrap;vertical-align:middle;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-image:none;background-color:#fff;border:1px solid #ccc;border-radius:4px;cursor:pointer;transition:all .3s}.imageViewerContainer[_ngcontent-%COMP%]   .imageTools[_ngcontent-%COMP%]   .toolsBtn[_ngcontent-%COMP%]:hover{color:#fff;background-color:#3e3e3e;border-color:#888484}"]}),e.ImageViewerComponent=b([H({uri:"image-viewer",path:"components/shared/ngxviewer/image-viewer"})],e.ImageViewerComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.ImageViewerComponent,[{type:n.Component,args:[{selector:"image-viewer",templateUrl:"./image-viewer.component.html",styleUrls:["./image-viewer.component.scss"]}]}],(function(){return[{type:c.DomSanitizer},{type:En}]}),{imageViewerContainer:[{type:n.ViewChild,args:["imageViewerContainer"]}],showImg:[{type:n.ViewChild,args:["showImg"]}],width:[{type:n.Input}],height:[{type:n.Input}],source:[{type:n.Input}],first:[{type:n.Input}],ready:[{type:n.Output}]});var Wo=["videoToolbar"],jo=function(e,t){return{"label-default":e,"label-primary":t}};function Ro(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"span",9),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(o);var e=t.$implicit,i=t.index;return n.ɵɵnextContext().selectVideo(e,i)})),n.ɵɵtext(1),n.ɵɵelementEnd()}if(2&e){var i=t.index,r=n.ɵɵnextContext();n.ɵɵproperty("ngClass",n.ɵɵpureFunction2(2,jo,i!=r.sub,i==r.sub)),n.ɵɵadvance(1),n.ɵɵtextInterpolate1("视频",i+1," ")}}var Lo=function(e,t){return{"fa-repeat":e,"fa-play-circle-o":t}};function Ao(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div"),n.ɵɵelementStart(1,"span",10),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext().playOrPause()})),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngClass",n.ɵɵpureFunction2(2,Lo,i.videoElem.ended,!i.videoElem.ended))("title",i.videoElem.ended?"重播":"播放")}}function No(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"span",29),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).playOrPause()})),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext(2);n.ɵɵproperty("title",i.videoElem.ended?"重播":"播放")}}function Bo(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"span",30),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext(2).playOrPause()})),n.ɵɵelementEnd()}}var Fo=function(e,t,n){return{"fa-volume-down":e,"fa-volume-up":t,"fa-volume-off":n}};function Uo(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",11,12),n.ɵɵelementStart(2,"div",13),n.ɵɵelementStart(3,"span",14),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().progressBallDragStart(e)}))("mousemove",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().progressBallDrag(e)}))("mouseup",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().progressBallDragEnd(e)}))("mouseleave",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().progressBallDragEnd(e)})),n.ɵɵelementStart(4,"span"),n.ɵɵtext(5),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(6,"div",15),n.ɵɵlistener("mousemove",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().videoToolbarProgressMove(e)}))("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().videoToolbarProgressClick(e)})),n.ɵɵelementEnd(),n.ɵɵelementStart(7,"div",16),n.ɵɵlistener("mousemove",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().videoToolbarProgressMove(e)}))("click",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().videoToolbarProgressClick(e)})),n.ɵɵelementEnd(),n.ɵɵelementStart(8,"span",17),n.ɵɵtext(9),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(10,"div",18),n.ɵɵtemplate(11,No,1,1,"span",19),n.ɵɵtemplate(12,Bo,1,0,"span",20),n.ɵɵelementStart(13,"span",21),n.ɵɵelementStart(14,"span"),n.ɵɵtext(15),n.ɵɵelementEnd(),n.ɵɵtext(16),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(17,"div",22),n.ɵɵelementStart(18,"span",23),n.ɵɵlistener("click",(function(){return n.ɵɵrestoreView(o),n.ɵɵnextContext().isMuted()})),n.ɵɵelementEnd(),n.ɵɵelementStart(19,"span",24,25),n.ɵɵelementStart(21,"span",26),n.ɵɵlistener("mousedown",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().volumeBallDragStart(e)}))("mousemove",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵreference(20);return n.ɵɵnextContext().volumeBallDrag(e,t.clientWidth)}))("mouseup",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().volumeBallDragEnd(e)}))("mouseleave",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().volumeBallDragEnd(e)})),n.ɵɵelementStart(22,"span"),n.ɵɵtext(23),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementStart(24,"span",27),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵreference(20);return n.ɵɵnextContext().volumeValClick(e,t.clientWidth)})),n.ɵɵelementEnd(),n.ɵɵelementStart(25,"span",28),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵreference(20);return n.ɵɵnextContext().volumeValClick(e,t.clientWidth)})),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵreference(1),r=n.ɵɵnextContext();n.ɵɵadvance(2),n.ɵɵstyleProp("height",r.videoToolbarProgressHeight+"px"),n.ɵɵadvance(1),n.ɵɵstyleProp("left",r.play_progress+"px")("margin-left",r.play_progress>16?"-16px":"0")("opacity",r.showProgressBall?1:0),n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",r.getFormatTime(r.play_progress/i.clientWidth*r.videoElem.duration)," "),n.ɵɵadvance(1),n.ɵɵstyleProp("width",r.play_progress+"px"),n.ɵɵadvance(2),n.ɵɵstyleProp("left",r.timeTipOffsetX-16+"px"),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",r.timeTip," "),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",r.videoElem.paused),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",!r.videoElem.paused),n.ɵɵadvance(3),n.ɵɵtextInterpolate(r.currentTime),n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" / ",r.totalTime," "),n.ɵɵadvance(2),n.ɵɵproperty("ngClass",n.ɵɵpureFunction3(24,Fo,r.videoElem.volume>0&&r.videoElem.volume<.5,r.videoElem.volume>=.5,0==r.videoElem.volume)),n.ɵɵadvance(3),n.ɵɵstyleProp("left",100*r.videoElem.volume-8+"px"),n.ɵɵadvance(2),n.ɵɵtextInterpolate1(" ",(100*r.videoElem.volume).toFixed(0)+"%"," "),n.ɵɵadvance(1),n.ɵɵstyleProp("width",100*r.videoElem.volume+"px")}}function Ho(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"pdf-viewer",4),n.ɵɵlistener("ready",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().viewerReady(e)})),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵproperty("width",i.width)("height",i.height)("source",i.source)("viewerUrl",i.viewerUrl)}}function Go(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"image-viewer",5),n.ɵɵlistener("ready",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().viewerReady(e)})),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵproperty("source",i.source)("width",i.width)("height",i.height)("first",i.first)}}function Jo(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"video-viewer",6),n.ɵɵlistener("ready",(function(e){return n.ɵɵrestoreView(o),n.ɵɵnextContext().viewerReady(e)})),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext();n.ɵɵproperty("poster",i.poster)("source",i.source)("width",i.width)("videoWidth",i.videoWidth)("height",i.height)}}e.VideoViewerComponent=function(){function e(e){this.domSanitizer=e,this.width=0,this.videoWidth=0,this.height=0,this.source=[],this.ready=new n.EventEmitter(!1),this.sub=0,this.play_progress=0,this.videoToolbarProgressHeight=3,this.preVolume=1,this.showProgressBall=!1,this.progressBallDragStartClientX=0,this.isProgressBallStartMove=!1,this.volumeBallDragStartClientX=0,this.isVolumeBallStartMove=!1,this.timeTipOffsetX=0}return e.prototype.ngOnInit=function(){this.videoUrl=this.source[0],this.ready.emit("video viewer initialize!")},e.prototype.onLoadedmetadata=function(e){this.videoElem=e.target,this.totalTime=this.getFormatTime(this.videoElem.duration),this.currentTime=this.getFormatTime(this.videoElem.currentTime)},e.prototype.OnPlayEnded=function(e){console.log("播放结束："+this.videoElem.ended)},e.prototype.onPlay=function(e){console.log("play")},e.prototype.onTimeupdate=function(e){this.currentTime=this.getFormatTime(this.videoElem.currentTime),this.play_progress=this.videoElem.currentTime/this.videoElem.duration*this.videoToolbar.nativeElement.clientWidth},e.prototype.onProgress=function(e){console.log("progress")},e.prototype.onCanplaythrough=function(e){console.log("canplaythrough")},e.prototype.videoToolbarProgressClick=function(e){this.play_progress=e.offsetX;var t=this.play_progress/this.videoToolbar.nativeElement.clientWidth*this.videoElem.duration;this.videoElem.currentTime=t,this.currentTime=this.getFormatTime(t)},e.prototype.videoToolbarProgressMove=function(e){var t=e.offsetX/this.videoToolbar.nativeElement.clientWidth*this.videoElem.duration;this.timeTipOffsetX=e.offsetX,this.timeTip=this.getFormatTime(t)},e.prototype.progressBallDragStart=function(e){e.stopPropagation(),this.progressBallDragStartClientX=e.clientX,this.isProgressBallStartMove=!0},e.prototype.progressBallDrag=function(e){if(e.stopPropagation(),this.isProgressBallStartMove){var t=e.clientX-this.progressBallDragStartClientX;this.progressBallDragStartClientX=e.clientX,this.play_progress=this.play_progress+t,this.play_progress>=this.videoToolbar.nativeElement.clientWidth?this.play_progress=this.videoToolbar.nativeElement.clientWidth:this.play_progress<=0&&(this.play_progress=0);var n=this.play_progress/this.videoToolbar.nativeElement.clientWidth*this.videoElem.duration;this.videoElem.currentTime=n,this.currentTime=this.getFormatTime(n)}},e.prototype.progressBallDragEnd=function(e){e.stopPropagation(),this.isProgressBallStartMove=!1},e.prototype.volumeValClick=function(e,t){console.log(e.offsetX),this.videoElem.volume=e.offsetX/t},e.prototype.volumeBallDragStart=function(e){e.stopPropagation(),this.volumeBallDragStartClientX=e.clientX,this.isVolumeBallStartMove=!0},e.prototype.volumeBallDrag=function(e,t){if(e.stopPropagation(),this.isVolumeBallStartMove){var n=e.clientX-this.volumeBallDragStartClientX;this.volumeBallDragStartClientX=e.clientX;var o=this.videoElem.volume+n/t;this.videoElem.volume=o<=0?0:o>=1?1:o}},e.prototype.volumeBallDragEnd=function(e){e.stopPropagation(),this.isVolumeBallStartMove=!1},e.prototype.videoMouseover=function(e){this.videoToolbarProgressHeight=16,this.showProgressBall=!0},e.prototype.videoMouseout=function(e){this.videoToolbarProgressHeight=3,this.showProgressBall=!1},e.prototype.play=function(){this.videoElem.ended&&(this.videoElem.currentTime=0),this.videoElem.play()},e.prototype.pause=function(){this.videoElem.pause()},e.prototype.playOrPause=function(){this.videoElem.paused?this.play():this.pause()},e.prototype.selectVideo=function(e,t){this.sub=JSON.parse(JSON.stringify(t)),this.videoUrl=e,this.videoElem.load()},e.prototype.isMuted=function(){this.videoElem.muted?(this.videoElem.muted=!1,this.videoElem.volume=this.preVolume):(this.videoElem.muted=!0,this.preVolume=this.videoElem.volume,this.videoElem.volume=0)},e.prototype.getFormatTime=function(e){var t,n=parseInt(e/3600+"")<10?"0"+parseInt(e/3600+""):""+parseInt(e/3600+""),o=parseInt(e%3600/60+"")<10?"0"+parseInt(e%3600/60+""):""+parseInt(e%3600/60+"");return e>=60?t=e%3600%60<10?"0"+parseInt(e%3600%60+""):""+parseInt(e%3600%60+""):e<60&&e>=10?t=""+parseInt(e+""):e<10&&(t="0"+parseInt(e+"")),n+":"+o+":"+t},e}(),e.VideoViewerComponent.ɵfac=function(t){return new(t||e.VideoViewerComponent)(n.ɵɵdirectiveInject(c.DomSanitizer))},e.VideoViewerComponent.ɵcmp=n.ɵɵdefineComponent({type:e.VideoViewerComponent,selectors:[["video-viewer"]],viewQuery:function(e,t){if(1&e&&n.ɵɵviewQuery(Wo,3),2&e){var o;n.ɵɵqueryRefresh(o=n.ɵɵloadQuery())&&(t.videoToolbar=o.first)}},inputs:{width:"width",videoWidth:"videoWidth",height:"height",source:"source",poster:"poster"},outputs:{ready:"ready"},decls:9,vars:8,consts:[[1,"video-list"],["class","label",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"videoViewerContainer",3,"mouseover","mouseout"],["videoViewerContainer",""],[1,"videoViewer"],[3,"width","poster","click","loadedmetadata","ended","timeupdate","progress","canplaythrough","play"],["type","video/mp4",3,"src"],[4,"ngIf"],["class","videoToolbar",4,"ngIf"],[1,"label",3,"ngClass","click"],[1,"fa",3,"ngClass","title","click"],[1,"videoToolbar"],["videoToolbar",""],[1,"videoToolbar_progress"],[1,"progress_val_ball",3,"mousedown","mousemove","mouseup","mouseleave"],[1,"videoToolbar_play_progress",3,"mousemove","click"],[1,"videoToolbar_buffer_progress",3,"mousemove","click"],[1,"timeTip"],[1,"videoToolbar_play_btn"],["class","playBtn fa fa-play-circle-o","aria-hidden","true",3,"title","click",4,"ngIf"],["class","playBtn fa fa-pause-circle-o","aria-hidden","true","title","暂停",3,"click",4,"ngIf"],[1,"playTime"],[1,"videoToolbar_volume_btn"],["aria-hidden","true","title","静音设置",1,"mutedBtn","fa",3,"ngClass","click"],[1,"volume_val"],["volume_val",""],[1,"volume_val_ball",3,"mousedown","mousemove","mouseup","mouseleave"],[1,"volume_val_active",3,"click"],[1,"volume_val_notActive",3,"click"],["aria-hidden","true",1,"playBtn","fa","fa-play-circle-o",3,"title","click"],["aria-hidden","true","title","暂停",1,"playBtn","fa","fa-pause-circle-o",3,"click"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"p",0),n.ɵɵtemplate(1,Ro,2,5,"span",1),n.ɵɵelementEnd(),n.ɵɵelementStart(2,"div",2,3),n.ɵɵlistener("mouseover",(function(e){return t.videoMouseover(e)}))("mouseout",(function(e){return t.videoMouseout(e)})),n.ɵɵelementStart(4,"div",4),n.ɵɵelementStart(5,"video",5),n.ɵɵlistener("click",(function(){return t.playOrPause()}))("loadedmetadata",(function(e){return t.onLoadedmetadata(e)}))("ended",(function(e){return t.OnPlayEnded(e)}))("timeupdate",(function(e){return t.onTimeupdate(e)}))("progress",(function(e){return t.onProgress(e)}))("canplaythrough",(function(e){return t.onCanplaythrough(e)}))("play",(function(e){return t.onPlay(e)})),n.ɵɵelement(6,"source",6),n.ɵɵelementEnd(),n.ɵɵtemplate(7,Ao,2,5,"div",7),n.ɵɵelementEnd(),n.ɵɵtemplate(8,Uo,26,28,"div",8),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",t.source),n.ɵɵadvance(1),n.ɵɵstyleProp("width",t.width+"px"),n.ɵɵadvance(3),n.ɵɵproperty("width",t.videoWidth)("poster",t.poster,n.ɵɵsanitizeUrl),n.ɵɵadvance(1),n.ɵɵproperty("src",t.videoUrl,n.ɵɵsanitizeUrl),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.videoElem&&t.videoElem.paused),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",t.videoElem))},directives:[t.NgForOf,t.NgIf,t.NgClass],styles:["p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;margin-right:6px}.videoViewerContainer[_ngcontent-%COMP%]{position:relative;margin:0;padding:0;height:100%;min-width:200px;min-height:200px;background-color:#3e3e3e}.videoViewerContainer[_ngcontent-%COMP%]   .videoViewer[_ngcontent-%COMP%]{position:relative;margin-bottom:53px}.videoViewerContainer[_ngcontent-%COMP%]   .videoViewer[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{display:block;margin-left:50%;transform:translateX(-50%)}.videoViewerContainer[_ngcontent-%COMP%]   .videoViewer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;top:0;left:0;bottom:0;right:0;background:rgba(62,62,62,.5)}.videoViewerContainer[_ngcontent-%COMP%]   .videoViewer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:80px;position:absolute;left:50%;top:50%;margin-left:-40px;margin-top:-40px;color:#e2e2e2;transition:color .8s}.videoViewerContainer[_ngcontent-%COMP%]   .videoViewer[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#4bcef2;cursor:pointer}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]{position:absolute;width:100%;left:0;bottom:0;font-size:40px;color:#bfb9b9}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_play_btn[_ngcontent-%COMP%]{float:left;padding:0 10px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_play_btn[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{display:inline-block;margin-right:20px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_play_btn[_ngcontent-%COMP%] > span.playBtn[_ngcontent-%COMP%]:hover{color:#45bdde;cursor:pointer}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_play_btn[_ngcontent-%COMP%] > span.playTime[_ngcontent-%COMP%]{font-size:.5em;vertical-align:middle}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_play_btn[_ngcontent-%COMP%] > span.playTime[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#e2e2e2}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]{float:right;padding:0 15px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;font-size:.8em}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.mutedBtn[_ngcontent-%COMP%]{height:32px;width:32px;text-align:left;line-height:32px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.volume_val[_ngcontent-%COMP%]{position:relative;width:100px;margin-bottom:3px;height:6px;vertical-align:middle;cursor:pointer}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.volume_val[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;border-radius:2px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.volume_val[_ngcontent-%COMP%] > span.volume_val_ball[_ngcontent-%COMP%]{bottom:0;height:16px;width:16px;border-radius:16px;background:#e2e2e2;z-index:3;margin-bottom:-5px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.volume_val[_ngcontent-%COMP%] > span.volume_val_ball[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;display:none;font-size:12px;top:-25px;left:-8px;padding:2px;background:#000;color:#fff}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.volume_val[_ngcontent-%COMP%] > span.volume_val_ball[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{display:inline-block}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.volume_val[_ngcontent-%COMP%] > span.volume_val_active[_ngcontent-%COMP%]{z-index:2;background:#45bdde}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_volume_btn[_ngcontent-%COMP%]   span.volume_val[_ngcontent-%COMP%] > span.volume_val_notActive[_ngcontent-%COMP%]{z-index:1;background:#989393}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]{position:relative;width:100%;background:rgba(112,109,109,.6);transition:height .5s;cursor:pointer}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   .timeTip[_ngcontent-%COMP%]{position:absolute;display:none;top:-25px;left:-16px;padding:2px;background:#000;font-size:12px;color:#fff}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   .progress_val_ball[_ngcontent-%COMP%]{position:absolute;left:0;bottom:0;height:16px;width:16px;border-radius:16px;background:#f7f7f7;z-index:3;opacity:0;transition:opacity .5s;font-size:12px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   .progress_val_ball[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:absolute;display:none;top:-25px;left:-16px;padding:2px;background:#000;color:#fff}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   .progress_val_ball[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{display:inline-block}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:0;height:100%;border-radius:16px}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   div.videoToolbar_play_progress[_ngcontent-%COMP%]{z-index:2;background:#45bdde}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   div.videoToolbar_play_progress[_ngcontent-%COMP%]:hover ~ .timeTip[_ngcontent-%COMP%]{display:inline-block}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   div.videoToolbar_buffer_progress[_ngcontent-%COMP%]{width:100%;z-index:1;background:rgba(191,185,185,.6)}.videoViewerContainer[_ngcontent-%COMP%]   .videoToolbar[_ngcontent-%COMP%]   .videoToolbar_progress[_ngcontent-%COMP%]   div.videoToolbar_buffer_progress[_ngcontent-%COMP%]:hover ~ .timeTip[_ngcontent-%COMP%]{display:inline-block}"]}),e.VideoViewerComponent=b([H({uri:"video-viewer",path:"components/shared/ngxviewer/video-viewer"})],e.VideoViewerComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.VideoViewerComponent,[{type:n.Component,args:[{selector:"video-viewer",templateUrl:"./video-viewer.component.html",styleUrls:["./video-viewer.component.scss"]}]}],(function(){return[{type:c.DomSanitizer}]}),{videoToolbar:[{type:n.ViewChild,args:["videoToolbar",{static:!0}]}],width:[{type:n.Input}],videoWidth:[{type:n.Input}],height:[{type:n.Input}],source:[{type:n.Input}],poster:[{type:n.Input}],ready:[{type:n.Output}]}),e.EpsGISNgxViewerComponent=function(){function e(e,t){this.activatedRoute=e,this.injector=t,this.model="pdf",this.width=600,this.videoWidth=400,this.height=800,this.poster="",this.viewerUrl="",this.first=0,this.ready=new n.EventEmitter(!1)}return e.prototype.ngOnInit=function(){var e=this;this.activatedRoute.params.subscribe((function(t){t.model&&(e.model=t.model),t.source&&(e.source=t.source),t.width&&(e.width=t.width),t.width&&(e.width=t.width),t.videoWidth&&(e.videoWidth=t.videoWidth),t.height&&(e.height=t.height),t.poster&&(e.poster=t.poster),t.viewerUrl&&(e.viewerUrl=t.viewerUrl),t.first&&(e.first=t.first)})),this.model=this.injector.get("model",this.model),this.source=this.injector.get("source",this.source),this.width=this.injector.get("width",this.width),this.videoWidth=this.injector.get("videoWidth",this.videoWidth),this.height=this.injector.get("height",this.height),this.poster=this.injector.get("poster",this.poster),this.viewerUrl=this.injector.get("viewerUrl",this.viewerUrl),this.first=this.injector.get("first",this.first)},e.prototype.viewerReady=function(e){this.ready.emit(e)},e}(),e.EpsGISNgxViewerComponent.ɵfac=function(t){return new(t||e.EpsGISNgxViewerComponent)(n.ɵɵdirectiveInject(u.ActivatedRoute),n.ɵɵdirectiveInject(n.Injector))},e.EpsGISNgxViewerComponent.ɵcmp=n.ɵɵdefineComponent({type:e.EpsGISNgxViewerComponent,selectors:[["epsgis-ngx-viewer"]],inputs:{model:"model",width:"width",videoWidth:"videoWidth",height:"height",source:"source",poster:"poster",viewerUrl:"viewerUrl",first:"first"},outputs:{ready:"ready"},decls:4,vars:3,consts:[[1,"epsgis-ngx-viewer"],[3,"width","height","source","viewerUrl","ready",4,"ngIf"],[3,"source","width","height","first","ready",4,"ngIf"],[3,"poster","source","width","videoWidth","height","ready",4,"ngIf"],[3,"width","height","source","viewerUrl","ready"],[3,"source","width","height","first","ready"],[3,"poster","source","width","videoWidth","height","ready"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"div",0),n.ɵɵtemplate(1,Ho,1,4,"pdf-viewer",1),n.ɵɵtemplate(2,Go,1,4,"image-viewer",2),n.ɵɵtemplate(3,Jo,1,5,"video-viewer",3),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("ngIf","pdf"==t.model),n.ɵɵadvance(1),n.ɵɵproperty("ngIf","image"==t.model),n.ɵɵadvance(1),n.ɵɵproperty("ngIf","video"==t.model))},directives:[t.NgIf,e.PDFViewerComponent,e.ImageViewerComponent,e.VideoViewerComponent],styles:[""]}),e.EpsGISNgxViewerComponent=b([H({uri:"epsgis-ngx-viewer",path:"components/shared/ngxviewer"})],e.EpsGISNgxViewerComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.EpsGISNgxViewerComponent,[{type:n.Component,args:[{selector:"epsgis-ngx-viewer",templateUrl:"./e-ngx-viewer.component.html",styleUrls:["./e-ngx-viewer.component.scss"]}]}],(function(){return[{type:u.ActivatedRoute},{type:n.Injector}]}),{model:[{type:n.Input}],width:[{type:n.Input}],videoWidth:[{type:n.Input}],height:[{type:n.Input}],source:[{type:n.Input}],poster:[{type:n.Input}],viewerUrl:[{type:n.Input}],first:[{type:n.Input}],ready:[{type:n.Output}]});var qo=function(e,t){return{collapse:e,expand:t}};function Xo(e,t){if(1&e&&n.ɵɵelement(0,"div",9),2&e){var o=n.ɵɵnextContext().$implicit;n.ɵɵproperty("ngClass",n.ɵɵpureFunction2(1,qo,o.expanded,!o.expanded))}}function Qo(e,t){if(1&e&&(n.ɵɵelementStart(0,"span",10),n.ɵɵtext(1),n.ɵɵelementEnd()),2&e){var o=n.ɵɵnextContext().$implicit;n.ɵɵadvance(1),n.ɵɵtextInterpolate(o.description)}}function $o(e,t){if(1&e&&(n.ɵɵelementStart(0,"section",11),n.ɵɵelement(1,"epsgis-json-viewer",12),n.ɵɵelementEnd()),2&e){var o=n.ɵɵnextContext().$implicit,i=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("json",o.value)("expanded",i.expanded)}}var Yo=function(e){return["segment",e]},Zo=function(e,t){return{"segment-main":!0,expandable:e,expanded:t}};function Ko(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"section",2),n.ɵɵelementStart(1,"section",3),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(o);var e=t.$implicit;return n.ɵɵnextContext().toggle(e)})),n.ɵɵtemplate(2,Xo,1,4,"div",4),n.ɵɵelementStart(3,"span",5),n.ɵɵtext(4),n.ɵɵelementEnd(),n.ɵɵelementStart(5,"span",6),n.ɵɵtext(6,": "),n.ɵɵelementEnd(),n.ɵɵtemplate(7,Qo,2,1,"span",7),n.ɵɵelementEnd(),n.ɵɵtemplate(8,$o,2,2,"section",8),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=n.ɵɵnextContext();n.ɵɵproperty("ngClass",n.ɵɵpureFunction1(6,Yo,"segment-type-"+i.type)),n.ɵɵadvance(1),n.ɵɵproperty("ngClass",n.ɵɵpureFunction2(8,Zo,r.isExpandable(i),i.expanded)),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",r.isExpandable(i)),n.ɵɵadvance(2),n.ɵɵtextInterpolate(i.key),n.ɵɵadvance(3),n.ɵɵproperty("ngIf",!i.expanded||!r.isExpandable(i)),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.expanded&&r.isExpandable(i))}}e.EpsGISJsonViewerComponent=function(){function e(){this.expanded=!0,this.cleanOnChange=!0,this.segments=[]}return e.prototype.ngOnInit=function(){this.initJson()},e.prototype.initJson=function(){"string"==typeof this.json&&(this.json=JSON.parse(this.json)),this.ngOnChanges()},e.prototype.ngOnChanges=function(){var e=this;this.cleanOnChange&&(this.segments=[]),"object"==typeof this.json?Object.keys(this.json).forEach((function(t){e.segments.push(e.parseKeyValue(t,e.json[t]))})):this.segments.push(this.parseKeyValue("("+typeof this.json+")",this.json))},e.prototype.isExpandable=function(e){return"object"===e.type||"array"===e.type},e.prototype.toggle=function(e){this.isExpandable(e)&&(e.expanded=!e.expanded)},e.prototype.parseKeyValue=function(e,t){var n={key:e,value:t,type:void 0,description:""+t,expanded:this.expanded};switch(typeof n.value){case"number":n.type="number";break;case"boolean":n.type="boolean";break;case"function":n.type="function";break;case"string":n.type="string",n.description='"'+n.value+'"';break;case"undefined":n.type="undefined",n.description="undefined";break;case"object":null===n.value?(n.type="null",n.description="null"):Array.isArray(n.value)?(n.type="array",n.description="Array["+n.value.length+"] "+JSON.stringify(n.value)):n.value instanceof Date?n.type="date":(n.type="object",n.description="Object "+JSON.stringify(n.value))}return n},e}(),e.EpsGISJsonViewerComponent.ɵfac=function(t){return new(t||e.EpsGISJsonViewerComponent)},e.EpsGISJsonViewerComponent.ɵcmp=n.ɵɵdefineComponent({type:e.EpsGISJsonViewerComponent,selectors:[["epsgis-json-viewer"]],inputs:{json:"json",expanded:"expanded",cleanOnChange:"cleanOnChange"},features:[n.ɵɵNgOnChangesFeature],decls:2,vars:1,consts:[[1,"json-viewer"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"ngClass","click"],["class","toggler",3,"ngClass",4,"ngIf"],[1,"segment-key"],[1,"segment-separator"],["class","segment-value",4,"ngIf"],["class","children",4,"ngIf"],[1,"toggler",3,"ngClass"],[1,"segment-value"],[1,"children"],[3,"json","expanded"]],template:function(e,t){1&e&&(n.ɵɵelementStart(0,"section",0),n.ɵɵtemplate(1,Ko,9,11,"section",1),n.ɵɵelementEnd()),2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",t.segments))},directives:[t.NgForOf,t.NgClass,t.NgIf,e.EpsGISJsonViewerComponent],styles:['.json-viewer[_ngcontent-%COMP%]{width:100%;height:100%;overflow:auto;position:relative}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]{padding:2px;margin:1px 1px 1px 12px}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]{word-wrap:break-word}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .toggler[_ngcontent-%COMP%]{position:absolute;margin-left:-14px;margin-top:3px;font-size:.8em;line-height:1.2em;vertical-align:middle;color:#787878}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .collapse[_ngcontent-%COMP%]:before{content:"-"}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .expand[_ngcontent-%COMP%]:before{content:"+"}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-key[_ngcontent-%COMP%]{color:#4e187c}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-separator[_ngcontent-%COMP%]{color:#999}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .segment-main[_ngcontent-%COMP%]   .segment-value[_ngcontent-%COMP%]{color:#000}.json-viewer[_ngcontent-%COMP%]   .segment[_ngcontent-%COMP%]   .children[_ngcontent-%COMP%]{margin-left:12px}.json-viewer[_ngcontent-%COMP%]   .segment-type-string[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#ff6b6b}.json-viewer[_ngcontent-%COMP%]   .segment-type-number[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#009688}.json-viewer[_ngcontent-%COMP%]   .segment-type-boolean[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#b938a4}.json-viewer[_ngcontent-%COMP%]   .segment-type-date[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#05668d}.json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .json-viewer[_ngcontent-%COMP%]   .segment-type-function[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#999}.json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%], .json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{color:#fff}.json-viewer[_ngcontent-%COMP%]   .segment-type-null[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:red}.json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-key[_ngcontent-%COMP%]{color:#999}.json-viewer[_ngcontent-%COMP%]   .segment-type-undefined[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%] > .segment-value[_ngcontent-%COMP%]{background-color:#999}.json-viewer[_ngcontent-%COMP%]   .segment-type-array[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%], .json-viewer[_ngcontent-%COMP%]   .segment-type-object[_ngcontent-%COMP%] > .segment-main[_ngcontent-%COMP%]{white-space:nowrap}.json-viewer[_ngcontent-%COMP%]   .expanded[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]:after{transform:rotate(90deg)}.json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%], .json-viewer[_ngcontent-%COMP%]   .expandable[_ngcontent-%COMP%] > .toggler[_ngcontent-%COMP%]{cursor:pointer}']}),e.EpsGISJsonViewerComponent=b([H({uri:"epsgis-json-viewer",path:"components/shared/jsonviewer"})],e.EpsGISJsonViewerComponent),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(e.EpsGISJsonViewerComponent,[{type:n.Component,args:[{selector:"epsgis-json-viewer",templateUrl:"./json-viewer.component.html",styleUrls:["./json-viewer.component.scss"]}]}],null,{json:[{type:n.Input}],expanded:[{type:n.Input}],cleanOnChange:[{type:n.Input}]});var ei=function(){function e(e){this.injector=e}return e.prototype.shouldDetach=function(e){if(!e.routeConfig||e.routeConfig.loadChildren)return!1;if(!1===e.data.reuse)return!1;var t=e._routerState.url;return this.appGlobal||(this.appGlobal=this.injector.get(D)),!(this.appGlobal.menuConfig&&this.appGlobal.menuConfig.notReuseRoutes&&this.appGlobal.menuConfig.notReuseRoutes.length>=1)||!this.appGlobal.menuConfig.notReuseRoutes.some((function(e){return t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>=0}))},e.prototype.store=function(t,n){if(t.routeConfig&&!t.routeConfig.loadChildren){var o=e.getRouteUrl(t);e.waitDelete&&e.waitDelete===o?e.waitDelete=null:e.snapshots[o]=n}},e.prototype.shouldAttach=function(t){return!(!t.routeConfig||t.routeConfig.loadChildren)&&!!e.snapshots[e.getRouteUrl(t)]},e.prototype.retrieve=function(t){return t.routeConfig?t.routeConfig.loadChildren?(Object.keys(e.snapshots).forEach((function(t){return delete e.snapshots[t]})),null):e.snapshots[e.getRouteUrl(t)]:null},e.prototype.shouldReuseRoute=function(e,t){return e.routeConfig===t.routeConfig&&JSON.stringify(e.params)===JSON.stringify(t.params)},e.getRouteUrl=function(e){return e._routerState.url.replace(/\//g,"_")+"_"+(e.routeConfig.loadChildren||e.routeConfig.component.toString().split("(")[0].split(" ")[1])},e.deleteRouteSnapshot=function(t){e.snapshots[t]?(this.deactivateOutlet(this.snapshots[t]),delete e.snapshots[t]):e.waitDelete=t},e.deactivateOutlet=function(e){var t=e?e.componentRef:null;t&&t.destroy()},e.clearRouteSnapshot=function(){for(var t in this.snapshots)this.snapshots[t]&&this.deactivateOutlet(this.snapshots[t]);this.snapshots={},e.waitDelete=""},e}();ei.snapshots={};var ti=function(){function e(){this.index=0,this.name=""}return e.prototype.add=function(){this.index++},e.prototype.getIndex=function(){return this.index},e.prototype.setName=function(e){this.name=e},e.prototype.getName=function(){return this.name},e}();function ni(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"i",11),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵnextContext(2).$implicit;return n.ɵɵnextContext().closeTab(e,t)})),n.ɵɵelementEnd()}2&e&&n.ɵɵproperty("nzType","close")("nzTheme","outline")}function oi(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",9),n.ɵɵlistener("contextmenu",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵnextContext().$implicit,i=n.ɵɵreference(4);return n.ɵɵnextContext().contextMenu(e,t,i)})),n.ɵɵtext(1),n.ɵɵtemplate(2,ni,1,2,"i",10),n.ɵɵelementEnd()}if(2&e){var i=n.ɵɵnextContext().$implicit;n.ɵɵadvance(1),n.ɵɵtextInterpolate1(" ",i.title," "),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.canClose)}}function ii(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",12),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵnextContext().$implicit;return n.ɵɵnextContext().selectDropdown(e,t,"closeTab")})),n.ɵɵelement(1,"i",13),n.ɵɵelementStart(2,"span",14),n.ɵɵtext(3,"关闭"),n.ɵɵelementEnd(),n.ɵɵelementEnd()}2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("nzType","close")("nzTheme","outline"))}function ri(e,t){1&e&&n.ɵɵelement(0,"li",15)}function si(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",12),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵnextContext().$implicit;return n.ɵɵnextContext().selectDropdown(e,t,"selectTab")})),n.ɵɵelement(1,"i",13),n.ɵɵelementStart(2,"span",14),n.ɵɵtext(3,"选中"),n.ɵɵelementEnd(),n.ɵɵelementEnd()}2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("nzType","check")("nzTheme","outline"))}function ai(e,t){1&e&&n.ɵɵelement(0,"li",15)}function li(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",12),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵnextContext().$implicit;return n.ɵɵnextContext().selectDropdown(e,t,"closeLeftTab")})),n.ɵɵelement(1,"i",13),n.ɵɵelementStart(2,"span"),n.ɵɵtext(3,"关闭左侧页面"),n.ɵɵelementEnd(),n.ɵɵelementEnd()}2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("nzType","close")("nzTheme","outline"))}function ci(e,t){1&e&&n.ɵɵelement(0,"li",15)}function pi(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",12),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵnextContext().$implicit;return n.ɵɵnextContext().selectDropdown(e,t,"closeRightTab")})),n.ɵɵelement(1,"i",13),n.ɵɵelementStart(2,"span"),n.ɵɵtext(3,"关闭右侧页面"),n.ɵɵelementEnd(),n.ɵɵelementEnd()}2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("nzType","close")("nzTheme","outline"))}function di(e,t){1&e&&n.ɵɵelement(0,"li",15)}function ui(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"li",12),n.ɵɵlistener("click",(function(e){n.ɵɵrestoreView(o);var t=n.ɵɵnextContext().$implicit;return n.ɵɵnextContext().selectDropdown(e,t,"closeAllTab")})),n.ɵɵelement(1,"i",13),n.ɵɵelementStart(2,"span"),n.ɵɵtext(3,"保留第一页"),n.ɵɵelementEnd(),n.ɵɵelementEnd()}2&e&&(n.ɵɵadvance(1),n.ɵɵproperty("nzType","close")("nzTheme","outline"))}function gi(e,t){if(1&e&&(n.ɵɵelementStart(0,"nz-tab",3),n.ɵɵtemplate(1,oi,3,2,"ng-template",null,4,n.ɵɵtemplateRefExtractor),n.ɵɵelementStart(3,"nz-dropdown-menu",null,5),n.ɵɵelementStart(5,"ul",6),n.ɵɵtemplate(6,ii,4,2,"li",7),n.ɵɵtemplate(7,ri,1,0,"li",8),n.ɵɵelement(8,"li"),n.ɵɵtemplate(9,si,4,2,"li",7),n.ɵɵtemplate(10,ai,1,0,"li",8),n.ɵɵtemplate(11,li,4,2,"li",7),n.ɵɵtemplate(12,ci,1,0,"li",8),n.ɵɵtemplate(13,pi,4,2,"li",7),n.ɵɵtemplate(14,di,1,0,"li",8),n.ɵɵtemplate(15,ui,4,2,"li",7),n.ɵɵelementEnd(),n.ɵɵelementEnd(),n.ɵɵelementEnd()),2&e){var o=t.$implicit,i=n.ɵɵreference(2);n.ɵɵproperty("nzTitle",i),n.ɵɵadvance(6),n.ɵɵproperty("ngIf",o.canClose),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.canSelect),n.ɵɵadvance(2),n.ɵɵproperty("ngIf",o.canSelect),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.canCloseLeft),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.canCloseLeft),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.canCloseRight),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.canCloseRight),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.canCloseExceptFirst),n.ɵɵadvance(1),n.ɵɵproperty("ngIf",o.canCloseExceptFirst)}}ti.ɵfac=function(e){return new(e||ti)},ti.ɵprov=n.ɵɵdefineInjectable({token:ti,factory:ti.ɵfac}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(ti,[{type:n.Injectable}],(function(){return[]}),null);var fi=function(){function e(e,t,n,o,i,r){var s=this;this.router=e,this.activatedRoute=t,this.nzDropdownService=n,this.cdr=o,this.appGlobal=i,this.menuTabService=r,this.menuList=[],this.currentIndex=-1,this.urlMapTitle=new Map,this.showTab=!0,this.recurseFindMenu=function(e,t){var n=null;if(t&&t.length>=1)for(var o=0;o<t.length;o++){var i=t[o];if(n=i.path==e?i:s.recurseFindMenu(e,i.children))break}return n},this.router.events.pipe(g.filter((function(e){return e instanceof u.NavigationEnd}))).pipe(g.map((function(){return s.activatedRoute}))).pipe(g.map((function(e){for(;e.firstChild;)e=e.firstChild;return e}))).pipe(g.filter((function(e){return"primary"===e.outlet}))).subscribe((function(e){s.addToTab(e)}))}return e.prototype.ngOnInit=function(){},e.prototype.ngOnDestroy=function(){},e.prototype.addToTab=function(e){var t=this;if(this.router.url.indexOf("/login")>=0)this.clear();else{var n=e.data.value;if(!1!==n.showInTab){if(this.appGlobal.menuConfig&&this.appGlobal.menuConfig.notShowInTabRoutes&&this.appGlobal.menuConfig.notShowInTabRoutes.length>=1)if(this.appGlobal.menuConfig.notShowInTabRoutes.some((function(e){return t.router.url.toLocaleLowerCase().indexOf(e.toLocaleLowerCase())>=0})))return void(this.showTab=!1);this.showTab=!0;var o=n.title;if(!o){var i=this.findMenu(this.router.url);o=i?i.name:this.router.url}this.router;var r={title:o,url:this.router.url,key:ei.getRouteUrl(e.snapshot)};this.menuList.find((function(e){return e.url===r.url}))||this.menuList.push(r),this.currentIndex=this.menuList.findIndex((function(e){return e.url===r.url})),this.refreshMenuList()}else this.showTab=!1}},e.prototype.refreshMenuList=function(){var e=this;if(this.menuList&&!(this.menuList.length<1))if(1===this.menuList.length)this.menuList[0].canClose=!1,this.menuList[0].canSelect=!1,this.menuList[0].canCloseLeft=!1,this.menuList[0].canCloseRight=!1,this.menuList[0].canCloseExceptFirst=!1;else{var t=0;this.menuList.forEach((function(n){n.canClose=!0,n.canCloseExceptFirst=!0,n.canSelect=!1,t!==e.currentIndex&&(n.canSelect=!0),n.canCloseLeft=!0,n.canCloseRight=!0,0===t?n.canCloseLeft=!1:t===e.menuList.length-1&&(n.canCloseRight=!1),t++}))}},e.prototype.clear=function(){this.urlMapTitle.clear(),this.menuList.splice(0),ei.clearRouteSnapshot()},e.prototype.findMenu=function(e){if(this.urlMapTitle.has(e))return this.urlMapTitle.get(e);if(!this.appGlobal||!this.appGlobal.menuConfig.menuData)return null;var t=this.recurseFindMenu(e,this.appGlobal.menuConfig.menuData);return t&&this.urlMapTitle.set(e,t),t},e.prototype.getIndex=function(e){return this.menuList.findIndex((function(t){return t.url===e.url}))},e.prototype.closeByUrl=function(e){if(1!==this.menuList.length){var t=this.menuList.findIndex((function(t){return t.key===e}));if(t<=-1)console.log("没有找到tab，无法关闭,key:"+e);else if(this.menuList.splice(t,1),ei.deleteRouteSnapshot(e),this.currentIndex===t){var n=this.menuList[t-1];n||(n=this.menuList[t]),this.router.navigate([n.url])}}},e.prototype.nzSelectChange=function(e){this.currentIndex=e.index;var t=this.menuList[this.currentIndex];this.router.navigate([t.url])},e.prototype.navigateToUrl=function(e){0!=this.menuList.length&&(e<=-1&&(e=0),e>=this.menuList.length&&(e=this.menuList.length-1),this.currentIndex=e)},e.prototype.contextMenu=function(e,t,n){this.nzDropdownService.create(e,n)},e.prototype.selectDropdown=function(e,t,n){this.nzDropdownService.close(),this[n](e,t),yn.detectChanges(this.cdr)},e.prototype.removeRoute=function(e,t){var n=this.menuList.filter(e);n&&n.length>=1&&n.forEach((function(e){ei.deleteRouteSnapshot(e.key)}))},e.prototype.closeTabByRoute=function(e){var t=ei.getRouteUrl(e.snapshot);this.closeTabByKey(t)},e.prototype.closeTabByKey=function(e){this.closeByUrl(e)},e.prototype.closeTab=function(e,t){this.closeByUrl(t.key),this.refreshMenuList()},e.prototype.selectTab=function(e,t){this.navigateToUrl(this.getIndex(t)),this.refreshMenuList()},e.prototype.closeLeftTab=function(e,t){var n=this.getIndex(t);n>=1&&(this.removeRoute((function(e,t,o){if(t<n)return e})),this.menuList.splice(0,n),this.navigateToUrl(0)),this.refreshMenuList()},e.prototype.closeRightTab=function(e,t){var n=this.getIndex(t);n>=0&&(this.removeRoute((function(e,t,o){if(t>n)return e})),this.menuList.splice(n+1),this.navigateToUrl(n)),this.refreshMenuList()},e.prototype.closeAllTab=function(e,t){this.removeRoute((function(e,t,n){if(t>=1)return e})),this.menuList.splice(1),this.navigateToUrl(0),this.refreshMenuList()},e}();fi.ɵfac=function(e){return new(e||fi)(n.ɵɵdirectiveInject(u.Router),n.ɵɵdirectiveInject(u.ActivatedRoute),n.ɵɵdirectiveInject(m.NzContextMenuService),n.ɵɵdirectiveInject(n.ChangeDetectorRef),n.ɵɵdirectiveInject(D),n.ɵɵdirectiveInject(ti))},fi.ɵcmp=n.ɵɵdefineComponent({type:fi,selectors:[["epsgis-menu-tab"]],ngContentSelectors:["*"],decls:4,vars:6,consts:[["nzShowPagination","true",2,"margin-left","-1px",3,"nzAnimated","nzSelectedIndex","nzType","nzSelectChange"],[3,"nzTitle",4,"ngFor","ngForOf"],[1,"tab-content"],[3,"nzTitle"],["nzTabHeading",""],["menuComp","nzDropdownMenu"],["nz-menu","","nzInDropDown","",1,"dropdown-menu"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-menu-divider","",4,"ngIf"],[3,"contextmenu"],["nz-icon","",3,"nzType","nzTheme","click",4,"ngIf"],["nz-icon","",3,"nzType","nzTheme","click"],["nz-menu-item","",3,"click"],["nz-icon","",3,"nzType","nzTheme"],[1,"danger"],["nz-menu-divider",""]],template:function(e,t){1&e&&(n.ɵɵprojectionDef(),n.ɵɵelementStart(0,"nz-tabset",0),n.ɵɵlistener("nzSelectChange",(function(e){return t.nzSelectChange(e)})),n.ɵɵtemplate(1,gi,16,10,"nz-tab",1),n.ɵɵelementEnd(),n.ɵɵelementStart(2,"div",2),n.ɵɵprojection(3),n.ɵɵelementEnd()),2&e&&(n.ɵɵclassProp("hide",!t.showTab),n.ɵɵproperty("nzAnimated",!0)("nzSelectedIndex",t.currentIndex)("nzType","line"),n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",t.menuList))},directives:[v.NzTabSetComponent,t.NgForOf,v.NzTabComponent,m.NzDropdownMenuComponent,y.NzMenuDirective,t.NgIf,l.NzIconDirective,y.NzMenuItemDirective,y.NzMenuDividerDirective],styles:[".close-red[_ngcontent-%COMP%]{color:red}[_nghost-%COMP%]     .anticon-close{margin-left:10px}[_nghost-%COMP%]     .anticon-close :hover{color:red}[_nghost-%COMP%]     .ant-tabs-bar{margin:0}.hide[_ngcontent-%COMP%]{display:none}.tab-content[_ngcontent-%COMP%]{width:100%;height:calc(100vh - 50px);position:relative}"]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(fi,[{type:n.Component,args:[{selector:"epsgis-menu-tab",templateUrl:"./menu-tab.component.html",styleUrls:["./menu-tab.component.scss"]}]}],(function(){return[{type:u.Router},{type:u.ActivatedRoute},{type:m.NzContextMenuService},{type:n.ChangeDetectorRef},{type:D},{type:ti}]}),null);function hi(e,t){if(1&e&&n.ɵɵelement(0,"i",5),2&e){var o=n.ɵɵnextContext().$implicit;n.ɵɵstyleMap(o.style),n.ɵɵproperty("nzIconfont",o.icon)}}function mi(e,t){if(1&e&&n.ɵɵelement(0,"i",6),2&e){var o=n.ɵɵnextContext().$implicit;n.ɵɵstyleMap(o.style),n.ɵɵproperty("nzType",o.icon)("nzTheme",o.theme)("nzSpin",o.spin)("nzTwotoneColor",o.twotoneColor)("nzRotate",o.rotate)}}function vi(e,t){if(1&e){var o=n.ɵɵgetCurrentView();n.ɵɵelementStart(0,"div",2),n.ɵɵlistener("click",(function(){n.ɵɵrestoreView(o);var e=t.$implicit;return n.ɵɵnextContext(2).onButtonClick(e)})),n.ɵɵtemplate(1,hi,1,3,"i",3),n.ɵɵtemplate(2,mi,1,7,"ng-template",null,4,n.ɵɵtemplateRefExtractor),n.ɵɵelementEnd()}if(2&e){var i=t.$implicit,r=n.ɵɵreference(3);n.ɵɵadvance(1),n.ɵɵproperty("ngIf",i.isIconfont)("ngIfElse",r)}}function yi(e,t){if(1&e&&(n.ɵɵelementContainerStart(0),n.ɵɵtemplate(1,vi,4,2,"div",1),n.ɵɵelementContainerEnd()),2&e){var o=n.ɵɵnextContext();n.ɵɵadvance(1),n.ɵɵproperty("ngForOf",o.buttons)}}var Ci=function(){function e(e){this.config=e,this.buttons=[],this.destroy$=new p.Subject,Array.isArray(e.titleBarButtons)&&(this.buttons=e.titleBarButtons.map(wi))}return e.prototype.getButtonCallableProp=function(e,t){var n=e[t];if(this.modalRef){var o=this.modalRef.getContentComponent();return"function"==typeof n?n.apply(e,o&&[o]):n}return!1},e.prototype.onButtonClick=function(e){this.getButtonCallableProp(e,"onClick")},e.prototype.ngOnDestroy=function(){this.destroy$.next(),this.destroy$.complete()},e}();function wi(e){return Object.assign({icon:null,theme:"outline",spin:!1,twotoneColor:null,isIconfont:!1,rotate:null,title:"",style:""},e)}Ci.ɵfac=function(e){return new(e||Ci)(n.ɵɵdirectiveInject(Bn))},Ci.ɵcmp=n.ɵɵdefineComponent({type:Ci,selectors:[["div","ss-modal-titlebar-button",""]],hostAttrs:[1,""],inputs:{modalRef:"modalRef"},attrs:["ss-modal-titlebar-button",""],decls:1,vars:1,consts:[[4,"ngIf"],["class","ssmodal_titlebar_button",3,"click",4,"ngFor","ngForOf"],[1,"ssmodal_titlebar_button",3,"click"],["nz-icon","",3,"nzIconfont","style",4,"ngIf","ngIfElse"],["ngzorro",""],["nz-icon","",3,"nzIconfont"],["nz-icon","",3,"nzType","nzTheme","nzSpin","nzTwotoneColor","nzRotate"]],template:function(e,t){1&e&&n.ɵɵtemplate(0,yi,2,1,"ng-container",0),2&e&&n.ɵɵproperty("ngIf",t.buttons&&t.buttons.length>=1)},directives:[t.NgIf,t.NgForOf,l.NzIconDirective],encapsulation:2}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Ci,[{type:n.Component,args:[{selector:"div[ss-modal-titlebar-button]",template:'\n    <ng-container *ngIf="buttons && buttons.length>=1;">\n          <div class="ssmodal_titlebar_button" *ngFor="let button of buttons"  (click)="onButtonClick(button)">\n            <i\n            nz-icon\n            *ngIf="button.isIconfont;else ngzorro"\n            [nzIconfont]="button.icon"\n            \n            [style]="button.style"\n            >\n            </i>\n\n          <ng-template #ngzorro>\n                <i nz-icon \n                [nzType]="button.icon" \n                [nzTheme]="button.theme"\n                [nzSpin]="button.spin"\n                [nzTwotoneColor]="button.twotoneColor"\n                [nzRotate]="button.rotate"\n                [style]="button.style"\n                ></i>\n          </ng-template>\n          </div>\n      </ng-container>\n      \n  ',host:{class:""},changeDetection:n.ChangeDetectionStrategy.Default}]}],(function(){return[{type:Bn}]}),{modalRef:[{type:n.Input}]});var bi=function(){};bi.ɵmod=n.ɵɵdefineNgModule({type:bi}),bi.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||bi)},imports:[[t.CommonModule,l.NzIconModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(bi,{declarations:[e.ModalContainerComponent,e.SSModalComponent,xo,Io,Ci],imports:[t.CommonModule,l.NzIconModule],exports:[e.SSModalComponent,xo,Ci]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(bi,[{type:n.NgModule,args:[{declarations:[e.ModalContainerComponent,e.SSModalComponent,xo,Io,Ci],exports:[e.SSModalComponent,xo,Ci],entryComponents:[e.ModalContainerComponent,e.SSModalComponent],imports:[t.CommonModule,l.NzIconModule]}]}],null,null),n.ɵɵsetComponentScope(e.ModalContainerComponent,[t.NgStyle,t.NgIf,Ci,xo],[]);var _i=function(){function e(e){if(e)throw new Error("EpsGisModule is already loaded. Import it in the AppModule only")}return e.forRoot=function(t){return{ngModule:e,providers:[{provide:O,useValue:t},{provide:D,useFactory:xi,deps:[k]},{provide:n.APP_INITIALIZER,useFactory:Mi,deps:[O,k,i.HttpClient],multi:!0}]}},e}();_i.ɵmod=n.ɵɵdefineNgModule({type:_i}),_i.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||_i)(n.ɵɵinject(_i,12))},imports:[[t.CommonModule,nn,W,ho,bi]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(_i,{imports:[t.CommonModule,nn,W,ho,bi]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(_i,[{type:n.NgModule,args:[{imports:[t.CommonModule,nn,W,ho,bi],declarations:[],exports:[]}]}],(function(){return[{type:_i,decorators:[{type:n.Optional},{type:n.SkipSelf}]}]}),null);var Mi=function(e,t){return function(){return t.init(e).loadGlobalConfig()}},xi=function(e){return e.getConfig()},Si=function(){};Si.ɵmod=n.ɵɵdefineNgModule({type:Si}),Si.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||Si)},imports:[[t.CommonModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(Si,{declarations:[e.EpsGISNgxViewerComponent,e.PDFViewerComponent,e.ImageViewerComponent,e.VideoViewerComponent,e.EpsGISJsonViewerComponent],imports:[t.CommonModule],exports:[e.EpsGISNgxViewerComponent,e.PDFViewerComponent,e.ImageViewerComponent,e.VideoViewerComponent,e.EpsGISJsonViewerComponent]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Si,[{type:n.NgModule,args:[{imports:[t.CommonModule],entryComponents:[e.EpsGISNgxViewerComponent,e.PDFViewerComponent,e.ImageViewerComponent,e.VideoViewerComponent,e.EpsGISJsonViewerComponent],declarations:[e.EpsGISNgxViewerComponent,e.PDFViewerComponent,e.ImageViewerComponent,e.VideoViewerComponent,e.EpsGISJsonViewerComponent],exports:[e.EpsGISNgxViewerComponent,e.PDFViewerComponent,e.ImageViewerComponent,e.VideoViewerComponent,e.EpsGISJsonViewerComponent]}]}],null,null);var Pi=function(){};Pi.ɵmod=n.ɵɵdefineNgModule({type:Pi}),Pi.ɵinj=n.ɵɵdefineInjector({factory:function(e){return new(e||Pi)},providers:[ti],imports:[[t.CommonModule,v.NzTabsModule,l.NzIconModule,m.NzDropDownModule]]}),("undefined"==typeof ngJitMode||ngJitMode)&&n.ɵɵsetNgModuleScope(Pi,{declarations:[fi],imports:[t.CommonModule,v.NzTabsModule,l.NzIconModule,m.NzDropDownModule],exports:[fi]}),("undefined"==typeof ngDevMode||ngDevMode)&&n.ɵsetClassMetadata(Pi,[{type:n.NgModule,args:[{imports:[t.CommonModule,v.NzTabsModule,l.NzIconModule,m.NzDropDownModule],declarations:[fi],entryComponents:[fi],exports:[fi],providers:[ti]}]}],null,null);var Ii=function(){function e(){}return e.newGuid=function(e){void 0===e&&(e="N");var t=(new Date).getTime(),n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}));return"N"!==e&&"n"!==e||(n=n.replace(/-/g,"")),"B"!==e&&"b"!==e||(n="{"+n+"}"),"P"!==e&&"p"!==e||(n="("+n+")"),n},e}(),Oi=function(){function e(){}return e.setItem=function(e,t){window.localStorage?"object"==typeof t?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t):console.log("浏览器不支持localStorage")},e.getItem=function(e){if(window.localStorage)return localStorage.getItem(e);console.log("浏览器不支持localStorage")},e}(),Ei=function(){function e(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(t,n){return void 0===n&&(n=!1),e.onePassHasher.start().appendStr(t).end(n)},e.hashAsciiStr=function(t,n){return void 0===n&&(n=!1),e.onePassHasher.start().appendAsciiStr(t).end(n)},e._hex=function(t){var n,o,i,r,s=e.hexChars,a=e.hexOut;for(r=0;r<4;r+=1)for(o=8*r,n=t[r],i=0;i<8;i+=2)a[o+1+i]=s.charAt(15&n),n>>>=4,a[o+0+i]=s.charAt(15&n),n>>>=4;return a.join("")},e._md5cycle=function(e,t){var n=e[0],o=e[1],i=e[2],r=e[3];o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[0]-680876936|0)<<7|n>>>25)+o|0)&o|~n&i)+t[1]-389564586|0)<<12|r>>>20)+n|0)&n|~r&o)+t[2]+606105819|0)<<17|i>>>15)+r|0)&r|~i&n)+t[3]-1044525330|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[4]-176418897|0)<<7|n>>>25)+o|0)&o|~n&i)+t[5]+1200080426|0)<<12|r>>>20)+n|0)&n|~r&o)+t[6]-1473231341|0)<<17|i>>>15)+r|0)&r|~i&n)+t[7]-45705983|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[8]+1770035416|0)<<7|n>>>25)+o|0)&o|~n&i)+t[9]-1958414417|0)<<12|r>>>20)+n|0)&n|~r&o)+t[10]-42063|0)<<17|i>>>15)+r|0)&r|~i&n)+t[11]-1990404162|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&i|~o&r)+t[12]+1804603682|0)<<7|n>>>25)+o|0)&o|~n&i)+t[13]-40341101|0)<<12|r>>>20)+n|0)&n|~r&o)+t[14]-1502002290|0)<<17|i>>>15)+r|0)&r|~i&n)+t[15]+1236535329|0)<<22|o>>>10)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[1]-165796510|0)<<5|n>>>27)+o|0)&i|o&~i)+t[6]-1069501632|0)<<9|r>>>23)+n|0)&o|n&~o)+t[11]+643717713|0)<<14|i>>>18)+r|0)&n|r&~n)+t[0]-373897302|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[5]-701558691|0)<<5|n>>>27)+o|0)&i|o&~i)+t[10]+38016083|0)<<9|r>>>23)+n|0)&o|n&~o)+t[15]-660478335|0)<<14|i>>>18)+r|0)&n|r&~n)+t[4]-405537848|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[9]+568446438|0)<<5|n>>>27)+o|0)&i|o&~i)+t[14]-1019803690|0)<<9|r>>>23)+n|0)&o|n&~o)+t[3]-187363961|0)<<14|i>>>18)+r|0)&n|r&~n)+t[8]+1163531501|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o&r|i&~r)+t[13]-1444681467|0)<<5|n>>>27)+o|0)&i|o&~i)+t[2]-51403784|0)<<9|r>>>23)+n|0)&o|n&~o)+t[7]+1735328473|0)<<14|i>>>18)+r|0)&n|r&~n)+t[12]-1926607734|0)<<20|o>>>12)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[5]-378558|0)<<4|n>>>28)+o|0)^o^i)+t[8]-2022574463|0)<<11|r>>>21)+n|0)^n^o)+t[11]+1839030562|0)<<16|i>>>16)+r|0)^r^n)+t[14]-35309556|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[1]-1530992060|0)<<4|n>>>28)+o|0)^o^i)+t[4]+1272893353|0)<<11|r>>>21)+n|0)^n^o)+t[7]-155497632|0)<<16|i>>>16)+r|0)^r^n)+t[10]-1094730640|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[13]+681279174|0)<<4|n>>>28)+o|0)^o^i)+t[0]-358537222|0)<<11|r>>>21)+n|0)^n^o)+t[3]-722521979|0)<<16|i>>>16)+r|0)^r^n)+t[6]+76029189|0)<<23|o>>>9)+i|0,o=((o+=((i=((i+=((r=((r+=((n=((n+=(o^i^r)+t[9]-640364487|0)<<4|n>>>28)+o|0)^o^i)+t[12]-421815835|0)<<11|r>>>21)+n|0)^n^o)+t[15]+530742520|0)<<16|i>>>16)+r|0)^r^n)+t[2]-995338651|0)<<23|o>>>9)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[0]-198630844|0)<<6|n>>>26)+o|0)|~i))+t[7]+1126891415|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[14]-1416354905|0)<<15|i>>>17)+r|0)|~n))+t[5]-57434055|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[12]+1700485571|0)<<6|n>>>26)+o|0)|~i))+t[3]-1894986606|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[10]-1051523|0)<<15|i>>>17)+r|0)|~n))+t[1]-2054922799|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[8]+1873313359|0)<<6|n>>>26)+o|0)|~i))+t[15]-30611744|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[6]-1560198380|0)<<15|i>>>17)+r|0)|~n))+t[13]+1309151649|0)<<21|o>>>11)+i|0,o=((o+=((r=((r+=(o^((n=((n+=(i^(o|~r))+t[4]-145523070|0)<<6|n>>>26)+o|0)|~i))+t[11]-1120210379|0)<<10|r>>>22)+n|0)^((i=((i+=(n^(r|~o))+t[2]+718787259|0)<<15|i>>>17)+r|0)|~n))+t[9]-343485551|0)<<21|o>>>11)+i|0,e[0]=n+e[0]|0,e[1]=o+e[1]|0,e[2]=i+e[2]|0,e[3]=r+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var n,o,i=this._buffer8,r=this._buffer32,s=this._bufferLength;for(o=0;o<t.length;o+=1){if((n=t.charCodeAt(o))<128)i[s++]=n;else if(n<2048)i[s++]=192+(n>>>6),i[s++]=63&n|128;else if(n<55296||n>56319)i[s++]=224+(n>>>12),i[s++]=n>>>6&63|128,i[s++]=63&n|128;else{if((n=1024*(n-55296)+(t.charCodeAt(++o)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");i[s++]=240+(n>>>18),i[s++]=n>>>12&63|128,i[s++]=n>>>6&63|128,i[s++]=63&n|128}s>=64&&(this._dataLength+=64,e._md5cycle(this._state,r),s-=64,r[0]=r[16])}return this._bufferLength=s,this},e.prototype.appendAsciiStr=function(t){for(var n,o=this._buffer8,i=this._buffer32,r=this._bufferLength,s=0;;){for(n=Math.min(t.length-s,64-r);n--;)o[r++]=t.charCodeAt(s++);if(r<64)break;this._dataLength+=64,e._md5cycle(this._state,i),r=0}return this._bufferLength=r,this},e.prototype.appendByteArray=function(t){for(var n,o=this._buffer8,i=this._buffer32,r=this._bufferLength,s=0;;){for(n=Math.min(t.length-s,64-r);n--;)o[r++]=t[s++];if(r<64)break;this._dataLength+=64,e._md5cycle(this._state,i),r=0}return this._bufferLength=r,this},e.prototype.getState=function(){var e=this,t=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[t[0],t[1],t[2],t[3]]}},e.prototype.setState=function(e){var t,n=e.buffer,o=e.state,i=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,i[0]=o[0],i[1]=o[1],i[2]=o[2],i[3]=o[3],t=0;t<n.length;t+=1)this._buffer8[t]=n.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var n,o=this._bufferLength,i=this._buffer8,r=this._buffer32,s=1+(o>>2);if(this._dataLength+=o,i[o]=128,i[o+1]=i[o+2]=i[o+3]=0,r.set(e.buffer32Identity.subarray(s),s),o>55&&(e._md5cycle(this._state,r),r.set(e.buffer32Identity)),(n=8*this._dataLength)<=4294967295)r[14]=n;else{var a=n.toString(16).match(/(.*?)(.{0,8})$/);if(null===a)return;var l=parseInt(a[2],16),c=parseInt(a[1],16)||0;r[14]=l,r[15]=c}return e._md5cycle(this._state,r),t?this._state:e._hex(this._state)},e}();Ei.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),Ei.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Ei.hexChars="0123456789abcdef",Ei.hexOut=[],Ei.onePassHasher=new Ei,"5d41402abc4b2a76b9719d911017c592"!==Ei.hashStr("hello")&&console.error("Md5 self test failed.");var ki=function(){function e(){}return e.watch=function(t,n,o,i){var r=t[n],s=r,a=function(){return s},l=function(e){return r=s,s=i&&"function"==typeof i?i.call(t,n,r,e):e,r!=s&&Promise.resolve().then((function(){o.call(t,n,r,s)})),s};return delete t[n]&&(Object.defineProperty?Object.defineProperty(t,n,{configurable:!0,get:a,set:l}):Object.prototype.__defineGetter__&&Object.prototype.__defineGetter__&&(Object.prototype.__defineGetter__.call(t,n,a),Object.prototype.__defineGetter__.call(t,n,l))),function(){e.unwatch(t,n)}},e.unwatch=function(e,t){var n=e[t];delete e[t],e[t]=n},e}();e.AppGlobalConfig=D,e.AppGlobalConfigToken=O,e.AppInitService=k,e.AuthService=po,e.BaseMapComponent=Po,e.BasePanelComponent=me,e.BaseSettingComponent=X,e.BaseWidgetComponent=ne,e.BaseWidgetFrame=xn,e.BaseWidgetPanel=Sn,e.BaseWidgetSetting=Pn,e.CommonService=_n,e.CompContainerComponent=fo,e.ComponentContainerDirective=T,e.ComponentLoaderService=Mn,e.ComponentRegister=H,e.ComponentRegistry=U,e.ConfigLoaderService=zn,e.ConfigManagerService=Tn,e.DefaultPanelOptions=le,e.EpsGISNgxViewerModule=Si,e.EpsGisCompContainerModule=ho,e.EpsGisDirectivesModule=W,e.EpsGisMenuTabModule=Pi,e.EpsGisModalModule=bi,e.EpsGisModule=_i,e.EpsGisWidgetBaseModule=nn,e.EventEmitterService=En,e.GISAuthService=uo,e.HttpReqService=kn,e.IdGenerater=Ii,e.LayoutManagerService=jn,e.LocalStorageHelper=Oi,e.MapManagerService=Wn,e.Md5=Ei,e.MenuTabComponent=fi,e.MenuTabService=ti,e.ModalManagerService=ro,e.OnScreenWidgetPanel=In,e.PanelManagerService=Vn,e.PanelTitleBarComponent=Le,e.PipesModule=Jt,e.PlatformService=Cn,e.PropWatcher=ki,e.RequestResultModel=B,e.ResultfofComponent=qt,e.ResultfooComponent=Xt,e.ResultfotComponent=Qt,e.SSModalAPI=Oo,e.SafeUrlPipe=Bt,e.ServiceInjector=ao,e.SharedUtilsService=on,e.SimpleReuseStrategy=ei,e.SsModalFooterComponent=xo,e.SsModalFooterDirective=Io,e.SsModalOptions=Bn,e.SsModalRef=An,e.SsModalTitleBarButtonComponent=Ci,e.TestAspect=de,e.UtilsService=yn,e.WidgetManagerService=Dn,e.WidgetPlaceHolderService=Rn,e.WidgetPlaceholder=On,e.WidgetPosition=L,e.WidgetSettingComponent=ee,e.applyConfigDefaults=Fn,e.aspect=pe,e.defaultAppGlobalConfig=z,e.findComponentInfo=G,e.getConfigFromComponent=Hn,e.getPlatforms=rn,e.isPlatform=sn,e.isPromise=Ln,e.loadGlobalConfig=Mi,e.setContentInstanceParams=Un,e.setGlobalConfig=xi,e.setupPlatforms=an,e.simpleLoader=co,e.testUserAgent=hn,e.throwNzModalContentAlreadyAttachedError=function(){throw Error("Attempting to attach modal content after content is already attached")},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=epsgis.umd.min.js.map